<?xml version="1.0" encoding="ISO-8859-1"?>
<tracker version="1.0" xmlns:xsi="http://www.w3.org/2000/10/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://sourceforge.net/export/sf_tracker_export.xsd">
	<artifact id="1901534">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2008-02-25 09:10</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>java.lang.ClassCastException: org.pdfbox.cos.COSArray cannot</summary>
		<detail>I'm working with pdfbox 0.7.3

I'm extracting text from pdf files and It's work fine. But I found a pdf file that crashes the extraction (pdf file attached).

The code wrote is:

stream = new FileInputStream(file);
pdfDocument = PDDocument.load(stream);
if (pdfDocument.isEncrypted()) {
    pdfDocument.decrypt("");
}
StringWriter writer = new StringWriter();
PDFTextStripper stripper = new PDFTextStripper();
stripper.writeText(pdfDocument, writer);
contents = writer.getBuffer().toString();


When trying to extract text from this file I'm getting the following exception:


java.lang.ClassCastException: org.pdfbox.cos.COSArray cannot be cast to org.pdfbox.cos.COSDictionary
        at org.pdfbox.filter.FlateFilter.decode(FlateFilter.java:70)
        at org.pdfbox.cos.COSStream.doDecode(COSStream.java:319)
        at org.pdfbox.cos.COSStream.doDecode(COSStream.java:261)
        at org.pdfbox.cos.COSStream.getUnfilteredStream(COSStream.java:173)
        at org.pdfbox.pdfparser.PDFStreamParser.&lt;init&gt;(PDFStreamParser.java:91)
        at org.pdfbox.cos.COSStream.getStreamTokens(COSStream.java:135)
        at org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:189)
        at org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:160)
        at org.pdfbox.util.PDFTextStripper.processPage(PDFTextStripper.java:355)
        at org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:268)
        at org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:220)


Thanks

german.gf@gmail.com
</detail>
		<existingfiles>
			<file>
				<id>267915</id>
				<name>attachment.pdf</name>
				<description>pdf file that It does not work fine</description>
				<filesize>85947</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1203959458</adddate>
				<submitted_by>100</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>267915: attachment.pdf</old_value>
				<date>1203959459</date>
				<by>nobody</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1900699">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2008-02-23 21:33</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>JVM crashes in Unix AIX </summary>
		<detail>JVM crashes in Unix AIX whenever we tried to extract text from PDF files..</detail>
	</artifact>
	<artifact id="1894664">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2008-02-15 13:28</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Exception when running PDTToImage class</summary>
		<detail>When running the PDFToImage class (version 1.6 included in PDFBox-0.7.4-dev-20080215 build), I'm getting the following exception:
java.awt.geom.IllegalPathStateException: missing initial moveto in path definition

This is being thrown from the following method:
PDFStreamEngine.processSubStream(PDPage, PDResources, COSStream).
The stack trace is:
PageDrawer(PDFStreamEngine).processSubStream(PDPage, PDResources, COSStream) line: 230
PageDrawer(PDFStreamEngine).processStream(PDPage, PDResources, COSStream) line: 177
PageDrawer.drawPage(Graphics, PDPage, Dimension) line: 103
PDPage.convertToImage() line: 685
PDFImageWriter.WriteImage(PDDocument, String, String, int, int, String) line: 100
PDFToImage.main(String[]) line: 179

Thanks,

Dave Belt
dbelt@erac.com</detail>
		<follow_ups>
			<item>
				<date>1203555378</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

I've done some additional debug tracing, and found that the exception is occurring when subPath.closePath() is called:
  FillNonZeroRule.process(PDFOperator, List) line: 74
  PageDrawer(PDFStreamEngine).processOperator(PDFOperator, List) line: 497
  PageDrawer(PDFStreamEngine).processSubStream(PDPage, PDResources, COSStream) line: 218
  PageDrawer(PDFStreamEngine).processStream(PDPage, PDResources, COSStream) line: 177
  PageDrawer.drawPage(Graphics, PDPage, Dimension) line: 103
  PDPage.convertToImage() line: 685
  PDFImageWriter.WriteImage(PDDocument, String, String, int, int, String) line: 100
  PDFToImage.main(String[]) line: 179

At the time of the exception, variable subPath contains the following values:
subPath= GeneralPath  (id=90)
	numCoords= 0
	numTypes= 0
	pointCoords= float[40]  (id=96)
		[0]= 79.68
		[1]= 309.36
		[2]= 486.4
		[3]= 309.36
		[4]= 486.4
		[5]= 323.56
		[6]= 79.68
		[7]= 323.56
		[8]= 79.68
		[9]= 309.36
		[10]= 0.0
		[11]= 0.0
		[12]= 0.0
		[13]= 0.0
		[14]= 0.0
		[15]= 0.0
		[16]= 0.0
		[17]= 0.0
		[18]= 0.0
		[19]= 0.0
		[20]= 0.0
		[21]= 0.0
		[22]= 0.0
		[23]= 0.0
		[24]= 0.0
		[25]= 0.0
		[26]= 0.0
		[27]= 0.0
		[28]= 0.0
		[29]= 0.0
		[30]= 0.0
		[31]= 0.0
		[32]= 0.0
		[33]= 0.0
		[34]= 0.0
		[35]= 0.0
		[36]= 0.0
		[37]= 0.0
		[38]= 0.0
		[39]= 0.0
	pointTypes= byte[20]  (id=97)
		[0]= 0
		[1]= 1
		[2]= 1
		[3]= 1
		[4]= 1
		[5]= 4
		[6]= 0
		[7]= 0
		[8]= 0
		[9]= 0
		[10]= 0
		[11]= 0
		[12]= 0
		[13]= 0
		[14]= 0
		[15]= 0
		[16]= 0
		[17]= 0
		[18]= 0
		[19]= 0
	windingRule= 1

I hope this helps!</text>
			</item>
			<item>
				<date>1203110990</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

Sorry, the class name in the summary should have been PDFToImage.</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1894224">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2008-02-14 20:25</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="775780">PDModel.AcroForm</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Alters the security properties of the Acro form when saving</summary>
		<detail>There is an error when saving the Acro form after modifying the form i.e. filling in the form fields once and than saving the pdf documents causes the original properties of the form to be altered.</detail>
	</artifact>
	<artifact id="1893204">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2008-02-13 16:00</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Trying to assign an action to a bookmark</summary>
		<detail>I need to be able to assign an action to a bookmark, to open an external file.
I am having a difficult time trying to figure this out, so any assistance would be greatly appreciated.

Here is the section of code trying to accomplish this:
Case "Master Agenda"

        'Get the list of pages in the document
        Dim pages As ArrayList = PdfDoc.getDocumentCatalog.getAllPages()


        Dim i, pageNumber As Integer
        pageNumber = 0
        Dim row As DataRow = Nothing
        Dim ParentChild As String = String.Empty
        Dim bookmarkTitle As String = String.Empty
        Dim pdfFileName As String = String.Empty
        'loop thru the bookmark datatable and add bookmarks to the document accordingly
        For i = 0 To rowCount - 1 Step 1
            ' Dim rowArrayData() As String
            'Read the row's data
            row = bookmarkTable.Rows(i)
            bookmarkTitle = row.Item("bookmarkTitle")

            'Get the page at pageNumber from pages list
            Dim page As PDPage = CType(pages.get(pageNumber), PDPage)
            Dim dest As PDPageFitWidthDestination = New PDPageFitWidthDestination()
            Dim externalFile As New interactive.action.type.PDWindowsLaunchParams()
            externalFile.setFilename("C:\DBPRTestData\FINAL ACTION\Processed\FINAL ACTION-APRIL_2008 - Case # 0000000000100000000.PDF")
            externalFile.setOperation("open")
            '            externalFile.setF("C:\DBPRTestData\FINAL ACTION\Processed\FINAL ACTION-APRIL_2008 - Case # 0000000000100000000.PDF")
            'externalFile.setExecuteParam(   shouldOpenInNewWindow()
            'externalFile.setType("open")


            dest.setPage(page)

            'Determine the bookmark type (parent or child)
            ' In this case:
            '   Parent bookmark type is an Agenda Item
            '   Child bookmark type are Supporting Documents


            bookmark = New PDOutlineItem
            bookmark.setDestination(dest)
            bookmark.setTitle(bookmarkTitle.Trim)
            Dim openAction As New interactive.action.type.PDActionLaunch
            openAction.setType("open")
            'Dim openActionStr As String = 
            bookmark.setAction(openAction)


            'Add this child bookmark to the parent's bookmark
            pagesOutline.appendChild(bookmark)


        Next i

End Select
'Expand the bookmark tree
pagesOutline.openNode()
outline.openNode()
'Save the the document to a file
PdfDoc.save(outFile)
result = True</detail>
		<follow_ups>
			<item>
				<date>1202965991</date>
				<sender>maleman2045</sender>
				<text>Logged In: YES 
user_id=2008850
Originator: NO

Sorry, I posted this entry before I created my account.
I'll be monitoring this for a response. 
Thanks!</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1891856">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2008-02-12 03:00</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520288">lucene</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>pdf page extraction</summary>
		<detail>Hi, 
I gone through this link
http://studentclub.ro/lucians_weblog/archive/2007/03/22/read-from-a-pdf-file-using-c.aspx
and found the solution to read text from pdf. this one is really great. 

I am trying to read PDF using this functionality. It's working fine, but now I want to extract text from PDF page is there method in PDF Box through which we can get pdf data in text by the no of page passed, so that i don't read the whole PDF unnecessary.

U can responsd me on singh.devendra@yahoo.com

Thanks 
Devendra</detail>
		<follow_ups>
			<item>
				<date>1202814086</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

and i am using C#.</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1889131">
		<submitted_by>bwingenroth</submitted_by>
		<submitted_date>2008-02-07 14:27</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Patch for two bugs: 1 in PDDocument.load 1 in PDFMergerUtili</summary>
		<detail>I've come across two bugs that the attached patch addresses.  I don't claim to fully understand these bugs, nor do I know whether my patch fixes the root issues -- I only know that using this patch allows me to continue using PDFBox.

I came across a ClassCastException in PDDocument.load.  It actually manifests as an IOWrapperException caused by the ClassCastException.  In getObjectsByType inside the file COSDocument.java, you grab the COSdictionary and attempt to cast each item as a COSName.  I've found a PDF that opens fine in Acrobat that apparently contains a COSObject inside that dictionary which throws the ClassCastException.  My patch for COSDocument.java wraps the cast in a try block and silently discards the ClassCastException.  This looks like it's safe, since the code seems to want to match a COSName against a type passed into the function.  If the item isn't castable as a COSName, then I assume it could never pass anyway, so my patch ignores it.

The second issue -- in PDFMergerUtility.java -- is that srcNums can be null.  

COSArray srcNums = (COSArray)srcLabels.getDictionaryObject( COSName.getPDFName( "Nums" ) );

My patch tests srcNums to make sure it isn't null before iterating over it.

Again, I don't know that I've addressed the underlying causes behind these issues, but I have successfully patched the nightly build from 20080205 with these changes and haven't noticed any ill effects.</detail>
		<existingfiles>
			<file>
				<id>265468</id>
				<name>PDFBox-0.7.4-dev-20080205.patch</name>
				<description>Patch for bugs in PDDocument.load and PDFMergerUtility</description>
				<filesize>2757</filesize>
				<filetype>application/octet-stream</filetype>
				<adddate>1202423259</adddate>
				<submitted_by>843437</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>265468: PDFBox-0.7.4-dev-20080205.patch</old_value>
				<date>1202423259</date>
				<by>bwingenroth</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1888826">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2008-02-07 06:56</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Letter is shown twice</summary>
		<detail>In the attached file, the letter 'H' after the number '07005072' is also (incorrectly) shown in the upper left corner.

Sune Lindhe
lindhe@regionh.dk</detail>
		<existingfiles>
			<file>
				<id>265427</id>
				<name>test.pdf</name>
				<description>File illustrating the bug</description>
				<filesize>4842</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1202396179</adddate>
				<submitted_by>100</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>265427: test.pdf</old_value>
				<date>1202396179</date>
				<by>nobody</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1887932">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2008-02-06 06:30</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520288">lucene</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Version incompatibility with Lucene?</summary>
		<detail>It may seem that the code that does text extraction for Lucene is not compatible with the later versions of Lucene.

I had to revert all the way back to to Lucene 2.0.0 from 2006 in order to make PDF Box be able to parse PDF documents for Lucene.

Manual recompilation of the PDFBox source is not really an option due to a large number of dependencies which we don't have the resources to keep track of.

A recompilation and release compatible with Lucene 2.3.0 would be much appreciated!

knutf@firstventura.com</detail>
	</artifact>
	<artifact id="1865612">
		<submitted_by>jalanthomas</submitted_by>
		<submitted_date>2008-01-06 19:07</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>showCharacter Javadoc unclear and Method title ambiguous</summary>
		<detail>   The JavaDoc for the showCharacter method of the PDFStreamEngine is inadequate.  The method name is misleading for a general event interface.  The documentation is not clear that the processStream method causes showCharacter to be invoked.  


</detail>
	</artifact>
	<artifact id="1844126">
		<submitted_by>kostia76</submitted_by>
		<submitted_date>2007-12-04 07:04</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="817859">PDFReader</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Watermarks aren't correctly showed</summary>
		<detail>When a PDF File has a gray Watermark, it isn't correctly showed.</detail>
		<existingfiles>
			<file>
				<id>257215</id>
				<name>gws_wechselgeldzuteilung_wasserzeichen.pdf</name>
				<description>PDF with Watermark stamped</description>
				<filesize>21921</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1196780677</adddate>
				<submitted_by>1792375</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>257215: gws_wechselgeldzuteilung_wasserzeichen.pdf</old_value>
				<date>1196780677</date>
				<by>kostia76</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1843491">
		<submitted_by>michel-onoff</submitted_by>
		<submitted_date>2007-12-03 09:01</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>ExtractImages (hence PDXObjectImage) produces wrong PNGs.</summary>
		<detail>ExtractImages (and hence PDXObjectImage) sometimes produces wrong PNGs.

When getRGBImage() is called on a PDXObjectImage, a faulty BufferedImage is created.

The same file is opened and displayed correctly with other tools like Acrobat Reader and GSView, so the file is not corrupt.

I attach the .pdf. You can view its real content with Acrobat Reader and try to extract the image by running

java -cp PDFBox-&lt;version&gt;.jar &lt;file.pdf&gt;

I tried both the release 0.7.3 and the last nightly build of 20071203

</detail>
		<follow_ups>
			<item>
				<date>1203010528</date>
				<sender>michel-onoff</sender>
				<text>Logged In: YES 
user_id=1951253
Originator: YES

I retried again with the newest nightly build and the attached pdf100.pdf file.
The extracted image is still wrong.

The pdf contains a black&amp;white image compressed with Flate and ASCII85 and no predictor.

Any other viewer I tried (including AcroRead, GSView, Cabaret, jPedal) have no troubles.

I have all jai libraries installed as well.

Any idea?

This is the command I use
java -cp PDFBox-0.7.4-dev-20080214.jar org.pdfbox.ExtractImages pdf100.pdf

It produces a PNG with wrong content.
</text>
			</item>
			<item>
				<date>1200327240</date>
				<sender>michel-onoff</sender>
				<text>Logged In: YES 
user_id=1951253
Originator: YES

I retried with the newest nightly build and the attached pdf100.pdf file. The extracted image is still wrong.
Any idea?

java -cp PDFBox-0.7.4-dev-20080113.jar org.pdfbox.ExtractImages pdf100.pdf


</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>257078</id>
				<name>pdf100.pdf</name>
				<description></description>
				<filesize>11814</filesize>
				<filetype>application/save-as</filetype>
				<adddate>1196701301</adddate>
				<submitted_by>1951253</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>257078: pdf100.pdf</old_value>
				<date>1196701301</date>
				<by>michel-onoff</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1838989">
		<submitted_by>jeunes2</submitted_by>
		<submitted_date>2007-11-26 13:08</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Argument parsing in ConvertColorspace broken</summary>
		<detail>The argument parsing in ConvertColorspace is broken; arguments for the -password and -toColorspace options are handled as files. Changing the "if"s in lines 312 and 321 to "else if"s fixes this issue.</detail>
	</artifact>
	<artifact id="1835843">
		<submitted_by>ibuzz</submitted_by>
		<submitted_date>2007-11-21 07:25</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>TrueType and characterHorizontalDisplacement</summary>
		<detail>PDFBox seem to have an issue with some PDF document using TrueType fonts with no width information stored in the font dictionary : 
 
6 0 obj 
&lt;&lt;/BaseFont /TimesNewRoman 
/Subtype /TrueType 
/Name /F0 
/Encoding /WinAnsiEncoding 
/Type /Font 
&gt;&gt; 
endobj 
 
 
The value of "characterHorizontalDisplacement" in "showString()" (PDFTextStripper.java) is always 0. 
 
Is PDFBox try to get the width information inside the TrueType font program, when this situation occur? 
 
If the answer is no, how I can get the width value inside a TrueType font program? 
 
Thanks! </detail>
		<existingfiles>
			<file>
				<id>255309</id>
				<name>CharDisplAndTTF.pdf</name>
				<description></description>
				<filesize>215054</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1195658751</adddate>
				<submitted_by>964306</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>255309: CharDisplAndTTF.pdf</old_value>
				<date>1195658751</date>
				<by>ibuzz</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1835664">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2007-11-21 02:23</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>expected='/' actual='e'-101 </summary>
		<detail>I'm getting following error during text extraction:

expected='/' actual='e'-101 org.pdfbox.io.PushBackInputStream@172dc32</detail>
		<follow_ups>
			<item>
				<date>1199092568</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

Is enybode working on this bug?</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1834581">
		<submitted_by>feltonfee</submitted_by>
		<submitted_date>2007-11-19 07:09</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>One rectangle missing when converting PDF to image</summary>
		<detail>As forum issue "Box missing, LinePath not properly reset ?", id: 267205

I get the latest code from CVS.
Each time there is a RE in the PDF, in org.pdfbox.util.operator.pagedrawer.AppendRectangleToPath
drawer.getLinePath().reset() is called to empty the list.
That cause missing box for the following PDF:

RE 
RE 
S 

When I convert to image, Only one box is shown, under Acrobat reader, there are 2 boxes, please check the attached PDF.

Thanks!


 </detail>
		<existingfiles>
			<file>
				<id>254961</id>
				<name>2boxes.pdf</name>
				<description>PDF with 2 boxes</description>
				<filesize>10774</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1195484970</adddate>
				<submitted_by>623314</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>254961: 2boxes.pdf</old_value>
				<date>1195484970</date>
				<by>feltonfee</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1833244">
		<submitted_by>phenderson</submitted_by>
		<submitted_date>2007-11-16 08:23</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Images with transparency are not rendered correctly</summary>
		<detail>PDF documents that contain images with transparent regions are not rendered correctly. The transparent areas are painted black.

Attached is an example pdf with text behind an image, generated via OpenOffice.

Cheers

Peter Henderson</detail>
		<existingfiles>
			<file>
				<id>254618</id>
				<name>test.pdf</name>
				<description>example pdf</description>
				<filesize>196955</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1195230219</adddate>
				<submitted_by>764374</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>254618: test.pdf</old_value>
				<date>1195230220</date>
				<by>phenderson</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1827099">
		<submitted_by>ibuzz</submitted_by>
		<submitted_date>2007-11-06 11:53</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Don't want gibberish character when extracting text.</summary>
		<detail>Hi,

I'm not sure if its a bug, but I don't really like to get gibberish characters when extracting text using a custom encoding.  Its cool when debugging, but in real case situation, we don't necessarily want to extract and see them.

It would be cool if the method "font.encode( string, i, codeLength );" had an option to return nothing (if the font use a custom encoding).

Another way would be to give us a flag to be able to identify easily custom encoding for a font (in PDFont?).

Thanks!


</detail>
	</artifact>
	<artifact id="1824739">
		<submitted_by>gdeshors</submitted_by>
		<submitted_date>2007-11-02 09:12</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="556660">writing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>PDF printing or conversion : lines are too thick - SOLVED ?</summary>
		<detail>I'm starting to use PDFBox, and I find it a great tool. 
The problem I detected is the following : when printing a PDF or converting it into an image, the table borders become too thick, which is unpretty. It probably is the case for all the lines drawn in the document.
 
To illustrate this, I've uploaded an screenshot of  
- the original document : http://glcomp.free.fr/images/pdfbox/orig.png  
- and the document rendered by PDFBox (printed via PDF995) : http://glcomp.free.fr/images/pdfbox/final.png 
 
(nota : I've put the PDF documents as well : http://glcomp.free.fr/images/pdfbox/ ) 
 
Steps to reproduce : 
1/ take my document and convert it to image, or print it via PDFBox (let's say "PDFToImage -imageTypeJpg orig.pdf")
2/ on produced image orig1.jpg the lines are thicker than on original document.

--------- SOLUTION ?

I seem to have found the problem, though it seems a little too evident and maybe I'm afraid to be missing a trick... 
In the class org.pdfbox.util.operator.pagedrawer.AppendRectangleToPath#process method, which actually draws the rectangles, the x2 and y2 coordinates have an apparently useless '+1' on lines 67 and 68. I didn't see a reason for this, and when I remove these it works much better, for all the documents I tried.

I'm uploading a patch to be crystal clear about the changes I propose.

Sincerely,
Guillaume Deshors</detail>
		<existingfiles>
			<file>
				<id>252546</id>
				<name>patch_AppendRectangleToPath.txt</name>
				<description>Patch to fix bug of thick lines</description>
				<filesize>296</filesize>
				<filetype>text/plain</filetype>
				<adddate>1194019977</adddate>
				<submitted_by>849198</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>252546: patch_AppendRectangleToPath.txt</old_value>
				<date>1194019977</date>
				<by>gdeshors</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1787501">
		<submitted_by>gjniewenhuijse</submitted_by>
		<submitted_date>2007-09-04 00:24</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="817859">PDFReader</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="9">9</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>layout print problem</summary>
		<detail>When i print the attached file, some things are not printed well.

- The gray box at the top
- and the fonts are printed bold and thats not right.

Is there any solution for now, or for later? 

When i open and print this file with adobe reader, everything is fine, but with pdfbox i've got a layout problem.

I used the newest pdfbox version (also tested the nightly build)</detail>
		<existingfiles>
			<file>
				<id>244104</id>
				<name>orarrp.pdf</name>
				<description>pdf with print problem</description>
				<filesize>7871</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1188890656</adddate>
				<submitted_by>1873119</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>priority</field>
				<old_value>5</old_value>
				<date>1193821091</date>
				<by>gjniewenhuijse</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>244104: orarrp.pdf</old_value>
				<date>1188890659</date>
				<by>gjniewenhuijse</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1822993">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2007-10-30 12:41</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>PDF Splitt Query with VB.NET</summary>
		<detail>Hi,
I am working for xyz comapny. I have task like I want to split PDF file using vb.net.

I need perfect working code. Any or All help would be highly appreciated. I tried a lot but couldnt succedd.

i am using pdfbOX 7.3 and vb.net 2005 

Problem like I have pdf (pages in range 1 to 150) and I want to split it into 15 pdf (like 1 to 10, 11 to 20,21 to 30.....)

pls its urgent.......I am eagerly waiting for working code in vb.net or c#.</detail>
	</artifact>
	<artifact id="1822452">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2007-10-29 17:37</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Error getting pdf version</summary>
		<detail>java.io.IOException: Error getting pdf version:java.lang.NumberFormatException: For input string: "-"
	at org.pdfbox.pdfparser.PDFParser.parse(PDFParser.java:166)
	at org.pdfbox.pdmodel.PDDocument.load(PDDocument.java:707)
	at org.pdfbox.pdmodel.PDDocument.load(PDDocument.java:691)
	at org.pdfbox.pdmodel.PDDocument.load(PDDocument.java:633)
	at test.pdfbox.pdfparser.TestPDFParser.test_exception_version1(TestPDFParser.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at junit.framework.TestCase.runTest(TestCase.java:154)
	at junit.framework.TestCase.runBare(TestCase.java:127)
	at junit.framework.TestResult$1.protect(TestResult.java:106)
	at junit.framework.TestResult.runProtected(TestResult.java:124)
	at junit.framework.TestResult.run(TestResult.java:109)
	at junit.framework.TestCase.run(TestCase.java:118)
</detail>
		<follow_ups>
			<item>
				<date>1201209735</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

Someone can put a better more throughtful fix in.
Here is what I did to fix it.

PDFParser.java:

    public void parse() throws IOException
    {
        try
        {
            if ( raf == null )
            {
                checktmpDir();
                document = new COSDocument( tempDirectory );
            }
            else
            {
                document = new COSDocument( raf );
            }
            setDocument( document );
            findVersion();   // New method see below.
            // Code to find version moved to method findVersion();
            skipHeaderFillBytes();
            Object nextObject;
            [...]

----

    /**
     * Attempt to find version in the following form %PDF-&lt;number&gt;&lt;0a|0d&gt;%
     * @throws IOException
     */
    private void findVersion() throws IOException
    {
        String header = null;
        // try 5 lines to get PDF Version.
        for ( int i = 0; i &lt; 5; i++) {
            header = readLine();
            
            //sometimes there are some garbage bytes in the header before the header
            //actually starts, so lets try to find the header first.
            int headerStart = header.indexOf( PDF_HEADER );

            //greater than zero because if it is zero then
            //there is no point of trimming            
            if( headerStart &gt; 0 )
            {
                //trim off any leading characters
                header = header.substring( headerStart, header.length() );
            } else if (headerStart &lt; 0)
                continue;  // Did not find the Header Go look at next line
            
            document.setHeaderString( header );  
            try
            {
                float pdfVersion = Float.parseFloat( 
                    header.substring( PDF_HEADER.length(), Math.min( header.length(), PDF_HEADER.length()+3) ) );
                document.setVersion( pdfVersion );
                return;  // Express return.
            }
            catch( NumberFormatException e )
            {
                throw new IOException( "Error getting pdf version: " + header + "\n" + e );
            }            
        }
        throw new IOException( "Unable to find version");            
    }
----</text>
			</item>
			<item>
				<date>1193778760</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

Debugged it with a hex dump on the submitted file 
---
Appears that the Version started at office 0x80 instead of the first line.
AdobeReader 7.x appears to have skipped to the right version and display the rest properly.

So I think something needs to be done with PDFParser::parse() version checking.

00000000: 001f 3339 3339 202d 2057 4648 202d 2050  ..3939 - WFH - P
00000010: 7265 7020 666f 2331 3533 3245 332e 7064  rep fo#1532E3.pd
00000020: 6600 0000 0000 0000 0000 0000 0000 0000  f...............
00000030: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00000040: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00000050: 0000 0000 0300 2100 0000 00c2 550d 05c2  ......!.....U...
00000060: 550d 0500 0000 0000 0000 0000 0000 0000  U...............
00000070: 0000 0000 0000 0000 0000 8181 af49 0000  .............I..
00000080: 2550 4446 2d31 2e33 0a25 c4e5 f2e5 eba7  %PDF-1.3.%......
00000090: f3a0 d0c4 c60a 3220 3020 6f62 6a0a 3c3c  ......2 0 obj.&lt;&lt;</text>
			</item>
			<item>
				<date>1193704718</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

Tested on 0.7.2, 0.7.3, latest 0.7.4-2007-10-22</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>251894</id>
				<name>exception_version1.pdf</name>
				<description></description>
				<filesize>196864</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1193704672</adddate>
				<submitted_by>100</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>251894: exception_version1.pdf</old_value>
				<date>1193704672</date>
				<by>nobody</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1819754">
		<submitted_by>brettpowley</submitted_by>
		<submitted_date>2007-10-24 23:59</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>PDFont.getStringWidth() returns incorrect values</summary>
		<detail>For some text in some documents, getStringWidth() returns an incorrect value.  In some cases it returns zero, which is clearly not correct.  In others, it returns something that is too short.  An example of this follows:

On the page, this text is part of text that reads "Cash flows from".  The text in question is delivered to flushText in PDFTextStripper as multiple TextPositions, and the ones below are those containing "w" and the next one containing "s fr".

The first one looks like this:

TextPosition: "w"  
getX=62.824474 
getWidth=6.731968 
getWordSpacing=0.000000 
getWidthOfSpace=2.224000 
getXScale=1.000000
glyphFactor=999.999939, getXScale=1.000000, getStringWidth=814.000000, calculatedFontWidth=0.814000 
averageWidth=0.546769, 
widthUsingSpaces=2.224000  
widthUsingFont=0.546769

Note that, according to getStringWidth(), the width of this text is 0.841 meaning it would end at 62.82 + 0.841 = 63.66.
According to getWidth(), it ought to end at 62.82 + 6.73 = 69.55.

When we look at the next chunk of text:

TextPosition: "s fr" 
getX=69.336563 getWidth=12.518410 

we see that it does in fact start immediately after the previous one -- so the width from getStringWidth() for the first one was incorrect.

The font is a PDType1Font and its name appears to be "YOTPKO+HelveticaNeue-Bold*1".
</detail>
	</artifact>
	<artifact id="1818588">
		<submitted_by>astonishing1</submitted_by>
		<submitted_date>2007-10-23 07:20</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Extracting number show empty string</summary>
		<detail>hi,
I want to extract the text which is a number 10 digit long and is at fix place on each page of PDF file.
I used  PrintTextLocations &amp; PDFTextStripper to extrac t   that id number from the PDFs .

The PDF is Arabic but I want the number to extract only.
The problem is that when I use PrintTextLocations utility when it prints the number it always misses one or two numbers and insert empty space instead of that numbers.

Example 
String[730.10004,116.75003 ft=Times-New-Roman+2 fs=200.0 xscale=0.05 height=5.000001 width=911.2002]    text: 16/10/2007
String[775.7,32.75 ft=Times-New-Roman-Bold+1 fs=200.0 xscale=0.05 height=5.000001 width=933.4004]  text: RBKPI011
String[786.15,116.75003 ft=Times-New-Roman-Bold+1 fs=200.0 xscale=0.05 height=5.000001 width=739.0] text:????? ?????
String[375.85,89.10004 ft=Times-New-Roman-Bold+1 fs=240.0 xscale=0.05 height=6.000001 width=1057.6797] text:?????? - 004
String[330.9,101.10004 ft=Times-New-Roman-Bold+1 fs=240.0 xscale=0.05 height=6.000001 width=3023.04]  text:??????  ??? ???? ????  -  1 4 58           (the number is 194758, 9 &amp; 7 is missing)  
The last number is  some Arabic word after â€“ is this 194758 number but 9 and 7 is missing 
Similarly as the big PDF file is generated daily so I parsed the new one as following 
String[329.75,101.10004 ft=Times-New-Roman-Bold+1 fs=240.0 xscale=0.05 height=6.000001 width=3068.6406]?????? ????  ??  ????  -  1 06 14     No.is  1906914, 9  is missing)  

So it is not fixed .
So can anyone help ,tanks in advance .



</detail>
		<existingfiles>
			<file>
				<id>251007</id>
				<name>194758.pdf</name>
				<description>pdf file to extract data using PrintTextLocations utility</description>
				<filesize>103183</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1193149258</adddate>
				<submitted_by>1919558</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>251007: 194758.pdf</old_value>
				<date>1193149258</date>
				<by>astonishing1</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1808718">
		<submitted_by>dougcook</submitted_by>
		<submitted_date>2007-10-06 11:49</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>NullPointerException in trunk version</summary>
		<detail>This with the latest code versions (0.7.4-dev). 

In doing text extraction of the file:

http://www.crcv.com.au/resources/Grape%20and%20Wine%20Quality/Posters/Use%20of%20NIR%20to%20measure%20oxidation%20in%20white%20wine.pdf

I get:
java.lang.NullPointerException
at org.pdfbox.pdmodel.font.PDFontFactory.createFont(PDFontFactory.java:95)
at org.pdfbox.pdmodel.font.PDFontFactory.createFont(PDFontFactory.java:72)
at org.pdfbox.pdmodel.PDResources.getFonts(PDResources.java:136)
at org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:192)
at org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:174)
at org.pdfbox.util.PDFTextStripper.processPage(PDFTextStripper.java:336)
at org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:259)
at org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:216)
at org.pdfbox.util.PDFTextStripper.getText(PDFTextStripper.java:149)

</detail>
	</artifact>
	<artifact id="1807062">
		<submitted_by>bernie9998</submitted_by>
		<submitted_date>2007-10-03 10:02</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>StandardSecurityHandler not setting currentAccessPermission</summary>
		<detail>I've noticed that if I try to get the currentAccessPermission from a protected document, what I actually get is a null pointer.

Looking through the source, it seems the issue is that StandardSecurityHandler never actually sets currentAccessPermission after it decrypts the document.  Thus, when PDDocument tries to get the currentAccessPermission, it gets the initial null pointer currentAccessPermission is initialized to, as securityHandler is not null.

I believe that StandardSecurityHandler should set the currentAccessPermission with the permissions obtained in the encryptionDictionary.</detail>
		<follow_ups>
			<item>
				<date>1191431242</date>
				<sender>bernie9998</sender>
				<text>Logged In: YES 
user_id=1752908
Originator: YES

I am attaching a patch which sets currentAccessPermissions from the encryptionDictionary in the decrypt method.

It allows involves a new AccessPermission constructor that allows permissions to be set from an int rather than a byte array.

I've tested this with a pdf document that had setCanPrint to false and found this to work in this case.
File Added: PDFBox-SetAcessPermissions.patch</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>248232</id>
				<name>PDFBox-SetAcessPermissions.patch</name>
				<description>patch that sets currentAccessPermission in StandardSecurityHandler</description>
				<filesize>1372</filesize>
				<filetype>text/x-diff</filetype>
				<adddate>1191431242</adddate>
				<submitted_by>1752908</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>248232: PDFBox-SetAcessPermissions.patch</old_value>
				<date>1191431242</date>
				<by>bernie9998</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1805929">
		<submitted_by>tdonohue</submitted_by>
		<submitted_date>2007-10-01 13:51</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>OutOfMemoryError for larger PDF text extraction</summary>
		<detail>Hello,

I'm using PDFBox 0.7.3, which is distributed with DSpace (www.dspace.org) version 1.4.2.   Currently, I'm running into OutOfMemoryError exceptions whenever I attempt text extraction from a few larger PDFs (&gt;10MB).  I've also just tried replacing PDFBox 0.7.3 with your latest nightly-build (from Oct 1), and the error still seems to be happening.

My JVM options are currently set to:
-Xmx1024M -Xms1024M -XX:NewRatio=2 -Dfile.encoding=UTF-8

Here's a few of the problem PDFs:

15MB PDF:
https://test.ideals.uiuc.edu/bitstream/2142/2050/1/tr05.pdf

13MB PDF:
https://test.ideals.uiuc.edu/bitstream/2142/1936/1/RRE06.PDF

Here's an example error stacktrace:

Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
        at java.util.HashMap.addEntry(HashMap.java:753)
        at java.util.HashMap.put(HashMap.java:385)
        at org.fontbox.cmap.CMap.addMapping(CMap.java:131)
        at org.fontbox.cmap.CMapParser.parse(CMapParser.java:202)
        at org.pdfbox.pdmodel.font.PDFont.parseCmap(PDFont.java:509)
        at org.pdfbox.pdmodel.font.PDFont.encode(PDFont.java:380)
        at org.pdfbox.util.PDFStreamEngine.showString(PDFStreamEngine.java:343)
        at org.pdfbox.util.operator.ShowText.process(ShowText.java:64)
        at org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:497)
        at org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:218)
        at org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:177)
        at org.pdfbox.util.PDFTextStripper.processPage(PDFTextStripper.java:339)
        at org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:263)
        at org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:219)
        at org.pdfbox.util.PDFTextStripper.getText(PDFTextStripper.java:152)
        at org.dspace.app.mediafilter.PDFFilter.getDestinationStream(PDFFilter.java:114)
        at org.dspace.app.mediafilter.MediaFilterManager.processBitstream(MediaFilterManager.java:602)
        at org.dspace.app.mediafilter.MediaFilterManager.filterBitstream(MediaFilterManager.java:513)
        at org.dspace.app.mediafilter.MediaFilterManager.filterItem(MediaFilterManager.java:461)
        at org.dspace.app.mediafilter.MediaFilterManager.applyFiltersItem(MediaFilterManager.java:428)
        at org.dspace.app.mediafilter.MediaFilterManager.applyFiltersCollection(MediaFilterManager.java:417)
        at org.dspace.app.mediafilter.MediaFilterManager.main(MediaFilterManager.java:359)

Finally, here's how the DSpace API is calling PDFBox:

        PDFTextStripper pts = new PDFTextStripper();
        PDFParser parser = null;
        String extractedText = null;

        try
        {
            parser = new PDFParser(source);
        parser.parse();
            extractedText = pts.getText(new PDDocument(parser.getDocument()));
        }
        finally
        {
            try
            {
                parser.getDocument().close();
            }
            catch(Exception e)
            {
               log.error("Error closing temporary PDF file: " + e.getMessage(), e);
            }
        }</detail>
		<follow_ups>
			<item>
				<date>1191274549</date>
				<sender>tdonohue</sender>
				<text>Logged In: YES 
user_id=1320825
Originator: YES

I neglected to mention both of these PDFs were initially image-based and were recently OCRed using Adobe Acrobat 8 Pro.  I'm not sure that would matter for PDFBox to perform text extraction, but it's another commonality between these PDFs.

Thanks in advance for any help you can provide!

- Tim</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1801070">
		<submitted_by>poorani</submitted_by>
		<submitted_date>2007-09-24 04:44</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Expected to read '%%EOF' instead started reading 'e'</summary>
		<detail>Hi,

I am trying to search a particular word in PDF document. Am getting the following exception when i use the statement : 
PDDocument.load(fileName)

Error :
java.io.IOException: Error: Expected to read '%%EOF' instead started reading 'e'
	at org.pdfbox.pdfparser.BaseParser.readExpectedString(BaseParser.java:1022)
	at org.pdfbox.pdfparser.PDFParser.parseObject(PDFParser.java:364)
	at org.pdfbox.pdfparser.PDFParser.parse(PDFParser.java:176)
	at org.pdfbox.pdmodel.PDDocument.load(PDDocument.java:707)
	at org.pdfbox.pdmodel.PDDocument.load(PDDocument.java:691)

Can anybody help me in this.

Thanks in advance.
cheers,
Poorni</detail>
		<change_log>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1190704171</date>
				<by>poorani</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1800993">
		<submitted_by>poorani</submitted_by>
		<submitted_date>2007-09-24 02:24</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Expected to read '%%EOF' instead started reading 'e'</summary>
		<detail>Hi,

I am trying to search a particular word in PDF document. Am getting the following exception when i use the statement : 
PDDocument.load(fileName)

Error :
java.io.IOException: Error: Expected to read '%%EOF' instead started reading 'e'
	at org.pdfbox.pdfparser.BaseParser.readExpectedString(BaseParser.java:1022)
	at org.pdfbox.pdfparser.PDFParser.parseObject(PDFParser.java:364)
	at org.pdfbox.pdfparser.PDFParser.parse(PDFParser.java:176)
	at org.pdfbox.pdmodel.PDDocument.load(PDDocument.java:707)
	at org.pdfbox.pdmodel.PDDocument.load(PDDocument.java:691)

Can anybody help me in this.

Thanks in advance.
cheers,
Poorni</detail>
	</artifact>
	<artifact id="1797094">
		<submitted_by>balvinder_dang</submitted_by>
		<submitted_date>2007-09-18 07:08</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Unknown encoding for 'H'</summary>
		<detail>Unknown encoding for 'H'
	at org.pdfbox.encoding.EncodingManager.getEncoding(EncodingManager.java:83)
	at org.pdfbox.pdmodel.font.PDFont.getEncoding(PDFont.java:627)
	at org.pdfbox.pdmodel.font.PDFont.encode(PDFont.java:476)
	at org.pdfbox.util.PDFStreamEngine.showString(PDFStreamEngine.java:332)
	at org.pdfbox.util.operator.ShowText.process(ShowText.java:66)
	at org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:494)
	at org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:207)
	at org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:160)
	at org.pdfbox.util.PDFTextStripper.processPage(PDFTextStripper.java:355)
	at org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:268)
	at org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:220)
	at org.pdfbox.util.PDFTextStripper.getText(PDFTextStripper.java:140)</detail>
	</artifact>
	<artifact id="1797093">
		<submitted_by>balvinder_dang</submitted_by>
		<submitted_date>2007-09-18 07:07</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Unknown encoding for 'UniJIS-UCS2-H'</summary>
		<detail>Unknown encoding for 'UniJIS-UCS2-H'
	at org.pdfbox.encoding.EncodingManager.getEncoding(EncodingManager.java:83)
	at org.pdfbox.pdmodel.font.PDFont.getEncoding(PDFont.java:627)
	at org.pdfbox.pdmodel.font.PDFont.encode(PDFont.java:476)
	at org.pdfbox.util.PDFStreamEngine.showString(PDFStreamEngine.java:332)
	at org.pdfbox.util.operator.ShowText.process(ShowText.java:66)
	at org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:494)
	at org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:207)
	at org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:160)
	at org.pdfbox.util.PDFTextStripper.processPage(PDFTextStripper.java:355)
	at org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:268)
	at org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:220)
	at org.pdfbox.util.PDFTextStripper.getText(PDFTextStripper.java:140)</detail>
	</artifact>
	<artifact id="1797092">
		<submitted_by>balvinder_dang</submitted_by>
		<submitted_date>2007-09-18 07:07</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Unknown encoding for 'KSCms-UHC-H'</summary>
		<detail>Unknown encoding for 'KSCms-UHC-H'
	at org.pdfbox.encoding.EncodingManager.getEncoding(EncodingManager.java:83)
	at org.pdfbox.pdmodel.font.PDFont.getEncoding(PDFont.java:627)
	at org.pdfbox.pdmodel.font.PDFont.encode(PDFont.java:476)
	at org.pdfbox.util.PDFStreamEngine.showString(PDFStreamEngine.java:332)
	at org.pdfbox.util.operator.ShowText.process(ShowText.java:66)
	at org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:494)
	at org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:207)
	at org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:160)
	at org.pdfbox.util.PDFTextStripper.processPage(PDFTextStripper.java:355)
	at org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:268)
	at org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:220)
	at org.pdfbox.util.PDFTextStripper.getText(PDFTextStripper.java:140)</detail>
	</artifact>
	<artifact id="1797091">
		<submitted_by>balvinder_dang</submitted_by>
		<submitted_date>2007-09-18 07:03</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>ava.io.IOException: Unknown encoding for 'H'</summary>
		<detail>java.io.IOException: Unknown encoding for 'H'
	at org.pdfbox.encoding.EncodingManager.getEncoding(EncodingManager.java:83)
	at org.pdfbox.pdmodel.font.PDFont.getEncoding(PDFont.java:627)
	at org.pdfbox.pdmodel.font.PDFont.encode(PDFont.java:476)
	at org.pdfbox.util.PDFStreamEngine.showString(PDFStreamEngine.java:332)
	at org.pdfbox.util.operator.ShowTextGlyph.process(ShowTextGlyph.java:90)
	at org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:494)
	at org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:207)
	at org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:160)
	at org.pdfbox.util.PDFTextStripper.processPage(PDFTextStripper.java:355)
	at org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:268)
	at org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:220)
	at org.pdfbox.util.PDFTextStripper.getText(PDFTextStripper.java:140)</detail>
	</artifact>
	<artifact id="1786901">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2007-09-02 22:57</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>IOException when parsing 1.3 PDF</summary>
		<detail>JAVA CODE:PDDocument pdfDoc =  PDDocument.load("d:/pdf/1201198.PDF");

PDFBOX VERSION:0.7.3

PDF File version:1.3

EXCEPTION:java.io.IOException: expected='endobj' firstReadAttempt='' secondReadAttempt='' org.pdfbox.io.PushBackInputStream@13e8d89
	at org.pdfbox.pdfparser.PDFParser.parseObject(PDFParser.java:502)
	at org.pdfbox.pdfparser.PDFParser.parse(PDFParser.java:176)
	at ecwise.pdf.TPDFParse.loadPDF(TPDFParse.java:19)
	at ecwise.pdf.TPDFParse.main(TPDFParse.java:28)

but if pdf file version is 1.4,it works well.

can anybody help me?

thanks.
</detail>
		<follow_ups>
			<item>
				<date>1188808560</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

what is the root cause of this exceptionï¼Ÿhow to solve this?</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1775060">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2007-08-15 16:47</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>PDFTextStripper - unwanted removal of spaces between words</summary>
		<detail>I have been trying to extract text from a pdf document but the output is fine except that no spaces are left between many of the words in the original document.  Can you advise please?

An example of the source document I am using can be found heree.

https://www.hcrregister.com/ReportDownload?key=8493-6026-4010-7237-5096

Regards

Geoff</detail>
		<follow_ups>
			<item>
				<date>1194643202</date>
				<sender>carlemac_2007</sender>
				<text>Logged In: YES 
user_id=1933815
Originator: NO

I've similar problem, except multiple spaces are replaced by single space...</text>
			</item>
			<item>
				<date>1190385715</date>
				<sender>kameroliefant</sender>
				<text>Logged In: YES 
user_id=1895791
Originator: NO

I have the same problem...</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1771748">
		<submitted_by>php-king</submitted_by>
		<submitted_date>2007-08-10 08:28</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Printing fails</summary>
		<detail>I tried printing the attached PDF document using the printSilent() Method and it gave me the following Error:

org.pdfbox.exceptions.WrappedIOException: Font name not found
        at org.pdfbox.pdmodel.font.PDTrueTypeFont.drawString(PDTrueTypeFont.java:382)
        at org.pdfbox.pdfviewer.PageDrawer.showCharacter(PageDrawer.java:160)
        at org.pdfbox.util.PDFStreamEngine.showString(PDFStreamEngine.java:409)
        at org.pdfbox.util.operator.ShowText.process(ShowText.java:64)
        at org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:452)
        at org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:215)
        at org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:174)
        at org.pdfbox.pdfviewer.PageDrawer.drawPage(PageDrawer.java:104)
        at org.pdfbox.pdmodel.PDPage.print(PDPage.java:741)
        at sun.print.RasterPrinterJob.printPage(Unknown Source)
        at sun.print.RasterPrinterJob.print(Unknown Source)
        at sun.print.RasterPrinterJob.print(Unknown Source)
        at ch.inteco.wegas.xmpu.nodes.PrintNode.printDoc(PrintNode.java:173)
        at ch.inteco.wegas.xmpu.nodes.PrintNode.printFile(PrintNode.java:102)
        at ch.inteco.wegas.xmpu.nodes.PrintNode.write(PrintNode.java:79)
        at ch.inteco.wegas.xmpu.nodes.XMPUNode.write(XMPUNode.java:87)
        at ch.inteco.wegas.xmpu.XMPUParser.parseXmpu(XMPUParser.java:43)
        at ch.inteco.wegas.xmpu.XMPU.main(XMPU.java:36)

There was no Text printed, but the Tables were.
Thank you in advance</detail>
		<existingfiles>
			<file>
				<id>240722</id>
				<name>Printing-Fonts.pdf</name>
				<description>The Pdf-Document</description>
				<filesize>22116</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1186759735</adddate>
				<submitted_by>1474996</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>240722: Printing-Fonts.pdf</old_value>
				<date>1186759735</date>
				<by>php-king</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1766623">
		<submitted_by>tomas_vondra</submitted_by>
		<submitted_date>2007-08-03 01:30</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Incorrectly printed frames / rectangles</summary>
		<detail>When printing a PDF using org.pdfbox.PrintPDF class, the text is printed correctly, but frames (rectangles around the text) are scaled up and shifted (moved to a different position). When printed from Acrobat Reader or other tools the PDF is printed correctly (as well as displayed).

This was observed on PDFBox-0.7.3, running on Windows XP. The example of incorrectly printed PDF (result.pdf) was produced using PDFCreator but the same problems happen when printing to a printer.</detail>
		<existingfiles>
			<file>
				<id>239732</id>
				<name>examples.zip</name>
				<description>example of an incorrectly printed PDF</description>
				<filesize>222013</filesize>
				<filetype>application/zip</filetype>
				<adddate>1186129803</adddate>
				<submitted_by>1847944</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1186660118</date>
				<by>tomas_vondra</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>239732: examples.zip</old_value>
				<date>1186129803</date>
				<by>tomas_vondra</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1770188">
		<submitted_by>orthellojw</submitted_by>
		<submitted_date>2007-08-08 11:01</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Extreme memory usage while extracting text from one pdf</summary>
		<detail>When I use a -Xmx value of 64m or 128m the following exception is thrown:

Exception in thread "Thread-0" java.lang.OutOfMemoryError: Java heap space
        at java.lang.StringCoding.set(StringCoding.java:53)
        at java.lang.StringCoding.decode(StringCoding.java:171)
        at java.lang.String.&lt;init&gt;(String.java:444)
        at java.lang.String.&lt;init&gt;(String.java:516)
        at org.fontbox.cmap.CMapParser.createStringFromBytes(CMapParser.java:467)
        at org.fontbox.cmap.CMapParser.parse(CMapParser.java:201)
        at org.pdfbox.pdmodel.font.PDFont.parseCmap(PDFont.java:509)
        at org.pdfbox.pdmodel.font.PDFont.encode(PDFont.java:380)
        at org.pdfbox.util.PDFStreamEngine.showString(PDFStreamEngine.java:325)
        at org.pdfbox.util.operator.ShowText.process(ShowText.java:64)
        at org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:452)
        at org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:215)
        at org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:174)
        at org.pdfbox.util.PDFTextStripper.processPage(PDFTextStripper.java:336)
        at org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:259)
        at org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:216)
        at us.fed.nmcourt.common.pdfbox.NmdLucenePDFDocument.addContent(NmdLucenePDFDocument.java:433)
        at us.fed.nmcourt.common.pdfbox.NmdLucenePDFDocument.convertDocument(NmdLucenePDFDocument.java:292)
        at us.fed.nmcourt.drs.daemonmanager.handler.AbstractDaemonManagerHandler.writeIncomingDocumentsToIndex(AbstractDaemonManagerHandler.java:355)
        at us.fed.nmcourt.drs.daemonmanager.handler.CaddHandler.handle(CaddHandler.java:112)
        at us.fed.nmcourt.drs.daemonmanager.MainDaemonRunnable.run(MainDaemonRunnable.java:367)
        at java.lang.Thread.run(Thread.java:619)

When I use a -Xmx value of 256m it works.  Is there any way that you can reduce the memory requirement for extracting the text from this pdf.

The pdf is only 1.1MB in size.

Arhhhh.  The pdf is larger than 256KB so it cannot be attached below.  I'll email it to you if you give your email address.

Thanks in advance,

James
jwilson@nmcourt.fed.us
</detail>
		<follow_ups>
			<item>
				<date>1187820562</date>
				<sender>orthellojw</sender>
				<text>Logged In: YES 
user_id=1832000
Originator: YES

Where using the server vm I have to bump up the value for -Xmx to 512m.</text>
			</item>
			<item>
				<date>1186597602</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

Yes, please upload(ftp.pdfbox.org) or email(ben@benlitchfield.com) me the PDF, just add a quick note here with the filename.

Thanks,
Ben</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1768715">
		<submitted_by>dougcook</submitted_by>
		<submitted_date>2007-08-06 10:16</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Text extraction gives incorrect results for attached PDF</summary>
		<detail>The attached PDF does not render correctly in 0.7.3 -- extracted text is simply a bunch of garbage characters.
</detail>
		<follow_ups>
			<item>
				<date>1194648291</date>
				<sender>dougcook</sender>
				<text>Logged In: YES 
user_id=1851816
Originator: YES

Yes, text extraction fails, and I can't find snippets from this doc in either Google or Yahoo!, meaning that their text extraction libraries probably also fail on this doc.

Yet it renders perfectly visibly -- not sure if this is simply a limitation of all the existing text extraction algorithms or that the doc is constructed in some way which makes text extraction impossible.</text>
			</item>
			<item>
				<date>1194643135</date>
				<sender>carlemac_2007</sender>
				<text>Logged In: YES 
user_id=1933815
Originator: NO

Try the same file with free Adobe Acrobat Reader 8.1.1

1. Save as text - the resulting text file has "unprintable" characters also.  

A PDF construction error?</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>240109</id>
				<name>11.pdf</name>
				<description>Example for extraction problems</description>
				<filesize>99627</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1186420611</adddate>
				<submitted_by>1851816</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>240109: 11.pdf</old_value>
				<date>1186420611</date>
				<by>dougcook</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1761581">
		<submitted_by>nalundgaard</submitted_by>
		<submitted_date>2007-07-26 14:11</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Text Extraction strips 1 char when extracting a twin pair</summary>
		<detail>See attached file. We found a bug in PDFBox where it appears to randomly delete 1 character of a twin pair of characters. 

For example, we've noticed that what shows up as 1001 in a PDF file (in Acrobat) may become 101 in the text output of TextStripper.exe. This appears to happen to a large number of twin pairs, as evidenced by the attached file. 

Note that the file was created using Microsoft Word 11.3.5 on Mac OS X using the "print to PDF" feature of Mac OS X 10.4.10. </detail>
		<follow_ups>
			<item>
				<date>1193434271</date>
				<sender>ibuzz</sender>
				<text>Logged In: YES 
user_id=964306
Originator: NO

I had the same issue with a PDF document created with Microsoft Word 2004 for Mac OS X. No problem with Word X.</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>238687</id>
				<name>doublesTest.zip</name>
				<description>This zip file contains a test PDF file and the text output from running ExtractText.exe on it, in version 0.7.2 and 0.7.3</description>
				<filesize>40221</filesize>
				<filetype>application/zip</filetype>
				<adddate>1185484285</adddate>
				<submitted_by>1854351</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>238687: doublesTest.zip</old_value>
				<date>1185484286</date>
				<by>nalundgaard</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1761570">
		<submitted_by>nalundgaard</submitted_by>
		<submitted_date>2007-07-26 13:51</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Text Extraction strips 1 char when extracting a twin pair</summary>
		<detail>See attached file. We found a bug in PDFBox where it appears to randomly delete 1 character of a twin pair of characters. 

For example, we've noticed that what shows up as 1001 in a PDF file (in Acrobat) may become 101 in the text output of TextStripper.exe. This appears to happen to a large number of twin pairs, as evidenced by the attached file. 

Note that the file was created using Microsoft Word 11.3.5 on Mac OS X using the "print to PDF" feature of Mac OS X 10.4.10. </detail>
		<existingfiles>
			<file>
				<id>238686</id>
				<name>doublesTest.zip</name>
				<description>This zip file contains a test PDF file and the text output from running ExtractText.exe on it, in version 0.7.2 and 0.7.3</description>
				<filesize>40221</filesize>
				<filetype>application/zip</filetype>
				<adddate>1185483093</adddate>
				<submitted_by>1854351</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>238686: doublesTest.zip</old_value>
				<date>1185483093</date>
				<by>nalundgaard</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1755543">
		<submitted_by>taywin</submitted_by>
		<submitted_date>2007-07-17 08:52</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>java.lang.NoSuchMethodError in fontbox</summary>
		<detail>I have been trying to extract text content from some PDF files which were created by Omnipage CaptureSDK V12.7 but the Java threw this exception. Is the problem from my files or it is from fontbox library? Any comment would be appreciated. Thank you.

Microsoft Windows XP [Version 5.1.2600]
(C) Copyright 1985-2001 Microsoft Corp.

C:\Documents and Settings\Owner&gt;cd\intern-search\mysearch

C:\Intern-Search\mysearch&gt;jrun-lucene MyPDF2
PDF File name (no extension): test

 ------ Text Data ------

Page number: 1
Exception in thread "main" java.lang.NoSuchMethodError: org.fontbox.cmap.CMapPar
ser.parse(Ljava/lang/String;Ljava/io/InputStream;)Lorg/fontbox/cmap/CMap;
        at org.pdfbox.pdmodel.font.PDFont.parseCmap(PDFont.java:509)
        at org.pdfbox.pdmodel.font.PDFont.encode(PDFont.java:380)
        at org.pdfbox.util.PDFStreamEngine.showString(PDFStreamEngine.java:325)
        at org.pdfbox.util.operator.ShowText.process(ShowText.java:64)
        at org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:
452)
        at org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java
:215)
        at org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:17
4)
        at org.pdfbox.util.PDFTextStripper.processPage(PDFTextStripper.java:336)

        at org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:259
)
        at org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:216)
        at MyPDF2.processDocument(MyPDF2.java:133)
        at MyPDF2.main(MyPDF2.java:82)

C:\Intern-Search\mysearch&gt;</detail>
		<existingfiles>
			<file>
				<id>237366</id>
				<name>test.pdf</name>
				<description>Omnipage CaptureSDK V12.7 patent file</description>
				<filesize>24097</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1184687550</adddate>
				<submitted_by>1823463</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>237366: test.pdf</old_value>
				<date>1184687550</date>
				<by>taywin</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1755412">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2007-07-17 04:08</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Null pointer exception in scanned PDF's</summary>
		<detail>We are trying to extract text and images form PDF's. I have 2 PDF's which cause PDFBox to crash.  I get  null pointer exception.  The first PDF is a scanned document. The second PDF is a document that is surrounded by a table and contains images as well. These two documnets are causing PDF to get an exception.  Does anyone have any suggestions? </detail>
		<follow_ups>
			<item>
				<date>1197241293</date>
				<sender>dgakhar</sender>
				<text>Logged In: YES 
user_id=1937173
Originator: NO

Hi, my name is Deepika and trying to resolve exceptions related to image extractions. It would be great if you could upload the files that caused PDFBox to break.

Regards,
Deepika</text>
			</item>
			<item>
				<date>1188428865</date>
				<sender>weiju</sender>
				<text>Logged In: YES 
user_id=186935
Originator: NO

I get the same problem, getting a

java.lang.NullPointerException
        at org.pdfbox.pdmodel.PDPageNode.getAllKids(PDPageNode.java:194)
        at org.pdfbox.pdmodel.PDPageNode.getKids(PDPageNode.java:171)

A quick peek in the source code shows me that the PDPageNode is created with 

PDDocumentCatalog.java, line 208:
public PDPageNode getPages()
{
  return new PDPageNode((COSDictionary)root.getDictionaryObject(COSName.PAGES));
}

But my root node dictionary only seems to contain the "Type" key, so the above source code probably leads to a PDPageNode with a null dictionary.
</text>
			</item>
			<item>
				<date>1188397337</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

I have found the same problem. The released version of the code gets a class cast exception. This appears to be fixed in the latest development build, but now it gets a NULL pointer exception.</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1753348">
		<submitted_by>fuji4</submitted_by>
		<submitted_date>2007-07-13 03:16</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>PDF to Image: Problem with text</summary>
		<detail>I have some problems when converting PDF pages to images:
The spaces between the letters are not correct!!!

</detail>
		<follow_ups>
			<item>
				<date>1194946565</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

Using org.pdfbox.pdfviewer.PageDrawer I noticed the same thing.
I think the spaces are not wrong, but the text is too big. The next piece of text is thereby overlapping the previous text, because the previous text runs to far.

Looking in the PDFont-classess, I noticed the line:
g2d.drawString( string, (int)x, (int)y );
by casting the float-value to int, we loose precission. It makes sence, because not all the text runs too far.

I suggest to multiply it by 1000 and than scale it back or something, to prevent loss of such precission.

b.t.w. drawString in PDType3Font is not overriding but overloading, I presume that has not done on purpose either?

the_tzar@users.sourceforge.net (anonymous: cannot get to my password right now :) )</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>236851</id>
				<name>demo.jpg</name>
				<description>Demo Article</description>
				<filesize>243495</filesize>
				<filetype>image/jpeg</filetype>
				<adddate>1184321819</adddate>
				<submitted_by>1424621</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>236851: demo.jpg</old_value>
				<date>1184321819</date>
				<by>fuji4</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1745046">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2007-06-28 13:10</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>PDF document renders incorrectly</summary>
		<detail>The attached PDF is rendered not rendered correctly with PDFBox 0.7.3. 

If you gave me the correct pointers I could try to find out myself what is happening with this document, but currently im just lost in PDFBox code I do not understand.</detail>
		<existingfiles>
			<file>
				<id>234982</id>
				<name>DAYvid Demo2.pdf</name>
				<description>PDF illustrating the problem</description>
				<filesize>179270</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1183061419</adddate>
				<submitted_by>100</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>234982: DAYvid Demo2.pdf</old_value>
				<date>1183061420</date>
				<by>nobody</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1745009">
		<submitted_by>jakep36</submitted_by>
		<submitted_date>2007-06-28 11:30</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>overlay shifting the document slightly</summary>
		<detail>I'm trying to use the overlay method to put a pre-printed form over top of print data converted to pdf. Overlay seems to shift my print data slightly down and to the left. Both the overlay pdf and the print data are 8.5 by 11. I was using 0.7.3 but switched to 0.7.4-dev-20070628, but it is still happening. Has anyone else experienced this issue and have you discovered a work around or fix? 

With the sample files, I'm only trying to overlay the first page of overlay.pdf with the first page of the print file.
 
code looks something like this: 
newOverlay = PDDocument.new 
newOverlay.importPage(overlayPdf.page(0)) 
overlayer = Overlay.new 
overlayer.overlay(newDocument,newOverlay) 
@pdf.importPage(newOverlay.getDocumentCatalog().getAllPages()[0]) </detail>
		<follow_ups>
			<item>
				<date>1183058653</date>
				<sender>jakep36</sender>
				<text>Logged In: YES 
user_id=1768812
Originator: YES

File Added: Archive.zip</text>
			</item>
			<item>
				<date>1183058653</date>
				<sender>jakep36</sender>
				<text>Logged In: YES 
user_id=1768812
Originator: YES

File Added: Archive.zip</text>
			</item>
			<item>
				<date>1183057286</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

see issue_1745009.zip</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>234976</id>
				<name>Archive.zip</name>
				<description>elec_new.pdf is the overlay, print file, and my attempt to combine them.</description>
				<filesize>86002</filesize>
				<filetype>application/zip</filetype>
				<adddate>1183058652</adddate>
				<submitted_by>1768812</submitted_by>
			</file>
			<file>
				<id>234975</id>
				<name>Archive.zip</name>
				<description>elec_new.pdf is the overlay, print file, and my attempt to combine them.</description>
				<filesize>86002</filesize>
				<filetype>application/zip</filetype>
				<adddate>1183058649</adddate>
				<submitted_by>1768812</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>234975: Archive.zip</old_value>
				<date>1183058653</date>
				<by>jakep36</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>234976: Archive.zip</old_value>
				<date>1183058653</date>
				<by>jakep36</by>
			</item>
			<item>
				<field>File Deleted</field>
				<old_value>234967: </old_value>
				<date>1183056237</date>
				<by>jakep36</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>234967: Archive.zip</old_value>
				<date>1183055430</date>
				<by>jakep36</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1744777">
		<submitted_by>verraf</submitted_by>
		<submitted_date>2007-06-28 05:48</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Could not find font(COSName{F0}) in map={}</summary>
		<detail>Hi,  
trying to extract text from a PDF file, I've receiving this error:  
java.io.IOException: Error: Could not find font(COSName{F0}) in map={} </detail>
		<existingfiles>
			<file>
				<id>234915</id>
				<name>0598647270004.pdf</name>
				<description>Sample file</description>
				<filesize>49218</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1183034937</adddate>
				<submitted_by>1820955</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>234915: 0598647270004.pdf</old_value>
				<date>1183034937</date>
				<by>verraf</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1735902">
		<submitted_by>scop</submitted_by>
		<submitted_date>2007-06-12 10:23</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="775780">PDModel.AcroForm</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Character encoding/appearance issues when filling forms</summary>
		<detail>When filling a text field with non-ASCII characters such as in my surname "SkyttÃ¤" and saving the document in a UTF-8 environment, something goes wrong with the appearance of the text.

The value itself seems to be stored correctly, but when opening the doc, the appearance of "Ã¤" is not that, but rather something which happens when UTF-8 is mistakenly treated as ISO-8859-1 (two garbage characters).

PDAppearance uses the platform default encoding in quite a few places which apparently has potential to mess things up.  In particular, insertGeneratedAppearance() generates a PrintWriter from an OutputStream without specifying the encoding.  In fact, if I hack that to use ISO-8859-1, the appearance of my "Ã¤" case is correct, but that won't obviously work with anything else than chars that are valid ISO-8859-1.

In which char encoding should the value be written to the appearance stream (at end of insertGeneratedAppearance())?</detail>
	</artifact>
	<artifact id="1730509">
		<submitted_by>s-mc</submitted_by>
		<submitted_date>2007-06-03 23:43</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Exception while silent printing a PDF file</summary>
		<detail>While silently printing a PDF, I found the following stacktrace in the log - and the printout was missing some parts (an image and separator lines in a table).

Is there a fix for this? Or maybe a problem with the PDF?

Stacktrace reads as follows:

java.lang.IllegalArgumentException: filtered.length != (width*bpp + 1) * height, 18228 18277w,h,bpp=124,49,3
	at org.pdfbox.pdmodel.graphics.predictor.Uptimum.checkBufsiz(Uptimum.java:52)
	at org.pdfbox.pdmodel.graphics.predictor.Uptimum.decode(Uptimum.java:141)
	at org.pdfbox.pdmodel.graphics.xobject.PDPixelMap.getRGBImage(PDPixelMap.java:154)
	at org.pdfbox.util.operator.pagedrawer.Invoke.process(Invoke.java:81)
	at org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:452)
	at org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:215)
	at org.pdfbox.util.operator.pagedrawer.Invoke.process(Invoke.java:182)
	at org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:452)
	at org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:215)
	at org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:174)
	at org.pdfbox.pdfviewer.PageDrawer.drawPage(PageDrawer.java:104)
	at org.pdfbox.pdmodel.PDPage.print(PDPage.java:741)
	at sun.print.RasterPrinterJob.printPage(RasterPrinterJob.java:1935)
	at sun.print.RasterPrinterJob.print(RasterPrinterJob.java:1430)
	at sun.print.RasterPrinterJob.print(RasterPrinterJob.java:1246)
	at org.pdfbox.pdmodel.PDDocument.silentPrint(PDDocument.java:856)</detail>
		<follow_ups>
			<item>
				<date>1204898856</date>
				<sender>shahzadmasud</sender>
				<text>Logged In: YES 
user_id=2030105
Originator: NO

I am getting a different exception, 

Exception in thread "main" java.lang.RuntimeException: Not yet implemented
	at org.pdfbox.pdmodel.font.PDType0Font.drawString(PDType0Font.java:75)
	at org.pdfbox.pdfviewer.PageDrawer.showCharacter(PageDrawer.java:160)
	at org.pdfbox.util.PDFStreamEngine.showString(PDFStreamEngine.java:409)
	at org.pdfbox.util.operator.ShowText.process(ShowText.java:64)
	at org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:452)
	at org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:215)
	at org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:174)
	at org.pdfbox.pdfviewer.PageDrawer.drawPage(PageDrawer.java:104)
	at org.pdfbox.pdmodel.PDPage.print(PDPage.java:741)
	at sun.print.RasterPrinterJob.printPage(RasterPrinterJob.java:1785)
	at sun.print.RasterPrinterJob.print(RasterPrinterJob.java:1334)
	at sun.print.RasterPrinterJob.print(RasterPrinterJob.java:1196)
	at org.pdfbox.pdmodel.PDDocument.silentPrint(PDDocument.java:856)
	at org.pdfbox.PrintPDF.main(PrintPDF.java:104)
</text>
			</item>
			<item>
				<date>1204898808</date>
				<sender>shahzadmasud</sender>
				<text>Logged In: YES 
user_id=2030105
Originator: NO

I am getting a different exception, 

Exception in thread "main" java.lang.RuntimeException: Not yet implemented
	at org.pdfbox.pdmodel.font.PDType0Font.drawString(PDType0Font.java:75)
	at org.pdfbox.pdfviewer.PageDrawer.showCharacter(PageDrawer.java:160)
	at org.pdfbox.util.PDFStreamEngine.showString(PDFStreamEngine.java:409)
	at org.pdfbox.util.operator.ShowText.process(ShowText.java:64)
	at org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:452)
	at org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:215)
	at org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:174)
	at org.pdfbox.pdfviewer.PageDrawer.drawPage(PageDrawer.java:104)
	at org.pdfbox.pdmodel.PDPage.print(PDPage.java:741)
	at sun.print.RasterPrinterJob.printPage(RasterPrinterJob.java:1785)
	at sun.print.RasterPrinterJob.print(RasterPrinterJob.java:1334)
	at sun.print.RasterPrinterJob.print(RasterPrinterJob.java:1196)
	at org.pdfbox.pdmodel.PDDocument.silentPrint(PDDocument.java:856)
	at org.pdfbox.PrintPDF.main(PrintPDF.java:104)
</text>
			</item>
			<item>
				<date>1183425056</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

please attach or upload(ftp.pdfbox.org) the PDF and I'll take a look.

Thanks,
Ben</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1729311">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2007-05-31 22:37</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>how to extract only text from pdf file?</summary>
		<detail>i want extract only text from pdf file withot image
which class can be use or can any show me sample code?</detail>
	</artifact>
	<artifact id="1728767">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2007-05-31 00:26</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Exception while parsing a input stream using 'PDFParser'</summary>
		<detail>Hi,

While parsing an InputStream I m getting the following Exception ...

Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/log4j/Category

Can any one tell .. what is the problem ???</detail>
		<existingfiles>
			<file>
				<id>231189</id>
				<name>SamplePDFBoxReader.java</name>
				<description>sample PDF Parser</description>
				<filesize>2245</filesize>
				<filetype>application/octet-stream</filetype>
				<adddate>1180596406</adddate>
				<submitted_by>100</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>231189: SamplePDFBoxReader.java</old_value>
				<date>1180596406</date>
				<by>nobody</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1723353">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2007-05-22 04:06</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Have fix for a bug with images</summary>
		<detail>Hello there.

I was using PDFBox to extract text from documents. A few days ago I had an issue with one of them: PDFTextStripper  was unable to parse some pages, there were simply empty. After a quick analysis I found that those pages were with embedded images. Then I have downloaded latest sources and started debugging the PDFStreamParser. 

The issue was in a specific PDF format, the image data look like this 
ID xxxxxxxxxxxxxxxxxEI Q.

It seems that you've got a lot of troubles with parsing an EI operator. I have fixed this and wanted to give you a solution. Please let me know if you are interesting.

---
Thanks,
Andrew.</detail>
		<follow_ups>
			<item>
				<date>1195161907</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

kubovich,

Yes I am interested in the patch, please send it along, I'll email you as well.

Ben</text>
			</item>
			<item>
				<date>1181626104</date>
				<sender>skyf</sender>
				<text>Logged In: YES 
user_id=1815045
Originator: NO

I have this problem too.
please send the solution to me,thanks.
my email: skyf.chen@hotmail.com </text>
			</item>
			<item>
				<date>1179832056</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

Forgot to provide my email: kubovich @ inbox.ru</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1722594">
		<submitted_by>doublep-enw</submitted_by>
		<submitted_date>2007-05-21 05:10</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>IOException on parsing a PDF file</summary>
		<detail>When parsing the attached file, PDFBox throws the following exception:

java.io.IOException: expected='/' actual='?'--1 org.pdfbox.io.PushBackInputStream@159f498
    at org.pdfbox.pdfparser.BaseParser.parseCOSName(BaseParser.java:774)
    at org.pdfbox.pdfparser.BaseParser.parseCOSDictionary(BaseParser.java:217)
    at org.pdfbox.pdfparser.BaseParser.parseDirObject(BaseParser.java:910)
    at org.pdfbox.pdfparser.PDFParser.parseObject(PDFParser.java:432)
    at org.pdfbox.pdfparser.PDFParser.parse(PDFParser.java:176)

The file does look strange inside, but PDF viewers don't seem to care.</detail>
		<existingfiles>
			<file>
				<id>229983</id>
				<name>NotIndexedDocument.pdf</name>
				<description>unparseable file</description>
				<filesize>8728</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1179749459</adddate>
				<submitted_by>1798071</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>229983: NotIndexedDocument.pdf</old_value>
				<date>1179749459</date>
				<by>doublep-enw</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1714655">
		<submitted_by>wasabii</submitted_by>
		<submitted_date>2007-05-07 17:01</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>PDFDocument.save is really slow</summary>
		<detail>It's really slow. Like, it takes way too long. I think I solved the issue. You keep a list called objectsToWrite, it is an ArrayList... but when processing it you constantly remove the first element of it. This operation results in a shift of the list, since it's array based. It's slow. Doing it for each element is very slow. A LinkedList is more appropriate for these operations.

Additionally, in this code:


        if( !writtenObjects.contains( object ) &amp;&amp;
            !objectsToWrite.contains( object ) &amp;&amp;
            !actualsAdded.contains( actual ) )

You are attempting to find an object in it. A lot. This method runs a ton of times. Since you were using a List, .Contains causes a complete list scan.

I replaced objectsToWrite with a LinkedList. This solved the first problem. I added a seperate variable called objectsToWriteSet of type HashSet. I then maintain them side by side, using the HashSet for searching. Java probably has a single class that can accomplish both of these. I'd also question the need in the first place to verify that the object does not already exist.

Patch is attached.</detail>
		<follow_ups>
			<item>
				<date>1179490920</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

I guess you are looking for java.util.LinkedHashSet.</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>228258</id>
				<name>patch.txt</name>
				<description>patch</description>
				<filesize>2538</filesize>
				<filetype>text/plain</filetype>
				<adddate>1178582513</adddate>
				<submitted_by>689036</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>228258: patch.txt</old_value>
				<date>1178582513</date>
				<by>wasabii</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1714574">
		<submitted_by>wasabii</submitted_by>
		<submitted_date>2007-05-07 13:13</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>PDDocument.save should not close stream</summary>
		<detail>Calling PDDocument.save should not close the underlying stream. It is not appropiate in this location and causes double-close issues when the calling code assumes responsibility for the stream.</detail>
	</artifact>
	<artifact id="1670221">
		<submitted_by>kenneykirk</submitted_by>
		<submitted_date>2007-02-27 10:18</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>PdfToImage produces unreadable image</summary>
		<detail>I trying to create a tif image from a PDF that was produced using iText.  I tried PdfToImage to produce jpg and png.  Both format options produce a black image.  I tried passing the results of PDPage..convertToImage() to the ImageIO and JAI methods with the same results.  I have uploaded the pdf in question(test2.pdf) to the ftp site.</detail>
		<follow_ups>
			<item>
				<date>1174951178</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

it's related to 1673358
</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>218016</id>
				<name>test2.pdf</name>
				<description>itext pdf</description>
				<filesize>50271</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1172600329</adddate>
				<submitted_by>1730562</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1177598049</date>
				<by>kenneykirk</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>218016: test2.pdf</old_value>
				<date>1172600329</date>
				<by>kenneykirk</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1706893">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2007-04-24 13:04</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>setAnnotations method not functioning</summary>
		<detail>The following code:

List annotList = page.getAnnotations();
Vector deletions = new Vector();
                    
for(int j=0;j&lt;annotList.size();j++){
  COSDictionary cdict = ((PDAnnotation)annotList.get(j)).getDictionary();
  if(cdict.getDictionaryObject("V")==null){
    deletions.add((PDAnnotation)annotList.get(j));
  }
                    
  annotList.removeAll(deletions);
                    
  page.setAnnotations(annotList);


is resulting in the page not actually changing the annotation list.  The page originally contains 2 annotations.  After the removeAll call, annotList contains a list of one PDAnnotation.  After the page.setAnnotations call, getAnnotations() still has a size of 2, not 1.


email: atodd@eoriginal.com</detail>
	</artifact>
	<artifact id="1706491">
		<submitted_by>wrwessel</submitted_by>
		<submitted_date>2007-04-24 04:31</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>ExtractText errors</summary>
		<detail>Wrote a batch file to convert over 500 powerpoint files I had to pdf (using DocumentConverter.py and OpenOffice) then the batch file uses ExtractText.exe to extract the text.  Most of these files converted fine but I had 4 files where ExtractText could not get any text and threw various error messages.  I have attached one of these as a sample.  Using version 0.7.4 from 19/5/07 and same problem with 0.7.3 release.  It is easy enough for me to convert the last 4 by hand, but might be a bug you can fix.

Many thanks for the ExtractText program, saved a long time converting these by hand.</detail>
		<follow_ups>
			<item>
				<date>1178155986</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

I've looked at the attached PDF, technically I believe the root issue is that OpenOffice is not correctly writing the PDF.  I have submitted the issue with those guys and can be monitored by going to http://www.openoffice.org/issues/show_bug.cgi?id=76879

The issue is that the PDF is sometimes missing the 'endstream' tag; which PDFBox looks for to tell it that the stream is done.

My rule of thumb is that if Acrobat can open it, then so should PDFBox, so this is still a 'bug' with PDFBox.  Fixing this is possible but is not straightforward, so it may be a little bit before it is complete.</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>226382</id>
				<name>Sample.zip</name>
				<description></description>
				<filesize>216343</filesize>
				<filetype>application/x-zip-compressed</filetype>
				<adddate>1177414312</adddate>
				<submitted_by>1556758</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>226382: Sample.zip</old_value>
				<date>1177414312</date>
				<by>wrwessel</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1702313">
		<submitted_by>matthillsdon</submitted_by>
		<submitted_date>2007-04-17 09:21</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="293147"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>CMap parse fails during text extract</summary>
		<detail>Unfortunately I cannot supply the PDF file.  Any suggestion appreciated.

Exception in thread "main" java.io.IOException: Error: expected the end of a dictionary.
        at org.fontbox.cmap.CMapParser.parseNextToken(CMapParser.java:220)
        at org.fontbox.cmap.CMapParser.parse(CMapParser.java:79)
        at org.pdfbox.pdmodel.font.PDFont.parseCmap(PDFont.java:535)
        at org.pdfbox.pdmodel.font.PDFont.encode(PDFont.java:387)
        at org.pdfbox.util.PDFStreamEngine.showString(PDFStreamEngine.java:325)
        at org.pdfbox.util.operator.ShowText.process(ShowText.java:64)
        at org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:452)
        at org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:215)
        at org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:174)
        at org.pdfbox.util.PDFTextStripper.processPage(PDFTextStripper.java:336)
        at org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:259)
        at org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:216)
        at org.pdfbox.util.PDFTextStripper.getText(PDFTextStripper.java:149)
...</detail>
		<follow_ups>
			<item>
				<date>1178886631</date>
				<sender>matthillsdon</sender>
				<text>Logged In: YES 
user_id=701665
Originator: YES

Sorry for the delay.  Updated extract output at

http://www.hillsdon.net/CMapDocument3.pdf

Stack trace for text extract as before:

Exception in thread "main" java.io.IOException: Error: expected the end of a dictionary.
        at org.fontbox.cmap.CMapParser.parseNextToken(CMapParser.java:269)
        at org.fontbox.cmap.CMapParser.parse(CMapParser.java:117)
...

Thanks, Matt.</text>
			</item>
			<item>
				<date>1178842975</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

Hi Matt,

any update?

Ben</text>
			</item>
			<item>
				<date>1178154029</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

ok, I looked at it some more and I'd like to have you get the latest nightly build and try to run ExtractText on your original PDF again.  If it doesn't work then run the ExtractFonts again(using the nightly build) and post the results.

The issue is that there is some extra data at the end of the Cmap stream and tonight I happened to fix an issue with parsing and having extra data at the end of the stream for a different user.  So I don't know if this is the same issue but I'd rather have you try the nightly build than have me chasing a ghost.

Ben</text>
			</item>
			<item>
				<date>1178121555</date>
				<sender>matthillsdon</sender>
				<text>Logged In: YES 
user_id=701665
Originator: YES

Output with the decryption here
http://www.hillsdon.net/CMapDocument2.pdf

Thanks.</text>
			</item>
			<item>
				<date>1178061580</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

shoot, I think your document was encrypted.  It needs to be decrypted for the extraction to work, I should have had that as part of the program.  Can you take the attached program and add the lines after the PDDocument.load call

if( doc.isEncrypted() )
{
    doc.decrypt( "" );
}

and resend the CMapDocument.pdf

Thanks,
Ben</text>
			</item>
			<item>
				<date>1177946665</date>
				<sender>matthillsdon</sender>
				<text>Logged In: YES 
user_id=701665
Originator: YES

Result too large to attach.  Please see
http://www.hillsdon.net/CMapDocument.pdf</text>
			</item>
			<item>
				<date>1177635482</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

Attached is a simple java program that will create a new pseudo PDF document that contains just the Font information.  Please run it on the problem PDF and upload the resulting CmapDocument.pdf 

It is a simple command line program, first compile then run it like this

java ExtractFonts my.pdf

Let me know if you have any questions getting it running.

Ben
File Added: ExtractFonts.java</text>
			</item>
			<item>
				<date>1177515596</date>
				<sender>matthillsdon</sender>
				<text>Logged In: YES 
user_id=701665
Originator: YES

No change unfortunately - with FontBox-0.2.0-dev-20070424 the stack trace is identical.
Exception in thread "main" java.io.IOException: Error: expected the end of a dictionary.
        at org.fontbox.cmap.CMapParser.parseNextToken(CMapParser.java:269)
...

</text>
			</item>
			<item>
				<date>1177375090</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

I just update the CMapParser with a bug from 

https://sourceforge.net/forum/message.php?msg_id=4269559

please get tonights FontBox build and give it a try

http://www.fontbox.org/fontbox</text>
			</item>
			<item>
				<date>1176904403</date>
				<sender>matthillsdon</sender>
				<text>Logged In: YES 
user_id=701665
Originator: YES

Hi Ben, thanks for the quick response.

Using the nightly build [1] the stack trace is the same except for line numbers:

Exception in thread "main" java.io.IOException: Error: expected the end of a dictionary.
        at org.fontbox.cmap.CMapParser.parseNextToken(CMapParser.java:269)
        at org.fontbox.cmap.CMapParser.parse(CMapParser.java:117)
        at org.pdfbox.pdmodel.font.PDFont.parseCmap(PDFont.java:509)
        at org.pdfbox.pdmodel.font.PDFont.encode(PDFont.java:380)
        at org.pdfbox.util.PDFStreamEngine.showString(PDFStreamEngine.java:325)
        at org.pdfbox.util.operator.ShowText.process(ShowText.java:64)
        at org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:452)
        at org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:215)
        at org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:174)
        at org.pdfbox.util.PDFTextStripper.processPage(PDFTextStripper.java:336)
        at org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:259)
        at org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:216)
        at org.pdfbox.util.PDFTextStripper.getText(PDFTextStripper.java:149)
...

Extracting the fonts sounds ideal.

[1] http://www.pdfbox.org/dist/PDFBox-0.7.4-dev-20070418.zip</text>
			</item>
			<item>
				<date>1176827479</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

Hi Matt,

Can you try one for me first; upgrade to the latest nightly build of PDFBox( http://www.pdfbox.org/dist/ ) and see if this is still an issue.  There have been some changes to the CMAPParser.

If it is still an issue I think we can write a simple program to extract just the fonts from your PDF and that should be enough for me to fix the bug.

Ben</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>226802</id>
				<name>ExtractFonts.java</name>
				<description>A simple program to extract fonts and CMap streams</description>
				<filesize>1721</filesize>
				<filetype>text/java</filetype>
				<adddate>1177635482</adddate>
				<submitted_by>601708</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>226802: ExtractFonts.java</old_value>
				<date>1177635482</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1700854">
		<submitted_by>weihang</submitted_by>
		<submitted_date>2007-04-14 19:45</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>TextPosition overlaps (PDFStreamEngine)</summary>
		<detail>Characters in words are rendered too close together. In fact some of them actually overlap. The same PDF document opened in Preview/Acrobat Reader doesn't have the issue.

PDFOperator{BT} []
PDFOperator{Tf} [COSName{F4}, COSInt{1}]
PDFOperator{Tm} [COSInt{8}, COSInt{0}, COSInt{0}, COSInt{8}, COSFloat{588.8953}, COSFloat{22.3465}]
PDFOperator{Tr} [COSInt{0}]
PDFOperator{Tc} [COSInt{0}]
PDFOperator{TJ} [COSArray{[COSString{2?}, COSInt{1}]}]
&gt;&gt;&gt; Current Test Position: (588.8953, 771.3545)
&gt;&gt;&gt; 2 (ShowString)
&gt;&gt;&gt; Current Text Position: (593.3433, 771.3545)
&gt;&gt;&gt; Current Text Position: (593.3353, 771.3545)
PDFOperator{TJ} [COSArray{[COSString{?}, COSInt{556}]}]
&gt;&gt;&gt; Current Text Position: (593.3353, 771.3545)
&gt;&gt;&gt; 9 (ShowString)
&gt;&gt;&gt; Current Text Position (597.7833, 771.3545)
...
...
...

PDFToImage output: http://img267.imageshack.us/my.php?image=arank29pm1.jpg

Source PDF: http://announcements.bursamalaysia.com/edms/subweb.nsf/7f04516f8098680348256c6f0017a6bf/f16f22a43d8a4aca4825727600101223/$FILE/ARANK-AnnualReport2006%20(661KB).pdf
</detail>
		<follow_ups>
			<item>
				<date>1176739600</date>
				<sender>weihang</sender>
				<text>Logged In: YES 
user_id=307423
Originator: YES

I re-implemented the ShowString method in PDFStreamEngine using the algorithm described in PDF 1.6 Reference. I believe the algorithm is the same as in current ShowString implementaion. My method returns the same results whereby some TextPositions overlap. Does anyone know why this is so?</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1697803">
		<submitted_by>narusas</submitted_by>
		<submitted_date>2007-04-10 09:27</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Somtimes, TextPosition have incorrect value ..</summary>
		<detail>http://pds5.egloos.com/pds/200704/11/83/a0013083_01044382.gif

http://pds4.egloos.com/pds/200704/11/83/a0013083_01040791.gif

look first image, and second image. 

in first image, Right red rectangle's x position is incorrect. (X:375)

x position of another textin same column  is over 390.


problem pdf is http://pds5.egloos.com/pds/200704/11/83/problem.pdf

</detail>
	</artifact>
	<artifact id="1690947">
		<submitted_by>wasabii</submitted_by>
		<submitted_date>2007-03-29 15:58</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>NullReferenceException in PDFMergerUtility</summary>
		<detail>NullReferenceException

   at org.pdfbox.util.PDFMergerUtility.mergeAcroForm(PDDocument , PDAcroForm , PDAcroForm )
   at org.pdfbox.util.PDFMergerUtility.appendDocument(PDDocument destination, PDDocument source)
   at ISIS.Util.Documents.PdfDocument.AppendImpl(Document d) in 

This seems to go hand in hand with getAcroForm() on DocumentCatalog now returning null when there is no AcroForm. Probably a missing null check in there.</detail>
		<follow_ups>
			<item>
				<date>1180276911</date>
				<sender>wargre</sender>
				<text>Logged In: YES 
user_id=1802598
Originator: NO

Have same error. i've added the fix i made in patches

btw it happends when you try to merge a pdf without form in one containing form.
 another fix is to add a dummy field in the source pdf.
</text>
			</item>
			<item>
				<date>1179328776</date>
				<sender>oisincvera</sender>
				<text>Logged In: YES 
user_id=1794616
Originator: NO

Â¿no solution for this issue?</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1685908">
		<submitted_by>ransacker</submitted_by>
		<submitted_date>2007-03-22 04:35</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Nashuatec created PDF not editable (no error)</summary>
		<detail>When scanning a document to PDF using a Nashuatec printer/scanner/copier, the PDPageContentStream.drawString() method does not add the text to the document. No exception is thrown.

The same code works for all other PDFs I have tested, this is a specific issue with at least 2 models of Nashuatec scanners. It creates PDF 1.3 documents.

Here is such a document: ftp://ftp.pdfbox.org/20070321102908273.pdf</detail>
	</artifact>
	<artifact id="1682614">
		<submitted_by>ransacker</submitted_by>
		<submitted_date>2007-03-17 04:02</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Merging documents without text gives error</summary>
		<detail>Whenever I try to merge 2 documents that do not have text but exist out of a scanned text image, I get a NullPointerException. 

Exception in thread "main" java.lang.NullPointerException 
at org.pdfbox.pdmodel.interactive.documentnavigation.outline.PDOutlineNode.setParent(PDOutlineNode.java:123) 
at org.pdfbox.pdmodel.interactive.documentnavigation.outline.PDOutlineNode.appendChild(PDOutlineNode.java:134) 
at org.pdfbox.util.PDFMergerUtility.appendDocument(PDFMergerUtility.java:259) 
at org.pdfbox.util.PDFMergerUtility.mergeDocuments(PDFMergerUtility.java:148) 
 
</detail>
		<follow_ups>
			<item>
				<date>1180202904</date>
				<sender>tgdonovan</sender>
				<text>Logged In: YES 
user_id=1782478
Originator: NO

I have a related problem. My file does have text in it, but what it doesn't have is a bookmark. If I add a bookmark to the source file, then it does get appended to the destination file. But if there is no bookmark in the source file, then I get the error. My issue is in the .net version</text>
			</item>
			<item>
				<date>1174512579</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

This fix worked for me. Replace lines 256-258 in the PDFMergerUtility.java class with:

                
                if (first != null) {
                	
	                PDOutlineItem clonedFirst = new PDOutlineItem( (COSDictionary)cloneForNewDocument( 
	                        destination, first ));
	                destOutline.appendChild( clonedFirst );

                
                }
                
</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1682230">
		<submitted_by>jochen-seifarth</submitted_by>
		<submitted_date>2007-03-16 08:46</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="775780">PDModel.AcroForm</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>PDFMergerUtility may create non-unique AcroForm field names</summary>
		<detail>org.pdfbox.util.PDFMergerUtility may in may cases create non-unique field names.

Field names that already exist are replaced with "dummyFieldName" + sequenetial number. However, there is no check if that field name (i.e. "dummyFieldName" + sequenetial number)already exists. When executing several merges with different instances of PDFMergerUtility that each have their own counters there may be a collision of names causing chaos on merged forms.

Attached is a patch that should guarantee to pick a unique field name.

</detail>
		<existingfiles>
			<file>
				<id>220893</id>
				<name>PDFMergerUtility.diff</name>
				<description>PDFMergerUtility.java diff against HEAD</description>
				<filesize>1207</filesize>
				<filetype>application/octet-stream</filetype>
				<adddate>1174059979</adddate>
				<submitted_by>1745303</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>220893: PDFMergerUtility.diff</old_value>
				<date>1174059980</date>
				<by>jochen-seifarth</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1682201">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2007-03-16 08:15</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Error decrypting document</summary>
		<detail>I get the following exception: 

WARNING: IOException while extracting full-text of file:/home/sintek/papers/baseweb/ECRA/ELERAP_100_cfl.pdf
java.io.IOException: Error decrypting document, details: Error: The supplied password does not match either the owner or user password in the document.
        at org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:208)
        at org.pdfbox.util.PDFTextStripper.getText(PDFTextStripper.java:149)
[...]

when trying to extract the text from the attached PDF. It has no password as far as I can tell, it opens fine in acrobat, gpdf, pdftotext, etc. pdfinfo tells me it's encrypted though. 

Any ideas? </detail>
		<follow_ups>
			<item>
				<date>1192688204</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

I noticed something regarding this, the PDDocument.decrypt("") does not set the encryption dictionary to null. This results in PDFTextStripper to try and decrypt the document again (I think it looks at the encryptionDictionary?). If allready decrypted, this results in a simular error as stated in this ticket.
I now decrypt with the following code: 
pdDoc.decrypt( passWord ); //password is mostly an empty string
pdDoc.setEncryptionDictionary(null);
pdDoc.getDocument().getTrailer().setItem("Encrypt",null);
That goes fine.</text>
			</item>
			<item>
				<date>1178872387</date>
				<sender>gromgull</sender>
				<text>Logged In: YES 
user_id=185674
Originator: NO

Ah - indeed it is. I was confused since both acrobat and gpdf, etc. were able to show the content without prompting me for a password. So you can encrypte PDFs for text-extraction? Isn't that a hopeless idea? Oh well :) </text>
			</item>
			<item>
				<date>1178758424</date>
				<sender>ng_aldridge</sender>
				<text>Logged In: YES 
user_id=1111818
Originator: NO

This file *is* encrypted. I just loaded it up into Acrobat and it's secured with a password.</text>
			</item>
			<item>
				<date>1174058597</date>
				<sender>gromgull</sender>
				<text>Logged In: YES 
user_id=185674
Originator: NO

Ah yes - that was me reporting that. Sorry for not logging in. </text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>220882</id>
				<name>ELERAP_100_cfl.pdf</name>
				<description>"encrypted" PDF file</description>
				<filesize>9371</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1174058152</adddate>
				<submitted_by>100</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>220882: ELERAP_100_cfl.pdf</old_value>
				<date>1174058152</date>
				<by>nobody</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1678356">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2007-03-11 09:07</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Multiple embedded files</summary>
		<detail>Please help.  I'm new to PDF Box, I'm trying to attach multiple files to a PDF using the sample code, but it's not working.  Can you please provide some examples on how to do this?  Please reply to:

pquinto@qualcomm.com

Thank you for your help :o)</detail>
	</artifact>
	<artifact id="1673358">
		<submitted_by>code_slave</submitted_by>
		<submitted_date>2007-03-04 00:44</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>crash with some pdf files</summary>
		<detail>Source breakpoint occurred at line 84 of Invoke.java.
	at org.pdfbox.util.operator.pagedrawer.Invoke.process(Invoke.java:84)
	at org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:452)
	at org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:215)
	at org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:174)
	at org.pdfbox.pdfviewer.PageDrawer.drawPage(PageDrawer.java:105)
	at org.pdfbox.pdmodel.PDPage.convertToImage(PDPage.java:657)
	at VFW.Viewers.visualDocumentViewer.recoverimagefromdb(visualDocumentViewer.java:634)
	at VFW.Viewers.visualDocumentViewer.mav$recoverimagefromdb(visualDocumentViewer.java:86)
	at VFW.Viewers.visualDocumentViewer$1.run(visualDocumentViewer.java:690)
	at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:189)
	at java.awt.EventQueue.dispatchEvent(EventQueue.java:478)
	at java.awt.EventDispatchThread.pumpOneEventForHierarchy(EventDispatchThread.java:234)
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:184)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:178)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:170)
	at java.awt.EventDispatchThread.run(EventDispatchThread.java:100)</detail>
	</artifact>
	<artifact id="1672556">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2007-03-02 08:45</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="817859">PDFReader</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>IllegalPathException in FillNonZeroRule.java (nightly build)</summary>
		<detail>Hello,
I was just trying out the latest build of your project (current release wasn't printing shaded backgrounds) and it crashed with the following exception when trying to print.


Exception in thread "main" java.awt.geom.IllegalPathStateException: missing initial moveto in path definition
        at java.awt.geom.GeneralPath.needRoom(GeneralPath.java:144)
        at java.awt.geom.GeneralPath.closePath(GeneralPath.java:255)
        at org.pdfbox.util.operator.pagedrawer.FillNonZeroRule.process(FillNonZeroRule.java:71)
        at org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:494)
        at org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:477)
        at org.pdfbox.util.operator.pagedrawer.FillNonZeroAndStrokePath.process(FillNonZeroAndStrokePath.java:62)
        at org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:494)
        at org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:215)
        at org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:174)
        at org.pdfbox.pdfviewer.PageDrawer.drawPage(PageDrawer.java:105)
        at org.pdfbox.pdmodel.PDPage.print(PDPage.java:741)
        at sun.print.RasterPrinterJob.printPage(RasterPrinterJob.java:1785)
        at sun.print.RasterPrinterJob.print(RasterPrinterJob.java:1334)
        at sun.print.RasterPrinterJob.print(RasterPrinterJob.java:1196)
        at org.pdfbox.pdmodel.PDDocument.print(PDDocument.java:829)
        at org.pdfbox.PrintPDF.main(PrintPDF.java:108)



After commenting out line 71 in FillNonZeroRule.java, it printed OK (including shaded background).



     67         List subPaths = drawer.getLineSubPaths();
     68         for( int i=0; i&lt;subPaths.size(); i++ )
     69         {
     70             GeneralPath subPath = (GeneralPath)subPaths.get( i );
     71             //subPath.closePath(); &lt;&lt;&lt;&lt;---------------&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
     72             graphics.fill( subPath );
     73         }
     74         //else



Thanks
</detail>
		<follow_ups>
			<item>
				<date>1193752332</date>
				<sender>sector9</sender>
				<text>Logged In: YES 
user_id=337685
Originator: NO

I investigated this a bit further. The error can be avoided by checking the current point of the path before closing it. The getCurrentPoint() returns null only if the path is empty. Applying the following change to both files creates a workaround for this problem.

diff -r PDFBox-0.7.4/src/org/pdfbox/util/operator/pagedrawer/FillEvenOddRule.java PDFBox-0.7.4-dev-20071030/src/org/pdfbox/util/operator/pagedrawer/FillEvenOddRule.java
70,71c70,73
&lt;             subPath.closePath();
&lt;             graphics.fill( subPath );
---
&gt;             if (subPath.getCurrentPoint() != null) {
&gt;                 subPath.closePath();
&gt;                 graphics.fill( subPath );
&gt;             }
</text>
			</item>
			<item>
				<date>1193748467</date>
				<sender>sector9</sender>
				<text>Logged In: YES 
user_id=337685
Originator: NO

This error message still occurs in PDFBox-0.7.4-dev-20071030. The exception is thrown only when an empty GeneralPath is closed. A short example:

    GeneralPath path = new GeneralPath();
    path.closePath();

Commenting out the calls to closePath() makes the error disappear but I do not know if failing to close the path affects the way that valid paths are drawn. Correct solution would be to not create empty paths.</text>
			</item>
			<item>
				<date>1184251926</date>
				<sender>kieselhorst</sender>
				<text>Logged In: YES 
user_id=1223774
Originator: NO

Stacktrace from nightly build 20070712... obviously it's the same problem.

Exception in thread "main" java.awt.geom.IllegalPathStateException: missing initial moveto in path definition
	at java.awt.geom.Path2D$Float.needRoom(Path2D.java:263)
	at java.awt.geom.Path2D.closePath(Path2D.java:1752)
	at org.pdfbox.util.operator.pagedrawer.FillNonZeroRule.process(FillNonZeroRule.java:71)
	at org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:452)
	at org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:215)
	at org.pdfbox.util.operator.pagedrawer.Invoke.process(Invoke.java:182)
	at org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:452)
	at org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:215)
	at org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:174)
	at org.pdfbox.pdfviewer.PageDrawer.drawPage(PageDrawer.java:105)
	at org.pdfbox.pdmodel.PDPage.convertToImage(PDPage.java:657)</text>
			</item>
			<item>
				<date>1173230293</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

see barcode_test.pdf</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1665394">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2007-02-21 08:27</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Table borders not printing correctly</summary>
		<detail>Printing table borders (created with 0.5f width in itext, every cell has it's border) - border lines look strange when printed -- there should be solid border (Acrobat Reader renders it correctly), but instead we get thin double border around each cell, almost as if there was some cellspacing between the cells.

</detail>
		<existingfiles>
			<file>
				<id>217054</id>
				<name>mathompp-table-borders.pdf.pdf</name>
				<description>Sample PDF</description>
				<filesize>4046</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1172075269</adddate>
				<submitted_by>100</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>217054: mathompp-table-borders.pdf.pdf</old_value>
				<date>1172075270</date>
				<by>nobody</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1664179">
		<submitted_by>bonnin</submitted_by>
		<submitted_date>2007-02-20 02:39</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Imbricated XObjects with the same name</summary>
		<detail>The text extraction whith PDFTextStripper cannot extract text from pages which contains imbricated XObject whith the same name. 
 
I have found why :  
 
In org.pdfbox.util.operator.process there is a test to avoid recursive loops while processing the "Do" operator : 
 
if (inProcess.contains(name)) 
{ 
// avoid recursive loop 
return; 
} 
 
The test is made with the XObject's name although all XObjects of a document can have the same name ! 

I provide a document whith the problem but don't publish it because it's copyrighted !</detail>
		<existingfiles>
			<file>
				<id>216839</id>
				<name>aa459.415-2.pdf</name>
				<description>Document whose text cannot be extracted</description>
				<filesize>166503</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1171967989</adddate>
				<submitted_by>1542451</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>216839: aa459.415-2.pdf</old_value>
				<date>1171967989</date>
				<by>bonnin</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1663446">
		<submitted_by>pbeichert</submitted_by>
		<submitted_date>2007-02-19 04:55</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>landscape parsing problem</summary>
		<detail>I create an index which contains all pdf-bookmarks and the corrensponding pages of the bookmarks. This works fine when all pages are in portrait. As soon as one page inbetween is in landscape mode, the returned page number is null.

The result is the same with PDFBox 0.7.3 and with PDFBox-0.7.4-dev.

Here is the code I use:

//first map all pages to the page number:
List allPages =doc.getDocumentCatalog().getAllPages(); 
HashMap&lt;Object, Integer&gt; page2PageNumber = new HashMap&lt;Object, Integer&gt;(); 
for (int i=0;i&lt;allPages.size();i++) 
{ 
 page2PageNumber.put(allPages.get(i), new Integer(i+1));
}


PDDocumentOutline bookmark = doc.getDocumentCatalog().getDocumentOutline();
PDOutlineItem current = bookmark.getFirstChild();

// now iterate through the bookmarks
...
System.out.println("Page Nr: " + current.page2PageNumber.get(current.findDestinationPage(doc))
+ " Title = " current.getTitle());


</detail>
	</artifact>
	<artifact id="1639406">
		<submitted_by>pavanmaru</submitted_by>
		<submitted_date>2007-01-19 02:24</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>overlapping of text in image</summary>
		<detail>Hi,

while converting pdf 2 image using convertToImage method, image is created but in image some text are overlapping. So can u help me plz?

thanks.
pavan</detail>
		<existingfiles>
			<file>
				<id>212028</id>
				<name>6 all fatty acids are not equal discriminationa in plant membrane lipids.pdf</name>
				<description>pdf2image</description>
				<filesize>187114</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1169202267</adddate>
				<submitted_by>1464670</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1171459966</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>212028: 6 all fatty acids are not equal discriminationa in plant membrane lipids.pdf</old_value>
				<date>1169202268</date>
				<by>pavanmaru</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1649236">
		<submitted_by>lag0m0rph</submitted_by>
		<submitted_date>2007-01-31 14:16</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Overlay generates invalid PDF</summary>
		<detail>I'm trying to use Overlay to combine two PDFs and the resultant PDF appears to have dangling references to objects not in the PDF so is therefore invalid. The error message I get is "Could not find the ColorSpace named 'Cs6overlay'." This object is defined by PDFBox during the Overlay operation. There is an object Cs6 in the PDF in the foreground. I get this error with the last release code as well as the nightly build 0.7.4-dev-20070130.

I will attach a PDF that when used as an overlay will exhibit the problem with any general PDF I tried to overlay it on.
</detail>
		<existingfiles>
			<file>
				<id>213941</id>
				<name>badoverlay.pdf</name>
				<description>file that when used as overlay generates invalid PDF</description>
				<filesize>5917</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1170281772</adddate>
				<submitted_by>1705880</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1171459940</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>213941: badoverlay.pdf</old_value>
				<date>1170281773</date>
				<by>lag0m0rph</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1641283">
		<submitted_by>trejkaz</submitted_by>
		<submitted_date>2007-01-21 21:30</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>PDFToImage prints every word at the start of the line</summary>
		<detail>I'm evaluating using PDFBox to convert PDF files to image files.  However, on the most basic test I could come up with, PDFToImage fails to create the result I would expect.

Each word on the line is printed at the very start of the line, the text overlapping the previous words.

Attached is a simple PDF file containing nothing but "Hello World!", which was created via FOP.
</detail>
		<follow_ups>
			<item>
				<date>1169445878</date>
				<sender>trejkaz</sender>
				<text>Logged In: YES 
user_id=639492
Originator: YES

Would this happen to be related to PDFStreamEngine.java line 334?

            //todo, handle horizontal displacement
</text>
			</item>
			<item>
				<date>1169443887</date>
				<sender>trejkaz</sender>
				<text>Logged In: YES 
user_id=639492
Originator: YES

Attaching the PNG file resulting from rendering this PDF.

File Added: helloworld1.png</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>212437</id>
				<name>helloworld1.png</name>
				<description>helloworld1.png (result of running PDFToImage on helloworld.png)</description>
				<filesize>5488</filesize>
				<filetype>image/png</filetype>
				<adddate>1169443887</adddate>
				<submitted_by>639492</submitted_by>
			</file>
			<file>
				<id>212436</id>
				<name>helloworld.pdf</name>
				<description>helloworld.pdf</description>
				<filesize>4775</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1169443828</adddate>
				<submitted_by>639492</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1171404674</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>212437: helloworld1.png</old_value>
				<date>1169443887</date>
				<by>trejkaz</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>212436: helloworld.pdf</old_value>
				<date>1169443828</date>
				<by>trejkaz</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1654684">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2007-02-07 15:45</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Parsing Logic uses wrong object</summary>
		<detail>java.io.IOException: Error: Unknown annotation type COSInt{3789}org.pdfbox.pdmodel.interactive.annotation.PDAnnotation.createAnnotation(PDAnnotation.java:154)
  at org.pdfbox.pdmodel.PDPage.getAnnotations(PDPage.java:713) 



See myPDF-nate.pdf

Ben</detail>
		<change_log>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1171404641</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1657738">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2007-02-11 22:39</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Cannot extract thai text</summary>
		<detail>Gets garbage characters</detail>
	</artifact>
	<artifact id="1649509">
		<submitted_by>midragan</submitted_by>
		<submitted_date>2007-02-01 00:36</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>bookmark creation error</summary>
		<detail>There is an error in mergeDocuments() function, which comes from appendDocument() function, regarding
bookmarks.

If you try to merge 3 or more pdfs (or append them in a cycle), all pdfs having bookmarks, the resulting pdf's
outline contains all bookmarks, but in a random order starting with the second one. They point to the right page, but they are not ordered as the result of combining outlines of pdfs which are merged.

I have tried with the pdfs from PDFBox documentation and with both functions mentioned above. The documents are merged OK, the problem is only with outline.

Since the pdfs I have tried are available, I don't think is necessary to upload them again.</detail>
		<follow_ups>
			<item>
				<date>1182752609</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

If you merge a lot of PDFs (20-70), each having the same structure and Bookmarks with the same name, it sometimes happens, that some of the bookmarks dissapear in the resulting PDF...</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1635950">
		<submitted_by>tweakerbee</submitted_by>
		<submitted_date>2007-01-15 07:09</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="1">1</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>spaces lost</summary>
		<detail>During extraction in certain PDF documents spaces will be lost. I have attached a file in which this problem occurs.

Here PDFTextStripper.getText() returns:
gaandeofincidenteleaardis
whereas it should be
gaande of incidentele aard is

I have used the nightly build from today (15-01-07) but the problem still remains.</detail>
		<follow_ups>
			<item>
				<date>1168968266</date>
				<sender>tweakerbee</sender>
				<text>Logged In: YES 
user_id=1625706
Originator: YES

The problem turned out to be in the splitting algorithm. The values here turned out slightly too conservative.
Using 0.33f (33%) turned out to yield proper results. This might split words that are not meant to be split, however.

Maybe you could set this through a field in the TextStripper? So you can adjust your application slightly easier to your specific needs.

This issue can be considered solved.

startOfNextWordX = endOfLastTextX + (wordSpacing* 0.33f);
startOfNextWordX = endOfLastTextX + (((wordSpacing+lastWordSpacing)/2f)* 0.33f);</text>
			</item>
			<item>
				<date>1168954849</date>
				<sender>tweakerbee</sender>
				<text>Logged In: YES 
user_id=1625706
Originator: YES

My previous assumption turned out to be incorrect.
The context.showString() function is responsible for outputting the string. If anywhere, it should probably output the space here.</text>
			</item>
			<item>
				<date>1168954318</date>
				<sender>tweakerbee</sender>
				<text>Logged In: YES 
user_id=1625706
Originator: YES

I am currently looking into the problem myself as well, but my complete lack of experience with the Portable Document Format as well as being a novice Java programmer are rather limiting.

What I have found out so far is this:
The problem is in the TextStream where a TJ operator is being used to show the glyphs. There are no spaces encoded in the file, but instead it uses some character spacing information to space out the words. An example is included below.
The code I believe is responsible for extracting the text here (org.pdfbox.util.operator.ShowTextGlyph) does not contain any code to determine whether or not a space is needed. Would it be useful to add this here? And will this not breakdown the org.pdfbox.util.PDFHighlighter? (I have noticed some difficulties with certain PDF documents and I wouldn't be surprised if the difference in character count originates from this issue.)

Any help would be greatly appreciated.

Example code in STB336.pdf:
[(7?????)-278(???)-278(?	?"&amp;????)-278(???)-278(???)-278( ??\))-278(???)-278(??????\)????\012)-278( ?????'??&amp;)-278(??)]TJ</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>211376</id>
				<name>STB336.pdf</name>
				<description>document with erronous text extraction</description>
				<filesize>51425</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1168873797</adddate>
				<submitted_by>1625706</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>priority</field>
				<old_value>5</old_value>
				<date>1168968266</date>
				<by>tweakerbee</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>211376: STB336.pdf</old_value>
				<date>1168873798</date>
				<by>tweakerbee</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1636410">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2007-01-15 18:56</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>cannot extract japanese text </summary>
		<detail>If you parse the attached Japanese pdf file, you get the text but with (I guess) a wrong encoding. Other pdf text stripper extract the text correctly.</detail>
		<follow_ups>
			<item>
				<date>1194577451</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

Hi, 

I have the same problem.

The problem has occured because pdfbox don't read descendantfonts(CIDFont) of Type0(Composition) Font and select the standardEncoder.


</text>
			</item>
			<item>
				<date>1187844975</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

can anyone tell me that....PDFBox can extract japanese pdf???</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1630939">
		<submitted_by>code_slave</submitted_by>
		<submitted_date>2007-01-08 14:02</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="817859">PDFReader</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>using java 1.5/1.4 getting unknown compression error </summary>
		<detail>when expanding a pdf file  I am getting the folowing error on expansion, even though the pdf opens fine in every other tool.



java.util.zip.ZipException: unknown compression method
java.util.zip.InflaterInputStream:140&gt;&gt; read()---------&gt;InflaterInputStream.java
org.pdfbox.filter.FlateFilter:97&gt;&gt; decode()---------&gt;FlateFilter.java
org.pdfbox.cos.COSStream:290&gt;&gt; doDecode()---------&gt;COSStream.java
org.pdfbox.cos.COSStream:235&gt;&gt; doDecode()---------&gt;COSStream.java
org.pdfbox.cos.COSStream:170&gt;&gt; getUnfilteredStream()---------&gt;COSStream.java
org.pdfbox.pdfparser.PDFStreamParser:101&gt;&gt; &lt;init&gt;()---------&gt;PDFStreamParser.java
org.pdfbox.cos.COSStream:132&gt;&gt; getStreamTokens()---------&gt;COSStream.java
org.pdfbox.util.PDFStreamEngine:202&gt;&gt; processSubStream()---------&gt;PDFStreamEngine.java
org.pdfbox.util.PDFStreamEngine:174&gt;&gt; processStream()---------&gt;PDFStreamEngine.java
org.pdfbox.pdfviewer.PageDrawer:105&gt;&gt; drawPage()---------&gt;PageDrawer.java
org.pdfbox.pdmodel.PDPage:657&gt;&gt; convertToImage()---------&gt;PDPage.java
VFW.Viewers.visualDocumentViewer:632&gt;&gt; recoverimagefromdb()---------&gt;visualDocumentViewer.java
VFW.Viewers.visualDocumentViewer:86&gt;&gt; mav$recoverimagefromdb()---------&gt;visualDocumentViewer.java
VFW.Viewers.visualDocumentViewer$1:688&gt;&gt; run()---------&gt;visualDocumentViewer.java
java.awt.event.InvocationEvent:189&gt;&gt; dispatch()---------&gt;InvocationEvent.java
java.awt.EventQueue:478&gt;&gt; dispatchEvent()---------&gt;EventQueue.java
java.awt.EventDispatchThread:234&gt;&gt; pumpOneEventForHierarchy()---------&gt;EventDispatchThread.java
java.awt.EventDispatchThread:184&gt;&gt; pumpEventsForHierarchy()---------&gt;EventDispatchThread.java
java.awt.EventDispatchThread:178&gt;&gt; pumpEvents()---------&gt;EventDispatchThread.java
java.awt.EventDispatchThread:170&gt;&gt; pumpEvents()---------&gt;EventDispatchThread.java
java.awt.EventDispatchThread:100&gt;&gt; run()---------&gt;EventDispatchThread.java
</detail>
		<follow_ups>
			<item>
				<date>1168305975</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

O.K I have tracked it to encrypted pdf.

If the master password is set , but the pdf document allows various  access options, it appears the code does not clearly check the options &amp; calls decompression of sections that are encrypted, hence the error.
I can be fixed by tightning up on the code checking the "security" flags</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>category_id</field>
				<old_value>100</old_value>
				<date>1168564129</date>
				<by>code_slave</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1633676">
		<submitted_by>code_slave</submitted_by>
		<submitted_date>2007-01-11 17:08</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="817859">PDFReader</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>pdfbox crashing.</summary>
		<detail>

	at org.pdfbox.util.operator.pagedrawer.Invoke.process(Invoke.java:84)
	at org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:452)
	at org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:215)
	at org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:174)
	at org.pdfbox.pdfviewer.PageDrawer.drawPage(PageDrawer.java:105)
	at org.pdfbox.pdmodel.PDPage.convertToImage(PDPage.java:657)
	at VFW.Viewers.visualDocumentViewer.recoverimagefromdb(visualDocumentViewer.java:632)
	at VFW.Viewers.visualDocumentViewer.mav$recoverimagefromdb(visualDocumentViewer.java:86)
	at VFW.Viewers.visualDocumentViewer$1.run(visualDocumentViewer.java:688)


i have submitted a sample pdf file  to your email account that i cannot post here
 ,
basically it was working fine in  0.7.3, then i thought i would get clever and clean it up in adobe professional to reduce it's size.

so i did then wrote it out as being compatible with reader 4.0 and later.

now it works fine in every other adobe reader but will not read in PDFBOX
</detail>
		<follow_ups>
			<item>
				<date>1168723771</date>
				<sender>code_slave</sender>
				<text>Logged In: YES 
user_id=413743
Originator: YES

O.K ,it's something to do with the image,
in the package the code is returning a null   awtImage , even though the type seems to have been setup correcty by the code
so when it hits the :
     int width = awtImage.getWidth();

it throws a null exception, but I don't know enough about the code to find why.

 if( xobject instanceof PDXObjectImage )
        {
            PDXObjectImage image = (PDXObjectImage)xobject;
            try
            {
                BufferedImage awtImage = image.getRGBImage();
                Matrix ctm = drawer.getGraphicsState().getCurrentTransformationMatrix();
               //error here at next line
                int width = awtImage.getWidth();
                int height = awtImage.getHeight();
</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1632884">
		<submitted_by>jmawebb</submitted_by>
		<submitted_date>2007-01-10 19:37</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>NPE in PDFMergerUtility</summary>
		<detail>I'm seeing exceptions like this when merging certain documents:


java.lang.NullPointerException
        at org.pdfbox.util.PDFMergerUtility.mergeAcroForm(PDFMergerUtility.java:412)
        at org.pdfbox.util.PDFMergerUtility.appendDocument(PDFMergerUtility.java:210)
        at org.pdfbox.util.PDFMergerUtility.mergeDocuments(PDFMergerUtility.java:148)


It looks like it's fine just to add this check on line 208 of PDFMergerUtility.java, unless there's a deeper cause:

-        else
+        else if( srcAcroForm != null )

</detail>
		<follow_ups>
			<item>
				<date>1180455207</date>
				<sender>bwingenroth</sender>
				<text>Logged In: YES 
user_id=843437
Originator: NO

I had this same problem and found the same result.  There are certain PDFs which, for reasons unknown to me, cause this NullPointerException and don't get appended to the resulting PDF file.  I downloaded and modified the PDFMergerUtility.java file in PDFBox-0.7.4-dev-20070525 and now I get the expected behavior: no NPE and the PDF gets appended to the resulting PDF.

I don't have any insight regarding any deeper causes for the NPE, but I can confirm that this suggested patch worked for me.</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1630272">
		<submitted_by>bowzie</submitted_by>
		<submitted_date>2007-01-07 20:17</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>NullPointerException when extracting text</summary>
		<detail>I got the following exception when stripping a PDF 
 
java.lang.NullPointerException 
at org.pdfbox.pdmodel.PDPageNode.getAllKids(PDPageNode.java:194) 
at org.pdfbox.pdmodel.PDPageNode.getAllKids(PDPageNode.java:182) 
at org.pdfbox.pdmodel.PDDocumentCatalog.getAllPages(PDDocumentCatalog.java:162) 
at org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:220) 
at org.pdfbox.util.PDFTextStripper.getText(PDFTextStripper.java:140) 
... 
 
The PDF is a bit odd in that it appears to have no text, pictures or anything else of any use, but it says it has 8 pages. I can mail it if you want. 

PDF sent separately.
</detail>
		<follow_ups>
			<item>
				<date>1185548695</date>
				<sender>jalonsogaleon</sender>
				<text>Logged In: YES 
user_id=1854910
Originator: NO

I have the same problem when extracting text using pdfbox0.7.4

java.lang.NullPointerException.atorg.pdfbox.pdmodel.PDPageNode.getAllKids(PDPageNode.java:194)

I can mail pdf if you want

regards</text>
			</item>
			<item>
				<date>1171056079</date>
				<sender>brzrkr</sender>
				<text>Logged In: YES 
user_id=1489602
Originator: NO

This happens so often in our app that we installed a NPE exception handler that scans the stack looking for getAllKids, and maps it into an IOException.</text>
			</item>
			<item>
				<date>1169133557</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

I am getting the same error. However, it appears to happen only on a Windows machine. Same code is working fine on Linux. I wonder if this has to do anything with the CR/LF differences on the platform.



</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1620717">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2006-12-22 02:42</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>error with PDFToImage</summary>
		<detail>Trying to convert to images the pages of a pdf file, i get the following error (we are using version 0.7.3). I attach the pdf file that produces the error.

My email is jesus.criado@altia.es

C:\Documents and Settings\Administrador\Escritorio\prueba&gt;java org.pdfbox.PDFToI
mage -imageType png fichero1.pdf
java.io.IOException: Unknown stream filter:COSName{JBIG2Decode}
        at org.pdfbox.filter.FilterManager.getFilter(FilterManager.java:116)
        at org.pdfbox.cos.COSStream.doDecode(COSStream.java:262)
        at org.pdfbox.cos.COSStream.doDecode(COSStream.java:235)
        at org.pdfbox.cos.COSStream.getUnfilteredStream(COSStream.java:170)
        at org.pdfbox.pdmodel.common.PDStream.createInputStream(PDStream.java:22
6)
        at org.pdfbox.pdmodel.common.PDStream.getByteArray(PDStream.java:481)
        at org.pdfbox.pdmodel.graphics.xobject.PDPixelMap.getRGBImage(PDPixelMap
.java:138)
        at org.pdfbox.util.operator.pagedrawer.Invoke.process(Invoke.java:81)
        at org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:
452)
        at org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java
:215)
        at org.pdfbox.util.operator.pagedrawer.Invoke.process(Invoke.java:182)
        at org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:
452)
        at org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java
:215)
        at org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:17
4)
        at org.pdfbox.pdfviewer.PageDrawer.drawPage(PageDrawer.java:104)
        at org.pdfbox.pdmodel.PDPage.convertToImage(PDPage.java:657)
        at org.pdfbox.PDFToImage.main(PDFToImage.java:183)
Exception in thread "main" java.lang.NoClassDefFoundError: org/fontbox/cmap/CMap
Parser
        at org.pdfbox.pdmodel.font.PDFont.parseCmap(PDFont.java:534)
        at org.pdfbox.pdmodel.font.PDFont.encode(PDFont.java:387)
        at org.pdfbox.util.PDFStreamEngine.showString(PDFStreamEngine.java:325)
        at org.pdfbox.util.operator.ShowText.process(ShowText.java:64)
        at org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:
452)
        at org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java
:215)
        at org.pdfbox.util.operator.pagedrawer.Invoke.process(Invoke.java:182)
        at org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:
452)
        at org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java
:215)
        at org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:17
4)
        at org.pdfbox.pdfviewer.PageDrawer.drawPage(PageDrawer.java:104)
        at org.pdfbox.pdmodel.PDPage.convertToImage(PDPage.java:657)
        at org.pdfbox.PDFToImage.main(PDFToImage.java:183)

C:\Documents and Settings\Administrador\Escritorio\prueba&gt;</detail>
		<follow_ups>
			<item>
				<date>1168219587</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

Two comments

1)"NoClassDefFoundError: org/fontbox/cmap/CMap" Make sure you have FontBox in your classpath

2)JBIG2 is not supported by Java yet, but you can vote for it to get implemented!

http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4799898

Ben</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1618712">
		<submitted_by>kierantopping</submitted_by>
		<submitted_date>2006-12-19 03:03</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Error expected floating point number actual='91.-59'</summary>
		<detail>Hello,

When attempting to extract text from the following file (http://www.luckit.org/pdfbox/uk-case-of-william-goodwin.pdf), I observe the following exception (full stack trace at end of report):

  java.io.IOException: Error expected floating point number actual='91.-59'

I'm using version 0.7.3 (on linux, jre 1.5.06). I'll happily supply any more information that you might require.

Many thanks in advance,

Kieran

Full stack trace:
java.io.IOException: Error expected floating point number actual='91.-59'
at org.pdfbox.cos.COSFloat.&lt;init&gt;(COSFloat.java:77)
at org.pdfbox.cos.COSNumber.get(COSNumber.java:106)
at org.pdfbox.pdfparser.PDFStreamParser.parseNextToken(PDFStreamParser.java:259)
at org.pdfbox.pdfparser.PDFStreamParser.parse(PDFStreamParser.java:115)
at org.pdfbox.cos.COSStream.getStreamTokens(COSStream.java:133)
at org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:202)
at org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:174)
at org.pdfbox.util.PDFTextStripper.processPage(PDFTextStripper.java:336)
at org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:259)
at org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:216)
at org.pdfbox.util.PDFTextStripper.getText(PDFTextStripper.java:149)
</detail>
		<follow_ups>
			<item>
				<date>1168970352</date>
				<sender>tweakerbee</sender>
				<text>Logged In: YES 
user_id=1625706
Originator: NO

This should probably be 91.-59.

Forgot to take out the dash here. Should read: "This should probably be 91.59"</text>
			</item>
			<item>
				<date>1168970217</date>
				<sender>tweakerbee</sender>
				<text>Logged In: YES 
user_id=1625706
Originator: NO

Your PDF is flawed. On the first page there is an instruction
91.-59 Tz
that is incorrect. Tz will set the textscaling (default = 100), but has to do so with a double. This should probably be 91.-59. It appears to be just before the text "Emma", so maybe you can fix it with Adobe Acrobat or another editor.

I doubt you'll get useful results though, the PDF is mostly image with OCR'ed text behind it. It will contain many errors.

HTH,
Matthijs</text>
			</item>
			<item>
				<date>1166527247</date>
				<sender>kierantopping</sender>
				<text>Logged In: YES 
user_id=1672087
Originator: YES

Small extra snippet: Unlike request 1610268, downgrading to 0.7.2 does NOT fix/workaround this issue.</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1610268">
		<submitted_by>fotb</submitted_by>
		<submitted_date>2006-12-06 09:04</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>ArrayIndexOutOfBoundsException:4</summary>
		<detail>Does anyone know if there has been any resolution to the
ArrayIndexOutOfBoundsException:4  problem.
I have extracted text from 300 pdfs using  0.7.3.  All extractions were
successful except 3.  I recieved this error message when trying to extract
text from these 3 pds (java.lang.ArrayIndexOutOfBoundsException:4).  I am
able to open the pdfs fine and they have no special security applied to
them.  Any ideas as to why PDFBOX 0.7.3 is hiccuping while trying to
process these files?  I am not able to send the pdf over the internet because it is government property.
</detail>
		<follow_ups>
			<item>
				<date>1165498684</date>
				<sender>fotb</sender>
				<text>Logged In: YES 
user_id=1662347
Originator: YES

I loaded PDFBox-0.7.2 and the problem went away.  The 3 pdfs that were raising errors with PDFBox-0.7.3 are now being successfully processed with text being extracted from them.  Something in PDFBox-0.7.3 is causing the problem.  If anyone else is having the ArrayIndexOutOfBoundsException is, I would suggest loading PDFBox-0.7.2 and see if you still get the error.  Thanks  Ben for your time.  Be well. </text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1608840">
		<submitted_by>jlynch16</submitted_by>
		<submitted_date>2006-12-04 15:24</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Rectangle Printing when there's a Transform on an XObject</summary>
		<detail>In this test, I have "shrunken" 4 pdf pages into 1 pdf page. What this gives us is 4 XObject's that hold all the data for each original page. When shrunken, the text gets printed correctly, but the "rectangle" highlights on the page do not.  It's as if the graphics object doesn't know of the transformation at run time.

In adobe, it looks fine, but in pdfBOX it gets rendered incorrectly.

-Jim Lynch
1360 Studios</detail>
		<existingfiles>
			<file>
				<id>205766</id>
				<name>4PP-Highlighting.pdf</name>
				<description>4 Pages shrunken down into 1 pdf Page, with highlights.</description>
				<filesize>2497</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1165274675</adddate>
				<submitted_by>1657744</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>205766: 4PP-Highlighting.pdf</old_value>
				<date>1165274675</date>
				<by>jlynch16</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1608735">
		<submitted_by>jlynch16</submitted_by>
		<submitted_date>2006-12-04 12:12</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Printing Rectangles on rotated pages</summary>
		<detail>When the source PDF has a rotation set to it (ie. the page is landscape) rectangles do not draw in the correct area for printing.

You can see the error with the attached PDF.</detail>
		<existingfiles>
			<file>
				<id>205735</id>
				<name>rotatedWithRectangle.pdf</name>
				<description>This file has a rectangle on it that is being drawn in the wrong spot. </description>
				<filesize>991</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1165263177</adddate>
				<submitted_by>1657744</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>205735: rotatedWithRectangle.pdf</old_value>
				<date>1165263177</date>
				<by>jlynch16</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1608659">
		<submitted_by>jlynch16</submitted_by>
		<submitted_date>2006-12-04 09:38</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>CurrentColor in PageDrawer Doesn't Restore Properly</summary>
		<detail>First, I would like to suggest removing currentColor from PageDrawer and just using the colorSpaces from the current graphicsState, but to consider this, please see my comments in the forum:

http://sourceforge.net/forum/forum.php?thread_id=1624117&amp;forum_id=267205

It seems to me that in the pdf format, when a graphics state's stroking and non-stroking colors get changed, then a restore graphics state occurs, the stroking and non-stroking colors should be reverted back to black. 

Example: (Draw a red rectangle, then draw text in a pdf)

Adobe reader will be able to draw a red rectangle, and then you will see the black text.  

In PDFBox, both the rectangle and text will be RED because currentColor in PageDrawer never gets reset back to black.  My workaround is in the above forum post. It works for my purposes at the moment, but a more complete solutions using the colorSpaces, and updating the clone funciton of PDGraphicsState should be implemented.    

I would have submitted a patch, but I'm getting weird errors when it comes to using the restored color spaces from the restored graphicsState.  

-Jim Lynch
1360 Studios </detail>
		<existingfiles>
			<file>
				<id>205716</id>
				<name>CurrentColorProblem.pdf</name>
				<description>Original File that when printed, gets RED text printed instead of BLACK</description>
				<filesize>966</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1165254137</adddate>
				<submitted_by>1657744</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>205716: CurrentColorProblem.pdf</old_value>
				<date>1165254138</date>
				<by>jlynch16</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1608652">
		<submitted_by>jlynch16</submitted_by>
		<submitted_date>2006-12-04 09:26</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Printing Landscape</summary>
		<detail>Right now, when you try to print a PDDocument that has rotated pags (ie. /ROTATE 90) it does not currently take the rotation into consideration when figuring out the PageFormat for a given page. I fixed this and submitted a patch for it. 

I wasn't sure if you needed a bug written up in order to process and close the fix via the patch submitted.

-Jim Lynch
1360 Studios







</detail>
	</artifact>
	<artifact id="1607100">
		<submitted_by>rimmeraj</submitted_by>
		<submitted_date>2006-12-01 12:31</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>NPE on convertToImage</summary>
		<detail>Command...

java -classpath PDFBox-0.7.3.jar:FontBox-0.1.0.jar org.pdfbox.PDFToImage cert.pdf

java.lang.NullPointerException
        at org.pdfbox.util.operator.pagedrawer.Invoke.process(Invoke.java:84)
        at org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:452)
        at org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:215)
        at org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:174)
        at org.pdfbox.pdfviewer.PageDrawer.drawPage(PageDrawer.java:104)
        at org.pdfbox.pdmodel.PDPage.convertToImage(PDPage.java:657)
        at org.pdfbox.PDFToImage.main(PDFToImage.java:183)
</detail>
		<follow_ups>
			<item>
				<date>1168724315</date>
				<sender>code_slave</sender>
				<text>Logged In: YES 
user_id=413743
Originator: NO

I'm seeeing the same.
but it's been over  a month since you reported it , and still not fixed in the cvs

</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>205325</id>
				<name>cert.pdf</name>
				<description>Doc that was failing..</description>
				<filesize>21465</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1165005119</adddate>
				<submitted_by>486338</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>205325: cert.pdf</old_value>
				<date>1165005119</date>
				<by>rimmeraj</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1606058">
		<submitted_by>siranovic</submitted_by>
		<submitted_date>2006-11-30 05:57</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="293147"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>print problem</summary>
		<detail>We have a problem printing a PDF using PDFBox-0.7.3
Error we get is ( java.lang.RuntimeException: Not yet implemented ) after silentPrint() method. Our PDF contains croatian letters and jpeg pictures. If it can somehow help you we generate this document with Apache FOP. I attached a sample PDF.

Regards
Davor Siranovic</detail>
		<existingfiles>
			<file>
				<id>205110</id>
				<name>error.pdf</name>
				<description>PDF with croatian letters and jpeg</description>
				<filesize>45575</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1164895058</adddate>
				<submitted_by>1657556</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>205110: error.pdf</old_value>
				<date>1164895058</date>
				<by>siranovic</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1604022">
		<submitted_by>samueel</submitted_by>
		<submitted_date>2006-11-27 12:48</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="817859">PDFReader</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="9">9</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Alignment Error</summary>
		<detail>When I print/display a pdf by the PDFReader, the text is showed not justified, but when I load this PDF into the Acrobat Reader, the docdument is showed/printed correctly justified.

Please take a look.

Following the attached PDF file...

Thanks a lot.</detail>
		<existingfiles>
			<file>
				<id>204652</id>
				<name>auto_bug_1604022.pdf</name>
				<description>Sample file</description>
				<filesize>7270</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1164660941</adddate>
				<submitted_by>1001043</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>204652: auto_bug_1604022.pdf</old_value>
				<date>1164660941</date>
				<by>samueel</by>
			</item>
			<item>
				<field>File Deleted</field>
				<old_value>204651: </old_value>
				<date>1164660913</date>
				<by>samueel</by>
			</item>
			<item>
				<field>priority</field>
				<old_value>5</old_value>
				<date>1164660675</date>
				<by>samueel</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>204651: auto.pdf</old_value>
				<date>1164660482</date>
				<by>samueel</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1589598">
		<submitted_by>rpresser</submitted_by>
		<submitted_date>2006-11-02 14:50</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Can't ExtractImages an IndexedCMYK raster</summary>
		<detail>I have a lot of these images; they're part of my
everyday workflow. CMYK images are extremely common in
the prepress world; IndexedCMYK is too, because it is
the default setting for Adobe Distiller when the total
number of unique colors is less than 256.

C:\temp\PDFBox-0.7.3\bin&gt;ExtractImages.exe 797-14-1.pdf
Writing image:Im1-2
Exception in thread "main"
java.lang.UnsupportedOperationException
        at
java.awt.image.ColorModel.createCompatibleSampleModel(ColorModel.java:684)
        at
java.awt.image.ColorModel.createCompatibleWritableRaster(ColorModel.java:677)
        at
org.pdfbox.pdmodel.graphics.xobject.PDPixelMap.getRGBImage(PDPixelMap.java:143)
        at
org.pdfbox.pdmodel.graphics.xobject.PDPixelMap.write2OutputStream(PDPixelMap.java:166)
        at
org.pdfbox.pdmodel.graphics.xobject.PDXObjectImage.write2file(PDXObjectImage.java:118)
        at
org.pdfbox.ExtractImages.extractImages(ExtractImages.java:161)
        at
org.pdfbox.ExtractImages.main(ExtractImages.java:72)

----
It turns out that my sample image 797-14-1.pdf was too
large to upload to sourceforge.  I created a reduced
resolution version of it, and got a different exception
when attempting to ExtractImages on it:

C:\temp&gt;extractimages test.pdf
Writing image:R29-1
Exception in thread "main" java.io.IOException: Not
implemented
        at
org.pdfbox.pdmodel.graphics.color.PDDeviceCMYK.createColorModel(PDDeviceCMYK.java:135)
        at
org.pdfbox.pdmodel.graphics.xobject.PDPixelMap.getRGBImage(PDPixelMap.java:142)
        at
org.pdfbox.pdmodel.graphics.xobject.PDPixelMap.write2OutputStream(PDPixelMap.java:166)
        at
org.pdfbox.pdmodel.graphics.xobject.PDXObjectImage.write2file(PDXObjectImage.java:118)
        at
org.pdfbox.ExtractImages.extractImages(ExtractImages.java:161)
        at
org.pdfbox.ExtractImages.main(ExtractImages.java:72)
</detail>
		<follow_ups>
			<item>
				<date>1195167057</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

Note: see 797-14-1.pdf</text>
			</item>
			<item>
				<date>1195162379</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

Note: requested original pdf file from rpresser</text>
			</item>
			<item>
				<date>1162507879</date>
				<sender>rpresser</sender>
				<text>Logged In: YES 
user_id=298615

Email me at rpresser AT gmail DOT com to get the original
PDF, if desired.</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>201210</id>
				<name>test.pdf</name>
				<description>example PDF</description>
				<filesize>99717</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1162507830</adddate>
				<submitted_by>298615</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>201210: test.pdf</old_value>
				<date>1162507830</date>
				<by>rpresser</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1587745">
		<submitted_by>kajiro</submitted_by>
		<submitted_date>2006-10-31 01:05</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="556660">writing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>PDF Document cut German Umlauts </summary>
		<detail>I use the class TextToPDF for create a PDF Document
from a text file. That operates correctly with a simply
text. But when i use german umlauts in the text like
Ã¤,Ã¶,Ã¼ or ÃŸ the PDF Document cut this letters. 

Attached is a sample document contaning four words with
incorrectly umlauts! </detail>
		<follow_ups>
			<item>
				<date>1174608284</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

To the anonymous poster, did you mean for both PDF links to be the same?

Ben</text>
			</item>
			<item>
				<date>1174162272</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

For PDF file, which contains accented Latin1
characters:
    http://acl.ldc.upenn.edu//P/P06/P06-2052.pdf
I get a u with umlauts converted into "currency1u"
(look at the first name on the first page).

For the following file containing Japanese characters:
     http://acl.ldc.upenn.edu//P/P06/P06-2052.pdf
I get error:
     java.io.IOException: Unknown encoding for 'H'
I also can't seem to cut and past the form.
</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>200742</id>
				<name>bsp.pdf</name>
				<description>Umlauts are incorrect</description>
				<filesize>958</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1162285534</adddate>
				<submitted_by>1629421</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>200742: bsp.pdf</old_value>
				<date>1162285534</date>
				<by>kajiro</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1585354">
		<submitted_by>cfmfluit</submitted_by>
		<submitted_date>2006-10-26 13:38</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Regression: ArrayIndexOutOfBoundsException in PDFBox 0.7.3</summary>
		<detail>While extracting the text from a PDF using
PDFTextStripper I get the following exception:

Exception in thread "Thread-6"
java.lang.ArrayIndexOutOfBoundsException: 4
	at
org.fontbox.cmap.CMapParser.parseNextToken(CMapParser.java:294)
	at org.fontbox.cmap.CMapParser.parse(CMapParser.java:103)
	at
org.pdfbox.pdmodel.font.PDFont.parseCmap(PDFont.java:535)
	at org.pdfbox.pdmodel.font.PDFont.encode(PDFont.java:387)
	at
org.pdfbox.util.PDFStreamEngine.showString(PDFStreamEngine.java:325)
	at
org.pdfbox.util.operator.ShowTextGlyph.process(ShowTextGlyph.java:80)
	at
org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:452)
	at
org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:215)
	at
org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:174)
	at
org.pdfbox.util.PDFTextStripper.processPage(PDFTextStripper.java:336)
	at
org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:259)
	at
org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:216)
	at
org.pdfbox.util.PDFTextStripper.getText(PDFTextStripper.java:149)
	at
org.semanticdesktop.aperture.extractor.pdf.PdfExtractor.processDocument(PdfExtractor.java:91)
	at
org.semanticdesktop.aperture.extractor.pdf.PdfExtractor.extract(PdfExtractor.java:52)
	at
org.semanticdesktop.aperture.extractor.util.ThreadedExtractorWrapper$ExtractionThread.run(ThreadedExtractorWrapper.java:158)

I'm using PDFBox 0.7.3. With version 0.7.2 text
extraction on this file worked fine.

The PDF file is not online anymore and I don't know
whether the author would appreciate it if I put it
online somewhere, but I can send it to you if you like
(mail me at chris AT aduna-software.com).</detail>
		<follow_ups>
			<item>
				<date>1165520173</date>
				<sender>junprevo</sender>
				<text>Logged In: YES 
user_id=1663139
Originator: NO

Hi, ben 
I did some work on this bug. don't know how to send my code to you. I will just paste my fix here. 

inside CMapParser.java

in the method
private Object parseNextToken(PushbackInputStream is)
        throws IOException
{
 ..........

 case 60: // '&lt;'
        {
            int theNextByte = is.read();
            if(theNextByte == 60)
            {
                Map &lt;Object, Object&gt; result = new HashMap &lt;Object, Object&gt; ();
                for(Object key = parseNextToken(is); (key instanceof LiteralName) &amp;&amp; key != "&gt;&gt;"; key = parseNextToken(is))
                {
                    Object value = parseNextToken(is);
                    result.put(((LiteralName)key).name, value);
                }

                retval = result;
                break;
            }
            // increase array size from 4 to 6 
            byte [] buffer = new byte[6];
            int multiplyer = 16;
            int bufferIndex = -1;
            for(;theNextByte != -1 &amp;&amp; theNextByte != 62; theNextByte = is.read())
            {
                int intValue = 0;
                if(theNextByte &gt;= 48 &amp;&amp; theNextByte &lt;= 57)
                    intValue = theNextByte - 48;
                else
                if(theNextByte &gt;= 65 &amp;&amp; theNextByte &lt;= 70)
                    intValue = (10 + theNextByte) - 65;
                else
                if(theNextByte &gt;= 97 &amp;&amp; theNextByte &lt;= 102)
                    intValue = (10 + theNextByte) - 97;
                else
                    throw new IOException("Error: expected hex character and not " + (char)theNextByte + ":" + theNextByte);
                intValue *= multiplyer;
                if(multiplyer == 16)
                {
                    bufferIndex++;
                    multiplyer = 1;
                } else
                {
                    multiplyer = 16;
                }
                
                if(bufferIndex==buffer.length)
                {  
                   byte [] tempbuffer=buffer;
                   buffer = new byte [buffer.length+2];
                   for(int ts=0; ts&lt;tempbuffer.length;ts++)
                   {
                     buffer[ts]=tempbuffer[ts];  
                   }
                }
                buffer[bufferIndex] += intValue;
                
                
            }

            byte finalResult[] = new byte[bufferIndex + 1];
            System.arraycopy(buffer, 0, finalResult, 0, bufferIndex + 1);
            retval = finalResult;
            break;
        }
............ 

}</text>
			</item>
			<item>
				<date>1165424772</date>
				<sender>fotb</sender>
				<text>Logged In: YES 
user_id=1662347
Originator: NO

I have also this problem.

Does anyone know if there has been any resolution to the ArrayIndexOutOfBoundsException:4  problem.
I have extracted text from 300 pdfs using  0.7.3.  All extractions were successful except 3.  I recieved this error message when trying to extract text from these 3 pds (java.lang.ArrayIndexOutOfBoundsException:4).  I am able to open the pdfs fine and they have no special security applied to them.  Any ideas as to why PDFBOX 0.7.3 is hiccuping while trying to process these files?:


	    
</text>
			</item>
			<item>
				<date>1165424146</date>
				<sender>fotb</sender>
				<text>Logged In: YES 
user_id=1662347
Originator: NO

I have also this problem.

Does anyone know if there has been any resolution to the ArrayIndexOutOfBoundsException:4  problem.
I have extracted text from 300 pdfs using  0.7.3.  All extractions were successful except 3.  I recieved this error message when trying to extract text from these 3 pds (java.lang.ArrayIndexOutOfBoundsException:4).  I am able to open the pdfs fine and they have no special security applied to them.  Any ideas as to why PDFBOX 0.7.3 is hiccuping while trying to process these files?:


	    
</text>
			</item>
			<item>
				<date>1163607658</date>
				<sender>martin_weindel</sender>
				<text>Logged In: YES 
user_id=1646209
Originator: NO

Same problem with following PDF: http://www.vmware.com/pdf/server_datasheet.pdf
</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1583772">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2006-10-24 06:30</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>extract text without access permissions</summary>
		<detail>I have a protected PDF-File
(http://www.usu-ag.com/english/d/OSP101E.pdf).
All contents of the document are encrypted and search
engines cannot access the document's metadata.
Content Copying or Extraction:          Not Allowed
Content Extraction for Accessibility:   Not Allowed

With PDFBOX-0.8.3 i can extract all content (not correct).
With PDFBOX-0.8.2 i can not do this (correct).
</detail>
	</artifact>
	<artifact id="1581061">
		<submitted_by>hui85</submitted_by>
		<submitted_date>2006-10-19 23:47</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>java.lang.OutOfMemoryError while parsing pdf file</summary>
		<detail>I want to parse text from a PDF file and use
PDFTextStripper. Most of the PDF files work. But in the
following case I get an OutOfMemoryError. 
The PDF file I want to parse is about 312k and my JVM
Xmx is about 512m. 
 
I get the following stackTrace: 

java.lang.OutOfMemoryError
	at java.util.zip.Inflater.inflateBytes(Native Method)
	at java.util.zip.Inflater.inflate(Unknown Source)
	at java.util.zip.InflaterInputStream.read(Unknown Source)
	at
org.pdfbox.filter.FlateFilter.decode(FlateFilter.java:97)
	at org.pdfbox.cos.COSStream.doDecode(COSStream.java:319)
	at org.pdfbox.cos.COSStream.doDecode(COSStream.java:249)
	at
org.pdfbox.cos.COSStream.getUnfilteredStream(COSStream.java:173)
	at
org.pdfbox.pdfparser.PDFStreamParser.&lt;init&gt;(PDFStreamParser.java:91)
	at
org.pdfbox.cos.COSStream.getStreamTokens(COSStream.java:135)
	at
org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:189)
	at
org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:160)
	at
org.pdfbox.util.PDFTextStripper.processPage(PDFTextStripper.java:355)
	at
org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:268)
	at
org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:220)


I use pdfbox-0.7.3, tested on Win 2000, JVM 1.4.2.
The file that causes the error is to big to attach
(271K zipped).
Please mail me and I will send it.</detail>
		<follow_ups>
			<item>
				<date>1162520381</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

see test-1581061.pdf</text>
			</item>
			<item>
				<date>1161365979</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Thanks, please email the PDF to ben@benlitchfield.com or 
upload to ftp.pdfbox.org

Thanks,
Ben</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1578473">
		<submitted_by>miguelc</submitted_by>
		<submitted_date>2006-10-16 13:09</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>java.lang.IllegalArgumentException printing PDF</summary>
		<detail>The following exception occurs when printing a PDF (see
estadodecuenta.pdf):

java.lang.IllegalArgumentException: filtered.length !=
(width*bpp + 1) * height,
 10800 10860w,h,bpp=60,60,3
        at
org.pdfbox.pdmodel.graphics.predictor.Uptimum.checkBufsiz(Uptimum.java:52)
        at
org.pdfbox.pdmodel.graphics.predictor.Uptimum.decode(Uptimum.java:141)
        at
org.pdfbox.pdmodel.graphics.xobject.PDPixelMap.getRGBImage(PDPixelMap.java:154)
        at
org.pdfbox.util.operator.pagedrawer.Invoke.process(Invoke.java:81)
        at
org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:452)
        at
org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:215)
        at
org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:174)
        at
org.pdfbox.pdfviewer.PageDrawer.drawPage(PageDrawer.java:104)
        at org.pdfbox.pdmodel.PDPage.print(PDPage.java:741)
        at sun.print.RasterPrinterJob.printPage(Unknown
Source)
        at sun.print.RasterPrinterJob.print(Unknown Source)
        at sun.print.RasterPrinterJob.print(Unknown Source)
        at
org.pdfbox.pdmodel.PDDocument.print(PDDocument.java:833)
        at org.pdfbox.PrintPDF.main(PrintPDF.java:108)

I am using PDFBox 0.7.3, on Windows 2000. JRE 1.5.0_08.</detail>
	</artifact>
	<artifact id="1572315">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2006-10-06 11:30</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="556660">writing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Setfield is not working in Acrobat 7.0</summary>
		<detail>Hello,

I created a acrobat form in version 7.0 and used 
setfield to bind the variables but I am unable to see 
the values when I view online. I am using 
PDFBox_7.0.2.
Here is code that I am using in peoplesoft:
______________________________________
&amp;pdf_file = CreateJavaObject
("org.pdfbox.pdmodel.PDDocument");
&amp;source_file = &amp;pdf_file.load
("Service_Terms_mstr.pdf");

&amp;jo = CreateJavaObject
("org.pdfbox.examples.fdf.SetField");

If &amp;target_field = "company" Then
   &amp;field_value = &amp;name;
End-If;

&amp;jo.setField(&amp;source_file, &amp;target_field, 
&amp;field_value);

&amp;source_file.save(&amp;PATH | %UserId | ".pdf");

ViewURL("http://" | &amp;servername | "/" | &amp;DBNAME | "/" 
| %UserId | ".pdf", True);

_________________________________________________

I am able to view the whole page except the form 
fields that need to updated using setfield ,they are 
blank. I read somewhere that using version 6.0 would 
help. Please guide me.

Thanks a lot.</detail>
	</artifact>
	<artifact id="1570311">
		<submitted_by>renaudw</submitted_by>
		<submitted_date>2006-10-03 15:04</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Miscellaneous errors on valid files</summary>
		<detail>As far as I can tell these files are valid. Some 
generate a warning in Acrobat Reader, some don't.

I'm reporting them in case you want to have a look at 
the errors they generate. All files are accessible 
online by replacing /web/gfdocs with 
http://bat.library.ucsf.edu/data.


/web/gfdocs/p/b/x/pbx00a99/pbx00a99.pdf skipped due 
to: java.io.IOException: Error: Expected an integer 
type, actual='BC3c#c3??\?' (stacktrace follows)
java.io.IOException: Error: Expected an integer type, 
actual='BC3c#c3??\?'
        at org.pdfbox.pdfparser.BaseParser.readInt
(BaseParser.java:1335)
        at org.pdfbox.pdfparser.PDFParser.parseObject
(PDFParser.java:415)
        at org.pdfbox.pdfparser.PDFParser.parse
(PDFParser.java:176)
        at 
edu.ucsf.library.utils.TextOverImageDocumentDetector.pa
rseDocument(TextOverImageDocumentDetector.java:210)
        at 
edu.ucsf.library.utils.TextOverImageDocumentDetector.de
tect(TextOverImageDocumentDetector.java:102)
        at 
edu.ucsf.library.utils.TextOverImageDocumentDetector.ma
in(TextOverImageDocumentDetector.java:77)


/web/gfdocs/p/e/b/peb40a99/peb40a99.pdf skipped due 
to: java.io.StreamCorruptedException: Error: data is 
null (stacktrace follows)
java.io.StreamCorruptedException: Error: data is null
        at org.pdfbox.filter.LZWFilter.decode
(LZWFilter.java:101)
        at org.pdfbox.cos.COSStream.doDecode
(COSStream.java:319)
        at org.pdfbox.cos.COSStream.doDecode
(COSStream.java:249)
        at org.pdfbox.cos.COSStream.getUnfilteredStream
(COSStream.java:173)
        at 
org.pdfbox.pdmodel.common.COSStreamArray.getUnfilteredS
tream(COSStreamArray.java:200)
        at org.pdfbox.pdfparser.PDFStreamParser.&lt;init&gt;
(PDFStreamParser.java:91)
        at 
org.pdfbox.pdmodel.common.COSStreamArray.getStreamToken
s(COSStreamArray.java:141)
        at 
org.pdfbox.util.PDFStreamEngine.processSubStream
(PDFStreamEngine.java:189)
        at 
org.pdfbox.util.PDFStreamEngine.processStream
(PDFStreamEngine.java:160)
        at 
edu.ucsf.library.utils.TextOverImageDocumentDetector.co
llectTextRenderingModes
(TextOverImageDocumentDetector.java:153)
        at 
edu.ucsf.library.utils.TextOverImageDocumentDetector.de
tect(TextOverImageDocumentDetector.java:125)
        at 
edu.ucsf.library.utils.TextOverImageDocumentDetector.de
tect(TextOverImageDocumentDetector.java:103)
        at 
edu.ucsf.library.utils.TextOverImageDocumentDetector.ma
in(TextOverImageDocumentDetector.java:77)


/web/gfdocs/q/l/n/qln20a99/qln20a99.pdf skipped due 
to: java.io.StreamCorruptedException: Error: data is 
null (stacktrace follows)
java.io.StreamCorruptedException: Error: data is null
        at org.pdfbox.filter.LZWFilter.decode
(LZWFilter.java:101)
        at org.pdfbox.cos.COSStream.doDecode
(COSStream.java:319)
        at org.pdfbox.cos.COSStream.doDecode
(COSStream.java:249)
        at org.pdfbox.cos.COSStream.getUnfilteredStream
(COSStream.java:173)
        at 
org.pdfbox.pdmodel.common.COSStreamArray.getUnfilteredS
tream(COSStreamArray.java:200)
        at org.pdfbox.pdfparser.PDFStreamParser.&lt;init&gt;
(PDFStreamParser.java:91)
        at 
org.pdfbox.pdmodel.common.COSStreamArray.getStreamToken
s(COSStreamArray.java:141)
        at 
org.pdfbox.util.PDFStreamEngine.processSubStream
(PDFStreamEngine.java:189)
        at 
org.pdfbox.util.PDFStreamEngine.processStream
(PDFStreamEngine.java:160)
        at 
edu.ucsf.library.utils.TextOverImageDocumentDetector.co
llectTextRenderingModes
(TextOverImageDocumentDetector.java:153)
        at 
edu.ucsf.library.utils.TextOverImageDocumentDetector.de
tect(TextOverImageDocumentDetector.java:125)
        at 
edu.ucsf.library.utils.TextOverImageDocumentDetector.de
tect(TextOverImageDocumentDetector.java:103)
        at 
edu.ucsf.library.utils.TextOverImageDocumentDetector.ma
in(TextOverImageDocumentDetector.java:77)


/web/gfdocs/q/p/e/qpe20a99/qpe20a99.pdf skipped due 
to: java.io.StreamCorruptedException: Error: data is 
null (stacktrace follows)
java.io.StreamCorruptedException: Error: data is null
        at org.pdfbox.filter.LZWFilter.decode
(LZWFilter.java:101)
        at org.pdfbox.cos.COSStream.doDecode
(COSStream.java:319)
        at org.pdfbox.cos.COSStream.doDecode
(COSStream.java:249)
        at org.pdfbox.cos.COSStream.getUnfilteredStream
(COSStream.java:173)
        at 
org.pdfbox.pdmodel.common.COSStreamArray.getUnfilteredS
tream(COSStreamArray.java:200)
        at org.pdfbox.pdfparser.PDFStreamParser.&lt;init&gt;
(PDFStreamParser.java:91)
        at 
org.pdfbox.pdmodel.common.COSStreamArray.getStreamToken
s(COSStreamArray.java:141)
        at 
org.pdfbox.util.PDFStreamEngine.processSubStream
(PDFStreamEngine.java:189)
        at 
org.pdfbox.util.PDFStreamEngine.processStream
(PDFStreamEngine.java:160)
        at 
edu.ucsf.library.utils.TextOverImageDocumentDetector.co
llectTextRenderingModes
(TextOverImageDocumentDetector.java:153)
        at 
edu.ucsf.library.utils.TextOverImageDocumentDetector.de
tect(TextOverImageDocumentDetector.java:125)
        at 
edu.ucsf.library.utils.TextOverImageDocumentDetector.de
tect(TextOverImageDocumentDetector.java:103)
        at 
edu.ucsf.library.utils.TextOverImageDocumentDetector.ma
in(TextOverImageDocumentDetector.java:77)
</detail>
	</artifact>
	<artifact id="1570308">
		<submitted_by>renaudw</submitted_by>
		<submitted_date>2006-10-03 14:57</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>NPE on damaged file</summary>
		<detail>This file: 
http://bat.library.ucsf.edu/data/p/q/s/pqs01a99/pqs01a9
9.pdf
causes a NPE when PDDocumentCatalog.getAllPages() is 
called.

Arguably, the file is damaged beyond repair -- even 
the Acrobat Reader can't display it. Nonetheless it 
would be nice to get an IO exception instead of NPE.

java.lang.NullPointerException 
on /web/gfdocs/p/q/s/pqs01a99/pqs01a99.pdf (stacktrace 
follows)
java.lang.NullPointerException
        at org.pdfbox.pdmodel.PDPageNode.getAllKids
(PDPageNode.java:194)
        at org.pdfbox.pdmodel.PDPageNode.getAllKids
(PDPageNode.java:182)
        at 
org.pdfbox.pdmodel.PDDocumentCatalog.getAllPages
(PDDocumentCatalog.java:162)
        at 
edu.ucsf.library.utils.TextOverImageDocumentDetector.co
llectTextRenderingModes
(TextOverImageDocumentDetector.java:150)
 </detail>
	</artifact>
	<artifact id="1565880">
		<submitted_by>patty_c</submitted_by>
		<submitted_date>2006-09-26 10:47</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>PDFBox merge/encryption problem</summary>
		<detail>PDFBox-0.7.2
Windows XP

I merge two pdfs and encrypt them.  When I decrypt 
the merged pdf and open it in Reader, I 
get "unrecognized token" after scrolling down a few 
pages (using the page forward button in Reader).  

Here are code snippets:

Merge: 
PDDocument oldPdf = PDDocument.load(existingPDF); 
PDDocument newPdf = PDDocument.load(scannedPDF); 
if (oldPdf.isEncrypted()) { 
oldPdf.decrypt(OWNERPASSWORD); 
}  
if (newPdf.isEncrypted()) { 
newPdf.decrypt(OWNERPASSWORD); 
}  
AppendDoc doc = new AppendDoc(); 
doc.appendDocument(oldPdf, newPdf); 
oldPdf.save(resultingPDF.getPath());  
oldPdf.close(); 
newPdf.close(); 
 
Encrypt: 
PDDocument pdf = PDDocument.load(file); 
PDStandardEncryption encryptionOptions = new 
PDStandardEncryption(); 
encryptionOptions.setCanModify(false); 
encryptionOptions.setCanPrint(false); 
encryptionOptions.setCanExtractContent(false); 
pdf.setEncryptionDictionary(encryptionOptions);  
pdf.encrypt(OWNERPASSWORD, USERPASSWORD); 
pdf.save(file.getPath()); 
pdf.close(); 
 
Decrypt: 
PDDocument pdf = PDDocument.load(file); 
if (pdf.isEncrypted()) { 
pdf.decrypt(OWNERPASSWORD); 
pdf.save(file.getPath()); 
pdf.close(); 
} 


</detail>
		<follow_ups>
			<item>
				<date>1178758763</date>
				<sender>ng_aldridge</sender>
				<text>Logged In: YES 
user_id=1111818
Originator: NO

Are you able to upload the original documents that you were attempting to merge, or examples that cause the same problem? Also, have you tried the latest pdfbox - there have been some fixes to the parser recently.</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>195367</id>
				<name>test_encrypted.pdf</name>
				<description>merged, encrypted pdf;password=123;unrecognized token when you open in Reader</description>
				<filesize>63248</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1159292871</adddate>
				<submitted_by>1606486</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>195367: test_encrypted.pdf</old_value>
				<date>1159292871</date>
				<by>patty_c</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1565617">
		<submitted_by>gagravarr</submitted_by>
		<submitted_date>2006-09-26 03:30</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Error on text extraction: java.lang.IndexOutOfBoundsExceptio</summary>
		<detail>I'm trying to extract text from a pdf file
(http://www.cifor.cgiar.org/mla/download/publication/mozambique.pdf),
but I'm getting an IndexOutOfBoundsException on it:

Exception in thread "main"
java.lang.IndexOutOfBoundsException: Index: 4, Size: 4
        at
java.util.ArrayList.RangeCheck(ArrayList.java:546)
        at java.util.ArrayList.get(ArrayList.java:321)
        at
org.pdfbox.util.operator.Concatenate.process(Concatenate.java:69)
        at
org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:494)
        at
org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:207)
        at
org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:160)
        at
org.pdfbox.util.PDFTextStripper.processPage(PDFTextStripper.java:355)
        at
org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:268)
        at
org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:220)
        at
org.pdfbox.ExtractText.main(ExtractText.java:237)


I've tried with 0.7.2, and 0.7.3-dev-20060920, and I
get the same exception from both versions.

Nick</detail>
	</artifact>
	<artifact id="1563263">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2006-09-21 19:05</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="556660">writing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Bad file descriptor while saving a document w. imported PDFs</summary>
		<detail>I believe I've found an error on PDFBox, or at least a
non-standard behavior.

I have a PDF Document I create with PDFBox and then
start importing other PDFs onto it, something like

for every PDF in PDFLIST
  mainPdf.import(PDF)
  PDF.close

I can have hundreds of PDFs being imported to the main
document.

The thing is that when saving the main Document I
sometimes get the Bad File Descriptor error.

To fix it I had to do something ugly like:

for every PDF in PDFLIST
  mainPdf.import(PDF)
  toBeErasedPDF.add(PDF)

...
mainPdf.save(..)
mainPdf.close()

for every PDF in toBeErasedPDF
  PDF.close

in this way the error goes away but
A) it took me a whole lot of time to realize this
B) I am maintaining in memory lots of unused objects
that could have been GC'd.

Still, this problem does not always arise.
I am attaching two different FO's (correct.fo.xml and
incorrect.fo.xml), where the first one does not show
this error, and the second one does. I am not attaching
code because I am not allowed to, but the idea is to
convert those documents to PDF and add them to the main
PDF document, separately.

I really do not know what is causing the problem in one
doc and not in the other.

BTW I am using version 0.7.2 (and it also happens in 0.7.1)

PS: It seems that I can only add one file? I'm adding
the incorrect one.

Hope this helps,
Best Regards
AndrÃ©s Bernasconi</detail>
		<follow_ups>
			<item>
				<date>1158924836</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Hi AndrÃ©s,

Can you give the nightly build a try 
http://www.pdfbox.org/dist  

I think another user reported this at one point and if I 
remember correctly I couldn't reproduce it, so I think it 
might be fixed in CVS.

Give it a try and let me know,
Thanks,
Ben</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>194626</id>
				<name>incorrect.fo.xml</name>
				<description>This FO causes the error mentioned above</description>
				<filesize>29948</filesize>
				<filetype>text/xml</filetype>
				<adddate>1158890727</adddate>
				<submitted_by>100</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>194626: incorrect.fo.xml</old_value>
				<date>1158890727</date>
				<by>nobody</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1562539">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2006-09-20 15:52</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>PDF does not print properly</summary>
		<detail>See dakarmag1.pdf

Ben</detail>
	</artifact>
	<artifact id="1559168">
		<submitted_by>wolf12</submitted_by>
		<submitted_date>2006-09-15 02:02</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Tiff image problems</summary>
		<detail>Hi everyone!!!

PDFBox doesn't write tiff images propertly.
In tiff documentation there are many fields that are
not suported by this library. 
1. DPI (XResolution, YResolution, ResoulutionUnit)
   XResolution and YResolution IFDFields are hardcoded
(300 dpi value for both), ResolutionUnit is not even
taken into account. User is forced to write those
values by hisself.
2. FillOrder
   It is a logical order of bits within a byte (ref.
TIFF6.pdf document page 32). In PDFBox this entry is
allways 1 (because of lack it in library this field has
default value 1 - available are 1 and 2). The efect of
this is that the data is not properly recognized by pdf
viewers - error shown:
"No sufficient data for the image".

Here is code for creating pdf page with tiff image:


1. &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; create COSDictionary &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;


IFDEntry columns =
ifd.directoryEntries.get(IFDName.ImageWidth);
		IFDEntry rows =
ifd.directoryEntries.get(IFDName.ImageLength);
		IFDEntry t4compression =
ifd.directoryEntries.get(IFDName.Compression);
		IFDEntry blackIs1 =
ifd.directoryEntries.get(IFDName.PhotometricInterpretation);
		IFDEntry t42d =
ifd.directoryEntries.get(IFDName.T4Options);

		int k = -1000;
		if (t4compression != null)
		{
			if (t4compression.getValue() == 4)
			{
				k = -1;
			}
			if (t4compression.getValue() == 3)
			{
				k = 0;
			}
		}
		if (t42d != null &amp;&amp; t42d.getValue() == 1)
		{
			k = 50;
		}

		if (k == -1000)
		{
			throw new IOException("First image in tiff is not
CCITT T4 or T6 compressed");
		}
		boolean bi1 = (blackIs1.getValue() == 1) ? true : false;

		cosDictParms.setInt(COLUMNS, columns.getValue());
		cosDictParms.setInt(ROWS, rows.getValue());
		if (bi1)
		{
			cosDictParms.setBoolean("BlackIs1", true);
		}
		cosDictParms.setInt("K", k);
		cosDictParms.setFloat("XRes", this.getXRes());
		cosDictParms.setFloat("YRes", this.getYRes());
		this.checkCOSDictionary = true;


2. &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; create PDStream &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;


PDStream stream = new PDStream(doc);
		COSStream dic = stream.getStream();
		COSDictionary decodeParms =
tiffImage.getCosDictionaryParams();
		OutputStream os = null;
		try
		{
			os = dic.createFilteredStream();
			os.write(tiffImage.getStripsByte());
		}
		finally
		{
			try
			{
				if (os != null)
				{
					os.close();
				}
			}
			catch (IOException e)
			{
				// ignore error
			}
		}
		dic.setItem(COSName.FILTER, COSName.CCITTFAX_DECODE);
		dic.setItem(COSName.SUBTYPE, COSName.IMAGE);
		dic.setItem(COSName.TYPE, COSName.getPDFName("XObject"));
		dic.setItem("DecodeParms", decodeParms);




3. &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; create PDXObjectImage &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;

COSDictionary decodeParms =
tiffImage.getCosDictionaryParams();
		PDCcitt ccitt = new PDCcitt(stream);
		ccitt.setBitsPerComponent(1);
		ccitt.setColorSpace(new PDDeviceGray());
		ccitt.setWidth(decodeParms.getInt(TiffImage.COLUMNS));
		ccitt.setHeight(decodeParms.getInt(TiffImage.ROWS));


4. &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; create pdf page with image &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;


PDPageContentStream contentStream = new
PDPageContentStream(document, page);
						PDFPageImageFormat pdfFormat =
PDFPageImageFormat.newPDFPageImageFormat(0, 0,
								PDFPageImageFormat.FIT_TO_IMAGE, imageObject);
						page.setMediaBox(new
PDRectangle(tiffImage.getOryginalWidth(),
tiffImage.getOryginalHeight()));
						contentStream.drawImage(imageObject,
pdfFormat.getX(), pdfFormat.getY(),
(int)tiffImage.getOryginalWidth(),/*pdfFormat.getWidth(),*/
							
(int)tiffImage.getOryginalHeight()/*pdfFormat.getHeight()*/);
						bos.write(tiffImage.toByteArray());


&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; end source code &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;

I cannot attach any example of pdf file because of
security.

I have my own tiff wraper which reads also multipage
tiff image.</detail>
	</artifact>
	<artifact id="1559157">
		<submitted_by>wolf12</submitted_by>
		<submitted_date>2006-09-15 01:36</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Tiff image problems</summary>
		<detail>Hi everyone!!!

PDFBox doesn't write tiff images propertly.
In tiff documentation there are many fields that are
not suported by this library. 
1. DPI (XResolution, YResolution, ResoulutionUnit)
   XResolution and YResolution IFDFields are hardcoded
(300 dpi value for both), ResolutionUnit is not even
taken into account. User is forced to write those
values by hisself.
2. FillOrder
   It is a logical order of bits within a byte (ref.
TIFF6.pdf document page 32). In PDFBox this entry is
allways 1 (because of lack it in library this field has
default value 1 - available are 1 and 2). The efect of
this is that the data is not properly recognized by pdf
viewers - error shown:
"No sufficient data for the image".

Here is code for creating pdf page with tiff image:


1. &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; create COSDictionary &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;


IFDEntry columns =
ifd.directoryEntries.get(IFDName.ImageWidth);
		IFDEntry rows =
ifd.directoryEntries.get(IFDName.ImageLength);
		IFDEntry t4compression =
ifd.directoryEntries.get(IFDName.Compression);
		IFDEntry blackIs1 =
ifd.directoryEntries.get(IFDName.PhotometricInterpretation);
		IFDEntry t42d =
ifd.directoryEntries.get(IFDName.T4Options);

		int k = -1000;
		if (t4compression != null)
		{
			if (t4compression.getValue() == 4)
			{
				k = -1;
			}
			if (t4compression.getValue() == 3)
			{
				k = 0;
			}
		}
		if (t42d != null &amp;&amp; t42d.getValue() == 1)
		{
			k = 50;
		}

		if (k == -1000)
		{
			throw new IOException("First image in tiff is not
CCITT T4 or T6 compressed");
		}
		boolean bi1 = (blackIs1.getValue() == 1) ? true : false;

		cosDictParms.setInt(COLUMNS, columns.getValue());
		cosDictParms.setInt(ROWS, rows.getValue());
		if (bi1)
		{
			cosDictParms.setBoolean("BlackIs1", true);
		}
		cosDictParms.setInt("K", k);
		cosDictParms.setFloat("XRes", this.getXRes());
		cosDictParms.setFloat("YRes", this.getYRes());
		this.checkCOSDictionary = true;


2. &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; create PDStream &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;


PDStream stream = new PDStream(doc);
		COSStream dic = stream.getStream();
		COSDictionary decodeParms =
tiffImage.getCosDictionaryParams();
		OutputStream os = null;
		try
		{
			os = dic.createFilteredStream();
			os.write(tiffImage.getStripsByte());
		}
		finally
		{
			try
			{
				if (os != null)
				{
					os.close();
				}
			}
			catch (IOException e)
			{
				// ignore error
			}
		}
		dic.setItem(COSName.FILTER, COSName.CCITTFAX_DECODE);
		dic.setItem(COSName.SUBTYPE, COSName.IMAGE);
		dic.setItem(COSName.TYPE, COSName.getPDFName("XObject"));
		dic.setItem("DecodeParms", decodeParms);




3. &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; create PDXObjectImage &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;

COSDictionary decodeParms =
tiffImage.getCosDictionaryParams();
		PDCcitt ccitt = new PDCcitt(stream);
		ccitt.setBitsPerComponent(1);
		ccitt.setColorSpace(new PDDeviceGray());
		ccitt.setWidth(decodeParms.getInt(TiffImage.COLUMNS));
		ccitt.setHeight(decodeParms.getInt(TiffImage.ROWS));


4. &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; create pdf page with image &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;


PDPageContentStream contentStream = new
PDPageContentStream(document, page);
						PDFPageImageFormat pdfFormat =
PDFPageImageFormat.newPDFPageImageFormat(0, 0,
								PDFPageImageFormat.FIT_TO_IMAGE, imageObject);
						page.setMediaBox(new
PDRectangle(tiffImage.getOryginalWidth(),
tiffImage.getOryginalHeight()));
						contentStream.drawImage(imageObject,
pdfFormat.getX(), pdfFormat.getY(),
(int)tiffImage.getOryginalWidth(),/*pdfFormat.getWidth(),*/
							
(int)tiffImage.getOryginalHeight()/*pdfFormat.getHeight()*/);
						bos.write(tiffImage.toByteArray());


&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; end source code &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;

I cannot attach any example of pdf file because of
security.

I have my own tiff wraper which reads also multipage
tiff image.</detail>
	</artifact>
	<artifact id="1558429">
		<submitted_by>pergi</submitted_by>
		<submitted_date>2006-09-14 01:22</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="293147"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>extractimages example doesn't work correctly</summary>
		<detail>the process never enter in the second while


while( iter.hasNext() ) 
{ 
PDPage page = (PDPage)iter.next(); 
PDResources resources = page.getResources(); 
Map images = resources.getImages(); 
if( images != null ) 
{ 
Iterator imageIter = images.keySet().iterator(); 
while( imageIter.hasNext() ) 
{ 
String key = (String)imageIter.next(); 
PDXObjectImage image = (PDXObjectImage)images.get( 
key ); 
String name = getUniqueFileName( key, image.getSuffix
() ); 
System.out.println( "Writing image:" + name ); 
image.write2file( name ); 
} 
} 
} 
 

ps: attached is an example file </detail>
		<existingfiles>
			<file>
				<id>193486</id>
				<name>regolamento2005pisa.pdf</name>
				<description></description>
				<filesize>60535</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1158222140</adddate>
				<submitted_by>1490914</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>193486: regolamento2005pisa.pdf</old_value>
				<date>1158222140</date>
				<by>pergi</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1250097">
		<submitted_by>salchow</submitted_by>
		<submitted_date>2005-08-02 03:07</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Text Extraction Unsuccessful with PDFBox</summary>
		<detail>Hi Ben,

Here you will find the different files : PDF, text file obtain 
with PDFBox, text file obtain with TextFromPDF.

Thanks!
salchow</detail>
		<follow_ups>
			<item>
				<date>1204023464</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

I'm getting the following error
Exception in thread "main" java.lang.NoSuchMethodError: org.pdfbox.util.operator.OperatorProcessor.setContext(Lorg/pdfbox/util/PDFStreamEngine;)V
while extracting text from pdf file.
Please help me!
</text>
			</item>
			<item>
				<date>1126233340</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

A parser for Type1C CFF fonts needs to be written.  Adobe 
technical spec 5176 CFF talks about the file format.  It is a 
binary format that looks pretty straighforward, should be 
pretty fun to write a parser for it.

This is not a high priority right now, but if someone is willing 
to write the parser I will integrate it.  If you would like to write 
a parser please let me know and we can discuss, it needs to 
be somewhat robust as the data structures it creates should 
support modifying data so the font can be written back to a 
stream, which will support embedding fonts back into the pdf 
document.

If this parser is written, I may start a separate project that just 
deals with font files in java, PDFBox currently has parsers for 
TTF/PFB and soon CFF I see more advanced font 
requirements in the pipeline, this type of functionality is really 
outside the scope of PDFBox but I don't believe anything else 
exists.  I am sure if I start a font library project there are other 
java libraries that could make use of it as well

Ben Litchfield</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>144104</id>
				<name>PDFBox.rar</name>
				<description></description>
				<filesize>39931</filesize>
				<filetype>application/octet-stream</filetype>
				<adddate>1122977222</adddate>
				<submitted_by>1316887</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>144104: PDFBox.rar</old_value>
				<date>1122977224</date>
				<by>salchow</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1470014">
		<submitted_by>pthorson</submitted_by>
		<submitted_date>2006-04-13 11:51</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Merge Landscape and Portrait PDFs does not keep orientation</summary>
		<detail>When I merge a Landscape PDF with a Portrait PDF the 
orientation of all the pages in the result is the same 
as whichever PDF was first. For instance, 
PDFMerger landscape.pdf portrait.pdf test.pdf 
results in all pages in test.pdf in landscape format. 
 
I used the daily build of 0.7.3 but also tried 
AppendDoc in 0.7.2 and got the same results.

Result attached.

Source files sent to FTP site.</detail>
		<follow_ups>
			<item>
				<date>1145020882</date>
				<sender>pthorson</sender>
				<text>Logged In: YES 
user_id=1501547

I note that if I add the following lines to v1.1 of 
PDFMergerUtility::appendDocument at line 315 (the section 
creating the new pages), the orientation seems to be 
corrected: 
newPage.setCropBox( page.findCropBox() ); 
newPage.setMediaBox( page.findMediaBox() ); 
newPage.setRotation( page.findRotation() );</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>174500</id>
				<name>landscape.pdf</name>
				<description>Landscape source PDF</description>
				<filesize>18124</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1144954496</adddate>
				<submitted_by>1501547</submitted_by>
			</file>
			<file>
				<id>174499</id>
				<name>portrait.pdf</name>
				<description>Portrait source PDF (firewall is preventing me access to FTP)</description>
				<filesize>34376</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1144954458</adddate>
				<submitted_by>1501547</submitted_by>
			</file>
			<file>
				<id>174497</id>
				<name>merged.pdf</name>
				<description>Result of merging Landscape with Portrait PDF</description>
				<filesize>51432</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1144954318</adddate>
				<submitted_by>1501547</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1145294744</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>174500: landscape.pdf</old_value>
				<date>1144954497</date>
				<by>pthorson</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>174499: portrait.pdf</old_value>
				<date>1144954458</date>
				<by>pthorson</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>174497: merged.pdf</old_value>
				<date>1144954320</date>
				<by>pthorson</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1435244">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2006-02-20 06:55</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Does not detect paper format</summary>
		<detail>Pdfbox does not detect the paper format of the PDF. It
always says "Orientation 1" even after changing it from
java:
document.getPageFormat(0).setOrientation(PageFormat.LANDSCAPE);

and alternates between "Height 595.0, Width 842.0" and
"Height 842.0, Width 595.0" (which both is A1 if
interpreted as mm)

I tried several PDF-Creators (itext, Openoffice), but
the Pdfbox always wants to print LETTER in PORTRAIT
orientation. (the pages are A4)

Settings the orientation in the printer dialog does not
help. 

I believe it get's its info from: 
/Rotate 90/MediaBox[0 0 595 842]

regards, 

JPT, j.p.t.@gmx.net
(pdfbox 0.7.2, itext 1.3.6)</detail>
		<change_log>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1145294771</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1506092">
		<submitted_by>sajitjacob</submitted_by>
		<submitted_date>2006-06-14 07:37</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>PDFMergerUtility exception using .NET</summary>
		<detail>
Invalid Refereance exception using build PDFBox-0.7.3-
dev-20060614 against ikvm-0.28.0.0. 

The following C# code causes an Invalid Referance 
exception somewhere in the PDFBox DLL

PDFMergerUtility pdfMerger = new PDFMergerUtility(); 
pdfMerger.addSource(sTo); 
pdfMerger.addSource(sFrom); 
pdfMerger.setDestinationFileName(sNew); 
pdfMerger.mergeDocuments(); 


Note: As downloaded ./external was missing 
bouncycastle and lucene-demo jars

Roy.</detail>
		<follow_ups>
			<item>
				<date>1179325202</date>
				<sender>oisincvera</sender>
				<text>Logged In: YES 
user_id=1794616
Originator: NO

Following code in VB.NET causes same error when 
With pdfMerger
 'Set output destination
 .setDestinationFileName(outputFileFullName)
 'Looping thru the file list and add source to the mergeing documents

 For i As Integer = 0 To fileCount - 1 Step 1
   .addSource(pdfFileList(1))
 Next i
 'Merge the document
.mergeDocuments()
End With</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1017697">
		<submitted_by>martinbuchleit</submitted_by>
		<submitted_date>2004-08-27 09:01</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Problem with reading pdf</summary>
		<detail>When reading the attached document using pdfbox and 
save the document without changing something, adobe 
acrobat is not able to read the document anymore.</detail>
		<follow_ups>
			<item>
				<date>1102513629</date>
				<sender>derfuchs</sender>
				<text>Logged In: YES 
user_id=193828

I have the same problem with version 0.6.7a or a newer cvs
Version and pfd-files that not generated by OOo, when i use
0.6.6 it worked.</text>
			</item>
			<item>
				<date>1093622558</date>
				<sender>martinbuchleit</sender>
				<text>Logged In: YES 
user_id=1020588

The document could not be attached. The document is 
available at 
http://www.sbox.tugraz.at/home/m/mabu/robocup98.pdf </text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1093978521</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1052458">
		<submitted_by>bryang1</submitted_by>
		<submitted_date>2004-10-22 13:23</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Spliiting a PDF creates unnecessarily large chunks</summary>
		<detail>Using PDFBox 0.6.7a, some PDFs contain objects that are
inherited when the PDF is split into a smaller document
using the Splitter class (even if the children
documents are compressed).

The linked PDF splits into chunks approximately the
same size as the original.  The first several pages
will be smaller because I recreated them for debugging.
 The rest of the document will reflect the problem
however.  Try splitting after page 5, or at every page
to recreate.

PDF (13MB):
http://esis.infofoundry.com:8080/audi/pdf/audi.ns.ssp.951903.pdf

Opening and using the 'Save As' feature in Acrobat
removes the unnecessary objects, but I can find no way
to do this programmatically using PDFBox.

Here are the messages from Acrobat when using 'Save As':

"Consolidating duplicate images"
"Consolidating duplicate page backgrounds"
"Removeing unused objects and saving"

Here is some sample code:

// splitting:
splitter.setSplitAtPage( split );
documents = splitter.split( document );
for( int i=0; i&lt;documents.size(); i++ )
{
  PDDocument doc = (PDDocument)documents.get( i );
  String fileName = pdfFile.substring(0,
pdfFile.length()-4 ) + "-" + i + ".pdf";
  writeCompressedDocument( doc, fileName );
}

// saving w/ compression:
fileOut = new FileOutputStream( fileName );
COSStream stream = new COSStream( 
		  	doc.getDocument().getScratchFile() ); 
OutputStream output = stream.createUnfilteredStream();
int length = new
Long(doc.getDocument().getScratchFile().length()).intValue();
byte[] bytes = new byte[length];
doc.getDocument().getScratchFile().readFully(bytes, 0,
length);
output.write(bytes);
stream.setFilters( COSName.FLATE_DECODE );</detail>
		<change_log>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1098476637</date>
				<by>bryang1</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1084937">
		<submitted_by>jinfeng_wang</submitted_by>
		<submitted_date>2004-12-13 22:50</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>some code  bugs</summary>
		<detail>hi, ben , recently i am read your code. after my test, 
the following bugs are found in the PDFBox 0.6.7  release 
version.

1) code in org.pdfbox.cmaptypes.CMap:

  the algorithm of  computing "key"  in the method  
of "lookup" and "addMapping"  are out of consistent  
when the  lenth is 2. 
   the code in "lookup" :
     int intKey = (code[offset]+256)%256;
     intKey &lt;&lt;= 8;
     intKey += (code[offset+1]+256)%256;
     key = new Integer( intKey );
   the code in "addMapping":
       int intSrc = src[0];
       intSrc &lt;&lt;= 8;
       intSrc |= (src[1]&amp;0xFF);
       doubleByteMappings.put( new Integer( intSrc ), 
dest );
     

2) code  in  org.pdfbox.pdmodel.font.PDFont.encode():
   when the PDF file contains  the "ToUnicode" CMap, it 
will try to parse the "ToUnicode" CMap every time for 
each character. this CMap file is not be stored for the 
later using.
   the code is:
  COSStream toUnicode =
 	(COSStream) font.getDictionaryObject(
	COSName.getPDFName("ToUnicode"));
   if (toUnicode != null) {
	parseCmap(toUnicode.getUnfilteredStream(), 
null);

3) code  in  org.pdfbox.pdmodel.font.PDFont.encode():
  when the current Font is Type0,  it should parse TWO 
cmaps files according to the PDF Reference. but it is 
neglated in the release version. 

4). code in org.pdfbox.cmapparser.CMapParser.parse().
  the code has neglated the " if (op.getOperation
().equals(BEGIN_CID_RANGE))"  which is very important 
for "Type0" font.

5) code in  org.pdfbox.cmapparser.CMapParser.equal().
   i have downloaded the CVS code from sourceforge.
  this function is renamed to "lessThanOrEqual".
   however , i found that there is some bug withe 
this "lessThanOrEqual" member function.  when i try to  
parse the CMap of "UniCNS-UCS2-H" 
with  "lessThanOrEqual", the return value will be always 
TRUE, so the "while (!equals(startBytes, endBytes))" will 
be not termintad at all. 

6)  the text of the PDF file in the attachment can not be 
extract correctly both in the last release version and  
the CVS development version.
    would you please to tell me the algorithm for 
the "blank space" more in detail? 
    i have noticed that the class of "TextPosition" is 
changed in the development version comparing to the 
relese version.  now i have comment out the "for loop"  
in the "PDFTextStripper.flush()" in the release version, 
and the running speed is OK when extract "J2EE 
tutorial". :-)  
    would you please to tell me more about the algorithm, 
thanks.

btw, if you like, i will email to you the code about the 
extract "Type0" Font. 


  
</detail>
		<follow_ups>
			<item>
				<date>1103032277</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

thanks for the report I will take a look at these.  Many bugs 
have been fixed since the 0.6.7 release, please try to use the 
nightly release.

Ben</text>
			</item>
			<item>
				<date>1103007935</date>
				<sender>jinfeng_wang</sender>
				<text>Logged In: YES 
user_id=1145721

uploaded the error pdf file.</text>
			</item>
			<item>
				<date>1103007203</date>
				<sender>jinfeng_wang</sender>
				<text>Logged In: YES 
user_id=1145721

sorry, i have not upload the "Error" PDf file . </text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1103032287</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>summary</field>
				<old_value>some cod  bugs</old_value>
				<date>1103007423</date>
				<by>jinfeng_wang</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1261693">
		<submitted_by>mai00</submitted_by>
		<submitted_date>2005-08-16 23:16</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Strange encoding in PDF-file</summary>
		<detail>I've got a PDF-file with a strange encoding. When I use
ExtractText it gives me lines of 
MT73MT110MT102MT111MT45MT66.... 

I tried to use other extracting tools like pdftohtml
and it could extract the text in plain English.

Maybe I'm just doing something wrong with the encoding
but I tried different things and could't extract the
right text.
</detail>
		<follow_ups>
			<item>
				<date>1130334678</date>
				<sender>mai00</sender>
				<text>Logged In: YES 
user_id=1310361

Hello,
I have found more files which are strange encoded but e.g.
can be extracted by Adobe. I though it might have to do with
the Font. All of these files don't provide a BaseFont and I
think it might be because maybe this files were created on
Unix systems. Maybe if somehow the font can be provided or
someone can find out which font is used one can find out how
to decode the text.</text>
			</item>
			<item>
				<date>1124264129</date>
				<sender>salchow</sender>
				<text>Logged In: YES 
user_id=1316887

I have got exactly the same problem. I registred a bug (ID 
1250097) and asked a question in the forum at the begining 
of August under the title : "Text Extraction unsuccessful with 
PDFBox". Unfortunately, I haven't got any solution yet. 
If you find a way to solve this problem, i am interested in ...
Thanks
Salchow</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>145929</id>
				<name>strangeEncoding.pdf</name>
				<description>PDF-File with strange encoding</description>
				<filesize>155806</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1124259413</adddate>
				<submitted_by>1310361</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>145929: strangeEncoding.pdf</old_value>
				<date>1124259413</date>
				<by>mai00</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1079010">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2004-12-04 11:43</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>FDF SetField does not resize font</summary>
		<detail>Certain fields have the font automatically resized as the 
user types text such that all of the text will fit in the 
box, shrinking the text when there is too much text.  

PDFBox does not do this attached is an example PDF 
document.

BJL:Looked into this a little bit but it I don't see how to 
determine that the font size should be automatically 
resized versus scrolled.  Need to look into flags in more 
detail.

</detail>
		<follow_ups>
			<item>
				<date>1108316854</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Finally, I found where this is set.  In PDF Reference 1.6 pg 
641 last sentence in second to last paragraph.  Now I just 
need to fix it.

"A zero value for size means that the font is to be autosized:
its size is computed as a function of the height of the 
annotation rectangle."</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>111281</id>
				<name>before-original.pdf</name>
				<description></description>
				<filesize>82709</filesize>
				<filetype></filetype>
				<adddate>1102189391</adddate>
				<submitted_by>601708</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>111281: before-original.pdf</old_value>
				<date>1102189391</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1506499">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2006-06-14 23:57</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>splitting some words randomnly</summary>
		<detail>i m using pdfbox to extract text.mainly using 
PDFTextStripper.
please check the main file "ExtractText".

import java.io.FileOutputStream;
import java.io.FileInputStream;
import java.io.InputStream;
import java.io.OutputStreamWriter;
import java.io.Writer;

import org.pdfbox.exceptions.InvalidPasswordException;

import org.pdfbox.pdmodel.PDDocument;

import org.pdfbox.util.PDFText2HTML;
import org.pdfbox.util.PDFTextStripper;
import org.pdfbox.pdfparser.PDFParser;

public class ExtractText
{
     public static final String DEFAULT_ENCODING =
        null;
     private static final String PASSWORD = "-
password";
    private static final String ENCODING = "-encoding";
    private static final String CONSOLE = "-console";
    private static final String START_PAGE = "-
startPage";
    private static final String END_PAGE = "-endPage";
    private static final String SORT = "-sort";
    private static final String HTML = "-html";  // 
jjb - added simple HTML output

    public ExtractText()
    {
     }
    public static void main( String[] args ) throws 
Exception
    {
        boolean toConsole = false;
        boolean toHTML = false;
        boolean sort = false;
        String password = "";
        String encoding = DEFAULT_ENCODING;
        String pdfFile = null;
        String textFile = null;
        String parsertx = "";
        int startPage = 1;
        int endPage = Integer.MAX_VALUE;
        for( int i=0; i&lt;args.length; i++ )
        {
            if( args[i].equals( PASSWORD ) )
            {
                i++;
                if( i &gt;= args.length )
                {
                    usage();
                }
                password = args[i];
            }
            else if( args[i].equals( ENCODING ) )
            {
                i++;
                if( i &gt;= args.length )
                {
                    usage();
                }
                encoding = args[i];
            }
            else if( args[i].equals( START_PAGE ) )
            {
                i++;
                if( i &gt;= args.length )
                {
                    usage();
                }
                startPage = Integer.parseInt( args
[i] );
            }
            else if( args[i].equals( HTML ) )
            {
                toHTML = true;
            }
            else if( args[i].equals( SORT ) )
            {
                sort = true;
            }
            else if( args[i].equals( END_PAGE ) )
            {
                i++;
                if( i &gt;= args.length )
                {
                    usage();
                }
                endPage = Integer.parseInt( args[i] );
            }
            else if( args[i].equals( CONSOLE ) )
            {
                toConsole = true;
            }
            else
            {
                if( pdfFile == null )
                {
                   // pdfFile = args[i];
                	
                }
                else
                {
                   //textFile = args[i];
                }
            }
        }
        pdfFile = "E:\\examples\\resources\\text.pdf";
        if( pdfFile == null )
        {
            usage();
        }

        if( textFile == null &amp;&amp; pdfFile.length() &gt;4 )
        {
           //textFile = pdfFile.substring( 0, 
pdfFile.length() -4 ) + ".txt";
        }
 
        Writer output = null;
        PDDocument document = null;
        try
        {
            document = PDDocument.load( pdfFile );

            //document.print();
            if( document.isEncrypted() )
            {
                try
                {
                    document.decrypt( password );
                }
                catch( InvalidPasswordException e )
                {
                    if( args.length == 4 )//they 
supplied the wrong password
                    {
                        System.err.println( "Error: 
The supplied password is incorrect." );
                        System.exit( 2 );
                    }
                    else
                    {
                        //they didn't suppply a 
password and the default of "" was wrong.
                        System.err.println( "Error: 
The document is encrypted." );
                        usage();
                    }
                }
            }
            if( toConsole )
            {
                output = new OutputStreamWriter( 
System.out );
            }
            else
            {
                if( encoding != null )
                {
                    output = new OutputStreamWriter(
                        new FileOutputStream( 
textFile ), encoding );
                }
                else
                {
                    //use default encoding
                   // output = new OutputStreamWriter
(new FileOutputStream( textFile ) );
                	output = new OutputStreamWriter
( System.out );
                }
            }

            PDFTextStripper stripper = null;
            if(toHTML)
            {
               stripper = new PDFText2HTML();
            }
            else
            {
               stripper = new PDFTextStripper();
            }
            stripper.setSortByPosition( sort );
            stripper.setStartPage( startPage );
            stripper.setEndPage( endPage );
            parsertx = stripper.writeText( document, 
output );
            System.out.println("==========&gt;&gt;parsed 
text:"+parsertx);
                    
        }
        finally
        {
            if( output != null )
            {
                output.close();
            }
            if( document != null )
            {
                document.close();
            }
        }
    }
    private static void usage()
    {
        System.err.println( "Usage: java 
org.pdfbox.ExtractText [OPTIONS] &lt;PDF file&gt; [Text File]
\n" +
            "  -password  &lt;password&gt;        Password 
to decrypt document\n" +
            "  -encoding  &lt;output encoding&gt; (ISO-8859-
1,UTF-16BE,UTF-16LE,...)\n" +
            "  -console                     Send text 
to console instead of file\n" +
            "  -html                        Output in 
HTML format instead of raw text\n" +
            "  -sort                        Sort the 
text before writing\n" +
            "  -startPage &lt;number&gt;          The first 
page to start extraction(1 based)\n" +
            "  -endPage &lt;number&gt;            The last 
page to extract(inclusive)\n" +
            "  &lt;PDF file&gt;                   The PDF 
document to use\n" +
            "  [Text File]                  The file 
to write the text to\n"
            );
        System.exit( 1 );
    }
}

PLEASE CHECK THE INPUT FILE ATTACHED....TEXT.PDF


OUTPUT I GOT IS PASTED BELOW::::::::PLEASE CHECK 
IT:=&gt;AS IN SECOND LINE WORD "VERSION" IS 
SPLITTED...MANY MORE R THERE LIKE THIS...PLEASE TELL 
ME HOW TO FIX THIS....OR PATH FROM WHERE I CAN GET THE 
JAR FILE AND THE MAIN CLASS WHICH WILL PARSE N GIVE 
THE TEXT AS A STRING.......

Aspose.Pdf.Kit for Java ProductOverview       
Aspose.Pdf.Kit for Java is   java ver  sion of A  
spose.Pdf.Kit which  developed purely in java for the 
manipulation of Pdf documents. I  t    provides  rich  
set  of  features  like  document  updation  managing  
security    settings updating meta information text 
and images extraction and    form fields management 
etc. that enables you to perform almost al  l    
powerful operations on your already existing Pdf 
documents.    Product Description  Aspose.Pdf.Kit is 
a  n   amazing   product by Aspose Pt  y Ltd. tha  t 
lets its  users especially developers to manage their 
Pdf documents    programatically. Aspose.Pdf.Kit 
provides a ve  ry simple Application    Programming 
Interface (API) f  or developers that i  s   very eas  
y to learn  and use.    Aspose.Pdf.Kit for Java is 
implemented in purely java and has the same    power 
of Aspose.Pdf.Kit. It can be u  sed under any platform 
if onl  y    installed  JVM(see  details  at  System  
Requirements).  Aspose.Pdf.Kit  for    Java can be 
integrated with any kind of application either it's   
a  n    Web Application or a Java Application.    
Aspose.Pdf.Kit for Java is   surprisingly fast   and 
light weight.   It    processes Pdf documents 
efficiently leading towards the better    performance 
of dev  eloper's custom applications. Aspose.Pdf.Kit 
for    Java is t  he first   choice of most of   our 
clients for pr  ocessing Pdf  documents  because  of  
its  affor  dable  price  superb  performance  and  
qui  ck    Aspose Support.    Document Features  Two 
Pdf documents can be Concatenated together     New 
Pages can be Appended to an existing Pdf document     
One Pdf document can be Splitted into two Pdf 
documents     Several pages can be Extracted as a new 
pdf document     Security Features  Security settings 
of the Pdf document can be modified easily     Pdf 
documents can be Encrypted and Decrypted with Owner's 
Password    and User's Password     Owner can change 
password and reset security settings     Form Field 
Features  You  can  re  ad  all  For  m  Fields  of    
the  Pdf  d  ocuments  including  their  Names    and 
Values     Form Field can be f  illed programatically 
through the spe  cified Field Name   Specified Field 
or   all the   Form Fields of the   Pdf docu  ments 
can be  Flattened   Form Fields can be bound to any 
Data Source easily     Extraction and Utility 
Features  Show and modify a Pdf document Meta 
Information like Title Autho  r    etc.   Add a 
Watermark or Logo at specified position on every 
page     Extract Texts and Images from Pdf document 
easily     Count the Words in Pdf document     Adhere 
Text or Image to the page of the Pdf document 




THANKING U IN ANTICIPATION
ANITHA



</detail>
		<follow_ups>
			<item>
				<date>1163778965</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

Hi Any updates on this issue. Can anyone please help me out? I am not sure if this has been fixed in the latest release. Please email me at enigma_ka@yahoo.co.in.</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>181702</id>
				<name>text.pdf</name>
				<description>input file for parsing</description>
				<filesize>14789</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1150354634</adddate>
				<submitted_by>100</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>181702: text.pdf</old_value>
				<date>1150354634</date>
				<by>nobody</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1087993">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2004-12-19 09:25</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Overlay produces bad pdf</summary>
		<detail>A bad PDF is generated when using overlay class

See zig.pdf and zigheader.pdf

Ben</detail>
	</artifact>
	<artifact id="1485049">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2006-05-09 14:29</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="817859">PDFReader</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>font spacing</summary>
		<detail>In the last line of the drawString method of 
org.pdfbox.pdmodel.font.PDTrueTypeFont.java, the locations are casted 
to int's. This produces undesireable results when displaying a pdf.  
Removing the cast, produces more pleasant-looking font spacing.</detail>
	</artifact>
	<artifact id="1185058">
		<submitted_by>seblaunay</submitted_by>
		<submitted_date>2005-04-18 01:59</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Invalid character while extracting text from a chinese pdf</summary>
		<detail>First, thanks for this wonderful api.
I have a problem extracting text from a pdf document
provided with adobe acrobat reader : ENUtxt.pdf.
The pdf contains text with chinese fonts which cannot
be extracted.
But, it contains also this text (extract with xpdf or
acrobat reader) :
---------------------------------------
Lorem ipsum dolor
ad minim
---------------------------------------

The problem is i obtain on my Writer with
PDFTextStripper.WriteText something like this :
---------------------------------------
-PSFNJQTVNEPMPS
BENJOJNWFSOJBNôH
---------------------------------------
And between this valid characters, there are these
invalid characters :
0x0, 0x1, 0x5, 0x6, 0x18.

Because, i sax the content of a document into a xml,
the resulting xml is not valid because it contains
invalid characters...</detail>
		<follow_ups>
			<item>
				<date>1113814928</date>
				<sender>seblaunay</sender>
				<text>Logged In: YES 
user_id=1261395

Document to test added.</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>130664</id>
				<name>ENUtxt.pdf</name>
				<description>The pdf used</description>
				<filesize>7582</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1113814928</adddate>
				<submitted_by>1261395</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>130664: ENUtxt.pdf</old_value>
				<date>1113814929</date>
				<by>seblaunay</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1117072">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2005-02-05 16:29</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>field disapears when using SetField</summary>
		<detail>The field that says "Name in Full" has my
name in it "Shri" but when you open it, it appears for
a quick second and then disappears. If you think its a
bug then let me know and I will log a bug report. But
if there is something I am doing wrong then please
give me some tips.


See SCVLS_Certificate2.pdf

Ben</detail>
		<change_log>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1126838080</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1117515">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2005-02-06 13:20</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Text Extraction Weirdness</summary>
		<detail>I've now found a few other possible bugs as well 
(especially look at
#3, it exhibits several of the problems):

1. Extra \ characters showing up next to [] in the 
references section
of:
http://www.cs.utexas.edu/users/lam/Vita/ACM/WooLam9
3c.pdf

4. [ and ] showing up as #5B and #5D (their hex 
values), as well as the
same strange spacing problem I mentioned previously:
http://www.cs.utexas.edu/users/lasr/pub/pdf/Ftcs99_Egi
da.pdf

3. Many, many missing characters, and the #NN codes 
from above:
http://stat.tamu.edu/ftp/pub/rjcarroll/nonparametric.calib
ration/
npcal15.pdf

4. Similar problem to #3:
http://www.lns.cornell.edu/public/CBN/1995/CBN95-
11/cbn95_11.pdf

5. Truly bizarre output from these two:
http://www.cs.wm.edu/~hnw/courses/cs780/papers/flas
h-crowds02.pdf
http://www.pdcl.eng.wayne.edu/msp01/paper10.pdf</detail>
		<follow_ups>
			<item>
				<date>1112029788</date>
				<sender>thangaraj_m</sender>
				<text>Logged In: YES 
user_id=1248110

PDF conversion into a text file:
I too agree and when I tried to parse a pdf document I did 
notice that many character were missing in the final text 
document. Is there any workaround to avoid missing text 
issue?</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1501722">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2006-06-06 09:04</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="775780">PDModel.AcroForm</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Extending PDAppearance</summary>
		<detail>A use case requires programmatic application of a 
special font (bar-code) to a field. That will be 
possible if getDefaultAppearance and 
getFontAndUpdateResources are changed to protected, 
and tokens.set( setFontIndex-2, COSName.getPDFName
(pdFont.getBaseFont()) ); added to setAppearanceValue. 
Ideally, setApperanceValue should be refactored to a 
strategy pattern.
</detail>
		<follow_ups>
			<item>
				<date>1149610025</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

contact glebmail@gmail.com if you need a patch and/or a 
FieldCustomAppearance subclass </text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1118054">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2005-02-07 10:44</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="9">9</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Text moves when using SetField and then selecting field</summary>
		<detail>Look at pdf_with_lots_of_fields.pdf

Ran 

java org.pdfbox.examples.fdf.SetField 
tmp\pdf_with_lots_of_fields.pdf "Feld.2" "Test"

When you select the field with the "Test" text in it, the 
text shifts slightly to the left.  It should not do that.

While looking at this PDF, there are a lot of fields on it, 
should test setting each field to test all the various field 
types.  Then add it as a junit test.

Ben</detail>
		<follow_ups>
			<item>
				<date>1144759742</date>
				<sender>pedropuchalski</sender>
				<text>Logged In: YES 
user_id=1463773

I have similar problem, usually my text is bigger then 
field's "bounding box" so I can see only the lower part of 
chars. As I have researched the sources, I think the problem 
is with org.pdfbox.pdmodel.interactive.form.PDAppearance.
calculateFontSize(...) method. If it will be implemented 
correct for Type0Fonts(and probably others) text won't 
"move" and (in my case) I will see the whole chars(font size 
will be set properly).</text>
			</item>
			<item>
				<date>1123164513</date>
				<sender>daniel_</sender>
				<text>Logged In: YES 
user_id=1323827

I put a sample on the ftp site. The filename is: pdfbox-Bugs-
1118054_Daniel_testoutput.pdf.

Daniel</text>
			</item>
			<item>
				<date>1123160172</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Daniel,

Can you upload a sample PDF.  The PDFBox FTP site 
ftp.pdfbox.org is write only, so you can upload a sample and 
only I will be able to access it.

Ben Litchfield</text>
			</item>
			<item>
				<date>1123153368</date>
				<sender>daniel_</sender>
				<text>Logged In: YES 
user_id=1323827

I have the same problem with my PDFs. The PDF contains a 
text field that is supposed to display a bar code roated by 90 
degrees. The bar code will be displayed by using a special 
font (i.e. Code-39-30). After creating the PDF with PDFBox, 
the bar code is displayed, however not rotated. Only after 
clicking into the text field, the bar code is rotated. Similar 
behaviour as descibed below.
As we plan to use this in a customer portal and the printed 
documents have to be scanned automatically with the rotated 
bar code, you can imagine that a bugfix for this problem is 
very important and urgent for us.

Thanks in advance for your help
Daniel</text>
			</item>
			<item>
				<date>1119617694</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

The problem is that PDFBox is not correctly generating the 
appearance stream for the field.  When you click in the field 
Acrobat will regenerate it, which is why it switches back and 
forth between correct and incorrect. 

Thanks for the example docs, I will let you know when I get a 
chance to look at it.

Ben</text>
			</item>
			<item>
				<date>1119604681</date>
				<sender>seafoxx</sender>
				<text>Logged In: YES 
user_id=305823

I think that my problem posted 3 weeks ago is the same as
this bug.

when selecting the field the style changes to "as it should
be", when leaving the style changes back to "how it not
should be". I added two example-pdf files. the first one is
the original (template-pdf) with some fields having the
"comb of x characters" option enabled (did it with adobe,
not with pdfbox). the second file is the filled pdf, read it
with pdfbox, filled some fields with "setText()" and then
saved it back to disk.

I didn't add the two files to the bug, because they are
quite big (420k each).

original text form my forum post:

One defines, how many letters should be placed inside the
text field and the letters will all have the same distance
between each other. I need this option because i have
several fixed-length input fields and need to place the
letters on the correct positions. 
an examlpe of the template-pdf placed at 
http://kaempfe.net/pdf/pdfboxexample_before.pdf 
when filling the form fields with pdfbox everyting works
fine, but the comb-option gets almost lost. the output pdf
does not display the form fields correctly, the comb-option
seems to be activated when focussing one form field and
deactivated on leaving that field. the fields are not
read-only, so one can edit them in the output-pdf also. when
doing that, the comp-options comes back and the letters stay
in place when leaving the form field. 
an example of the output-pdf is placed at 
http://kaempfe.net/pdf/pdfboxexample_after.pdf</text>
			</item>
			<item>
				<date>1118088453</date>
				<sender>seafoxx</sender>
				<text>Logged In: YES 
user_id=305823

I have the same problem when using PDField.setComb(true) -
currently posted to the help-forum, added two links to the
example-files. forum thread is -&gt;
http://sourceforge.net/forum/forum.php?thread_id=1294072&amp;forum_id=267205

cya.
bastian kaempfe</text>
			</item>
			<item>
				<date>1107802107</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Also verify pdf_with_fields2.pdf!

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>priority</field>
				<old_value>5</old_value>
				<date>1107802107</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1115059">
		<submitted_by>scherpbier</submitted_by>
		<submitted_date>2005-02-02 13:32</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>NPE in org.pdfbox.util.PDFStreamEngine:303</summary>
		<detail>In build 0.7.0 when attempting to extract text from the
attached PDF, I get a NullPointerException on line 303
of org.pdfbox.util.PDFStreamEngine

The line assumes that the variable c is not null, while
it is.
I don't know the details of the code there, but adding
an additional check for c's nullness causes the NPE not
to happen and text is extracted correctly as far as I
can tell.

Let me know any more information is required.

(We ran into this PDF by accident.  I think it is
related to the JPEG 2000 standard)</detail>
		<follow_ups>
			<item>
				<date>1107646976</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

See PDF "japanese NPE.pdf"

Ben</text>
			</item>
			<item>
				<date>1107454176</date>
				<sender>scherpbier</sender>
				<text>Logged In: YES 
user_id=32816

Argh!  The file I attempted to attach is bigger then what SF
allows.
I'll email it to you.</text>
			</item>
			<item>
				<date>1107380426</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

The PDF did not get attached, make sure you check 
the "upload file" checkbox.

If it is not working then please email me the PDF.

ben@csh.rit.edu</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1216674">
		<submitted_by>tamirhassan</submitted_by>
		<submitted_date>2005-06-07 13:42</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Incorrect (zero) character widths returned in some docs</summary>
		<detail>For certain PDF documents (such as the one attached) 
the character/string widths (as obtained e.g. by the 
PDFont.getStringWidth method) are not returned 
correctly, i.e. they appear to be correct for punctuation 
characters but are zero for alphanumeric characters.  

It seems as if these alphanumeric characters are NOT 
within PDFont.firstChar and PDFont.lastChar in the 
Type 1 font.  The method therefore attempts to obtain 
the font widths from the AFM (font metric) file, but fails 
(silently) with a 'resource is null' logline message.

(Note that this problem doesn't seem to occur with Type 
1 fonts in other documents.)

A more detailed discussion regarding this issue can be 
found in this link:

http://sourceforge.net/forum/forum.php?
thread_id=1260349&amp;forum_id=267205

Thanks in advance for any help that can be obtained,

Tam</detail>
	</artifact>
	<artifact id="1418176">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2006-01-29 14:29</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>some type 3 font text is extracted incorrectly</summary>
		<detail>See encoding-12875.pdf, strangeEncoding-12875.pdf, 
Test-12875.pdf

Acrobat can extract it but PDFBox does not.

Ben</detail>
	</artifact>
	<artifact id="1144515">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2005-02-19 12:18</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Image Extraction not working for some JPEG files</summary>
		<detail>Tried to run org.pdfbox.ExtractImages on 
EMCV1chap01final.pdf and got weird looking output files.

Ben</detail>
		<change_log>
			<item>
				<field>assigned_to</field>
				<old_value>531233</old_value>
				<date>1128046266</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1153181">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2005-02-27 17:45</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>spaces in extracted text</summary>
		<detail>See "Wenjie broken text.pdf"  There are spaces 
between words.

Ben</detail>
		<follow_ups>
			<item>
				<date>1113093715</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

This issue is fixed for nont standard type3 fonts, 
which "Wenjie broken text.pdf" uses.

The extra spaces in the ocalc.pdf is a different problem that is 
still being looked into.

Ben</text>
			</item>
			<item>
				<date>1111769067</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

FYI, This problem is seen with PDFs that use Type3 fonts.  A 
solution is in the works.

Ben</text>
			</item>
			<item>
				<date>1110684782</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

In the ocalc.pdf there are some spacing issues as well

For example
"deviat e from the existing textb ooks, I would certain ly make 
major changes by emphasizing several"</text>
			</item>
			<item>
				<date>1109574663</date>
				<sender>fuwenjie</sender>
				<text>Logged In: YES 
user_id=1219597

I found that it is sometimes happened that the font size is not 
assigned correctly.  The font size would all be 1.0 in that 
case.  Under that circumstance, it is seldom happened that 
the width is not correct either.  In those cases, the width is 
often less than 1.0 which is obviously impossible.

A word in the original text may break into serveral parts and 
the return value of GetY() of each part may not right, causing 
the characters overlapes with others.

The incorrect Y value and width may obstruct us in reforming 
the word according to the Y value and width of each part.
 

</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1216689">
		<submitted_by>tamirhassan</submitted_by>
		<submitted_date>2005-06-07 13:54</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Negative horizontal position for TextPosition element</summary>
		<detail>In the file attached, the text on the entire right-hand side 
of the page is extracted as TextPosition objects with a 
negative horizontal position.

This is, in fact, a single page extracted from a multi-
page document (which is included here to conserve 
space.)  In the complete document, this problem occurs 
on certain pages, but not others.

Another user also seems to have had a somewhat 
similar problem, although I'm not sure if it referred to a 
negative X position, or just a negative string width.  I did 
not find a resolution on the forum:

http://sourceforge.net/forum/message.php?
msg_id=3126120

Thanks in advance for any help you can offer,

Tam</detail>
		<existingfiles>
			<file>
				<id>137605</id>
				<name>ancient_times_page4.pdf</name>
				<description>Sample pdf that exhibits this problem</description>
				<filesize>112730</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1118177688</adddate>
				<submitted_by>938436</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>137605: ancient_times_page4.pdf</old_value>
				<date>1118177688</date>
				<by>tamirhassan</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1178663">
		<submitted_by>mystikspiral</submitted_by>
		<submitted_date>2005-04-07 09:15</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Setting a value on a PDRadioCollection fails</summary>
		<detail>If a PDRadioCollection is instantiated for a group of radio 
buttons that have no default value selected, the setValue 
call fails when the PDCheckbox.getOnValue() method is 
invoked.  If the same group of Radio Buttons is modified 
so that one of them is the default selection, the code 
executes without error and the value is set successfully.

Simplified Example (See attached file):
Field: Applicant.Gender 
Export Value 1: Male 
Export Value 2: Female

PDRadioCollection Gender
theForm.getField(Applicant.Gender);
Gender.setValue("Male"); &lt;--Exception Thrown

Thanks.
</detail>
		<follow_ups>
			<item>
				<date>1113144510</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

The fix that you describe uses a try catch NPE block, I would 
like to try to come up with a better solution.  I don't see that 
file on the FTP site, can you try to upload it again.

Ben</text>
			</item>
			<item>
				<date>1112963882</date>
				<sender>mystikspiral</sender>
				<text>Logged In: YES 
user_id=1245859

This issue is resolved as well, with no additional code 
change.  After I implemented a resolution to Bug 1178668, 
this issue went away.  So it would seem that the lack of a 
default value was not the true cause of the error, more it was 
the processing of the kids as that default value was searched 
for.</text>
			</item>
			<item>
				<date>1112891137</date>
				<sender>mystikspiral</sender>
				<text>Logged In: YES 
user_id=1245859

Uploading file to ftp.pdfbox.org 
called "RadioButtons_NoDefault.pdf" because the upload as 
an attachment to this report failed beacause the size 
restrictions were exceeded.  

Sorry for any confusion.</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1178668">
		<submitted_by>mystikspiral</submitted_by>
		<submitted_date>2005-04-07 09:23</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Hierarchical PDRadioCollections cannot be processed.</summary>
		<detail>If there is a hierarchical series of PDRadioCollections, 
the list cannot be processed past the first instance of 
PDRadioCollection.  This is due to the fact that that the 
getKids() method of PDRadioCollection is hard-coded to 
return a List of PDCheckbox objects. 

Simplified Example (See attached File):
Applicant.Coverage (Coverage is a PDRadioCollection) 
Applicant.Coverage.Medical (Medical is a 
PDRadioCollection) 
Applicant.Coverage.Dental (Dental is a 
PDRadioCollection) 

PDRadioCollection Coverage = theForm.getField
("Applicant.Coverage");
List kids = Coverage.getKids();
...iterate kids....
if(kid_1 instanceof PDRadioCollection){
   //this should be true
}
else if(kid_1 instanceof PDField){ {
   //instead, we go here because the List contains 
PDCheckbox objects.
}</detail>
		<follow_ups>
			<item>
				<date>1113144290</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I don't see the PDF on the FTP site, can you try to upload it 
again, thanks.

Ben</text>
			</item>
			<item>
				<date>1112899408</date>
				<sender>mystikspiral</sender>
				<text>Logged In: YES 
user_id=1245859

I have resolved this issue, at least in so far as my 
requirements dictated.  Instead of returning a List od 
PDCheckbox objects, the PDFieldFactory is now used to 
create the appropriate field in the lsit.  I am attaching 
PDRadioCollection.java for your review.  I hope you can use 
this to close this issue with little to no effort on your end.

Note the modified version of PDRadioCollection.java is taken 
from a slightly old nightly build, PDFBox-0.7.1-dev-20050328.

Thanks.</text>
			</item>
			<item>
				<date>1112891214</date>
				<sender>mystikspiral</sender>
				<text>Logged In: YES 
user_id=1245859

Uploading file to ftp.pdfbox.org 
called "Nested_PDRadioCollections.pdf" because the upload 
as an attachment to this report failed beacause the size 
restrictions were exceeded.  

Sorry for any confusion.</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>128963</id>
				<name>PDRadioCollection.java</name>
				<description>Modified PDRadioCollection.java that fixes nested Radio Button objects.</description>
				<filesize>5833</filesize>
				<filetype>java/*</filetype>
				<adddate>1112899418</adddate>
				<submitted_by>1245859</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>128963: PDRadioCollection.java</old_value>
				<date>1112899418</date>
				<by>mystikspiral</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1180840">
		<submitted_by>the_limper</submitted_by>
		<submitted_date>2005-04-11 08:56</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>PDFToImage fails to render correctly</summary>
		<detail>PDPage.convertToImage() fails to work correctly.

Attached are two documents that illustrate failures.

1) mtxfidelity.pdf is a file that has the text appear
but the layout is incorrect.</detail>
		<follow_ups>
			<item>
				<date>1134429853</date>
				<sender>abruegl</sender>
				<text>Logged In: YES 
user_id=1229585

I would love to use this library for this use only. If this
class and method worked (seems to work ok on 1/3 of many
pdfs I have tested) I would be very happy, and would most
likey be filling out a donation form.</text>
			</item>
			<item>
				<date>1113235084</date>
				<sender>the_limper</sender>
				<text>Logged In: YES 
user_id=1252642

2) test.pdf is a file where the layout is correct but the
text is displayed as empty squares</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>129420</id>
				<name>mtxFidelity.pdf</name>
				<description>simple PDF file</description>
				<filesize>4585</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1113235012</adddate>
				<submitted_by>1252642</submitted_by>
			</file>
			<file>
				<id>129421</id>
				<name>test.pdf</name>
				<description>another file with rendering issues</description>
				<filesize>70518</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1113235084</adddate>
				<submitted_by>1252642</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>129421: test.pdf</old_value>
				<date>1113235084</date>
				<by>the_limper</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>129420: mtxFidelity.pdf</old_value>
				<date>1113235012</date>
				<by>the_limper</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1181857">
		<submitted_by>ng_aldridge</submitted_by>
		<submitted_date>2005-04-12 15:30</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Problem getting value from PDRadioCollection</summary>
		<detail>I am getting a NullPointerException from
PDRadioCollection.getValue (). It seems that my radio
collection dictionaries don't have kids so the
kids.size () call fails:

Line 131:

        for (int i = 0; i &lt; kids.size(); i++)
        {
            PDCheckbox btn = (PDCheckbox)kids.get(i);
            if( btn.isChecked() )
            {
                retval = btn.getOnValue();
            }
        }
        if( retval == null )
        {
            retval = getDictionary().getNameAsString(
"V" );
        }

I added a check for null value of kids and things
behaved properly. If you need a sample PDF that shows
this behaviour, I'll upload one.

Cheers,

Nathan</detail>
		<follow_ups>
			<item>
				<date>1126479352</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Also see yishi pdf.

Ben</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1182270">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-04-13 07:51</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="556660">writing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>please correct the SetField example</summary>
		<detail>Hi, at last I understand what is wrong with 
org.pdfbox.examples.fdf.setField example - my file is 
encripted but there wasn't code for decryption :) please 
add it there for the other developers.
Ilya

    private void setField( String[] args ) throws 
IOException, COSVisitorException
    {
        PDDocument pdf = null;
        try
        {
            if( args.length != 3 )
            {
                usage();
            }
            else
            {
                SetField example = new SetField();

                pdf = PDDocument.load( args[0] );
                PrintFields exporter = new PrintFields();
                if( pdf.isEncrypted() )
                {
                    try
                    {
                        pdf.decrypt( "" );
                    }
                    catch ( CryptographyException e ) {
                        System.err.println( "Error: The 
document is encrypted." );
                        usage();
                    }
                    catch( InvalidPasswordException e ) {
                        System.err.println( "Error: The 
document is encrypted." );
                        usage();
                    }
                }
                example.setField( pdf, args[1], args[2] );
                pdf.save( args[0] );
            }
        }
        finally
        {
            if( pdf != null )
            {
                pdf.close();
            }
        }
    }
</detail>
	</artifact>
	<artifact id="1258807">
		<submitted_by>gohan222</submitted_by>
		<submitted_date>2005-08-13 22:47</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Does not convert spacing.  gourps words</summary>
		<detail>The PDFTextStripper misses some spacing in between
words.  It crunches sentences together on occasions. 
After running extract look for string "demandsofGoogle's".</detail>
		<existingfiles>
			<file>
				<id>145590</id>
				<name>p125-ghemawat.zip</name>
				<description>Removes spacing</description>
				<filesize>252359</filesize>
				<filetype>application/zip</filetype>
				<adddate>1123998461</adddate>
				<submitted_by>1321754</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>145590: p125-ghemawat.zip</old_value>
				<date>1123998462</date>
				<by>gohan222</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1196559">
		<submitted_by>jstrychowski</submitted_by>
		<submitted_date>2005-05-06 06:07</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Problems with text extraction form Polish documents.</summary>
		<detail>Hello, 
 
Thanks for the PDFBox. I uses this cool tool to convert 
documents written in many languages. I have  problems with 
some Polish documents. The Polish special characters are not 
well converted in some cases. I attached an example document 
(polish.pdf ? generated by the OpenOffice1.4) witch  illustrates 
the problem. A PDFTextStriper class reads Polish characters 
but in wrong order at the ?textList? list (see flushText() method). 
These characters are placed at the end of each line of the text. A 
x coordinate of the corresponding TextPosition elements are 
valid so it is possible to reorder elements on the ?textList?. I 
wrote correction of the PDFTextStripper class which solves the 
problem. The fixed version is attached. Maybe similar 
problems could occur for other languages or different PDF 
documents. 
 
A second problem I met is also related with the Polish 
characters. In some documents the TextPosition objects 
corresponding to the Polish letters has width set to 0.0. The x 
coordinates are valid in such situations so a document is 
properly displayed but there are some errors during text 
extraction. Some extra spaces occurs within the words. I 
eliminated this problem increasing the word-space factor from 
0.5f to 0.65f in the flushText method. This correction cause 
problems for some English documents (few words may be 
joined) so I uses this correction only for documents written in  
Polish. Is it possible to deal with this problem in more 
sophisticated way ? A code like - if (isPolish) {...} - is not so 
smart I suppose :-). I attached an example document 
(polish2.pdf). My correction specialized for the Polish language 
is available in the attached PDFTextStriper class. 
 
Thanks for help! 
Jakub Strychowski </detail>
		<existingfiles>
			<file>
				<id>133255</id>
				<name>bug_polish_characters.tar.gz</name>
				<description>example documents and fixed class</description>
				<filesize>178409</filesize>
				<filetype>application/x-tgz</filetype>
				<adddate>1115384827</adddate>
				<submitted_by>1273571</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>133255: bug_polish_characters.tar.gz</old_value>
				<date>1115384828</date>
				<by>jstrychowski</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1208824">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-05-25 16:40</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Spaces in extracted file</summary>
		<detail>In trying to integrate with lucene, I was having 
problems.  The Lucene people suggested that I check 
the output of extract utility against one of my test pdf's.  
When I did, I saw spaces placed inside many of the 
words.  I was on version 0.7.0.  So I downloaded 0.7.1 
and see the same results.

One of the test files where I see this issue is attached.</detail>
		<existingfiles>
			<file>
				<id>135995</id>
				<name>Tom_3.pdf</name>
				<description>Test pdf file.  </description>
				<filesize>10145</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1117064403</adddate>
				<submitted_by>100</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>135995: Tom_3.pdf</old_value>
				<date>1117064403</date>
				<by>nobody</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1230940">
		<submitted_by>hasan_mushtaq</submitted_by>
		<submitted_date>2005-07-01 06:35</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Extracting Text in/between Bookmarks</summary>
		<detail>The Text is not properly extracted between the
bookmarks. Description is as follows

I used the setStartBookmark and the setEndBookmark
functions of the PDFTextStripper class to set the
begining and end of the part of text which i wanted to
extract. The first bookmark (Introduction) was present
in the second page and the second bokmark (Results) was
also present in the second page. let me explain 
 
&lt;page&gt; 
some text before intro blah blah blah ... 
 
Introduction. -- BOOKMARK 
The real aim of 
intro text is to give a simple intro.. 
 
Results. -- BOOKMARK 
the result is here 
&lt;/page&gt; 
 
The text that i got was 
 
&lt;textExtracted&gt; 
intro text is to give a simple intro.. 
 
Results. -- BOOKMARK 
 
the result is here  
&lt;/textExtracted&gt; 
 
but the exact result should be 
 
&lt;correctResult&gt; 
The real aim of 
intro text is to give a simple intro.. 
&lt;/correctResult&gt; 
 
In the &lt;textExtracted&gt; we see that it has skipped some
text in the intro and has gone untill the end of the page. 
 
It might be a problem with how the bookmarks were
created for this pdf. But I have tried with other pdf
files as well and they don't give the exact text
between bookmarks. If the first bookmark is on the
first page and the second on the second then I would
get all the text of the two pages irrespective of the
location of the bookmarks. I think I need to understand
how this information is present in the structure of a
PDF File and how pdfbox accesses it, is it a problem in
the creation of the bookmarks when the pdf is made or
we are missing something? I will be looking at the
PDFReference Guide to understand. Meanwhile any help
regarding the solution of this issue and the info on
how bookmarks are represented in a pdf structure would
be highly appreciated.. 
 
Best Regards 
Hasan </detail>
	</artifact>
	<artifact id="1483756">
		<submitted_by>bbartke</submitted_by>
		<submitted_date>2006-05-08 04:50</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="775780">PDModel.AcroForm</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Encoding problem: PDVariableText.setValue</summary>
		<detail>When assigning a value to PDField "AI_PLZ_ORT"
containing a german "Umlaut" (e.g. a/o/u-dieresis -&gt;
Ã¤Ã¶Ã¼) acrobat reader is displaying a cedilla instead of
a udieresis. But if you select the Field (click into)
the the value is show in the right encoding.
A \374 in PDFDocEncoding (udieresis) is inserted and a
\374 in MacRomanEncoding (cedilla) is shown.
The PDF (orig.pdf) has been created on a Mac and the
Java application to modify the PDF runs under Windows
XP (PDFUtil.java, PDFUtil.class)

--
javac -cp lib/PDFBox-0.7.2.jar -source 1.3 -target 1.3
PDFUtil.java
java -cp lib/PDFBox-0.7.2.jar;. PDFUtil
</detail>
		<existingfiles>
			<file>
				<id>177251</id>
				<name>pdfbox.zip</name>
				<description></description>
				<filesize>159358</filesize>
				<filetype>application/zip</filetype>
				<adddate>1147089024</adddate>
				<submitted_by>170868</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>177251: pdfbox.zip</old_value>
				<date>1147089024</date>
				<by>bbartke</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1391471">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-12-27 13:15</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>loosing about 2mm on left when printing</summary>
		<detail>Using the following code, see "onstaff.pdf"

Ben


documentCatalog = PDDocument.load
(fileName).getDocumentCatalog();
        pageCount = (int)documentCatalog.getPages
().getCount();
        PDPage page = (PDPage)
documentCatalog.getAllPages().get(0);
        PDRectangle mediaBox = page.findMediaBox();
        format = new PageFormat();
        Paper paper = new Paper();
        paper.setImageableArea(
0,0,mediaBox.getWidth(),mediaBox.getHeight());
        paper.setSize( mediaBox.getWidth(), 
mediaBox.getHeight() );
        format.setPaper( paper );
        format.setOrientation(PageFormat.PORTRAIT);

        PrinterJob pj = PrinterJob.getPrinterJob();

        PrintService pService = null;
        PrintService[] pservices = null;
            pservices = PrinterJob.lookupPrintServices
();
        }
        for(int i=0; i&lt;pservices.length &amp;&amp; pservices !
= null; i++)
            if(pservices[i].getName().equalsIgnoreCase
("HP")) {
                pService = pservices[i];
                break;
            }
        pj.setPageable(this);
        pj.setPrintService(pService);
        pj.print();</detail>
	</artifact>
	<artifact id="1240282">
		<submitted_by>fitzerpn</submitted_by>
		<submitted_date>2005-07-18 07:13</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Import XFDF - ArrayIndexOutOfBoundsException</summary>
		<detail>I think this is a bug. Below is the input/output from the 
command prompt. I'm trying import xfdf on the attached 
file.

Microsoft Windows XP [Version 5.1.2600]
(C) Copyright 1985-2001 Microsoft Corp.

C:\PDFBox-0.7.1\bin&gt;importxfdf form.pdf test.xfdf out.pdf
Exception in thread "main" 
java.lang.ArrayIndexOutOfBoundsException
        at java.util.ArrayList.set (ArrayList.java:324)
        at 
org.pdfbox.pdmodel.interactive.form.PDAppearance.setA
ppearanceValue (
PDAppearance.java:323)
        at 
org.pdfbox.pdmodel.interactive.form.PDVariableText.set
Value (PDVariab
leText.java:134)
        at 
org.pdfbox.pdmodel.interactive.form.PDChoiceField.setV
alue (PDChoiceF
ield.java:91)
        at 
org.pdfbox.pdmodel.interactive.form.PDField.importFDF 
(PDField.java:3
47)
        at 
org.pdfbox.pdmodel.interactive.form.PDAcroForm.import
FDF (PDAcroForm.
java:131)
        at org.pdfbox.ImportFDF.importFDF 
(ImportFDF.java:72)
        at org.pdfbox.ImportXFDF.importXFDF 
(ImportXFDF.java:108)
        at org.pdfbox.ImportXFDF.importXFDF 
(ImportXFDF.java:93)
        at org.pdfbox.ImportXFDF.main 
(ImportXFDF.java:89)

C:\PDFBox-0.7.1\bin&gt;

here is what text.xfdf contains:

&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;xfdf xmlns='http://ns.adobe.com/xfdf/' 
xml:space='preserve'&gt;
  &lt;fields&gt;
      &lt;field name='FileName'&gt;
          &lt;value&gt;CO--Other --06-15-2005&lt;/value&gt;
      &lt;/field&gt;
      &lt;field name='FormAction'&gt;
          &lt;value&gt;SaveReturn&lt;/value&gt;
      &lt;/field&gt;
      &lt;field name='FormRecNo'&gt;
          &lt;value&gt;34&lt;/value&gt;
      &lt;/field&gt;
      &lt;field name='IncidentDate'&gt;
          &lt;value&gt;06/15/2005&lt;/value&gt;
      &lt;/field&gt;
      &lt;field name='IncidentDate_RO'&gt;
          &lt;value&gt;06/15/2005&lt;/value&gt;
      &lt;/field&gt;
      &lt;field name='IncidentNum'&gt;
          &lt;value&gt;19&lt;/value&gt;
      &lt;/field&gt;
      &lt;field name='PreparedBy'&gt;
          &lt;value&gt;Debbie R Galloway&lt;/value&gt;
      &lt;/field&gt;
      &lt;field name='ShortDesc'&gt;
          &lt;value&gt;Other: TEST&lt;/value&gt;
      &lt;/field&gt;
      &lt;field name='SignatureField'&gt;
          &lt;value&gt;gallowaydr&lt;/value&gt;
      &lt;/field&gt;
      &lt;field name='SubmitFlag'&gt;
          &lt;value&gt;0&lt;/value&gt;
      &lt;/field&gt;
      &lt;field name='UserName'&gt;
          &lt;value&gt;Debbie R Galloway&lt;/value&gt;
      &lt;/field&gt;
      &lt;field name='XFDFEmail'&gt;
          
&lt;value&gt;Debbie.Galloway@odrc.state.oh.us&lt;/value&gt;
      &lt;/field&gt;
      &lt;field name='XFDFHTTP'&gt;
          &lt;value&gt;http://drcsqlfrms/XFDFDIR/&lt;/value&gt;
      &lt;/field&gt;
      &lt;field name='XFDFName'&gt;
          &lt;value&gt;DRC2091&lt;/value&gt;
      &lt;/field&gt;
      &lt;field name='cboInstAcro'&gt;
          &lt;value&gt;1&lt;/value&gt;
      &lt;/field&gt;
      &lt;field name='cboInstitution'&gt;
          &lt;value&gt;1&lt;/value&gt;
      &lt;/field&gt;
      &lt;field name='fscSubmitURL'&gt;
          &lt;value&gt;http://drcsqlfrms/CatV7/ffSubmitPDF.asp?
id=19351FFE9077461FA2D16AF2827A5DF501CFEE10
D6EC6A27280DB554F6CB058B707397E07E6AE73058
B8BB3EAF254DDF559ED879E0DE8F1F4651086BF343
5449135CF583AEB2CBFF#FDF&lt;/value&gt;
      &lt;/field&gt;
      &lt;field name='intFormVerID'&gt;
          &lt;value&gt;770&lt;/value&gt;
      &lt;/field&gt;
      &lt;field name='intStageID'&gt;
          &lt;value&gt;1117&lt;/value&gt;
      &lt;/field&gt;
      &lt;field name='sessioncookie'&gt;
          
&lt;value&gt;FBAB7DACE4D9957F580B12B2BF0CF0A97B3
7B9F769A0545AB4E51D251708548D62AC9CC000A1E3
21F73A77079442D4801AF2FD3F88CFCEFA25C8E6677
BF54D123232715C68A738E3&lt;/value&gt;
      &lt;/field&gt;
      &lt;field name='strFormTable'&gt;
          &lt;value&gt;DRC2091V1&lt;/value&gt;
      &lt;/field&gt;
      &lt;field name='txtOther'&gt;
          &lt;value&gt;TEST&lt;/value&gt;
      &lt;/field&gt;
      &lt;field name='txtTime'&gt;
          &lt;value&gt;2:00 pm&lt;/value&gt;
      &lt;/field&gt;
      &lt;field name='txtTime_RO'&gt;
          &lt;value&gt;2:00 pm&lt;/value&gt;
      &lt;/field&gt;
  &lt;/fields&gt;
  &lt;f href='http://drcsqlfrms/XFDFDIR/DRC2091.pdf'/&gt;
&lt;/xfdf&gt;
</detail>
		<existingfiles>
			<file>
				<id>142433</id>
				<name>form.pdf</name>
				<description>Version 7 Acrobat Form. No encryption.</description>
				<filesize>58131</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1121696004</adddate>
				<submitted_by>1308409</submitted_by>
			</file>
			<file>
				<id>142436</id>
				<name>test.xfdf</name>
				<description>Here is the text.xfdf file</description>
				<filesize>2572</filesize>
				<filetype>application/vnd.adobe.xfdf</filetype>
				<adddate>1121696606</adddate>
				<submitted_by>1308409</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>summary</field>
				<old_value>Import XFDF ArrayIndexOutOfBoundsException</old_value>
				<date>1121709046</date>
				<by>fitzerpn</by>
			</item>
			<item>
				<field>summary</field>
				<old_value>Import XFDF</old_value>
				<date>1121708991</date>
				<by>fitzerpn</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>142436: test.xfdf</old_value>
				<date>1121696610</date>
				<by>fitzerpn</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>142433: form.pdf</old_value>
				<date>1121696039</date>
				<by>fitzerpn</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1232976">
		<submitted_by>rnicey</submitted_by>
		<submitted_date>2005-07-05 12:59</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Text Extraction xpos (latest snapshot)</summary>
		<detail>See
http://www.brokerbuddy.net/pdfbox/

On page1 in the A- and B rows some of the rate text is
a 'bit off'.

For example in the A-, 3x30, 550 row, there's 6.967 in
one column and .117 in the next when it should be 6.96
and 7.117.
Acrobat Reader displays these fine.

If you're interested in corporate sponsorship drop me a
mail.</detail>
		<follow_ups>
			<item>
				<date>1120617638</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Name of PDF is FL_SUPERAIM.pdf</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1233696">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2005-07-06 12:08</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Unable to set data with FDF</summary>
		<detail>  I have created the PDF forms using the Adobe PDF 
designer. I want the data to be set to the PDF 
using "PDFBox'. but i am not able to bind the data to 
the PDF. I am attaching the PDF which i created. Can 
you help me overcome this problem.

See "Buyer Information.pdf"
</detail>
	</artifact>
	<artifact id="1233929">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-07-06 20:15</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="556660">writing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>setField text not displayed or printed in saved pdf</summary>
		<detail>After using PDFBox/examples/fdf/SetField.java to set a
field in a pdf and saved it, the text does not printed
from the saved pdf. The text is in the pdf. Verified
with PrintFields.java. Also if you go to the updated
field in the pdf and click on it the text appears. If I
add text to the end of the field using Acrobat, then
the text is printed. Have verified the field in the pdf
is not readonly. Was not able to determine the meaning
of the FieldFlags. Here is the output from a modified
PrintFieldshttp://www.dtic.mil/whs/directives/infomg

|--1_FROM_Include_ZIP_Code.1_FROM_Include_ZIP_Code =
COSString{boo foobar this is a test to see what happens
when it if very long} fieldFlags=8392704 required=false
readOnly=false
</detail>
		<follow_ups>
			<item>
				<date>1121448902</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I got them, just have not had a chance to look at them yet.

The FTP site is a write only site, so you can upload but not 
download.  There are a lot of users that want to send me a 
PDF but would prefer not to make it publicly available.

Ben Litchfield</text>
			</item>
			<item>
				<date>1121448689</date>
				<sender>etoelz</sender>
				<text>Logged In: YES 
user_id=1308843

Here are links to the pdf that I used. 

http://www.dtic.mil/whs/directives/infomgt/forms/eforms/dd1149.pdf
http://www.icmarc.org/xp/pubs/formscenter/457/EmployeeInformationChangeForm.pdf

I tried to download the files from ftp.pdfbox.org to test on
a different machine, but did not have permission. Thought
you might be having a similar problem</text>
			</item>
			<item>
				<date>1120790880</date>
				<sender>etoelz</sender>
				<text>Logged In: YES 
user_id=1308843

I uploaded 2 file to ftp.pdfbox.org.  dd1149.pdf and
457employeeinformationchangeform.pdf. I am having the
problem with dd1149.pdf (or I am missing something). When I
bring the file up in Acrobat the From field does not display
any text. If I click on the field, the text appears. Same
thing happens when I click on the Highlight fields checkbox.
When I print, the From field is blank. Does not matter if it
is displayed on the screen or not. 

Now why I might be missing something. With the
457employee*.pdf file I am not having the same problem.

Thanks,
eric</text>
			</item>
			<item>
				<date>1120764736</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I think the URL to the PDF got cut off.  Can you try again, or 
upload to ftp.pdfbox.org

Thanks,
Ben Litchfield</text>
			</item>
			<item>
				<date>1120736913</date>
				<sender>etoelz</sender>
				<text>Logged In: YES 
user_id=1308843

I can send the pdf, if that would help. I don't see a way to
attach it to this bug.</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1251041">
		<submitted_by>mkrebs</submitted_by>
		<submitted_date>2005-08-03 06:14</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>PDF-Extraction splits words by spaces</summary>
		<detail>I'm currently working on an indexing-service using 
jakarta lucene. Momentarily in a first step i have to 
index about 80 PDF-Documents (later approximatly 
1000 documents). Ca. 60 documents (of the 80) are 
extracted by PDFBox without any problems. But for 
around 20 documents, PDFBox generates too many 
spaces, which means, that words like "hostname" are 
extracted to "ho stna me". This happens by nearly all 
words contained in these 20 documents.
Because i have to extract page-information i am using 
PDFTextStripper with the methods setPageSeparator
(..), setStartPage(..), setEndPage(..) and writeText():

StringWriter s = new StringWriter();
PDDocument pddoc = null;
try {
	pddoc = PDDocument.load(f);
	int pageCount = pddoc.getPageCount();
	PDFTextStripper stripper = new 
PDFTextStripper();
	stripper.setPageSeparator
(IndexFiles.DOCUMENT_PAGE_SEPARATOR);
	stripper.setStartPage(1);
	stripper.setEndPage(pageCount);
	stripper.writeText(pddoc, s);
} finally {
	if (pddoc != null)
		pddoc.close();
}
StringBuffer contents = s.getBuffer();

In respect for my indexing-service it is impossible to 
index these documents correctly.

I have tried to BugFix PDFBox 
(PDFTextStripper.flushText()) and established, that the 
width returned by TextPosition.getWidth() is incorrect. 
When i multiply this width with TextPosition.getXScale
(), these documents are extracted correctly. But other 
before correctly extracted documents loose nearly all 
spaces, which means, that a complete sentence dont 
contain any spaces between words.

I have tried: PDFBox-0.7.2-dev-20050730.jar, but the 
problem still remains.

Example Text-Output:

3.5 SSL V erbindunge n
      • JSSE (Java Sec ure So ck et E xt en sion)
      • im po rt ja vax .n et .ss l. *
      • W ese nt lich e ¨And erung im Cl ient Pr ogr 
amm : (F act o ry
      P att e rn )
      Erse tze
      Soc ket s = new Soc ket (ho stna me, port numb er)
      du rc h
      SSL Soc ketF acto ry s f = (SS LSoc ketF acto ry)
S SLS ocke tFac tory .get Def ault ();
      SSL Soc ket s = (SSL Sock et) sf.c reat eSoc ket( 
hos tnam e, p ortn umbe r);
      • Daf ¨u r mus s SSL k o n fig u riert sein (si ehe 
unten).
      V o rl ¨aufige V.......
</detail>
		<existingfiles>
			<file>
				<id>144276</id>
				<name>03_2_SSL.pdf</name>
				<description>university-lecture</description>
				<filesize>189828</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1123074856</adddate>
				<submitted_by>1323199</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>144276: 03_2_SSL.pdf</old_value>
				<date>1123074858</date>
				<by>mkrebs</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1494495">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2006-05-24 11:31</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Enhancement to PDFTextStripper</summary>
		<detail>Hi, PDFBox is a great tool!

I'd like to request a simple enhancement to the code base if possible.  

If you change the three lines below to call the get*Separator() method 
the separators can be be made more dynamic by subclasses to allow 
for separators to change within the document.  For example line 
separators could include line numbers.

Thanks, 

Peter

in:
src/org/pdfbox/util/PDFTextStripper.java


line 487
change                     output.write(lineSeparator);
to                             output.write(getLineSeparator());
---

line 500
change                     output.write( wordSeparator );
 to                            output.write( getWordSeparator() );
---

line 537
change                      output.write(pageSeparator);
to                              output.write( getPageSeparator() );


</detail>
	</artifact>
	<artifact id="1276219">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2005-08-29 19:06</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Form fields not properly drawn on rotated PDF</summary>
		<detail>The PDF documents have a rotated page, and the form 
fields generate rotated text, but they do not.

cean_form1.pdf : includes the forms :
problem1
problem2
text1
week
summary

cean_form1edited.pdf , which is 
the file after given the values :

problem1  ttt!!!
problem2  ggg!!!
text1  rrr!!!
week  Performed!!!
summary  Performed2!!!</detail>
		<follow_ups>
			<item>
				<date>1125565401</date>
				<sender>seafoxx</sender>
				<text>Logged In: YES 
user_id=305823

hi folks,

just for info:

might be the same problem as described in bug 1118054
http://sourceforge.net/tracker/index.php?func=detail&amp;aid=1118054&amp;group_id=78314&amp;atid=552832

the form field is not displayed as it should be, happens
with different fonts or attributes (my problem), happens
with rotated fields in a usual page (barcode problem of
_daniel) and happens with usual fields on a rotated page. It
simply seems to be a problem that form fields are displayed
wrong if some parameter is not set to default.

i'd like to know if the form field changes it's way of being
displayed when setting the cursor into the field. this
usually happens with fields described in the other bug.

see ya
bastian</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1276629">
		<submitted_by>palsaf</submitted_by>
		<submitted_date>2005-08-30 06:47</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>PDFBox doesn't get the "correct" trailer</summary>
		<detail>The "getTrailer" function retrieve the last trailer in
the document which is not always the most updated one. </detail>
		<existingfiles>
			<file>
				<id>147527</id>
				<name>3DShop.pdf</name>
				<description></description>
				<filesize>22123</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1125409631</adddate>
				<submitted_by>1337148</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>147527: 3DShop.pdf</old_value>
				<date>1125409631</date>
				<by>palsaf</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1277051">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2005-08-30 19:33</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>error filling in form fields</summary>
		<detail>Verify that all fields in the dolform.pdf can be populated 
and extracted.  Verify for both FDF and XFDF formats.

Ben</detail>
	</artifact>
	<artifact id="1288080">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2005-09-11 15:54</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Problem with Form TextField and option "COMB"</summary>
		<detail>i have a problem with form text fields when the option
"comb of x characters" is enabled.
One defines, how many letters should be placed inside 
the text field and the
letters will all have the same distance between each 
other. I need this option
because i have several fixed-length input fields and need 
to place the letters
on the correct positions.
an examlpe of the template-pdf placed at
pdfboxexample_before.pdf
when filling the form fields with pdfbox everyting works 
fine, but the comb-option
gets almost lost. the output pdf   does not display the 
form fields correctly,
the comb-option seems to be activated when focussing 
one form field and deactivated
on leaving that field. the fields are not read-only, so one 
can edit them in
the output-pdf also. when doing that, the comp-options 
comes back and the letters
stay in place when leaving the form field.
an example of the output-pdf is placed at
pdfboxexample_after.pdf</detail>
		<follow_ups>
			<item>
				<date>1153988027</date>
				<sender>seafoxx</sender>
				<text>Logged In: YES 
user_id=305823

hi folks,

just for info:

might be the same problem as described in bug 1118054
http://sourceforge.net/tracker/index.php?func=detail&amp;aid=1118054&amp;group_id=78314&amp;atid=552832

the form field is not displayed as it should be, happens
with different fonts or attributes (my problem), happens
with rotated fields in a usual page (barcode problem of
_daniel) and happens with usual fields on a rotated page. It
simply seems to be a problem that form fields are displayed
wrong if some parameter is not set to default.

i'd like to know if the form field changes it's way of
being
displayed when setting the cursor into the field. this
usually happens with fields described in the other bug.

see ya
bastian</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1305398">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2005-09-26 18:49</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="556660">writing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="4">4</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>decrypt encrypt decrypt does not work</summary>
		<detail>I've run a simple test.

Initially loading an already encrypted document, then 
decrypting etc.

PDDocument x = PDDocument.load
("/home/paul/pdfsin/encrypted.pdf");
x.decrypt("pass");
			
x.save("/home/paul/pdfsout/decrypt1.pdf");
			
x.setEncryptionDictionary(new PDStandardEncryption());
x.encrypt("pass",null);
			
x.save("/home/paul/pdfsout/encrypt1.pdf");
			
x.decrypt("pass");
x.save("/home/paul/pdfsout/decrypt2.pdf");


The net result of this is that the decryption on the pre-
encrypted works ok,
the subsequent re-encryption works fine. (checked 
documents in acrobat, document
info OK, pages look OK and security settings as 
expected)

The final decyption however fails and the 
resultant "decrypt2.pdf" is all white
pages. If I modify the above to reload the "encrypt1.pdf" 
file, do the decrypt
and save then the final output is fine, so it is just the in 
memory version
of the PDF after encryption is non-decryptable, which of 
course can fairly easily
be worked around.</detail>
	</artifact>
	<artifact id="1305400">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2005-09-26 18:55</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>error extracting fields from pdf with usage rights.</summary>
		<detail>See: usage_rights_form.pdf

this is my scenario: 
1. I create form with Adobe Form Designer (included in 
Acrobat Professional 7). 
The form is complex and has lots of JavaScript to 
validate, change, and even dynamically fill data from 
remote Web Service! 
2. Then I add usage rights with Reader Extension 
Server, so that the form can be signed with digital 
signature with the free version of Reader 
3. Then, place the PDF form file on a WEB server (ex. 
Apache) and "give" it to the users :) 
 
So far, so good! When a user fills in the form fields, he 
or she submits the whole PDF file back to a server 
application for further processing. In my case this app is 
a Java Servlet. 
 
What I need is to extract all the fields from the pdf file 
including the digital signature. 
I know that this has been discussed already, BUT the 
simple code does not work. I suppose that the problem 
is with the output pdf file from Form Designer. 
The "not working part" is this: 
 
PDDocument pdfDocument = PDDocument.load
(pdfFile); 
PDAcroForm form = pdfDocument.getDocumentCatalog
().getAcroForm(); 
List flist = form.getFields(); 
 
Here in "flist" I get a single element which is null. 
-----------------------------------------
Hi, again. I was on a travel so the "pdf problem" was off 
for a while, but now it is up and bugging me again. 
Here is what I got: I have a form designed with Designer 
7, which has a button of type "submit pdf". This is 
because the form has a digital signature field and if I 
choose "submit xml" the Sig filed is not submited. The 
submit action is to a Java servlet where I dump the byte 
stream to a file. 
What I would like to do is get the data from each field 
including the digital signature so I can validate it. The 
PrintFields example works as long as the form is NOT 
signed. In my case I could get the form structure but all 
the fields (filed.getValue() or field.toString()) are null, and 
on the digital signature the is nothing in the COS 
dictionary about certificate or something. 
-------------------------------------------------------------------
Hello, I found where is the problem. When I sign and 
save the document in pdf-1.6 format in the raw pdf file I 
get 3 pdf forms. I guess history changes are also saved. 
The first form is blank (fields/textboxes are blank/null), 
the second is with values and the digital signature and 
the third is the same as the second one but is saved 
because (I guess again) the Submit button was pressed 
and this is a change. 
As I looked at the code of PDFBox more careful I 
supose that the pdf box gets the first form only which in 
my case is blank. 




</detail>
	</artifact>
	<artifact id="1290572">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2005-09-13 18:13</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Character positioning in PDFReader</summary>
		<detail>The PDFReader(and subsequently printing) does not 
always position characters correctly.

See:CONVENTION20.pdf
original-spacing-issue.pdf
result-spacing-issue.pdf

</detail>
	</artifact>
	<artifact id="1297272">
		<submitted_by>yves_bussard</submitted_by>
		<submitted_date>2005-09-20 22:35</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>ClassCastException in FlateFilter</summary>
		<detail>Hi Ben,

There is another Bug in FlateFilter.decode(). Let's
have a look at the following stream in the attached
document:

174 0 obj
&lt;&lt;
/Length 94
/LayerCreator /Neevia
/LayerID &lt;c5593367f4b69653b3dd4f771209026a&gt;
/LayerXML 177 0 R
/Filter [ /FlateDecode ]
/DecodeParms [ null ]
&gt;&gt;
stream
     &lt;the 94 bytes of the stream&gt;
endstream
endobj

As described in the PDF Reference this document uses
the possibility to define an array of filters instead
of just one filter(name). In the above case the array
contains only one element (filter). In this case it
should also define an array of dictionaries (one for
each filter) which it does.

Now the decode() method is passed a parametere options
which imho should be the dictionary with the parameters
for this filter instance. Instead the options parameter
 actually is the stream itself (COSStream is derived
from COSDictionary) which contains the filter
parameters in DecodeParms. Now if you have a COSArray
of COSDictionaries in the entry DecodeParms then you
have no way of knowing which set (index) of parameters
you should use. I think that the parameter options
should contain the dictionary with the parameters
itself (not the stream). This affects a few places
calling the method. 

Also another bug is on line 78 in the same method:

            predictor = dict.getInt("Predictor");
            colors = dict.getInt("Colors");
 --&gt;       bitsPerPixel =
options.getInt("BitsPerComponent");
            columns = dict.getInt("Columns");

the parameter BitsPerComponent is stored at the same
location as columns. Therefore it should be from the
variable dict that the BitsPerComponent are retrieved.
To me it looks as if originally the parameter options
used to be the decode parameters and it has been
changed later on (I don't know for which reason).

cheers
Yves
</detail>
	</artifact>
	<artifact id="1291763">
		<submitted_by>yves_bussard</submitted_by>
		<submitted_date>2005-09-15 01:58</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Error in FlateFilter?</summary>
		<detail>Hi Ben,

While debugging a problem I had I found the following
line in the method FlateFilter.decode():

if (predictor==-1 || predictor == 1 &amp;&amp; predictor == 10)

This is on line 95. Shouldn't the &amp;&amp; operator be a || ?

cheers
Yves

</detail>
		<follow_ups>
			<item>
				<date>1163206122</date>
				<sender>thib_gc</sender>
				<text>Logged In: YES 
user_id=736114

I agree with reporter yves_bussard that the &amp;&amp; in line 94 is
highly likely supposed to be ||. Clearly, the three-boolean
statement has no non-trivial meaning, even with parentheses.

The Fifth Edition (PDF 1.6) states the following about the
possible value of (what is in that Java code) the variable
"predictor":

 1  No prediction (the default value)
 2  TIFF Predictor 2
 10 PNG prediction (on encoding, PNG None on all rows)
 11 PNG prediction (on encoding, PNG Sub on all rows)
 12 PNG prediction (on encoding, PNG Up on all rows)
 13 PNG prediction (on encoding, PNG Average on all rows)
 14 PNG prediction (on encoding, PNG Paeth on all rows)
 15 PNG prediction (on encoding, PNG optimum)

(Table 3.8, page 52) The value 10 isn't very significant;
though it flags the data as PNG, it declares that there is
no prediction. The value 1 is the canonical declaration that
there is no prediction. Thus it seems quite normal that -1,
1 and 10 (-1 being the default in the code) all go down the
same code path.

As it stands in 0.7.3, the "else" branch that start line 102
never gets executed, yet it seems to deal with images. So
while I don't have a sample file on hand, it would seem that
some particular encodings of PNG images may trigger a
problem by going down a path with no prediction even though
they require a predictor function. (I don't know what the
0.7.4 code looks like.)

</text>
			</item>
			<item>
				<date>1127106384</date>
				<sender>yves_bussard</sender>
				<text>Logged In: YES 
user_id=908162

This line actually is not the source of my problem. I just
stumbled over it. It is a logical problem (or I really need
to start learning java again from scratch): How can a
variable be equal to 1 AND 10. The line just doesn't make sense.</text>
			</item>
			<item>
				<date>1126853380</date>
				<sender>yves_bussard</sender>
				<text>Logged In: YES 
user_id=908162

This line actually is not the source of my problem. I just
stumbled over it. It is a logical problem (or I really need
to start learning java again from scratch): How can a
variable be equal to 1 AND 10. The line just doesn't make sense.</text>
			</item>
			<item>
				<date>1126838229</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

The predictor section of code was actually a contribution, so I 
will need to take a little while to verify what is going on.  Can 
you attach/upload a PDF that exhibits this issue?

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1126838229</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1291886">
		<submitted_by>yves_bussard</submitted_by>
		<submitted_date>2005-09-15 04:57</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Unexpected end of ZLIB input stream</summary>
		<detail>This bug reopens bug number 1261555:

The attached pdf document produces a "Unexpected end of
ZLIB input stream" exception when trying to extract the
text for example. My environment is WindowsXP.

It looks as if the Inflater in
InflaterInputStream.read() method does not recognize
that the stream is finished and tries to read/fill the
next bytes from the input stream, which is empty. I
don't know if the file is just corrupt, but I found a
lot like this one and Acrobat Reader seems to handle it.

The workaround described in bug 1261555 seems to work
but is not really nice.

cheers
Yves
</detail>
		<follow_ups>
			<item>
				<date>1136943219</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

See also leonardo.menezes-chinanihc.pdf

Ben</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>149154</id>
				<name>End_of_ZLIB_error.pdf</name>
				<description>"Unexpected end of ZLIB input stream" producing document</description>
				<filesize>126524</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1126785438</adddate>
				<submitted_by>908162</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>149154: End_of_ZLIB_error.pdf</old_value>
				<date>1126785444</date>
				<by>yves_bussard</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1086372">
		<submitted_by>jinfeng_wang</submitted_by>
		<submitted_date>2004-12-16 03:49</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>bug with the Type3 font</summary>
		<detail>hi, ben , today i found another bug  withe the  type3 
font.

you know, the type3 font is used to display some other 
special "chatacter" exception the ASCII font, for 
example, the  maths formula, the CJK chararter in some 
PDF file.  in the PDFont.encode(), it will revoke the 
following :
retval = encoding.getCharacter( getCodeFromArray( c, 
offset, length ) );

in the  static Encoding.getCharacter( COSName name ),  
it  should return the charcter according to the cosname. 
however, in the  encoding.getCharacte() , it will return 
the cosname when meeting a "special character".

i think the following code should be comment out:
        if( character == null )
        {
          // it will return the Name to replace the correct 
chacter.
           character = name.getName();
        }</detail>
		<follow_ups>
			<item>
				<date>1103271109</date>
				<sender>jinfeng_wang</sender>
				<text>Logged In: YES 
user_id=1145721

the PDF file using Type3 Font:

http://www.census.gov/population/socdemo/race/indian/cp-3-
7/tab01.pdf  - the dash character is Type3 font.
http://www.math.pku.edu.cn/course/probability/download/11.
pdf - all the Chinese is Type3 font.
http://ee-wcl.tamu.edu/itw2004/program/yeung_inv.pdf

you can refer the PDF Reference  version 1.5 page 386.
http://partners.adobe.com/public/developer/pdf/index_referen
ce.html

you can try to copy the text from the adobe reader , and 
comparing to the result of the PDFBox.  :-)

certainly, if the Encoding.getCharacter() can return null as i 
have modified, the code in PDFStreamEngine.showString() 
should be corrected  as following :

 if (c!=null) {
                stringResult.append( c );
                log.info("char="+c);               
 } else{ 
            	continue;
 }

</text>
			</item>
			<item>
				<date>1103257723</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Please attach or mail me a pdf with this.

Thanks
ben@csh.rit.edu</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1128046248</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1259747">
		<submitted_by>guzzil</submitted_by>
		<submitted_date>2005-08-15 02:40</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Excetion while extracting images</summary>
		<detail>when trying to extract images from I pdf, i get exceptions  
like  
Exception in thread "main" java.io.IOException: Unknown  
stream filter:COSName{JBIG2Decode}  
        at  
org.pdfbox.filter.FilterManager.getFilter(FilterManager.java:116)  
        at  
org.pdfbox.cos.COSStream.doDecode(COSStream.java:276)  
        at  
org.pdfbox.cos.COSStream.doDecode(COSStream.java:240)  
        at  
org.pdfbox.cos.COSStream.getUnfilteredStream(COSStream.java:173)  
        at  
org.pdfbox.pdmodel.common.PDStream.createInputStream(PDStream.java:205)  
        at  
org.pdfbox.pdmodel.common.PDStream.getByteArray(PDStream.java:458)  
        at  
org.pdfbox.pdmodel.graphics.xobject.PDPixelMap.getRGBImage(PDPixelMap.java:131)  
        at  
org.pdfbox.pdmodel.graphics.xobject.PDPixelMap.write2OutputStream(PDPixelMap.java:153)  
        at  
org.pdfbox.pdmodel.graphics.xobject.PDXObjectImage.write2file(PDXObjectImage.java:117)  
        at  
org.pdfbox.ExtractImages.extractImages(ExtractImages.java:169)  
        at  
org.pdfbox.ExtractImages.main(ExtractImages.java:73)  
  
The pdfs are scanned images, which are afterwards  
optimized with Adobe Acrobats "optimize" function.  
  
pdfimages from xpdf can extract the images.  
 
I can send you a pdf with this error (it is to big for an 
upload). </detail>
		<follow_ups>
			<item>
				<date>1124159119</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

yes please upload the pdf to ftp.pdfbox.org and I will take a 
look at it.

Ben Litchfield</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1126837979</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1253958">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-08-08 00:27</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>REPLACE TEXT + ADD BOOKMARK</summary>
		<detail>hello,

i´m searching for a tool, which i can use to search for a 
specific character and replace them. i also need the 
feature to add a bookmark to an external file to an 
existing text in a pdf-document.

does pdfbox support this kind of work?

thank you for your help

:o:k:
</detail>
		<change_log>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1126837995</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1240285">
		<submitted_by>fitzerpn</submitted_by>
		<submitted_date>2005-07-18 07:17</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Import XFDF 2 - NullPointerException</summary>
		<detail>I think this is also a bug. Below is the input/output from 
the command prompt. 


C:\PDFBox-0.7.1\bin&gt;importxfdf ir.pdf data.xfdf 
output.pdf
Exception in thread "main" 
java.lang.NullPointerException
        at 
org.pdfbox.pdmodel.interactive.form.PDAppearance.conv
ertToMultiLine (
PDAppearance.java:460)
        at 
org.pdfbox.pdmodel.interactive.form.PDAppearance.setA
ppearanceValue (
PDAppearance.java:228)
        at 
org.pdfbox.pdmodel.interactive.form.PDVariableText.set
Value (PDVariab
leText.java:134)
        at 
org.pdfbox.pdmodel.interactive.form.PDField.importFDF 
(PDField.java:3
47)
        at 
org.pdfbox.pdmodel.interactive.form.PDAcroForm.import
FDF (PDAcroForm.
java:131)
        at org.pdfbox.ImportFDF.importFDF 
(ImportFDF.java:72)
        at org.pdfbox.ImportXFDF.importXFDF 
(ImportXFDF.java:108)
        at org.pdfbox.ImportXFDF.importXFDF 
(ImportXFDF.java:93)
        at org.pdfbox.ImportXFDF.main 
(ImportXFDF.java:89)

C:\PDFBox-0.7.1\bin&gt;

here is the contents of the xfdf file (data.xfdf): 

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xfdf xmlns="http://ns.adobe.com/xfdf/" 
xml:space="preserve"
&gt;&lt;fields
&gt;&lt;field name="AdminAssist"
&gt;&lt;value
&gt;Yes&lt;/value
&gt;&lt;/field
&gt;&lt;field name="Administration"
&gt;&lt;value
&gt;Yes&lt;/value
&gt;&lt;/field
&gt;&lt;field name="DepHeadDesc"
&gt;&lt;value
&gt; &lt;/value
&gt;&lt;/field
&gt;&lt;field name="EEO"
&gt;&lt;value
&gt;Yes&lt;/value
&gt;&lt;/field
&gt;&lt;field name="FormAction"
&gt;&lt;value
&gt;Save&lt;/value
&gt;&lt;/field
&gt;&lt;field name="FormDate"
&gt;&lt;value
&gt;07/07/2005&lt;/value
&gt;&lt;/field
&gt;&lt;field name="Health_Safety"
&gt;&lt;value
&gt;Yes&lt;/value
&gt;&lt;/field
&gt;&lt;field name="IncidentDate"
&gt;&lt;value
&gt;07/07/2005&lt;/value
&gt;&lt;/field
&gt;&lt;field name="IncidentDesc"
&gt;&lt;value
&gt;;kasf;lkasdkl;jasdfjkfasd
'fas
df
'asdfasd';
fa';dfasdfasdf
'asdf
'asd
fas
df
asd
fasd
fa
sdfasdf&lt;/value
&gt;&lt;/field
&gt;&lt;field name="IncidentTime"
&gt;&lt;value
&gt;16:21&lt;/value
&gt;&lt;/field
&gt;&lt;field name="Investigator"
&gt;&lt;value
&gt;Yes&lt;/value
&gt;&lt;/field
&gt;&lt;field name="Med"
&gt;&lt;value
&gt;Yes&lt;/value
&gt;&lt;/field
&gt;&lt;field name="Operations"
&gt;&lt;value
&gt;Yes&lt;/value
&gt;&lt;/field
&gt;&lt;field name="OtherDesc"
&gt;&lt;value
&gt;asdfasdfasdfasdfasdf&lt;/value
&gt;&lt;/field
&gt;&lt;field name="PersonnelOfficer"
&gt;&lt;value
&gt;Yes&lt;/value
&gt;&lt;/field
&gt;&lt;field name="RecordOfficer"
&gt;&lt;value
&gt;Yes&lt;/value
&gt;&lt;/field
&gt;&lt;field name="SpecServices"
&gt;&lt;value
&gt;Yes&lt;/value
&gt;&lt;/field
&gt;&lt;field name="StaffName"
&gt;&lt;value
&gt;as5d4f6as5d4f6a5sd4f6&lt;/value
&gt;&lt;/field
&gt;&lt;field name="StaffTitle"
&gt;&lt;value
&gt;6a5sd4f65asd4f65as4df65&lt;/value
&gt;&lt;/field
&gt;&lt;field name="Subject"
&gt;&lt;value
&gt;UOF&lt;/value
&gt;&lt;/field
&gt;&lt;field name="chkDeptHead"
&gt;&lt;value
&gt;Yes&lt;/value
&gt;&lt;/field
&gt;&lt;field name="txtAction"
&gt;&lt;value
&gt;sdafasdfasdf
a
sdf
asdf
asd
f
asdf
a&lt;/value
&gt;&lt;/field
&gt;&lt;field name="txtInvolves"
&gt;&lt;value
&gt;asdfasdfasjdfkjasd;lkf;jlkfdsafjfjkl;ajkl;kjl;&lt;/value
&gt;&lt;/field
&gt;&lt;field name="txtLocation"
&gt;&lt;value
&gt;as5d4f65asd4f65asd4f6&lt;/value
&gt;&lt;/field
&gt;&lt;/fields
&gt;&lt;ids 
original="4397E7BF36CCF736546813C9D787D1D9" 
modified="30B29E4F37C15747BC26D9D9754378F0"
/&gt;&lt;f href="../../FITZERPN/My Documents/Forms in 
Catalog/DRC1000v1.pdf"
/&gt;&lt;/xfdf
&gt;</detail>
		<follow_ups>
			<item>
				<date>1149711756</date>
				<sender>blmatthews</sender>
				<text>Logged In: YES 
user_id=116912

Hmmm, it sort of mangled that diff. It's a simple change, 
on line 460 of PDAppearance.java, change value.substring 
to line.substring.</text>
			</item>
			<item>
				<date>1149711511</date>
				<sender>blmatthews</sender>
				<text>Logged In: YES 
user_id=116912

I've encountered this too, it's a simple wrong variable 
use. Here's a patch:

diff -rc PDFBox-
0.7.2.orig/src/org/pdfbox/pdmodel/interactive/form/PDAppear
ance.java PDFBox-
0.7.2.works/src/org/pdfbox/pdmodel/interactive/form/PDAppea
rance.java
*** PDFBox-
0.7.2.orig/src/org/pdfbox/pdmodel/interactive/form/PDAppear
ance.java Mon Sep  5 14:38:00 2005
--- PDFBox-
0.7.2.works/src/org/pdfbox/pdmodel/interactive/form/PDAppea
rance.java        Mon Jun  5 17:18:03 2006
***************
*** 457,463 ****
          StringBuffer result = new StringBuffer
(line.length() + 64);
          while( (currIdx = line.indexOf('\n',lastIdx )) 
&gt; -1 )
          {
!             result.append(value.substring
(lastIdx,currIdx));
              result.append(" ) Tj\n0 -13 Td\n(");
              lastIdx = currIdx + 1;
          }
--- 457,463 ----
          StringBuffer result = new StringBuffer
(line.length() + 64);
          while( (currIdx = line.indexOf('\n',lastIdx )) 
&gt; -1 )
          {
!             result.append(line.substring
(lastIdx,currIdx));
              result.append(" ) Tj\n0 -13 Td\n(");
              lastIdx = currIdx + 1;
          }
</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>142435</id>
				<name>ir.pdf</name>
				<description>Version 6 Acrobat Form. No Encryption</description>
				<filesize>35822</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1121696248</adddate>
				<submitted_by>1308409</submitted_by>
			</file>
			<file>
				<id>142437</id>
				<name>data.xfdf</name>
				<description>Here is the Data.xfdf file</description>
				<filesize>1900</filesize>
				<filetype>application/vnd.adobe.xfdf</filetype>
				<adddate>1121696647</adddate>
				<submitted_by>1308409</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1126838041</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>summary</field>
				<old_value>Import XFDF 2</old_value>
				<date>1121709026</date>
				<by>fitzerpn</by>
			</item>
			<item>
				<field>File Deleted</field>
				<old_value>142438: </old_value>
				<date>1121701844</date>
				<by>fitzerpn</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>142438: data.xfdf</old_value>
				<date>1121696694</date>
				<by>fitzerpn</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>142437: data.xfdf</old_value>
				<date>1121696654</date>
				<by>fitzerpn</by>
			</item>
			<item>
				<field>category_id</field>
				<old_value>100</old_value>
				<date>1121696528</date>
				<by>fitzerpn</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>142435: ir.pdf</old_value>
				<date>1121696249</date>
				<by>fitzerpn</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1228171">
		<submitted_by>yves_bussard</submitted_by>
		<submitted_date>2005-06-27 04:38</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>TextPosition.width incorrect if text is rotated</summary>
		<detail>Hi Ben,

I noticed that if a text is rotated, then it's widht is
not calculated correctly. This is because you only look
at the page rotation rather than the transformation
matrix. I.e. the page may not have a rotation but the
text itself may be rotated (e.g. because the text
transformation matrix contains a rotation). 

You do this just before calling showCharacter() at the
end of the method showString(). I fixed this in my
version by using the following method to retrieve the
rotation:

/**
 * Returns the current absolute rotation of the text.
 * @param ctm the current transformation matrix.
 * @param textTransformationMatrix the transformation
matrix
 *              of the text.
 * @return the current absolute rotation of the text. The 
 *              returned value is one of 0, 90, 180, 270
 */
protected int getTextRotation (
	Matrix ctm, Matrix textTransformationMatrix
) {
	// compute the rotation
	Matrix m=(Matrix) textTransformationMatrix.clone();
	m.multiply(ctm);
	float a= m.getValue(0,0);
	float b= m.getValue(0,1);
	float c= m.getValue(1,0);
	float d= m.getValue(1,1);
	int rotation=0;
	if (Math.abs(a * d) &gt; Math.abs(b * c)) {
		rotation= (d&gt;0) ? 0 : 180;
	} else {
		rotation= (c&lt;0) ? 90 : 270;
	}
	return rotation;
}

I'm using the rotation returned by this method instead
of the pageRotation to calculate the
totalStringDisplacement. Also, you may want to add the
handling of a 180 rotation.

I don't know if somehow we have to take the
pageRotation in consideration or whether this is
already included in the CTM.

cheers
Yves
</detail>
		<change_log>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1126838078</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1205776">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-05-20 09:31</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>PDAppearance convertToMultiline #460 - Null Pointer Exceptio</summary>
		<detail>When converting a string with embedded \n characters 
into multi-line format, the code is referencing the "value" 
variable (which has not been initialized and results in a 
null pointer exception)

I think you want to reference the "line" parameter 
instead.</detail>
		<change_log>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1126838078</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1205771">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-05-20 09:27</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>PDChoiceField setValue() #31</summary>
		<detail>The "opt" tuple of a listbox/combobox is a COSArray.
The elements of the array are either a simple 
COSString, or a COSArray of 2 COSStrings.  (the latter 
represents a listbox item and a value)

PDChoiceField.setValue assumes that the type of 
EVERY element in the "opt" array matches the type of 
the FIRST element in the "opt" array.  This is not the 
case.  Based on how the PDF form field was 
created, "opt" array contains a mix of both simple 
COSString elements and compound COSArray 
elements.

The setValue() code must be restructured to check the 
type of each item in the "opt" array.</detail>
		<change_log>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1126838078</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1192516">
		<submitted_by>alaki</submitted_by>
		<submitted_date>2005-04-29 09:15</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>PDFBox does not recognizes this PDF file</summary>
		<detail>It seems the PDFBox can not show the test.pdf file
using the following code.


import org.pdfbox.pdmodel.PDDocument;
import org.pdfbox.pdmodel.PDPage;
import org.pdfbox.exceptions.InvalidPasswordException;
import org.pdfbox.pdfviewer.PDFPagePanel;

import javax.swing.*;
import java.io.InputStream;
import java.io.IOException;
import java.io.File;
import java.io.FileInputStream;
import java.awt.*;


public class PDFTest2 {
    public static void main(String args[])  {
        InputStream input = null;
        File f = new File("c:\\temp\\test.PDF");
        PDDocument document = null;
        try {
            input = new FileInputStream(f);
            document = parseDocument(input);
        } catch (IOException e) {
            e.printStackTrace();
        }
        java.util.List pages =
document.getDocumentCatalog().getAllPages();
        PDPage page = (PDPage) pages.get(0);
        PDFPagePanel panel = null;
        try {
            panel = new PDFPagePanel();
            panel.setPage(page);
        } catch (IOException e) {
            e.printStackTrace();
        }
        JFrame frame = new JFrame();
        frame.setSize(600, 600);
        frame.getContentPane().setLayout(new
BorderLayout());
        frame.getContentPane().add(panel,
BorderLayout.CENTER);
        frame.setVisible(true);
    }

    private static PDDocument parseDocument(InputStream
input) throws IOException {
        PDDocument document = PDDocument.load(input);
        if (document.isEncrypted()) {
            try {
                document.decrypt("");
            } catch (InvalidPasswordException e) {
                System.err.println("Error: The document
is encrypted.");
            } catch
(org.pdfbox.exceptions.CryptographyException e) {
                e.printStackTrace();
            }
        }
        return document;
    }
}
</detail>
		<existingfiles>
			<file>
				<id>132281</id>
				<name>test.PDF</name>
				<description>The one page document that can not be shown by PDFBox</description>
				<filesize>37607</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1114791319</adddate>
				<submitted_by>1263226</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1126838079</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>summary</field>
				<old_value>The page does not show up</old_value>
				<date>1115409452</date>
				<by>alaki</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>132281: test.PDF</old_value>
				<date>1114791319</date>
				<by>alaki</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1120209">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-02-10 09:54</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Font problem when setting form value</summary>
		<detail>When setting a form value the font seems to be altered.

Example:

http://www.kreisalarm.de/downloads/pdfbox_bug.zip

When changing the field called "vorname" with iText, the 
font seems to be the same (same size).

When changing the field using PDFBox-0.7.1-dev-
20050210 the font-size seems to be greater.</detail>
		<change_log>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1126838079</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1117537">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2005-02-06 14:24</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Text extraction fails for PDFs from Apple's quartzfilter</summary>
		<detail>Text extraction fails on pdf-documents filtered with 
Apple's quartzfilter (regardless of the filtering done). 
Only some number of line breaks are extracted from the 
filtered document. I tried the text extraction with the 
included utility class as well as my own implementation 
(following example from the utility class).

Please find enclosed two documents:
    loremipsum.pdf - a simple pdf with a page of dummy 
text, with this the extractioni works OK
    loremipsum.filtered.pdf - pdf filtered with quarzfilter  
(with a dummy filter specification not doing anything 
useful). With this extraction fails. </detail>
		<change_log>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1126838079</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1117067">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2005-02-05 16:02</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Number object replaces page object</summary>
		<detail>In the j050201ee788.pdf PDF there are two objects with 
the same object number one is a number the other is a 
page.

I think this is valid with the PDF 1.5 reference, need to 
add support for this.

Ben</detail>
		<change_log>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1126838080</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1352411">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-11-09 09:55</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>viewer crashed</summary>
		<detail>Hi,
you have great product.
Tried to use viewer and it crashed
 public static void main(String []args)
  {
    try {
      PDDocument pdf = PDDocument.load(args[0]);
      PDDocumentCatalog cat =pdf.getDocumentCatalog
();
      List l=cat.getAllPages();
      PDPage page=(PDPage)l.get(0);
      PDFPagePanel p = new PDFPagePanel();
//      pdf.close();
      p.setPage(page);
      JFrame fr = new JFrame();
      fr.setSize(800,600);

      fr.getContentPane().add(p);
      fr.setVisible(true);
    }
    catch(IOException e) {

    }
  }
I attached file for testing</detail>
		<existingfiles>
			<file>
				<id>155590</id>
				<name>RX_Fixed.pdf</name>
				<description>this is pdf file I tried to open vith viewer</description>
				<filesize>48965</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1131558911</adddate>
				<submitted_by>100</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>155590: RX_Fixed.pdf</old_value>
				<date>1131558912</date>
				<by>nobody</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1327309">
		<submitted_by>roso</submitted_by>
		<submitted_date>2005-10-14 22:02</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="556660">writing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>ImportXFDF results in PDF with larger text fields</summary>
		<detail>Using PDFBox-0.7.2

ImportXFDF (and ImportFDF) results in PDF with larger text
If focus on field text size is back to normal
Exit the field and the font becomes large again, some
fields display same string overlayed</detail>
	</artifact>
	<artifact id="1430273">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2006-02-12 12:44</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="817859">PDFReader</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>PDFReader text shows as boxes</summary>
		<detail>See newcent_soca_trad.pdf

Ben</detail>
		<follow_ups>
			<item>
				<date>1144680313</date>
				<sender>govardhana</sender>
				<text>Logged In: YES 
user_id=1452645

Hi Ben,

I was going through the Pdf file conversion by the acrobat 
professional. One difference i observed between the 
extraction of text by acrobat professional and PDFBox is 
that while exracting the text from the pdf file, the 
PDFBox extracts even the text from the image object if 
there is some text present, but the acrobat doesn't do 
that it eliminates the text which is present in the 
images. So that makes the difference. When we start 
extract the text from the images if there is some text 
which is in a non-ascii format then that text is 
represented as a box because it is extracted as it from 
the image. The acrobat avoids this type of extraction and 
does not give any box. 

This is only my view if i am wrong thn please excuse me.
I am waiting for your reply on this.

Thanking you

Regards,
Govardhana</text>
			</item>
			<item>
				<date>1144670532</date>
				<sender>govardhana</sender>
				<text>Logged In: YES 
user_id=1452645

Hi Ben,

Even i am facing the same problem. Sometimes when i try to 
extract the PDF file content the extracted text contains 
boxes which doesn't give me any idea of they mean. When i 
tried to extract the same pdf file using the acrobat 
professional the whole text which contained boxes was 
eliminated and the rest of the text content was extracted. 
I wanted to know whether any remedy as been found or can u 
help to do the same what the acrobat professional does. 

Thank You

Regards,
Govardhan</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1323753">
		<submitted_by>loppermann</submitted_by>
		<submitted_date>2005-10-11 04:27</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Indexed color images have wrong colors after encryption</summary>
		<detail>When a PDF including an index-color image is encrypted,
the colors get mixed up. The pallette seems to remain
intact, but the colors of the pixels are wrong.

Test code: (bitmaptest.pdf is attached)

package pdfboxtest;
import org.pdfbox.pdmodel.PDDocument;
import org.pdfbox.pdmodel.encryption.*;
import java.io.*;

public class Main {
        public static void main(String[] args) {
        try {
            PDStandardEncryption enc = new
PDStandardEncryption();
           
enc.setVersion(PDEncryptionDictionary.VERSION2_VARIABLE_LENGTH_ALGORITHM);
           
enc.setRevision(PDStandardEncryption.REVISION3);
            enc.setLength(128);
            PDDocument doc =
PDDocument.load("bitmaptest.pdf");
            doc.setEncryptionDictionary(enc);
            doc.encrypt("owner", "");
            doc.save("result.pdf");
            doc.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }    
}
</detail>
		<follow_ups>
			<item>
				<date>1129368683</date>
				<sender>loppermann</sender>
				<text>Logged In: YES 
user_id=1359988

I haven't found anything about exceptions for strings in the
spec. On the otherhand, acrobar reader as well as pdfbox
clearly seem not to decrypt the palette string.
I am not an expert at cryptography, but I imagine, that this
could have the following reason:
Since palettes are often known (windows standard palette,
web-palette etc.) encrypting them, might give an attacker a
reasonable guess at what the cleartext of the encrypted
string should look like. Hence, if he was able to use a
clear-text attack against the palette string he could use
the extracted key for all other streams in the file.
Since the a palette does not include very sensitive
information by itself, it might be a more secure choice to
not encrypt it at all, in order to protect from such
clear-text attacks.</text>
			</item>
			<item>
				<date>1129305400</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

strings should be encrypted, but there are some exceptions.  
thanks for looking further into this for me.  I will check with 
the PDF reference to see if it says anything.  the exceptions 
are usually security related so I would be surprised if it was 
not suppose to encrypted, there it might be something related.

Ben</text>
			</item>
			<item>
				<date>1129305324</date>
				<sender>loppermann</sender>
				<text>Logged In: YES 
user_id=1359988

ok, if all strings are not encrypted, Docuemnt information
will get messed up, i.e. it will be encrypted during
decryption :)</text>
			</item>
			<item>
				<date>1129305065</date>
				<sender>loppermann</sender>
				<text>Logged In: YES 
user_id=1359988

my observation of the palatte staying intact seems to be
wrong. after some more testing and debugging, I see, that
the palette seems to get encrypted, which I think it should
not be. Due to the symmetric nature of RC4, encrypting,
decrypting and encrypting again will yield the right
palette. So even PDFBox does not try to decypt the palette
string it has encrypted when opening and decrypting the PDF.
When I disable the encryption of Strings in the PDFWriter,
everything seems to work fine. I haven't found this in the
spec yet, with which I'm not so familiar. I will keep
looking though.

So if in fact strings should not be encrypted (and the fact
that they are not decrypted seems to imply this), the fix is
simply to take out the encryption of strings in PDFWriter.
</text>
			</item>
			<item>
				<date>1129030316</date>
				<sender>loppermann</sender>
				<text>Logged In: YES 
user_id=1359988

attached test case</text>
			</item>
			<item>
				<date>1129030138</date>
				<sender>loppermann</sender>
				<text>Logged In: YES 
user_id=1359988

attached result.pdf file with messed up colors</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>152105</id>
				<name>bitmaptest.pdf</name>
				<description>pdf containg an indexed color image</description>
				<filesize>14049</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1129030056</adddate>
				<submitted_by>1359988</submitted_by>
			</file>
			<file>
				<id>152106</id>
				<name>result.pdf</name>
				<description>result.pdf file with messed up colors</description>
				<filesize>13927</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1129030139</adddate>
				<submitted_by>1359988</submitted_by>
			</file>
			<file>
				<id>152108</id>
				<name>Main.java</name>
				<description>test case source</description>
				<filesize>743</filesize>
				<filetype>application/octet-stream</filetype>
				<adddate>1129030316</adddate>
				<submitted_by>1359988</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>152108: Main.java</old_value>
				<date>1129030319</date>
				<by>loppermann</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>152106: result.pdf</old_value>
				<date>1129030158</date>
				<by>loppermann</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>152105: bitmaptest.pdf</old_value>
				<date>1129030057</date>
				<by>loppermann</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1542907">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2006-08-18 15:54</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>A drawing error occured</summary>
		<detail>I am using the example code to draw a jpg onto a pdf.
There are no errors thrown but when I open the pdf the
following error message is thrown - "A drawing error
occured".

Any help is appreciated.

Email address krreddy@gmail.com

Code below

/**
 * Copyright (c) 2005, www.pdfbox.org
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms,
with or without
 * modification, are permitted provided that the
following conditions are met:
 *
 * 1. Redistributions of source code must retain the
above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the
above copyright notice,
 *    this list of conditions and the following
disclaimer in the documentation
 *    and/or other materials provided with the
distribution.
 * 3. Neither the name of pdfbox; nor the names of its
 *    contributors may be used to endorse or promote
products derived from this
 *    software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS
AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING,
BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS
FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR
CONTRIBUTORS BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY
WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
DAMAGE.
 *
 * http://www.pdfbox.org
 *
 */
package edu.mayo.pcs.pdf;

import java.awt.print.PrinterException;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;

import org.pdfbox.exceptions.COSVisitorException;
import org.pdfbox.pdmodel.PDDocument;
import org.pdfbox.pdmodel.PDPage;
import org.pdfbox.pdmodel.edit.PDPageContentStream;
import org.pdfbox.pdmodel.font.PDFont;
import org.pdfbox.pdmodel.font.PDType1Font;
import org.pdfbox.pdmodel.graphics.xobject.PDJpeg;
import org.pdfbox.pdmodel.graphics.xobject.PDXObjectImage;

/**
 * This is an example that creates a simple document.
 *
 * The example is taken from the pdf file format
specification.
 *
 * @author Ben Litchfield (ben@csh.rit.edu)
 * @version $Revision: 1.5 $
 */
public class ImageToPDF {

    /**
     * create the second sample document from the PDF
file format specification.
     *
     * @param file The file to write the PDF to.
     * @param image The filename of the image to put in
the PDF.
     *
     * @throws IOException If there is an error writing
the data.
     * @throws COSVisitorException If there is an error
writing the PDF.
     */
    public void createPDFFromImage(String file, String
image) throws PrinterException,
            COSVisitorException {

        PDDocument doc = null;
        try
            {
                doc = new PDDocument();

                PDPage page = new PDPage();
                doc.addPage(page);
                PDFont font = PDType1Font.HELVETICA_BOLD;

                PDPageContentStream contentStream = new
PDPageContentStream(doc, page);
                contentStream.beginText();

                contentStream.setFont(font, 12);
               
contentStream.moveTextPositionByAmount(100, 700);
                contentStream.drawString("This is a
text pdf doc");
                contentStream.endText();

                PDXObjectImage ximage = null;
                if (image.toLowerCase().endsWith(".jpg"))
                    {
                        ximage = new PDJpeg(doc, new
FileInputStream(image));
                    }
                contentStream.drawImage(ximage, 20, 200);
                contentStream.close();
                doc.save(file);
            } catch (FileNotFoundException e)
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e)
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

    }

    /**
     * This will create a PDF document with a single
image on it.
     * &lt;br /&gt;
     * see usage() for commandline
     *
     * @param args Command line arguments.
     */
    public static void main(String[] args) {

        ImageToPDF app = new ImageToPDF();
        try
            {

                app.createPDFFromImage("xyz.pdf",
"mc.jpg");

            } catch (Exception e)
            {
                e.printStackTrace();
            }
    }

    /**
     * This will print out a message telling how to use
this example.
     */
    private void usage() {

        System.err.println("usage: " +
this.getClass().getName() + " &lt;output-file&gt; &lt;image&gt;");
    }
}</detail>
	</artifact>
	<artifact id="1432143">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2006-02-15 05:05</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="556660">writing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>AES Support</summary>
		<detail>Hi, it should be right time now to add AES support
which is in default enabled on all encrypted PDF
documents made by Adobe Acrobat 7.0.

Since AES is supported by java JCE it should not be a
big deal. Currently only Big Faceless PDF Library seems
to support it.

Thanks for big help.

</detail>
	</artifact>
	<artifact id="1339022">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-10-26 16:44</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Missing repeated characters</summary>
		<detail>When I extract the first line of text from each page, 
sometimes a 2nd letter in a 2 character repeated letter 
is dropped. Like: aplication instead of application

So I did:

stripper.setSuppressDuplicateOverlappingText(false);

This helped, but is this a reliable fix and expected 
behavior?

example pdf included

brp@cayuse.com</detail>
		<existingfiles>
			<file>
				<id>153919</id>
				<name>RP.pdf</name>
				<description>example with headings</description>
				<filesize>215389</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1130370272</adddate>
				<submitted_by>100</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>153919: RP.pdf</old_value>
				<date>1130370272</date>
				<by>nobody</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1430380">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2006-02-12 17:12</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Text is not sorted when characters are rotated</summary>
		<detail>Certain PDFs have text that is rotated, but not the 
whole page, need to be able to sort this and deal with 
spaces properly.

See rotated-page-again.pdf</detail>
	</artifact>
	<artifact id="1375035">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-12-06 21:14</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="775780">PDModel.AcroForm</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Multiline textbox cannot accept multiple lines</summary>
		<detail>The class PDAppearance.java contains a bug in function
convertToMultiLine. The line
"result.append(value.substring(lastIdx,currIdx));"
should be changed to
"result.append(line.substring(lastIdx,currIdx));" as
value may be null. This occurs when the
PDField.setValue method is called and there are
multiple lines (delimited by '\n') in the value.</detail>
		<follow_ups>
			<item>
				<date>1134507017</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

NOOB!


FIX this NoW!!!</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1495545">
		<submitted_by>sbartocci</submitted_by>
		<submitted_date>2006-05-26 06:55</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520288">lucene</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Another converting date error with LucenePDFDocument</summary>
		<detail>I'm using Lucene with PDFBox but It seems there is an 
error in converting date when the CreationDate field 
is a set as text field in Document properties:

(xmp file)
&lt;rdf:Description rdf:about=''
  xmlns:pdf='http://ns.adobe.com/pdf/1.3/'&gt;
  &lt;pdf:CreationDate--Text&gt;27/10/2005 
14:59:39&lt;/pdf:CreationDate--Text&gt;
  &lt;pdf:Producer&gt;Amyuni PDF Converter&lt;/pdf:Producer&gt;
&lt;/rdf:Description&gt;

instead if the field is formatted like this:

(xmp file)
&lt;rdf:Description rdf:about=''
  xmlns:xap='http://ns.adobe.com/xap/1.0/'&gt;
  &lt;xap:CreatorTool&gt;PScript5.dll Version 
5.2.2&lt;/xap:CreatorTool&gt;
  &lt;xap:ModifyDate&gt;2005-09-
27T15:57:14+02:00&lt;/xap:ModifyDate&gt;
  &lt;xap:CreateDate&gt;2005-09-
27T15:57:14+02:00&lt;/xap:CreateDate&gt;
&lt;/rdf:Description&gt;

the library works without any exception.

The exception found is:

Error converting date:27/10/2005 14:59:39

java.io.IOException: Error converting date:27/10/2005 
14:59:39
	at org.pdfbox.util.DateConverter.toCalendar
(DateConverter.java:237)
	at org.pdfbox.util.DateConverter.toCalendar
(DateConverter.java:134)
	at org.pdfbox.cos.COSDictionary.getDate
(COSDictionary.java:704)
	at 
org.pdfbox.pdmodel.PDDocumentInformation.getCreationDa
te(PDDocumentInformation.java:232)
	at 
org.pdfbox.searchengine.lucene.LucenePDFDocument.addCo
ntent(LucenePDFDocument.java:297)
	at 
org.pdfbox.searchengine.lucene.LucenePDFDocument.getDo
cument(LucenePDFDocument.java:187)



Best regards
Stefano
</detail>
	</artifact>
	<artifact id="1373964">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-12-05 15:41</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="775780">PDModel.AcroForm</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Infinite recursion</summary>
		<detail>If you try to set a value in a PDChoiceField, it gets 
into an infinite loop, and throws a stack overflow 
error.
 Here's the relevant code, from PDChoiceField's 
**setValue** method:

 if( optionValue.equals( value.getString() ) )
                    {
                        setValue( optionValue );
                        indexSelected = i;
                    }

Notice that the same method is being called!! If you 
look above where this code is (line 103), you'll 
notice that the super class's setvalue is called at 
line 91. I think you might want to do the same, 
otherwise the value will never get set for the 
choicefield, but will just call itself repeatedly 
until the stack overflows (which is the error I got)

Please fix this!

Thanks.</detail>
	</artifact>
	<artifact id="1348208">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-11-04 04:11</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Line Breaks</summary>
		<detail>I'm investigating methods of extracting text from pdf
files, I have an issue though - when viewing the PDF in
acrobat the lines obviously break at the edge of the
page, though the next line is clearly of the same sentance.

When the text is extracted into a .txt file, the line
breaks are still there, is there a method where I can
make sure that the text doesn't break onto the next
line in the text document? or is the text encoded in
the pdf forced into a line break and hence this problem
cannot be resolved?

Thanks
Dan Eastley
dj (at) eastley.net</detail>
	</artifact>
	<artifact id="1372152">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2005-12-02 19:22</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>bad font data with TrueTypeFont</summary>
		<detail>See fonts.pdf, fonts_full.pdf and fonts_partial.pdf 
for examples.

Ben</detail>
		<follow_ups>
			<item>
				<date>1148376729</date>
				<sender>stefano74</sender>
				<text>Logged In: YES 
user_id=1142211

So a pdf file with no embedded font can't to be processed. 
Because i think it doesn't use the 
PDFBox_External_Fonts.properties too.
</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1392196">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-12-28 11:09</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>PNG image page completely garbled</summary>
		<detail>Hi:

Attached is a zip file containing a 1 page PDF scanned 
PDF doc and the image extracted using pdfBox.  

As you can see, the PDF file shows the document fine, 
but the image (which it saved with suffix png.png) is 
completely garbled.

I have tried the following ways, all with the same 
result:

(a) PDPage.convertToImage() --&gt; BufferedImage --&gt; 
ImageIO.write(image,"png",...)

Code:

PDDocument document = PDDocument.load("test3.pdf");
List pages = document.getDocumentCatalog().getAllPages
();
PDPage page = (PDPage)pages.get(0);
BufferedImage image = page.convertToImage();
ImageIO.write(image, "png", new File("test31.png"));


(b) PDPage --&gt; PDResources --&gt; getImages() --&gt;  obtain 
the PDXObjectImage() from iterator  --&gt; getRGBImage() -
-&gt; BufferedImage --&gt; ImageIO.write().

PDDocument document = PDDocument.load("test3.pdf");
List pages = document.getDocumentCatalog().getAllPages
();
PDPage page = (PDPage)pages.get(0);
PDResources resources = page.getResources();
Map images = resources.getImages();
if( images != null )
{
    Iterator imageIter = images.keySet().iterator();
    while( imageIter.hasNext() )
    {
        String key = (String)imageIter.next();
        PDXObjectImage image = (PDXObjectImage)
images.get( key );
	image.write2file("test3."+image.getSuffix());
        BufferedImage bufImg = image.getRGBImage();
        ImageIO.write(bufImg, "png", new File
("test31.png"));
     }
}

Please let me know!

CONTACT: vick_venkat at yahoo dot com.</detail>
		<existingfiles>
			<file>
				<id>161339</id>
				<name>testdocs.zip</name>
				<description>Contains PDF file with extracted garbled PNG image</description>
				<filesize>74080</filesize>
				<filetype>application/x-zip-compressed</filetype>
				<adddate>1135796955</adddate>
				<submitted_by>100</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>161339: testdocs.zip</old_value>
				<date>1135796955</date>
				<by>nobody</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1506189">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2006-06-14 09:31</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>getAnnotations throws ClassCastException</summary>
		<detail> The following code:

1.        PDDocument lPDDoc2    =
PDDocument.load("myPdf.pdf");
2.        PDPage lPage        = (PDPage)
lPDDoc2.getDocumentCatalog().getAllPages().get(0);
3.        List   lAnnotations = lPage.getAnnotations();

Leads to the following exception being thrown on line 3:

Exception in thread "main"
java.lang.ClassCastException: org.pdfbox.cos.COSName
        at
org.pdfbox.cos.COSDictionary.getString(COSDictionary.java:572)
        at
org.pdfbox.pdmodel.interactive.annotation.PDAnnotation.createAnnotation(PDAnnotation.java:107)
        at
org.pdfbox.pdmodel.PDPage.getAnnotations(PDPage.java:714)


</detail>
		<follow_ups>
			<item>
				<date>1150366532</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

Fixed in latest nightly builds</text>
			</item>
			<item>
				<date>1150365264</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

Think this can be fixed by chaning line 107 of PDAnnotation from

            String subtype = annotDic.getString(
COSName.SUBTYPE );

to

            String subtype = annotDic.getNameAsString(
COSName.SUBTYPE );</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1430469">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2006-02-12 22:26</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Not getting all the text</summary>
		<detail>Page 2 is missing the last 7 lines both when using a 
stripper object and the stand alone utility.</detail>
		<existingfiles>
			<file>
				<id>167194</id>
				<name>GS24CO Week19.pdf</name>
				<description>Simple PDF report</description>
				<filesize>66383</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1139811977</adddate>
				<submitted_by>100</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>167194: GS24CO Week19.pdf</old_value>
				<date>1139811978</date>
				<by>nobody</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1441065">
		<submitted_by>rbri</submitted_by>
		<submitted_date>2006-03-01 08:41</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>OtlineItem findDestinationPage not working with AJS</summary>
		<detail>I have a document here where the Outline is based on 
JavaScript actions. A samle action JS looks like 
'this.pageNum = 0; this.scroll(0, 880);'.
PDFBox is able to parse the outline. But the call 
firstItem.findDestinationPage(document); fails. PDF Box 
is not able to understand the Javascript in the page.

I have enhanced the class PDActionJavaScript a bit with 
a small 'parser' that is able to find assigments like

"this.pageNum = 10"
"pageNum=11"
"pageNum=23a11"
"this.pageNum               =    12;pageNum=a11"
" this.pageNum = 7; scroll(4, 5);"

With this small fix, PDFBox is able to jump to the 
right page.
The whole source is in the attachment.

I have also written a small JavaScript mocker based on 
Rhino. If you interested in this drop me a note.

Sorry, but i can't provide a sample document.
</detail>
		<existingfiles>
			<file>
				<id>169330</id>
				<name>PDFBox.zip</name>
				<description>Patch</description>
				<filesize>5570</filesize>
				<filetype>application/zip</filetype>
				<adddate>1141231291</adddate>
				<submitted_by>1459913</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>169330: PDFBox.zip</old_value>
				<date>1141231291</date>
				<by>rbri</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1414350">
		<submitted_by>f-bertrand</submitted_by>
		<submitted_date>2006-01-24 23:28</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>How to concat pdf with fields ?   </summary>
		<detail>By: f-bertrand - f-bertrand 
 How to concat pdf with fields ?   
2006-01-23 17:47  
Hi, 
I use pdfBox version 0.7.2 
I have two pdf with fields that already filled 
(pdf only one page) 
I want to concat them, so I use the method  
AppendDoc() from the package 
org.pdfbox.examples.persistence.AppendDoc 
The first page it's good and the seconde the fields 
are empty. 
I don't why ? 

 



By: Ben Litchfield - benlitchfield 
 RE: How to concat pdf with fields ?   
2006-01-24 02:55  
sounds like a bug, please create a bug report and 
attach/upload the pdf documents that you are using. 
 
ftp.pdfbox.org 
 
Ben 
</detail>
		<existingfiles>
			<file>
				<id>164817</id>
				<name>PdfConcatWithFields.zip</name>
				<description>Examples Pdf Concat With Fields +  template</description>
				<filesize>235635</filesize>
				<filetype>application/x-zip-compressed</filetype>
				<adddate>1138174345</adddate>
				<submitted_by>1434255</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>164817: PdfConcatWithFields.zip</old_value>
				<date>1138174352</date>
				<by>f-bertrand</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1397458">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2006-01-04 19:05</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="775780">PDModel.AcroForm</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>PDChoiceButton.getOptions does not support key/value</summary>
		<detail>Right now the getOptions assumes that the /Opt entry 
is an array of strings.  It can also be an array whose 
elements are 2 element arrays(key/value pairs).  See 
AdobePDFLform.pdf for an example.

Ben</detail>
	</artifact>
	<artifact id="1410876">
		<submitted_by>lenuweit</submitted_by>
		<submitted_date>2006-01-20 07:22</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Text extraction fails for pages in landscape format</summary>
		<detail>Text extraction fails for some PDFs (see attached one
generated by PS printer/Ghostscript) under the
following circumstances:
- page is in landscape format
- setSortByPosition is true

Extraction works fine if page is in portrait format.</detail>
		<existingfiles>
			<file>
				<id>164169</id>
				<name>testpdfbox.pdf</name>
				<description>sample PDF (1 page in landscape)</description>
				<filesize>5442</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1137770597</adddate>
				<submitted_by>1363876</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>164169: testpdfbox.pdf</old_value>
				<date>1137770597</date>
				<by>lenuweit</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1423868">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2006-02-03 18:32</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>text extraction replaces characters</summary>
		<detail>See 056_PCA119.pdf

First of all a few minor problems
- apostrophes replaced by question marks.  A global 
replace will of course make nonsense of any true 
question marks in the document
- the 'fi' in 'glorified' at the end of the main 
article also replaced by  '?', as also in at least 2 
other instances
- 'J' before the author's name is presumably a 
replacement for the non-text character, and should 
probably be replaced by a blank line instead </detail>
	</artifact>
	<artifact id="1415960">
		<submitted_by>ooiocha</submitted_by>
		<submitted_date>2006-01-26 19:38</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Exception in text extraction</summary>
		<detail>Exception occurs in text extraction.

Exception: Unknown encoding for 'UniJIS-UCS2-HW-H'
reproduction : ant testPDF2Text
Verstion: PDFBox-0.7.3-dev
</detail>
		<follow_ups>
			<item>
				<date>1138334009</date>
				<sender>ooiocha</sender>
				<text>Logged In: YES 
user_id=1344511

PDF file with UniJIS-UCS2-HW-H encoding.</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>165087</id>
				<name>UniJIS-UCS2-HW-H_sample.pdf</name>
				<description>PDF file with UniJIS-UCS2-HW-H encoding</description>
				<filesize>2154</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1138334009</adddate>
				<submitted_by>1344511</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>165087: UniJIS-UCS2-HW-H_sample.pdf</old_value>
				<date>1138334011</date>
				<by>ooiocha</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1422067">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2006-02-01 17:35</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>PDF does not display correctly.</summary>
		<detail>See SimpleGroove-Schedule-546.pdf, colors are 
incorrect.

Ben</detail>
	</artifact>
	<artifact id="1388047">
		<submitted_by>bhatia_jp</submitted_by>
		<submitted_date>2005-12-22 06:20</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>pdfToImage Error</summary>
		<detail>When i use pdfToImage class in .net i get following 
error:
Type not supported yet

Please Help
</detail>
		<follow_ups>
			<item>
				<date>1195213871</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

This exists still in 0.73 version (2007-11-16)!!! Is there something going on with this issue or what?</text>
			</item>
			<item>
				<date>1136943152</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Please attach or upload a PDF that has this problem.  
ftp.pdfbox.org

Thanks,
Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1138844269</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>data_type</field>
				<old_value>552832</old_value>
				<date>1136943152</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1416011">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2006-01-26 21:34</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>too many space made in extracted text file</summary>
		<detail>Hi,
I use FontBox-0.1.0-dev.jar and PDFBox-0.7.3-dev.jar 
from version PDFBox-0.7.3-dev-20060126.

My tested pdf file is test.pdf and the text extracted 
text file is testPdf.txt as in uploaded test.zip file.

It extracted successfully,but there are many space 
made between each chinese character.

Please check ! thanks

Regards

NanFei
</detail>
		<existingfiles>
			<file>
				<id>165091</id>
				<name>test.zip</name>
				<description>one is test.pdf , the other is extracted text file as testPdf.txt</description>
				<filesize>7307</filesize>
				<filetype>application/x-zip-compressed</filetype>
				<adddate>1138340074</adddate>
				<submitted_by>100</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>165091: test.zip</old_value>
				<date>1138340075</date>
				<by>nobody</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1425395">
		<submitted_by>thebugslayer</submitted_by>
		<submitted_date>2006-02-06 08:48</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>COSDictionaryMap has inconsistant state with size</summary>
		<detail>Hi,
I created an PDF from itext that has an solo Image in it. When I parsed the 
pdf using PDFBOX, it returns an object of COSDictionaryMap when I do 
this:

PDDocument document = PDDocument.load(pdfDocStream);
List pages = document.getDocumentCatalog().getAllPages();
PDPage pdfPage = (PDPage)pages.iterator().next();
Map images = pdfPage.getResources().getImages();

The images instance has size() of 1, but the content is empty!

Any idea?</detail>
		<follow_ups>
			<item>
				<date>1139793955</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Is it possible for you to attache/upload the PDF you 
created.

ftp.pdfbox.org

Ben</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1415803">
		<submitted_by>yourgod</submitted_by>
		<submitted_date>2006-01-26 15:03</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="556660">writing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>EOL changes on different OSes</summary>
		<detail>ContentStreamWriter.EOL is currently defined as
System.getProperty("line.separator").getBytes()

I am using PDDocument.save(OutputStream) to send the
pdf through a CheckedOutputStream for getting a
checksum for the pdf. I found that because of this use
of System.getProperty("line.separator") that my
checksums were different when this ran on different
operating systems. My workaround was to force
System.getProperty("line.separator") to a known value
before calling PDDocument.save(OutputStream) and then
resetting it after, but this is not an optimal solution. 

I propose that this value be made a fixed one (which
one you pick apparently doesn't matter) as it's more
"java like" for things to be the same on different
operating systems.
</detail>
		<follow_ups>
			<item>
				<date>1139247662</date>
				<sender>yourgod</sender>
				<text>Logged In: YES 
user_id=257129

Seems COSStandardOutputStream.EOL also needs a change made
as it is initialized the same way.</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>summary</field>
				<old_value>ContentStreamWriter.EOL changes on different OSes</old_value>
				<date>1139247662</date>
				<by>yourgod</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1418344">
		<submitted_by>srinivaskrishna</submitted_by>
		<submitted_date>2006-01-29 22:00</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>text extraction between bookmarks. </summary>
		<detail>Hi,  
 
I am extracting text from pdf file and saving it in a 
textfile. Each bookmark in a pdf file i am saving as a 
different text file. Everything fine up to some level. 
But as I am using start book mark and endbookmark as a 
delimeters for pdftextstripper I am getting text 
content between those bookmarks, and since one book 
mark should be saved as individual file, In this text 
file i am getting the first page of endbookmark which 
i dont want. So can anybody suggest me the solution to 
avoid the above problem. For your reference i am 
pasting my code below.  
################################################## 
 
import java.io.*; 
import java.lang.*; 
import java.util.*; 
import org.pdfbox.exceptions.InvalidPasswordException; 
import org.pdfbox.pdmodel.PDDocument; 
import 
org.pdfbox.pdmodel.interactive.documentnavigation.outli
ne.PDDocumentOutline; 
import 
org.pdfbox.pdmodel.interactive.documentnavigation.outli
ne.PDOutlineItem; 
import org.pdfbox.util.PDFText2HTML; 
import org.pdfbox.util.PDFTextStripper; 
 
public class PdftoText{ 
public static void main(String args[]){ 
try{ 
 
File pdfFiles = new File
(&amp;quot;D:/Data/skrishna/bnpp/pdf/&amp;quot;); 
String[] children = pdfFiles.list(); 
if(children == null){ 
System.out.println(&amp;quot;Directory is empty&amp;quot;); 
}else{ 
for(int pdffile=0; 
pdffile&amp;lt;children.length;pdffile++){ 
String pdffilename = children[pdffile]; 
int index = pdffilename.indexOf(&amp;quot;.pdf&amp;quot;) ; 
System.out.println(&amp;quot;the index value is 
#################################&amp;quot;+index); 
 
String newfilename = pdffilename.substring(0,index); 
System.out.println(&amp;quot;Inside else part the new pdf 
filename is &amp;quot;+newfilename); 
String filename = 
&amp;quot;D:/Data/skrishna/bnpp/pdf/&amp;quot;; 
filename+=pdffilename; 
 
int j =1; 
Writer output = null; 
PDDocument document = null; 
document = PDDocument.load( filename ); 
PDDocumentOutline root = document.getDocumentCatalog
().getDocumentOutline(); 
PDOutlineItem item = root.getFirstChild(); 
PDOutlineItem item1 = item.getNextSibling(); 
while( item1 != null ){  
System.out.println( &amp;quot;Item:&amp;quot; + item.getTitle
() ); 
System.out.println( &amp;quot;Item1:&amp;quot; + item1.getTitle
() ); 
output = new OutputStreamWriter(new FileOutputStream
(&amp;quot;D:/Data/skrishna/bnpp/text/&amp;quot;+newfilename+&amp;q
uot;_&amp;quot;+j+&amp;quot;.txt&amp;quot;)); 
 
PDFTextStripper stripper = null; 
stripper = new PDFTextStripper(); 
stripper.setStartBookmark(item); 
stripper.setWordSeparator(&amp;quot; &amp;quot;); 
stripper.setLineSeparator(&amp;quot;\n&amp;quot;); 
stripper.setPageSeparator(&amp;quot;\n\n\n\n&amp;quot;); 
stripper.setEndBookmark(item1); 
stripper.writeText( document, output ); 
j++; 
item = item.getNextSibling(); 
item1 = item1.getNextSibling(); 
} 
 
PDOutlineItem child = item.getFirstChild(); 
PDOutlineItem child1 = new PDOutlineItem(); 
while( child != null ){ 
child1 = child;  
child = child.getNextSibling(); 
} 
System.out.println( &amp;quot;Item:&amp;quot; + item.getTitle
() ); 
System.out.println( &amp;quot;Item1:&amp;quot; + 
child1.getTitle() ); 
output = new OutputStreamWriter(new FileOutputStream( 
&amp;quot;D:/Data/skrishna/bnpp/text/&amp;quot;+newfilename+&amp;qu
ot;_&amp;quot;+j+&amp;quot;.txt&amp;quot;)); 
PDFTextStripper stripper = null; 
stripper = new PDFTextStripper(); 
stripper.setWordSeparator(&amp;quot; &amp;quot;); 
stripper.setLineSeparator(&amp;quot;\n&amp;quot;); 
stripper.setPageSeparator(&amp;quot;\n\n\n\n&amp;quot;); 
stripper.setStartBookmark(item); 
stripper.setEndBookmark(child1); 
stripper.writeText( document, output ); 
output.close();  
document.close(); 
}//End of for 
}//End of If Else 
}catch(Exception e){ 
System.out.println(e); 
} 
} 
} 
################################################### 
 
So please let me know the solution as this is very 
urgent in need.  
 
Thanks in advance.  
Srinivas 
</detail>
	</artifact>
	<artifact id="1432253">
		<submitted_by>mig-o</submitted_by>
		<submitted_date>2006-02-15 07:53</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="556660">writing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>sloooooooooooooooooowwwww.....</summary>
		<detail>And you just had to replace 

    public COSStandardOutputStream(OutputStream out)
    {
        super( out );
    }

by 

    public COSStandardOutputStream(OutputStream out)
    {
        super( new BufferedOutputStream(out,16384) );
    }

. Here are some timings for my local drive (i do some
other stuff for the first 4 seconds...).

old way: 5103 ms
new way: 4403 ms 

On my remote drive:

old way: 136792 ms
new way:   4756 ms

The reason should be clear... Network-packages for
nearly each and every written byte in the pdf.
</detail>
		<follow_ups>
			<item>
				<date>1141384757</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

@previous post: anyone=everyone</text>
			</item>
			<item>
				<date>1141384694</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

The bug is, that only the old way exists in the repository,
so i wrote this, to have someone change this in cvs. 

Or does anyone has cvs write access here? Then the bug is my
stupidity, since i could have it done myself :)</text>
			</item>
			<item>
				<date>1141347508</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I don't think I understand what the bug is?  If old was was 
136 seconds and new way is 4 seconds then what is the 
problem?</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1438028">
		<submitted_by>vdimchev</submitted_by>
		<submitted_date>2006-02-24 03:48</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>The CMapParser does not recognize essential cmap operators</summary>
		<detail>The bug is directly related to the following bug I 
discovered in the database:
[ 1208652 ] PDFTextStripper.writeText Exception:Unknown 
encoding for ..

I'll try to exlain it again here and supply enough 
resources for its fix.

The problem is that the current implementation of 
CMapParser class supports only the beginbfchar and 
beginbfrange operators.

This is not enough and causes the invokation to 
PDFTextStripper.writeText() to throw IOException with 
the following message: Unknown encoding for 'Identity-
V'.
I also managed to produce the message: "Unknown 
encoding for '90ms-RKSJ-H'.

The complete stacktrace is:
java.io.IOException: Unknown encoding for 'Identity-V'
        at org.pdfbox.encoding.EncodingManager.
getEncoding(EncodingManager.java:83)
        at org.pdfbox.pdmodel.font.PDFont.
getEncoding(PDFont.java:627)
        at org.pdfbox.pdmodel.font.PDFont.
encode(PDFont.java:476)
        at org.pdfbox.util.PDFStreamEngine.
showString(PDFStreamEngine.java:332)
        at org.pdfbox.util.operator.ShowText.
process(ShowText.java:66)
        at org.pdfbox.util.PDFStreamEngine.
processOperator(PDFStreamEngine.java:494)
        at org.pdfbox.util.PDFStreamEngine.
processSubStream(PDFStreamEngine.java:207)
        at org.pdfbox.util.PDFStreamEngine.
processStream(PDFStreamEngine.java:160)
        at org.pdfbox.util.PDFTextStripper.
processPage(PDFTextStripper.java:355)
        at org.pdfbox.util.PDFTextStripper.
processPages(PDFTextStripper.java:268)
        at org.pdfbox.util.PDFTextStripper.
writeText(PDFTextStripper.java:220)


In fact the cause of this exception is that the 
CMapParser does not recognize the begincidchar and 
begincidrange operators (in the case of the 90ms-RKSJ-
H) encoding and usecmap operator in the case of 
Identity-V encoding.

The cmap files for these encodings are not properly 
parsed and the corresponding Cmap objects do not 
contain neither one nor two byte mappings, further the 
lookup() method returns null.

I'll attach two samples for the 90ms-RKSJ-H encoding 
and one for the Identity-V encoding.

I'll attach cmap reference also.</detail>
		<existingfiles>
			<file>
				<id>168711</id>
				<name>5014.CIDFont_Spec.rar</name>
				<description>Reference, containing CMAP description</description>
				<filesize>240282</filesize>
				<filetype>application/octet-stream</filetype>
				<adddate>1140782599</adddate>
				<submitted_by>1200197</submitted_by>
			</file>
			<file>
				<id>168709</id>
				<name>ken1.pdf</name>
				<description>The Identity-V sample</description>
				<filesize>33713</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1140782350</adddate>
				<submitted_by>1200197</submitted_by>
			</file>
			<file>
				<id>168708</id>
				<name>tp0404-2a.pdf</name>
				<description>The second 90ms-RKSJ-H sample</description>
				<filesize>11434</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1140782249</adddate>
				<submitted_by>1200197</submitted_by>
			</file>
			<file>
				<id>168705</id>
				<name>nan_youkou.pdf</name>
				<description>The first 90ms-RKSJ-H sample</description>
				<filesize>7663</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1140781738</adddate>
				<submitted_by>1200197</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>168711: 5014.CIDFont_Spec.rar</old_value>
				<date>1140782600</date>
				<by>vdimchev</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>168709: ken1.pdf</old_value>
				<date>1140782352</date>
				<by>vdimchev</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>168708: tp0404-2a.pdf</old_value>
				<date>1140782251</date>
				<by>vdimchev</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>168705: nan_youkou.pdf</old_value>
				<date>1140781740</date>
				<by>vdimchev</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1413808">
		<submitted_by>orank</submitted_by>
		<submitted_date>2006-01-24 08:12</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Possible bug in the drawing of the appearance stream</summary>
		<detail>I have a PDF which has a text field whose format is
right-aligned. It's text value is 2 characters long -
"5a". If I use PDFBox to open the PDF and alter the
field value (via PDField.setValue) to a longer value
("LONGER"), opening the resulting PDF results in the
font of the text box being larger than it was before
the update, and the string begins drawing from the same
position as when it was "5a". That is, the "L" from
LONGER is painted at the same position as the 5 was
and, as the text box is right-aligned, most of the
value is hidden past the right border of the text box.

If I edit any field in the result document using
acrobat reader, the format is fixed and the full value
can be read (including a font size change).

I tried this with PDFBox-0.7.2 and CVS HEAD from
12/Jan/2006, both displayed the same problems. I am
using Acrobat reader 7.0.1 (on windows).

The first field to display the alignment problem is on
page 4 of the document, "5a" is beside it (but
rendering problems can be seen on many of the other
fields in the doc).
</detail>
		<follow_ups>
			<item>
				<date>1138120686</date>
				<sender>orank</sender>
				<text>Logged In: YES 
user_id=211584

My PDF file was too large to attach to this bug report so I
have uploaded 2 files to the FTP server:

Form-1413808.pdf is the source document which I am trying to
process.

pdfbox-bug-1413808.zip is the bog-simple code I'm using to
update the doc. Is an ant project minus the required pdfbox
libraries.
</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1138844249</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1335941">
		<submitted_by>pkorn78</submitted_by>
		<submitted_date>2005-10-23 21:51</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>NullPointerException from using PDFTextStripper w/ some URLs</summary>
		<detail>Hi,

I've tried to extract text from this URL:

http://www.ischool.washington.edu/mcdonald/papers/Lutters.AMCIS00.pdf

However, it throws java.lang.NullPointerException on me
although the PDF file does exist on that URL.

Here's the code where I invoke the PDFTextStripper:

String docURL =
"http://www.ischool.washington.edu/mcdonald/papers/Lutters.AMCIS00.pdf";
try{
	PDFTextStripper stripper = new PDFTextStripper();
	PDDocument pdfDoc =
PDDocument.load(getInputStreamFromURL(docURL));
	String strippedText = stripper.getText(pdfDoc);
	pdfDoc.close();
	return stippedText;
}
catch(IOException e){
	e.printStackTrace();
}


Here's getInputStreamFromURL method used in the above code:

public InputStream getInputStreamFromURL(String url){
	try{
		URL myURL = new URL(url);
		URLConnection con = myURL.openConnection();
		con.setRequestProperty("User-Agent",""); 
		return con.getInputStream();
	}
	catch(MalformedURLException e){
		e.printStackTrace();
	}
	catch(IOException ie){
		ie.printStackTrace();
	}
	return null;
}

Please advise, Thanks

-Palakorn</detail>
		<follow_ups>
			<item>
				<date>1146161617</date>
				<sender>brzrkr</sender>
				<text>Logged In: YES 
user_id=1489602

I am chasing a similar problem which might be related.
What I found (using PDFDebugger.java) was that the PDF
has an invalid PageTree: the root node and 5 of the 6
Page objects are valid, but the 6th is a Stream, and 
not a Dictionary(Page).  The offending code is:
  private static COSArray 
  org.pdfbox.pdmodel.PDPageNode.getAllKids( 
      List result, COSDictionary page, boolean recurse
  );
which needs to check that kids is non-null before
using it.
    </text>
			</item>
			<item>
				<date>1146161555</date>
				<sender>brzrkr</sender>
				<text>Logged In: YES 
user_id=1489602

I am chasing a similar problem which might be related.
What I found (using PDFDebugger.java) was that the PDF
has an invalid PageTree: the root node and 5 of the 6
Page objects are valid, but the 6th is a Stream, and 
not a Dictionary(Page).  The offending code is:
  private static COSArray 
  org.pdfbox.pdmodel.PDPageNode.getAllKids( 
      List result, COSDictionary page, boolean recurse
  );
which needs to check that kids is non-null before
using it.
    </text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1138844319</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1335826">
		<submitted_by>rob_tmaz</submitted_by>
		<submitted_date>2005-10-23 16:12</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>ExtractImages Failed</summary>
		<detail>I try this command line

C:\PDFBox-0.7.2\PDFBox-0.7.2\bin&gt;ExtractImages.exe 
"c:\CMGCDENVOI.PDF"
Writing image:I0-2
Exception in thread "main" java.lang.ClassCastException
        at org.pdfbox.filter.FlateFilter.decode
(FlateFilter.java:70)
        at
org.pdfbox.pdmodel.common.PDStream.getPartiallyFilteredStream
(PDStrea
m.java:257)
        at
org.pdfbox.pdmodel.graphics.xobject.PDCcitt.write2OutputStream
(PDCcit
t.java:125)
        at
org.pdfbox.pdmodel.graphics.xobject.PDXObjectImage.write2file
(PDXObje
ctImage.java:118)
        at org.pdfbox.ExtractImages.extractImages
(ExtractImages.java:169)
        at org.pdfbox.ExtractImages.main
(ExtractImages.java:74)


</detail>
		<follow_ups>
			<item>
				<date>1144368215</date>
				<sender>groosta</sender>
				<text>Logged In: YES 
user_id=1496332

The following simple code leads to 
error: "UnsupportedOperationException was unhandled". In 
different tests I always received this error when running: 
write2file method.

      org.pdfbox.pdmodel.PDDocument document = 
org.pdfbox.pdmodel.PDDocument.load(@"C:\a1.pdf");
      java.util.List pages = document.getDocumentCatalog
().getAllPages();
      org.pdfbox.pdmodel.PDPage page = 
(org.pdfbox.pdmodel.PDPage)pages.get(0);
      org.pdfbox.pdmodel.PDResources resources = 
page.getResources();
      java.util.Map images = resources.getImages();
      java.util.Iterator imageIter = images.keySet
().iterator();

      while (imageIter.hasNext())
      {
        string key = (string)imageIter.next();
        org.pdfbox.pdmodel.graphics.xobject.PDPixelMap 
image = (org.pdfbox.pdmodel.graphics.xobject.PDPixelMap)
images.get(key);
        image.write2file(file_name);
      }</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>153553</id>
				<name>CMGCDENVOI.PDF</name>
				<description>PDF with image</description>
				<filesize>18118</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1130109175</adddate>
				<submitted_by>1332322</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1138844337</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>153553: CMGCDENVOI.PDF</old_value>
				<date>1130109204</date>
				<by>rob_tmaz</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1422082">
		<submitted_by>catalino</submitted_by>
		<submitted_date>2006-02-01 17:59</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Error when setting the value of a combo box to " "</summary>
		<detail> Hi all. 

When I try to set the value of a combo box to " ", it
gives the following error: 
 
Exception in thread "main"
java.lang.ArrayIndexOutOfBoundsException: -2 
at java.util.ArrayList.set(Unknown Source) 
at
org.pdfbox.pdmodel.interactive.form.PDAppearance.setAppearanceValue(PDAppearance.java:323)

at
org.pdfbox.pdmodel.interactive.form.PDVariableText.setValue(PDVariableText.java:145)

at
org.pdfbox.pdmodel.interactive.form.PDChoiceField.setValue(PDChoiceField.java:91)

at pdfForms.PDFForms.setvalorCampo(PDFForms.java:235) 
at pdfForms.SetValores.main(SetValores.java:

 I found out the following. I think it may help you to
understand the problem. 
When the default value, set by Acrobat Professional
7.0, is set to " ", the error occurs; when is set to
another value, lets say "A", the value " " is setted
correctly. If i run the program again, trying to set
the value " ", the error does not ocurr.
 
Thanks,  
 
Luis Catalino </detail>
		<existingfiles>
			<file>
				<id>165878</id>
				<name>Doc1.pdf</name>
				<description>Form with a combo box</description>
				<filesize>198269</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1138845552</adddate>
				<submitted_by>1400516</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>165878: Doc1.pdf</old_value>
				<date>1138845553</date>
				<by>catalino</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1475739">
		<submitted_by>robertwenner</submitted_by>
		<submitted_date>2006-04-24 12:23</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>PDOutlineItem does not implement equals</summary>
		<detail>This code

PDOutlineItem a = outline.getFirstChild();
PDOutlineItem b = outline.getFirstChild();
if (!a.equals(b)) {
    throw new RuntimeException("Not equal");
}

throws, because PDOutlineItem does not implement equals().

I'd like to compare nodes to each other while
traversing the outline. How do I do that without equals
or hashCode working properly?

Thanks,

Robert</detail>
	</artifact>
	<artifact id="1448751">
		<submitted_by>rstraube</submitted_by>
		<submitted_date>2006-03-13 02:17</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>PDF to image bugs</summary>
		<detail>PDFToImage doesn't support colors, field contents and
vertical text. 
I know, that the PDFToImage is only a beta version.
When do you plan to release a full version?</detail>
		<follow_ups>
			<item>
				<date>1142355643</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Thanks for the bug report and the example PDF documents.

Here are my thoughts on the unsupported parts of that PDF

1)colors should be easy to add, they do already work in 
certain situations
2)Field contents should not be too bad either, just need to 
execute that appearance stream
3)Vertical text might be a little more difficult

A full version of PDFToImage is a huge amount of work.  I 
am adding pieces as I can but it will be a long time before 
a high quality version is available.

Ben</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>170693</id>
				<name>Testformular11.jpg</name>
				<description>result after conversion </description>
				<filesize>157344</filesize>
				<filetype>image/jpeg</filetype>
				<adddate>1142245262</adddate>
				<submitted_by>1474769</submitted_by>
			</file>
			<file>
				<id>170692</id>
				<name>Testformular1.pdf</name>
				<description>PDF test form</description>
				<filesize>53793</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1142245056</adddate>
				<submitted_by>1474769</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1142355643</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>170693: Testformular11.jpg</old_value>
				<date>1142245263</date>
				<by>rstraube</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>170692: Testformular1.pdf</old_value>
				<date>1142245059</date>
				<by>rstraube</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1464854">
		<submitted_by>theeky</submitted_by>
		<submitted_date>2006-04-05 04:54</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Error getting pdf version (NumberFormatException)</summary>
		<detail>Here is the Exception:
----------------------

java.io.IOException: Error getting pdf 
version:java.lang.NumberFormatException: For input 
string: "rod"
	at org.pdfbox.pdfparser.PDFParser.parse
(PDFParser.java:166)
	at org.pdfbox.pdmodel.PDDocument.load
(PDDocument.java:578)
	at org.pdfbox.pdmodel.PDDocument.load
(PDDocument.java:549)
	at 
de.quintra.utils.converters.textextract.PDFHandler.get
Text(PDFHandler.java:71)
	... 7 more

Here are the first 2 lines of the PDF:
--------------------------------------
%%[ ProductName: ESP Ghostscript ]%%
%PDF-1.2

Bug:
----
I have checked the source file PDFParser.java and 
found the reason:
You always try to find the PDF-Version Number in the 
first line. But like you see in the example above it 
is not always true! That's why the parser tries to 
parse "rod" (--&gt; occurs in the word ProductName) :-(

I try to fix this bug, but I hope that it will be 
fixed in the next release!</detail>
	</artifact>
	<artifact id="1448869">
		<submitted_by>entrex</submitted_by>
		<submitted_date>2006-03-13 05:59</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>NPE while extracting text from the document</summary>
		<detail>Document size: 2,5 MB
Content: text, images
Languages: Deutch, English

Stack trace:
java.lang.NullPointerException
        at
org.pdfbox.pdmodel.interactive.pagenavigation.PDThreadBead.getRectangle(PDThreadBead.java:216)
        at
org.pdfbox.util.PDFTextStripper.showCharacter(PDFTextStripper.java:701)
        at
org.pdfbox.util.PDFStreamEngine.showString(PDFStreamEngine.java:442)
        at
org.pdfbox.util.operator.ShowText.process(ShowText.java:63)
        at
org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:487)
        at
org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:467)
        at
org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:202)
        at
org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:156)
        at
org.pdfbox.util.PDFTextStripper.processPage(PDFTextStripper.java:351)
        at
org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:267)
        at
org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:219)
        at
org.pdfbox.util.PDFTextStripper.getText(PDFTextStripper.java:139)
        at
net.sf.pdfizer.pdf.PdfMetadataScanner.getPage(PdfMetadataScanner.java:72)
        at
net.sf.pdfizer.wizards.DocumentPreviewPage.displayPage(DocumentPreviewPage.java:275)
        at
net.sf.pdfizer.wizards.DocumentPreviewPage.setScanner(DocumentPreviewPage.java:256)
        at
net.sf.pdfizer.wizards.PdfMetadataPage.preparePreview(PdfMetadataPage.java:301)
        at
net.sf.pdfizer.wizards.PdfMetadataPage.readPdf(PdfMetadataPage.java:286)
        at
net.sf.pdfizer.wizards.PdfMetadataPage.setDocument(PdfMetadataPage.java:223)
        at
net.sf.pdfizer.wizards.PdfDocumentWizard$2.documentSelected(PdfDocumentWizard.java:82)
        at
net.sf.pdfizer.wizards.MoveDocumentPage$2.widgetSelected(MoveDocumentPage.java:126)
        at
org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:90)
        at
org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
        at
org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1021)
        at
org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2867)
        at
org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2572)
        at
org.eclipse.jface.window.Window.runEventLoop(Window.java:809)
        at
org.eclipse.jface.window.Window.open(Window.java:787)
        at
net.sf.pdfizer.CatalogTreeView$1.performDrop(CatalogTreeView.java:327)
        at
org.eclipse.jface.viewers.ViewerDropAdapter.drop(ViewerDropAdapter.java:227)
        at
org.eclipse.swt.dnd.DNDListener.handleEvent(DNDListener.java:65)
        at
org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
        at
org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1021)
        at
org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1045)
        at
org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1030)
        at
org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:900)
        at
org.eclipse.swt.dnd.DropTarget.notifyListeners(DropTarget.java:558)
        at
org.eclipse.swt.dnd.DropTarget.drag_data_received(DropTarget.java:359)
        at
org.eclipse.swt.dnd.DropTarget.Drag_Data_Received(DropTarget.java:242)
        at
org.eclipse.swt.internal.gtk.OS._gtk_drag_get_data(Native
Method)
        at
org.eclipse.swt.internal.gtk.OS.gtk_drag_get_data(OS.java:3670)
        at
org.eclipse.swt.dnd.DropTarget.drag_drop(DropTarget.java:401)
        at
org.eclipse.swt.dnd.DropTarget.Drag_Drop(DropTarget.java:249)
        at
org.eclipse.swt.internal.gtk.OS._gtk_main_do_event(Native
Method)
        at
org.eclipse.swt.internal.gtk.OS.gtk_main_do_event(OS.java:4777)
        at
org.eclipse.swt.widgets.Display.eventProc(Display.java:1067)
        at
org.eclipse.swt.internal.gtk.OS._g_main_context_iteration(Native
Method)
        at
org.eclipse.swt.internal.gtk.OS.g_main_context_iteration(OS.java:1158)
        at
org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2570)
        at
org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1699)
        at
org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1663)
        at
org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:367)
        at
org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:143)
        at
net.sf.pdfizer.Application.run(Application.java:45)
        at
org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:226)
        at
org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:376)
.log lines 3843-3898/3907 99%
</detail>
		<follow_ups>
			<item>
				<date>1142362949</date>
				<sender>entrex</sender>
				<text>Logged In: YES 
user_id=1100322

Sorry, I had to mentione this. I used 0.7.1 and when I
discovered this misbehavior I moved to 0.7.2. After that I
didn't see it happening. Although, I will try later to play
with .  At thomoment I am short on time a bit. 
Andrey.</text>
			</item>
			<item>
				<date>1142362606</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

ah there was a bug, (now fixed in CVS) that would cause a 
PDF to be not loaded fully and cause NPE in various parts, 
especially when loaded from from a slow source(such as a 
remote machine/network drive/URL), that may actually be the 
problem if this only occurs sometimes.  

Did you move to 0.7.2 from an older version or from a 
nightly build.  If possible give the nightly build a try.  
http://www.pdfbox.org/dist

Ben</text>
			</item>
			<item>
				<date>1142362317</date>
				<sender>entrex</sender>
				<text>Logged In: YES 
user_id=1100322

Hello! The file name is Traunmueller.2004.pdf . It seems
that this problem is not persistent. After that I moved to
PDFBox 7.2 and it did not repeat. Anyway ;) Good luck! 
Andrey.</text>
			</item>
			<item>
				<date>1142355089</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

If possible please upload the PDF to ftp.pdfbox.org and 
post the name of the uploaded file here.

Thanks,
Ben</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1460863">
		<submitted_by>lubosp</submitted_by>
		<submitted_date>2006-03-29 10:31</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Document does not separate words</summary>
		<detail>Following document taken from Guttenberg project 
http://www.gutenberg.org/ does not separate words 
with spaces. I even debugged PdfBox and 
PDFStreamEngine.showString() never receives the space 
(32) character. Is possible that space is not in the 
document (it looks that way). If so is there a way to 
force insert the spaces as word separators (not sure 
if this should be part of PDFStreamEngine.showString
() or it is user's responsibility in this case)?

File is to big to attach, here is the link: 
http://www.gutenberg.org/dirs/etext98/pandp12p.pdf</detail>
	</artifact>
	<artifact id="1456836">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2006-03-23 02:26</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>PDDocumentInformation.getCreationDate() throws IOException</summary>
		<detail>For some PDF documents, I get this exception when 
calling PDDocumentInformation.getCreationDate() :

----------------------
java.io.IOException: Error converting date:#TÂ©0]4Â¨Ã¸Â¹}
3?W%bÃ!
at org.pdfbox.util.DateConverter.toCalendar
(DateConverter.java:237)
at org.pdfbox.util.DateConverter.toCalendar
(DateConverter.java:134)
at org.pdfbox.cos.COSDictionary.getDate
(COSDictionary.java:704)
at 
org.pdfbox.pdmodel.PDDocumentInformation.getCreationDat
e(PDDocumentInformation.java:232)
-----------------------

but when I view those PDF docs with Acrobat Reader, it 
has a valid, clean creation date ("Erstellt am: 
07.12.2004 15:27:13").  It also shoes "1.4 (Acrobat 
5.x) as the PDF version - so a quiet old and common 
version.

Using PDFBox 0.7.2 with JDK 1.5.0_06.</detail>
		<follow_ups>
			<item>
				<date>1143115812</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

I found the reason: this occurs on any PDF that is secured 
with a password. I work around the problem by first 
checking the document via

myPDDocument.isEncrypted();

if it is encrypted. If the result is true, I don't read the 
creation/modification date. Perhaps a more intuitive 
exception should be thrown, something like

DocumentEncryptedException

...</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1477554">
		<submitted_by>fanch444</submitted_by>
		<submitted_date>2006-04-27 03:14</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>never add documents when we don't create index</summary>
		<detail>If we want to reindex a Folder and we call the index
method of IndexFiles with the parameter create to
false, it doesn't add any documents. The problem is at
line 166 in
src.org.pdfbox.searchengine.lucene.IndexFiles (version
0.7.2)
The index method calls two times the same method with
same parameters: indexDocs(root, index, CREATE);
I think it should change the line 166 in 
indexDocs(root, index, TRUE);

 public void index( File root, boolean create, String
index )
    {

        try
        {
            Date start = new Date();

            writer = new IndexWriter(index, new
StandardAnalyzer(), create);
            writer.maxFieldLength = 1000000;

            if (!create)
            {                 // delete stale docs
                deleting = true;
                indexDocs(root, index, create);
            }

            indexDocs(root, index, create);       //
add new docs

            System.out.println("Optimizing index...");
            writer.optimize();
            writer.close();

            Date end = new Date();

            System.out.print(end.getTime() -
start.getTime());
            System.out.println(" total milliseconds");

        }
        catch( Exception e )
        {
            e.printStackTrace();
        }
    }</detail>
	</artifact>
	<artifact id="1502153">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2006-06-07 03:26</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Letters and newlines disappear</summary>
		<detail>The attached file is extracted as text using 
PDFTextConverter.writeText(PDDocument, StringWriter) .

The output text is problematic:
1. Words are fused together: ASTROBIOLOGYVolume, 
PaperThe, ABSTRACTThe, etc.
2. Words are mis-spelled: "comunity"
3. The bottom part of the ABSTRACT (at the beginning 
of the 2nd page of the PDF) is found AFTER the rest 
of the content of the 2nd page. 
4. The two columns of text from the 3rd page of the 
PDF are found in reversed order in the XML.
  
 
</detail>
	</artifact>
	<artifact id="1482334">
		<submitted_by>mmajis</submitted_by>
		<submitted_date>2006-05-05 02:30</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="775780">PDModel.AcroForm</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Field renaming character set problem</summary>
		<detail>If I take an XFA PDF, remove the XFA form, rename one
of the AcroForm fields and open the resulting PDF in
Acrobat, the field name is garbled.

To begin with, it seems the field name is UTF-16BE
encoded. PDFBox writes the new /T entry in ISO-8859-1
since it finds no character values larger than 255. if
I change the source code to write UTF-16BE with the two
prefix bytes 0xFF and 0xFE (not sure of the byte order
here), the field name shows correctly in Acrobat. </detail>
	</artifact>
	<artifact id="1464488">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2006-04-04 13:55</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Can't read Japanese fonts</summary>
		<detail>When I try to run ExtractText, the output is garbage.
I'm running the latest PDFBox-0.7.3-dev-20060404 . I
run with parameters:

-encoding utf-8 jp.pdf jp.txt

Sourceforge won't let me upload a file, so here is a
URL:
http://www.denso.co.jp/ja/aboutdenso/download/pdf/corporate_guide.pdf

I've seen another discussion thread about this issue
too. Can you explain how to enable pdfbox to work with
japanese fonts? (Are there properties that need to be
set or additional resources needed?)

Domo arigato ;)

sunfishy (at) gmail
</detail>
	</artifact>
	<artifact id="1470657">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2006-04-14 18:45</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>getEncoding exception of "Built-in"</summary>
		<detail>java.io.IOException: Unknown encoding for 'Built-in'
	at
org.pdfbox.encoding.EncodingManager.getEncoding(EncodingManager.java:83)
	at
org.pdfbox.pdmodel.font.PDFont.getEncoding(PDFont.java:627)
	at org.pdfbox.pdmodel.font.PDFont.encode(PDFont.java:420)
	at
org.pdfbox.util.PDFStreamEngine.showString(PDFStreamEngine.java:332)
	at
org.pdfbox.util.operator.ShowTextGlyph.process(ShowTextGlyph.java:90)
	at
org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:494)
	at
org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:207)
	at
org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:160)
	at
com.regulus.EUpdf.PrintTextLocations.main(PrintTextLocations.java:108)
Exception in thread "main" 

Seemed to work if I substituted WinAnsiEncoding for
Built-in.  My plan is to use PDFDocEncoding as a
default if the encoding is not found.

Thanks very much for pdfBox!!!!!!!!!!!!!!1

9 0 obj
&lt;&lt;/LastChar 255
/BaseFont /Wingdings3,Italic
/Subtype /TrueType
/FontDescriptor 20 0 R
/Widths 21 0 R
/Encoding /Built-in
/Type /Font
/FirstChar 32
&gt;&gt;

Windoze box.

sdeal@sonic.net</detail>
		<follow_ups>
			<item>
				<date>1145294468</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

do you have an example PDF that has this.  "Build-In" is an 
amusing name for the encoding :)

Please attach/upload to ftp.pdfbox.org if you have an 
example and post a comment here.

Ben</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1446370">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2006-03-09 04:37</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>PDF to image conversion can lead to mostly black area</summary>
		<detail>We are using PDFBox to create thumbnails of the first
page of PDF documents using PDPage.convertToImage().
While this works like a charm in general, there are
cases where only the images appear correctly and the
remaining page area is just plain black. This is
probably due to some failure in
extracting/using/understanding/... the font? Please see
the attached example PDF.

If there is (really) no way to generate the text output
(by using a default font like in other places of PDFBox
for instance), we would be quite okay -- in fact even
much happier as we are now *g* -- to receive an
exception instead. (This would allow us to assign a
default thumbnail for example.)

Thanks for your help,
  Reinhold</detail>
		<existingfiles>
			<file>
				<id>170303</id>
				<name>FHHagenbergTest.pdf</name>
				<description>PDF test file</description>
				<filesize>185803</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1141907844</adddate>
				<submitted_by>100</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1145294757</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>170303: FHHagenbergTest.pdf</old_value>
				<date>1141907855</date>
				<by>nobody</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1473323">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2006-04-19 18:41</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Exception while extracting image</summary>
		<detail>Get type :  class org.pdfbox.pdmodel.PDPage
java.lang.ClassCastException
        at 
org.pdfbox.pdmodel.graphics.xobject.PDCcitt$TiffWrapper
.buildHeader(P
DCcitt.java:478)
        at 
org.pdfbox.pdmodel.graphics.xobject.PDCcitt$TiffWrapper
.&lt;init&gt;(PDCcit
t.java:360)
        at 
org.pdfbox.pdmodel.graphics.xobject.PDCcitt.getRGBImage
(PDCcitt.java:
116)
        at 
org.pdfbox.util.operator.pagedrawer.Invoke.process
(Invoke.java:81)
        at 
org.pdfbox.util.PDFStreamEngine.processOperator
(PDFStreamEngine.java:
494)
        at 
org.pdfbox.util.PDFStreamEngine.processSubStream
(PDFStreamEngine.java
:207)
        at 
org.pdfbox.util.PDFStreamEngine.processStream
(PDFStreamEngine.java:16
0)
        at org.pdfbox.pdfviewer.PageDrawer.drawPage
(PageDrawer.java:97)
        at org.pdfbox.pdmodel.PDPage.convertToImage
(PDPage.java:658) </detail>
	</artifact>
	<artifact id="1505750">
		<submitted_by>braine</submitted_by>
		<submitted_date>2006-06-13 18:29</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>PDFParser: AccessControlException</summary>
		<detail>I'm getting minor variations on the following error
when I try to create a PDDocument in an Applet from a URL.

&gt;&gt; java.security.AccessControlException: access denied
(java.util.PropertyPermission java.io.tmpdir read)
&gt;&gt;  at
java.security.AccessControlContext.checkPermission(Unknown
Source)
&gt;&gt;  at
java.security.AccessController.checkPermission(Unknown
Source)
&gt;&gt;  at
java.lang.SecurityManager.checkPermission(Unknown Source)
&gt;&gt;  at
java.lang.SecurityManager.checkPropertyAccess(Unknown
Source)
&gt;&gt;  at java.lang.System.getProperty(Unknown Source)
&gt;&gt;  at
org.pdfbox.pdfparser.PDFParser.&lt;init&gt;(PDFParser.java:72)
&gt;&gt;  at
org.pdfbox.pdfparser.PDFParser.&lt;init&gt;(PDFParser.java:85)
&gt;&gt;  at
org.pdfbox.pdmodel.PDDocument.load(PDDocument.java:577)
&gt;&gt;  at BTpdf.initialize(BTpdf.java:41)
     :
     :
     :

-----------------------------------------------------
I've tried:
1) "PDDocument.load( InputStream input)"
2) "PDDocument.load( File file)"
3) "PDDocument.load( String filename)"

All methods give me the AccessControlException, but
with one subtle difference:

A) Using the InputStream method via:

&gt;   URL  url = new URL(
"http://localhost/Images/btP72.pdf");
&gt;   PDDocument doc = "PDDocument.load( url.openStream() );

or:
&gt;   byte data[] = new byte[ (new URL(
"http://localhost/Images/btP72.pdf")).openConnection().urlConn.getContentLength()
];
&gt;   int  dRead  = fileLoc.openStream().read( data);
&gt;   doc         = PDDocument.load( new
ByteArrayInputStream( data) );

I get:

&gt;&gt; java.security.AccessControlException: access denied
&gt;&gt;+ (java.util.PropertyPermission java.io.tmpdir read)


B) Using the File and String methods via:

&gt;   File f = new File(
"http://localhost/Images/btP72.pdf");
&gt;   PDDocument doc = PDDocument.load( f);

or:
&gt;   PDDocument doc = "PDDocument.load(
"http://localhost/Images/btP72.pdf");

I get:
&gt;&gt; java.security.AccessControlException: access denied
&gt;&gt;+ (java.io.FilePermission
http:\localhost\Images\btP72.pdf read)

-----------------------------------------------------

I'm speculating at the moment, but it looks as though
PDFParser is attempting to look at the PDF file as
though it existed on my disk and not from the web.

I'm using
PDFBox version: PDFBox-0.7.2
Windows XP SP2


</detail>
		<follow_ups>
			<item>
				<date>1150407760</date>
				<sender>braine</sender>
				<text>Logged In: YES 
user_id=1091957

I found that I can bypass this problem by placing my code in
a JAR file and signing it (I also signed the PDFBox.jar
file, although I'm not sure that is necessary).

Even with this bypass, I think it would be better if I
didn't need to sign the code.  I also feel that printing PDF
files is important enough for web applications, that it
would be worth while to create a subset of PDFBox that only
creates images for printing.  This should have two advantages:
1) Smaller JAR files will be travelling around the web.
2) There should be no need to create temporary disk files.
</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1488389">
		<submitted_by>entrex</submitted_by>
		<submitted_date>2006-05-14 10:59</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Document in use however it is being finilized</summary>
		<detail>In some situation document being closed however it is
still in use. It doesn't harm using it entities however
stderr or stdout prints the stack trace. 

Expected result:
Warning is printed through logging subsystem

Actual result:
Warnig is printed to std(err|out) as well.   

java.lang.Throwable: Warning: You did not close the PDF
Document
	at
org.pdfbox.cos.COSDocument.finalize(COSDocument.java:420)
	at java.lang.ref.Finalizer.invokeFinalizeMethod(Native
Method)
	at java.lang.ref.Finalizer.runFinalizer(Finalizer.java:83)
	at java.lang.ref.Finalizer.access$100(Finalizer.java:14)
	at
java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:160)</detail>
	</artifact>
	<artifact id="1474121">
		<submitted_by>reno1979</submitted_by>
		<submitted_date>2006-04-21 03:35</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>sf issue Barcode is not printed </summary>
		<detail>When printing a pdf that contains a barcode (created in
itext) like this:

PDdocument doc=new PDdocument("test.pdf"); 
doc.print(); 

The document comes out fine, except the barcodes are
missing. Using a normal pdf reader the barcodes are
printed.

I will upload a barcode_test.pdf to ftp.pdfbox.org 

Best regards,

Rene

sorry didn't know category or group :S</detail>
		<follow_ups>
			<item>
				<date>1202375902</date>
				<sender>lemich</sender>
				<text>Logged In: YES 
user_id=1741045
Originator: NO

Thanks for your workaround mathd, i was looking for a way to print a barcode and it works.

But there is still a problem : I have to display the number associated to the barcode, in fact the number used to generate it with iText.

For example:

Image barcode39 = null;

//I create my BarCode :
String baseBarCode = "12306"
barcode=new Barcode39();
barcode.setCode(codebarre);
barcode.setStartStopText(false);

//Then I create my image
barcode39=barcode.createImageWithBarcode(cb, null, null); // this way works, but I can't print it with pdfbox
// or the second way, which works, but the size of the barcode is not the same, and the number disappears at printing
java.awt.Image img3 = barcode.createAwtImage(Color.BLACK, Color.WHITE);

Did somebody have the same problem, and is there a simple way to solve it?
For the moment, i try to found an alternative by displaying the number independantly, but it won't render the same.

Thanks
Michel</text>
			</item>
			<item>
				<date>1199053310</date>
				<sender>mathd</sender>
				<text>Logged In: YES 
user_id=1580577
Originator: NO

I have found a workaround if you are creating the original pdf yourself with iText.

Instead of creating the barcode with createImageWithBarcode

ex:
Image img = code128.createImageWithBarcode(cb, null, null);
img.setAbsolutePosition(150, 50);
cb.addImage(img);

I created an java.awt.Image with createAwtImage

ex:
java.awt.Image img3 = code128.createAwtImage(Color.BLACK, Color.WHITE);
Image img4 = Image.getInstance(img3, null);
img4.setAbsolutePosition(150, 50);
cb.addImage(img4);

That way the barcode is an image of a barcode and PDFBox can print it without problem.</text>
			</item>
			<item>
				<date>1199052104</date>
				<sender>mathd</sender>
				<text>Logged In: YES 
user_id=1580577
Originator: NO

I have the same problem with version 0.7.3

But the nightly build are able to print the pdf417 font (2d barcode) but not the regular barcode.

I am not able to upload the sample pdf to ftp.pdfbox.org so I have send you an email. If you prefer I have also upload it to http://premieresloges.ca/barcode_test2.pdf</text>
			</item>
			<item>
				<date>1173366965</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

I took a quick peek at the barcode_test.pdf file.  I fixed the one exception that was thrown but then ran into another error; the barcodes were not being drawn in the correct spot.  I have not had time to look at it further yet.

Ben</text>
			</item>
			<item>
				<date>1173356047</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

Any news ?</text>
			</item>
			<item>
				<date>1172609664</date>
				<sender>smadja</sender>
				<text>Logged In: YES 
user_id=1729448
Originator: NO

I did it.
We stay in touch.

Guy</text>
			</item>
			<item>
				<date>1172509456</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

The news is that I am looking for a sample PDF.  I don't seem to be able to find the barcode_test.pdf with my list of PDFs.  If you have a sample then please attach/upload to ftp.pdfbox.org

Thanks,
Ben</text>
			</item>
			<item>
				<date>1172507362</date>
				<sender>smadja</sender>
				<text>Logged In: YES 
user_id=1729448
Originator: NO

Hello,
Do you have any news about this bug ?

How can we print barcode with 0.7.3 version ?

Thanks</text>
			</item>
			<item>
				<date>1170108858</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

I realize this bug has been opened for a while but for some reason I don't have the barcode_test.pdf  Can you please upload it again or if someone else has an example then please upload/attach and leave a comment here.

Thanks,
Ben</text>
			</item>
			<item>
				<date>1170047771</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

I have also tried this and get the same results 0.7.3; 01-27-07

</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1483833">
		<submitted_by>gagravarr</submitted_by>
		<submitted_date>2006-05-08 07:05</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>java.util.EmptyStackException from PDFTextStripper.writeText</summary>
		<detail>I'm using PDFBox 0.7.2. On a certain document
(http://www-wds.worldbank.org/external/default/WDSContentServer/IW3P/IB/2005/12/27/000160016_20051227181308/Rendered/PDF/E12860v10P096469EAs.pdf),
when I execute the following code:

 PDFParser pdfParser = new PDFParser( docStream );
 pdfParser.parse();
 PDDocument pdfDocument = pdfParser.getPDDocument();

 StringWriter textWriter = new StringWriter();
 PDFTextStripper textStripper = new PDFTextStripper();
 textStripper.writeText(pdfDocument, textWriter);

I get the following nasty stack trace from deep inside
PDFBox:

Exception in thread "main" java.util.EmptyStackException
        at java.util.Stack.peek(Stack.java:79)
        at java.util.Stack.pop(Stack.java:61)
        at
org.pdfbox.util.operator.GRestore.process(GRestore.java:65)
        at
org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:
494)
        at
org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java
:207)
        at
org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:16
0)
        at
org.pdfbox.util.PDFTextStripper.processPage(PDFTextStripper.java:355)
        at
org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:268
)
        at
org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:220)
</detail>
	</artifact>
	<artifact id="1485485">
		<submitted_by>sajitjacob</submitted_by>
		<submitted_date>2006-05-10 04:06</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>IOException: expected='/' actual='e'-101</summary>
		<detail>Get the following exception when loading a PDF 
created by ImageMagick

Exception in thread "main" java.io.IOException: 
expected='/' actual='e'-101 
org.pdfbox.io.PushBackInputStream@9
        at 
org.pdfbox.pdfparser.BaseParser.parseCOSName 
(BaseParser.java:774)
        at 
org.pdfbox.pdfparser.BaseParser.parseCOSDictionary 
(BaseParser.java:217)
        at 
org.pdfbox.pdfparser.BaseParser.parseDirObject 
(BaseParser.java:910)
        at org.pdfbox.pdfparser.PDFParser.parseObject 
(PDFParser.java:432)
        at org.pdfbox.pdfparser.PDFParser.parse 
(PDFParser.java:176)
        at org.pdfbox.pdmodel.PDDocument.load 
(PDDocument.java:579)
        at org.pdfbox.pdmodel.PDDocument.load 
(PDDocument.java:549)
        at org.pdfbox.ExtractImages.extractImages 
(ExtractImages.java:124)
        at org.pdfbox.ExtractImages.main 
(ExtractImages.java:74)

</detail>
		<follow_ups>
			<item>
				<date>1159345025</date>
				<sender>francois248</sender>
				<text>Logged In: YES 
user_id=1606233

Hi,

I am facing the same problem when upgrating a tools that
produce PDF file.

I can send a test case too if needed.

Is there a workaround to avoid it?

FranÃ§ois
</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>177454</id>
				<name>pages-000.pdf</name>
				<description>ImageMagick created pdf</description>
				<filesize>17898</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1147259185</adddate>
				<submitted_by>1520364</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>177454: pages-000.pdf</old_value>
				<date>1147259185</date>
				<by>sajitjacob</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1485654">
		<submitted_by>davidin</submitted_by>
		<submitted_date>2006-05-10 07:41</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520288">lucene</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Error converting Date with LucenePDFDocument</summary>
		<detail>I'm using Lucene with PDFBox but It seems there is an
error in converting date where day isn't with 0.

Correct: 05/12/2005
Non correct: 5/12/2005

-------------------------------------------------------
java.io.IOException: Error converting date:5/12/2005
15:57:16
org.pdfbox.util.DateConverter.toCalendar(DateConverter.java:237)
org.pdfbox.util.DateConverter.toCalendar(DateConverter.java:134)
org.pdfbox.cos.COSDictionary.getDate(COSDictionary.java:704)
org.pdfbox.pdmodel.PDDocumentInformation.getCreationDate(PDDocumentInformation.java:232)
org.pdfbox.searchengine.lucene.LucenePDFDocument.addContent(LucenePDFDocument.java:297)
org.pdfbox.searchengine.lucene.LucenePDFDocument.getDocument(LucenePDFDocument.java:187)
---------------------------------------------------------</detail>
		<follow_ups>
			<item>
				<date>1151652242</date>
				<sender>davidin</sender>
				<text>Logged In: YES 
user_id=1519856

"error in converting date where day isn't with 0" ... 

so

It's December 5th... 

thanks</text>
			</item>
			<item>
				<date>1151631111</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

So is that May 12th or December 5th??</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1486459">
		<submitted_by>ddelangle</submitted_by>
		<submitted_date>2006-05-11 05:15</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>ConvertColorSpace RGB to CMYK</summary>
		<detail>Hello,

I've corrected what seemed to me to be a bug on
convertion on grey scales. I did this on CVS version
from 19/04/2006

I had to inverse the K value of CMYK (1 - value). Here
is the corrected method :

    private void replaceGrayTokensWithCMYKTokens( List
editedPageTokens, List pageTokens, int counter,
Hashtable colorEquivalents )
    {
//      Get current RGB color.
        float gray = ((COSNumber)pageTokens.get(
counter - 1 )).floatValue();
        
        ColorSpaceInstance grayColor = new
ColorSpaceInstance();
        grayColor.colorspace = "Grayscale";
        grayColor.colorspaceValues = new int[] { 100 -
Math.round( gray * 100 ) };
        ColorSpaceInstance cmykColor =
(ColorSpaceInstance)colorEquivalents.get(grayColor);
        float[] cmyk = null;

        if( cmykColor != null )
        {
            cmyk = new float[] {
                cmykColor.colorspaceValues[0] / 100.0f,
                cmykColor.colorspaceValues[1] / 100.0f,
                cmykColor.colorspaceValues[2] / 100.0f,
                cmykColor.colorspaceValues[3] / 100.0f
            };
        }
        else
        {
            cmyk = new float[] {0,0,0,1 - gray};
        }

        //remove the Gray components that are already
part of the editedPageTokens list
        editedPageTokens.remove(
editedPageTokens.size() -1 );

        // Add the new CMYK color
        editedPageTokens.add( new COSFloat( cmyk[0] ) );
        editedPageTokens.add( new COSFloat( cmyk[1] ) );
        editedPageTokens.add( new COSFloat( cmyk[2] ) );
        editedPageTokens.add( new COSFloat( cmyk[3] ) );
    }

I hope this is correct.

Regards,

Denis</detail>
	</artifact>
	<artifact id="1487217">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2006-05-12 01:51</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>wrong words highlighted</summary>
		<detail>PDFBox appears to have a problem properly highlighting
words from the following PDF. I am using a very simple
servlet to do this, and it works fine for most PDFs.
With this one, however, it highlights the wrong words.
Unfortunately I am not smart enough to figure out what
is going on myself, so could anybody help me with this?

The files can be found here:
http://www.impressie.nl/matthijs/PDFHighlight.java
http://www.impressie.nl/matthijs/Rectificatie%20van%20Richtlijn%20Handhaving%20van%20Intellectuele-eigendomsrechten.pdf

Matthijs Bierman
matthijs@impressie.nl</detail>
		<follow_ups>
			<item>
				<date>1185267731</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

That document is in a password-protected area, so it can't be read by anyone else! I have a similar problem with this doc:
http://www.usc.edu/schools/business/FBE/seminars/papers/AE_4-28-06_FISMAN-parking.pdf

... but I think I've figured this one out. The second page of this document is entirely blank, and checking by hand I can see that the highlights after p1 are all in positions that would be correct if they were one page further on; it appears that the page count isn't being incremented for the blank page. Tracing this back in the code I see this:

            PDStream contentStream = nextPage.getContents();
            if( contentStream != null )
            {
                COSStream contents = contentStream.getStream();
                processPage( nextPage, contents );
            }

(PDFTextStripper.java line 255). That's skipping the blank page and giving me the wrong page no, I think - and I guess that the problem can be resolved by moving currentPageNo++ from inside processPage to just above that test.

-- Brian.Ewins@gmail.com</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1503206">
		<submitted_by>braine</submitted_by>
		<submitted_date>2006-06-08 15:45</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>NullPointerException in Invoke.process</summary>
		<detail>Using PDFBox version: PDFBox-0.7.2

For the attached file: BenefitsTable.pdf

I'm getting a NullPointerException:

at
org.pdfbox.util.operator.pagedrawer.Invoke.process(Invoke.java:84)
at
org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:494)
at
org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:207)
at
org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:160)
at
org.pdfbox.pdfviewer.PageDrawer.drawPage(PageDrawer.java:97)
at
org.pdfbox.pdmodel.PDPage.convertToImage(PDPage.java:658)
at DisplayPDF.displayFile(DisplayPDF.java:152)
    :
    :
    :

-----------------------------------------------------
I get a different exception with the daily builds for
"08-Jun-2006 01:08 12.0M" and "23-May-2006 20:07 11.8M".

Both versions die for all PDF files with the following:

Exception in thread "AWT-EventQueue-0"
java.lang.NoClassDefFoundError: org/fontbox/afm/AFMParser
at org.pdfbox.pdmodel.font.PDFont.getAFM(PDFont.java:347)
at
org.pdfbox.pdmodel.font.PDFont.getAverageFontWidthFromAFMFile(PDFont.java:310)
at
org.pdfbox.pdmodel.font.PDSimpleFont.getAverageFontWidth(PDSimpleFont.java:231)
at
org.pdfbox.util.PDFStreamEngine.showString(PDFStreamEngine.java:265)
at
org.pdfbox.util.operator.ShowText.process(ShowText.java:64)
at
org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:441)
at
org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:204)
at
org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:163)
at
org.pdfbox.pdfviewer.PageDrawer.drawPage(PageDrawer.java:104)
at
org.pdfbox.pdmodel.PDPage.convertToImage(PDPage.java:657)
at DisplayPDF.displayFile(DisplayPDF.java:152)
    :
    :
    :

-----------------------------------------------------

Any help for version 0.7.2 would be greatly appreciated.  

I assume the current problem with the daily builds is
temporary and will eventually be resolved.  Although if
I need to do something to fix that problem as well, I'd
be glad to hear about it.

Bob Braine</detail>
		<follow_ups>
			<item>
				<date>1160734676</date>
				<sender>stefan222</sender>
				<text>Logged In: YES 
user_id=1116775

Got the same exceptionin 0.7.3 RELEASE:

C:\Temp\PDFBox-0.7.3\lib&gt;java -classpath PDFBox-0.7.3.jar
org.pdfbox.PDFReader
Exception in thread "AWT-EventQueue-0"
java.lang.NoClassDefFoundError: org/fontbox/afm/FontMetric
        at
org.pdfbox.pdmodel.font.PDFont.getAFM(PDFont.java:334)
        at
org.pdfbox.pdmodel.font.PDSimpleFont.getFontHeight(PDSimpleFont.java:
104)
        at
org.pdfbox.util.PDFStreamEngine.showString(PDFStreamEngine.java:336)
        at
org.pdfbox.util.operator.ShowTextGlyph.process(ShowTextGlyph.java:80)

        at
org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:
452)
        at
org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java
:215)
        at
org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:17
4)
        at
org.pdfbox.pdfviewer.PageDrawer.drawPage(PageDrawer.java:104)
        at
org.pdfbox.pdfviewer.PDFPagePanel.paint(PDFPagePanel.java:95)
        at javax.swing.JComponent.paintChildren(Unknown Source)
        at javax.swing.JComponent.paint(Unknown Source)
        at javax.swing.JComponent.paintChildren(Unknown Source)
        at javax.swing.JComponent.paint(Unknown Source)
        at javax.swing.JComponent.paintChildren(Unknown Source)
        at javax.swing.JComponent.paint(Unknown Source)
        at javax.swing.JViewport.paint(Unknown Source)
        at javax.swing.JComponent.paintChildren(Unknown Source)
        at javax.swing.JComponent.paint(Unknown Source)
        at javax.swing.JComponent.paintChildren(Unknown Source)
        at javax.swing.JComponent.paint(Unknown Source)
        at javax.swing.JComponent.paintChildren(Unknown Source)
        at javax.swing.JComponent.paint(Unknown Source)
        at javax.swing.JLayeredPane.paint(Unknown Source)
        at javax.swing.JComponent.paintChildren(Unknown Source)
        at javax.swing.JComponent.paint(Unknown Source)
        at
javax.swing.JComponent.paintWithOffscreenBuffer(Unknown Source)
        at
javax.swing.JComponent.paintDoubleBuffered(Unknown Source)
        at javax.swing.JComponent._paintImmediately(Unknown
Source)
        at javax.swing.JComponent.paintImmediately(Unknown
Source)
        at
javax.swing.RepaintManager.paintDirtyRegions(Unknown Source)
        at
javax.swing.SystemEventQueueUtilities$ComponentWorkRequest.run(Unknow
n Source)
        at java.awt.event.InvocationEvent.dispatch(Unknown
Source)
        at java.awt.EventQueue.dispatchEvent(Unknown Source)
        at
java.awt.EventDispatchThread.pumpOneEventForHierarchy(Unknown
Source)

        at
java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown
Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown
Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown
Source)
        at java.awt.EventDispatchThread.run(Unknown Source)

Kind regards,
Stefan</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1502533">
		<submitted_by>blmatthews</submitted_by>
		<submitted_date>2006-06-07 14:26</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Some suggested COSString improvements</summary>
		<detail>I have 3 suggested improvements to COSString. The 
first two I'd consider bugs, the 3rd is an 
enhancement. I'll attach a diff fixing all three.

1. COSString.equals compares the underlying byte 
arrays, so a COSString read from a Unicode string in 
a PDF file will appear different than a COSString 
built programmatically, even if they contain the same 
characters.

For example:

COSString s1 = new COSString(new byte[]{
-2, -1, 0, 115, 0, 116, 0, 114});
COSString s2 = new COSString("str");
System.out.println(s1.equals(s2));

prints false, even though both strings consist of 
just the characters 's', 't', 'r' in that order, 
which I'd argue makes them the same.

2. COSString.toString just does a new String(getBytes
()), so if the bytes in the underlying byte array 
form a Unicode string, it will convert every byte to 
a character, including the BOM and 0's. Instead it 
should call getString(), which accounts for Unicode 
strings and converts using an appropriate encoding.

3. COSString.equals will only return true if the 
object being compared against is another COSString. 
It would be handy if it fell back to comparing 
against obj.toString if the object isn't a COSString. 
In particular, this would let you do things like:

if (acosstring.equals("hello"))

This would be a useful change in the other 
COS*.equals methods as well, particularly with 
autoboxing, as you should be able to do things like:

if (acosinteger.equals(42))


The attached diff basically runs everything through 
getString(). As that could be relatively expensive, I 
have getString() cache the resulting String.</detail>
		<existingfiles>
			<file>
				<id>180913</id>
				<name>COSString.diff</name>
				<description>COSString diffs</description>
				<filesize>2665</filesize>
				<filetype>text/plain</filetype>
				<adddate>1149715612</adddate>
				<submitted_by>116912</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>180913: COSString.diff</old_value>
				<date>1149715612</date>
				<by>blmatthews</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1525971">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2006-07-20 08:43</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>StreamCorruptedException in LZWFilter</summary>
		<detail>Hello,
I get a StreamCorruptedException in LZWFilter.decode
when I'm reading the Adobe-TIFF6.0 description (121
pages) file. It's a pitty but it's never more available
online. I tried to attach it, but it has ~400kb. If
anyone need's it I can mail it. I am successfull
loading it by the ICEpdf-package and Acrobat. Please
Help! ijyama@web.de</detail>
	</artifact>
	<artifact id="1516348">
		<submitted_by>mhilpert</submitted_by>
		<submitted_date>2006-07-03 06:48</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="556660">writing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Changing DocInfo disables fast web view</summary>
		<detail>So far, I changed document information with PDFBox (2) 
of our PDF files after generating them with FOP (1). 
Now I would like to optimize the PDF files and 
therefore inserted a new step inbetween those steps 
(1) and (2) by first optimizing the generated PDF to 
enable the "fast web view" feature of the PDF (display 
1st page while loading the rest). And then I continue 
with setting the document properties with PDFBox. But 
PDFBox disables this fast web view feature again.

(I tried optimizing the PDF after the PDFBox DocInfo 
step, but this doesn't work because the PDFs are also 
encrypted in the PDFBox step by setting the encryption 
properties, too.)
</detail>
	</artifact>
	<artifact id="1517226">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2006-07-04 15:27</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>TestPublicKeyEncryption.java</summary>
		<detail>Hello,

if I start the Example, i got the following
error-message (with j2sdk1.4.2_12 and Adobe
Acrobat 7.0):

org.pdfbox.exceptions.COSVisitorException: 
Unsupported keysize or algorithm parameters
	at org.pdfbox.pdfwriter.COSWriter.write
(COSWriter.java:1019)
	at org.pdfbox.pdmodel.PDDocument.save
(PDDocument.java:735)
	at org.pdfbox.pdmodel.PDDocument.save
(PDDocument.java:716)
	at 
test.pdfbox.encryption.TestPublicKeyEncryption.testPro
tectionError(TestPublicKeyEncryption.java:132)
	at 
sun.reflect.NativeMethodAccessorImpl.invoke0(Native 
Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:39)
	at 
sun.reflect.DelegatingMethodAccessorImpl.invoke
(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke
(Method.java:324)
	at junit.framework.TestCase.runTest
(TestCase.java:154)
	at junit.framework.TestCase.runBare
(TestCase.java:127)
	at junit.framework.TestResult$1.protect
(TestResult.java:106)
	at junit.framework.TestResult.runProtected
(TestResult.java:124)
	at junit.framework.TestResult.run
(TestResult.java:109)
	at junit.framework.TestCase.run
(TestCase.java:118)
	at junit.framework.TestSuite.runTest
(TestSuite.java:208)
	at junit.framework.TestSuite.run
(TestSuite.java:203)
	at 
org.eclipse.jdt.internal.junit.runner.RemoteTestRunner
.runTests(RemoteTestRunner.java:478)
	at 
org.eclipse.jdt.internal.junit.runner.RemoteTestRunner
.run(RemoteTestRunner.java:344)
	at 
org.eclipse.jdt.internal.junit.runner.RemoteTestRunner
.main(RemoteTestRunner.java:196)

</detail>
	</artifact>
	<artifact id="1517476">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2006-07-05 05:11</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>java.lang.NullPointerException in highlighter.generateXMLHig</summary>
		<detail>Sample code :

try
			{
				URL pdfURL = new URL( mPdfUrl );
				
				doc = PDDocument.load( pdfURL.openStream() );
				PDFHighlighter highlighter = new PDFHighlighter();
				highlighter.generateXMLHighlight( doc,
mHighlightWords.split( " " ), fiw );
					
			}
			catch (Exception e)

Using ADLIB converted PDF ( see attach file )</detail>
		<existingfiles>
			<file>
				<id>183934</id>
				<name>cv1.pdf</name>
				<description>pdf</description>
				<filesize>109109</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1152101507</adddate>
				<submitted_by>100</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>183934: cv1.pdf</old_value>
				<date>1152101507</date>
				<by>nobody</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1517478">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2006-07-05 05:13</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>java.io.IOException: Unexpected encoding type:org.pdfbox.cos</summary>
		<detail>
This Occurs when trying to highlight "linux" words in
this pdf ( see attach file )

</detail>
		<existingfiles>
			<file>
				<id>183935</id>
				<name>cv3.pdf</name>
				<description>pdf</description>
				<filesize>103740</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1152101620</adddate>
				<submitted_by>100</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>183935: cv3.pdf</old_value>
				<date>1152101620</date>
				<by>nobody</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1549236">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2006-08-30 05:05</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>PDPageXYZDestination jumps one page too far</summary>
		<detail>When using PDPageXYZDestination with zoom -1, top 0 and
left 0 (other valeus, too) it jumps one page further
than it should.
This also means that PDPageXYZDestination can't jump to
the first page</detail>
	</artifact>
	<artifact id="1532246">
		<submitted_by>ojaquemet</submitted_by>
		<submitted_date>2006-08-01 01:15</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>NullPointerException in getAllKids with corrupted pdf </summary>
		<detail>java.lang.NullPointerException
	at
org.pdfbox.pdmodel.PDPageNode.getAllKids(PDPageNode.java:194)
	at
org.pdfbox.pdmodel.PDPageNode.getAllKids(PDPageNode.java:182)
	at
org.pdfbox.pdmodel.PDDocumentCatalog.getAllPages(PDDocumentCatalog.java:226)
	at
org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:216)
	at [...]


Tested with PDFBox-0.7.2-log4j.jar and
PDFBox-0.7.3-dev-20060731.jar

Because the corrupted PDF is too big (7MB) to be
attached here, you'll be able to find it there:
http://olivier.jaquemet.free.fr/PDF-corrupted.pdf

</detail>
		<follow_ups>
			<item>
				<date>1156443765</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

I get this message too.  How do you parse big PDFs?</text>
			</item>
		</follow_ups>
	</artifact>
	<artifact id="1547765">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2006-08-28 02:15</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="293147"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Getting tiff - PDCcitt.TiffWrapper object</summary>
		<detail>PDCcitt has hardcoded dpi information and it is 300 for
x and y resolution (see PDCcitt line 519 and 520).
Propose solution: set information about dpi in
COSDictionary object (decodeParms variable)</detail>
	</artifact>
	<artifact id="1549928">
		<submitted_by>tguillotin</submitted_by>
		<submitted_date>2006-08-31 06:27</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>IrisPDF files text extraction problem</summary>
		<detail>We have a problem while extracting text from files
generated with IrisPDF, we get the following exception:
"java.io.IOException: expected='endstream'
actual='endstream13'
org.pdfbox.io.PushBackInputStream@9576fd" 

Thanks in advance

Thierry Guillotin

ps: attached is an example file (as short as possible)</detail>
		<existingfiles>
			<file>
				<id>191484</id>
				<name>test_bad.pdf</name>
				<description>example file</description>
				<filesize>48891</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1157030874</adddate>
				<submitted_by>1585365</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>191484: test_bad.pdf</old_value>
				<date>1157030874</date>
				<by>tguillotin</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1534387">
		<submitted_by>feeber</submitted_by>
		<submitted_date>2006-08-04 02:05</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>Error in parsing CMap file</summary>
		<detail>Class CMap, in method addMapping( byte []src, String
dest), the line:
  int intSrc = src[0];
should be:
  int intSrc=(src[0]+256)$256;</detail>
	</artifact>
	<artifact id="1537323">
		<submitted_by>amashtakov</submitted_by>
		<submitted_date>2006-08-09 04:44</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>doesn't convert properly russian characters</summary>
		<detail>Hi,

I've tried to extract text from attached PDF using
both stable release PDFBox-0.7.2 and recent nightly 
build PDFBox-0.7.3-dev-20060809 and the following code 
snipped: 

// 1. parse document
PDFParser parser = new PDFParser(is);
parser.parse();
cos = parser.getDocument();

// 2. extract text
PDFTextStripper stripper = new PDFTextStripper();
String text = stripper.getText(new PDDocument(cos));

// 3. dump output
FileOutputStream os = new FileOutputStream("file.txt");
OutputStreamWriter ow = new 
      OutputStreamWriter(os, "UTF-8");
ow.write(text);
ow.flush();

Despite of russian contents of original PDF, the 
output file doesn't contain any "valid"  russian 
character(s). 

I've also tried to convert the same PDF with the 
foolabs-xpdf tool - the output contains valid
UTF-8 russian text.

PS: I couldn't attach file because of sourcecforge 
    size limit. (the size is ~545K). Is it possible
    to pass it to dev. team ?
</detail>
	</artifact>
	<artifact id="1544943">
		<submitted_by>thib_gc</submitted_by>
		<submitted_date>2006-08-22 15:40</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>PDFStreamEngine(Properties) should use propertyNames()</summary>
		<detail>The PDFStreamEngine(Properties) constructor uses
properties.keySet().iterator() to create a map of
operators based on the client-supplied custom operator
processor class names. This has the disadvantage of
only iterating over the proper keys of the properties
parameter, ignoring any keys that are defined by the
Properties instance's defaults (if present).

If a client of PDFStreamEngine wishes to have the
default behavior be anything other than the built-in
"no-op", which exists because of the null check in
processOperator(PDFOperator, List), the only choice is
to supply to the constructor a Properties object with
no defaults that includes all possible PDF operators,
attaching the name of a class extending
OperatorProcessor with the desired default behavior to
all keys that need it. Another conceivable possibility
would be to override PDFStreamEngine(Properties) and
processOperator(PDFOperator, List).

Neither of these options seem desirable, nor do they
enable clients to take advantage of defaults
recursively in Properties without flattening the
chained Properties objects.

Instead, the PDFStreamEngine(Properties) constructor
could use properties.propertyNames() (the die-hard
Enumeration from the Properties API), which guarantees
enumerating recursively over Properties objects.
</detail>
	</artifact>
	<artifact id="1538596">
		<submitted_by>jfnieto</submitted_by>
		<submitted_date>2006-08-11 03:28</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="775780">PDModel.AcroForm</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Open</status>
		<resolution>None</resolution>
		<summary>NPE in COSDictionaryMap.put</summary>
		<detail>When importing FDF fields in a PDF file, I get a
NullPointerException in COSDictionaryMap.

I'm just starting with PDFBox. I use it to create final
PDF files merging a PDF with an FDF file. In most
cases, it works fine, but with a couple of PDF files I
get this error.

I have done a little program to import a sample FDF
into all "template" PDFs. I only get the NPE with two
of them. The source of this test is attached to this
message.

The exception trace:

java.lang.NullPointerException
        at
org.pdfbox.pdmodel.common.COSDictionaryMap.put(COSDictionaryMap.java:
120)
        at
org.pdfbox.pdmodel.interactive.form.PDAppearance.getFontAndUpdateReso
urces(PDAppearance.java:447)
        at
org.pdfbox.pdmodel.interactive.form.PDAppearance.setAppearanceValue(P
DAppearance.java:275)
        at
org.pdfbox.pdmodel.interactive.form.PDVariableText.setValue(PDVariabl
eText.java:145)
        at
org.pdfbox.pdmodel.interactive.form.PDField.importFDF(PDField.java:31
9)
        at
org.pdfbox.pdmodel.interactive.form.PDAcroForm.importFDF(PDAcroForm.j
ava:132)
        at TestPDF.importFDF(TestPDF.java:44)
        at TestPDF.test(TestPDF.java:28)
        at TestPDF.main(TestPDF.java:60)</detail>
		<follow_ups>
			<item>
				<date>1155544153</date>
				<sender>jfnieto</sender>
				<text>Logged In: YES 
user_id=393901

I'm playing with the PDFBox code. If I insert a check in the
put method of COSDictionaryMap to avoid the NPE, then I get
errors when saving() the final document:

java.lang.NullPointerException
        at
org.pdfbox.cos.COSStream.getFilteredStream(COSStream.java:153)
        at
org.pdfbox.pdfwriter.COSWriter.visitFromStream(COSWriter.java:936)
        at org.pdfbox.cos.COSStream.accept(COSStream.java:218)
        at
org.pdfbox.pdfwriter.COSWriter.doWriteObject(COSWriter.java:449)
        at
org.pdfbox.pdfwriter.COSWriter.doWriteBody(COSWriter.java:382)
        at
org.pdfbox.pdfwriter.COSWriter.visitFromDocument(COSWriter.java:794)
        at
org.pdfbox.cos.COSDocument.accept(COSDocument.java:390)
        at
org.pdfbox.pdfwriter.COSWriter.write(COSWriter.java:1089)
        at
org.pdfbox.pdmodel.PDDocument.save(PDDocument.java:611)
        at
org.pdfbox.pdmodel.PDDocument.save(PDDocument.java:592)
        at GenPDF.importFDF(GenPDF.java:25)
        at GenPDF.main(GenPDF.java:43)</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>188647</id>
				<name>TestPDF.java</name>
				<description>Test: Import a FDF into a group of PDF files</description>
				<filesize>1363</filesize>
				<filetype>application/octet-stream</filetype>
				<adddate>1155292111</adddate>
				<submitted_by>393901</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>File Added</field>
				<old_value>188647: TestPDF.java</old_value>
				<date>1155292111</date>
				<by>jfnieto</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1827434">
		<submitted_by>gdeshors</submitted_by>
		<submitted_date>2007-11-07 02:16</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>PDF printing or conversion : grey backgrounds not rendered</summary>
		<detail>When printing a PDF or converting it into an image, the grey backgrounds are not rendered, and just made white.

To illustrate this, I've uploaded an screenshot of
- the original document : http://glcomp.free.fr/images/pdfbox/orig.png
- and the document rendered by PDFBox (printed via PDF995) :
http://glcomp.free.fr/images/pdfbox/final.png

(nota : I've put the PDF documents as well :
http://glcomp.free.fr/images/pdfbox/ )

Steps to reproduce :
1/ take my document and convert it to image, or print it via PDFBox (let's
say "PDFToImage -imageType png orig.pdf")
2/ on produced image orig1.png the grey backgrounds dont exist anymore.</detail>
		<follow_ups>
			<item>
				<date>1195096269</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

fixed in CVS, please give the nightly build a try.

Ben</text>
			</item>
			<item>
				<date>1195048162</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

dev note, see 1827434-orig.pdf</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1195096269</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1195096269</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1195096269</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1648374">
		<submitted_by>ylatt</submitted_by>
		<submitted_date>2007-01-30 18:04</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Unexpected end of ZLIB input stream</summary>
		<detail>Hi, 
 
We have a problem in filter-media in our dspace for particular item only. 
 
And found the link to upgrade PDFBox.jar . 
http://sourceforge.net/mailarchive/message.php?msg_id=18359568  
 
But it is not solve our problem as our dspace version is 1.4.1 and PDFBox.jar already in 0.7.3. 
 
Hope anyone can help us on this issue. 
 
PS: I have attached the pdf file incase you can't download the file from the link
http://researchspace.itss.auckland.ac.nz/handle/2292/87

Regards, 
YinYin 
 
======= 
Applying Media Filters 
ERROR filtering, skipping bitstream #47 java.io.EOFException: Unexpected end of ZLIB input stream 
java.io.EOFException: Unexpected end of ZLIB input stream 
at 
java.util.zip.InflaterInputStream.fill(InflaterInputStream.java:216) 
at 
java.util.zip.InflaterInputStream.read(InflaterInputStream.java:134) 
at org.pdfbox.filter.FlateFilter.decode(FlateFilter.java:97) 
at org.pdfbox.cos.COSStream.doDecode(COSStream.java:290) 
at org.pdfbox.cos.COSStream.doDecode(COSStream.java:235) 
at 
org.pdfbox.cos.COSStream.getUnfilteredStream(COSStream.java:170) 
at 
org.pdfbox.pdfparser.PDFStreamParser.&lt;init&gt;(PDFStreamParser.java:101) 
at org.pdfbox.cos.COSStream.getStreamTokens(COSStream.java:132) 
at 
org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:20 
2) 
at 
org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:174) 
at 
org.pdfbox.util.PDFTextStripper.processPage(PDFTextStripper.java:336) 
at 
org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:259) 
at 
org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:216) 
at 
org.pdfbox.util.PDFTextStripper.getText(PDFTextStripper.java:149) 
at 
org.dspace.app.mediafilter.PDFFilter.getDestinationStream(PDFFilter.java 
:110) 
at 
org.dspace.app.mediafilter.MediaFilter.processBitstream(MediaFilter.java 
:155) 
at 
org.dspace.app.mediafilter.MediaFilterManager.filterBitstream(MediaFilte 
rManager.java:327) 
at 
org.dspace.app.mediafilter.MediaFilterManager.filterItem(MediaFilterMana 
ger.java:296) 
at 
org.dspace.app.mediafilter.MediaFilterManager.applyFiltersItem(MediaFilt 
erManager.java:266) 
ERROR filtering, skipping bitstream #48 java.io.EOFException: Unexpected end of ZLIB input stream .... 
 
 


</detail>
		<follow_ups>
			<item>
				<date>1193106863</date>
				<sender>ylatt</sender>
				<text>Logged In: YES 
user_id=1705973
Originator: YES

Hi Ben

there is no item under  nightly built. http://www.pdfbox.org/dist/


Rgds,
YinYin</text>
			</item>
			<item>
				<date>1193019889</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

fixed, please try tonights nightly build</text>
			</item>
			<item>
				<date>1187702193</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

I am also seeing the same problem on a significant minority of pdf files.</text>
			</item>
			<item>
				<date>1187036374</date>
				<sender>ctaggart</sender>
				<text>Logged In: YES 
user_id=276600
Originator: NO

Any status on this one?  I'm trying to convert a few thousand PDF files to text for indexing and I've run into this issue on 140+ of them.</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>213814</id>
				<name>01front.pdf</name>
				<description></description>
				<filesize>180174</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1170209081</adddate>
				<submitted_by>1705973</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1193019889</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1193019889</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1193019889</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1171459952</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>213814: 01front.pdf</old_value>
				<date>1170209081</date>
				<by>ylatt</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1639679">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2007-01-19 08:24</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="817859">PDFReader</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Parse Arc File from Heritrix</summary>
		<detail>Hi,
i am trying to parse some pdf doc's which are in the arc file format. (heritrix crawler)
has anybody any experiences with parsing those docs?

i get always the Error: 
"Expected an integer type, actual='Apache/1.3.33'null


thanks
br
andre</detail>
		<follow_ups>
			<item>
				<date>1190340254</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

Closing this issue, not able to reproduce because no sample file was provided.</text>
			</item>
			<item>
				<date>1169692410</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

Do you have an example PDF that shows this issue?

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1190340254</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1190340254</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1659756">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2007-02-14 05:30</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>PDFReader does not close document on exit</summary>
		<detail>org.pdfbox.PDFReader does not close document on exit.
</detail>
		<follow_ups>
			<item>
				<date>1190340170</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: YES

fixed</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1190340170</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1190340170</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1190340170</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1659754">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2007-02-14 05:29</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>PDFDebugger does not close document on exit</summary>
		<detail>org.pdfbox.PDFDebugger does not close the PDDocument when it exits.</detail>
		<follow_ups>
			<item>
				<date>1190340151</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: YES

fixed</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1190340151</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1190340151</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1190340151</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1171459830</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1793593">
		<submitted_by>bkeil</submitted_by>
		<submitted_date>2007-09-12 17:18</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>PDFStreamEngine doesn't handle rotation of -90.</summary>
		<detail>Some PDFs specify rotation as -90 instead of 270.  PDFStreamEngine does not handle these correctly.  A potentil fix:

===================================================================
--- src/org/pdfbox/util/PDFStreamEngine.java    (revision 1357)
+++ src/org/pdfbox/util/PDFStreamEngine.java    (revision 1358)
@@ -313,7 +313,7 @@
             trm.setValue( 2,0, y );
             trm.setValue( 2,1, x );
         }
-        else if( pageRotation == 270 )
+        else if(( pageRotation == 270 ) ||(pageRotation == -90))
         {
             trm.setValue( 2,0, -y  + page.findMediaBox().getHeight() );
             trm.setValue( 2,1, x );
@@ -402,7 +402,7 @@
         {
             totalStringWidth = (textMatrix.getYPosition() - yPosBefore);
         }
-        else if( pageRotation == 270 )
+        else if (( pageRotation == 270 ) ||(pageRotation == -90))
         {
             totalStringWidth = (yPosBefore - textMatrix.getYPosition());
         }
</detail>
		<follow_ups>
			<item>
				<date>1190339452</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

in CVS.  Thanks!</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1190339452</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1190339452</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1190339452</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1759743">
		<submitted_by>dougcook</submitted_by>
		<submitted_date>2007-07-24 08:24</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="6">6</priority>
		<status>Closed</status>
		<resolution>Out of Date</resolution>
		<summary>ClassCastException in document decryption</summary>
		<detail>I'm getting the following ClassCastException on some documents (see later for why I believe this happens on all encrypted documents):
 
java.lang.ClassCastException: org.pdfbox.pdmodel.encryption.PDEncryptionDictionary at org.pdfbox.encryption.DocumentEncryption.decryptDocument(DocumentEncryption.java:197)  
 
The calling code looks something like:  
 
PDFParser parser = new PDFParser(new ByteArrayInputStream(raw));  
parser.parse();  
 
pdf = parser.getPDDocument();  
 
if (pdf.isEncrypted()) {  
  DocumentEncryption decryptor = new DocumentEncryption(pdf);  
  //Just try using the default password and move on  
  decryptor.decryptDocument("");  // dies here!
}  
 
Two documents which do this are:  
 
http://www.jansz.com.au/library/AGT_Jansz_Vineyard_17.06.04.pdf  
http://www.sanmatteo.com/immagini/pdf-214.pdf  
 
The offending line in DocumentEncryption is:
PDStandardEncryption encParameters = (PDStandardEncryption)pdDocument.getEncryptionDictionary();

As I read the code (and very possibly misread the code, given that I've only had 1 coffee this morning and never looked at this code before!) it looks like this can never work, because PDDocument.getEncryptionDictionary() always explicitly calls the PDEncryptionDictionary constructor, the result of which will always fail a cast to its subclass, PDStandardEncryption.

If I change getEncryptionDictionary to construct a PDStandardEncryption, no more crashes, and decryption works properly, at least on a handful of test cases which previously failed.

The problem occurs in 0.7.3 and the nightly builds. I've only looked at the 0.7.3 source so it's possible something different is going on there, but the symptoms are identical.

Many thanks,

Doug</detail>
		<follow_ups>
			<item>
				<date>1189560580</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

The DocumentEncryption class is now deprecated.  The new way to decrypt the documents is to call PDDocument#decrypt( String )

Also note the PDDocument.load( XXX ) method which is a convenience method so you don't even need to use the PDFParser class :)


I did a quick check by running "org.pdfbox.ExtractText pdf-214.pdf" and that worked so I'll assume you will be set if you call this new method.  Feel free to reopen if you are still having issues.

Ben


</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1189560580</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1189560580</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1189560580</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>priority</field>
				<old_value>5</old_value>
				<date>1186322685</date>
				<by>dougcook</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1792084">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2007-09-10 17:56</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>spot colors' getTintTransform needs quick fix</summary>
		<detail>For PDSeparation.java, in package org.pdfbox.pdmodel.graphics.color, function getTintTransform uses a function due to be replaced in later PDFBox versions, COSArray.get: 
        return PDFunction.create( array.get( 3 ) );

which causes an IOException such as (from the end of PDFunction.create():
            throw new IOException( "Error: Unknown COS type for function " + function );
   "Error: Unknown COS type for function COS object{27, 0}"

using "return PDFunction.create(array.getObject(3));" in getTintTransform fixes this. [Note: this probably applies to a similar getTintTransform in PDDeviceN.java in the same package, but I haven't got to that point yet.]</detail>
		<follow_ups>
			<item>
				<date>1189559795</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

Fixed in CVS.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1189559795</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1189559795</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1189559795</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1757097">
		<submitted_by>alx27</submitted_by>
		<submitted_date>2007-07-19 12:31</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520288">lucene</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Invalid</resolution>
		<summary>NoSuchMethod in LucenePDFDocument</summary>
		<detail>This is what I've got while trying to run PDFBox under Java 6 against Lucene 2.2.0:

java.lang.NoSuchMethodError: org.apache.lucene.document.Document.add(Lorg/apache/lucene/document/Field;)V
	at org.pdfbox.searchengine.lucene.LucenePDFDocument.addUnindexedField(LucenePDFDocument.java:224)
	at org.pdfbox.searchengine.lucene.LucenePDFDocument.convertDocument(LucenePDFDocument.java:265)
	at org.pdfbox.searchengine.lucene.LucenePDFDocument.getDocument(LucenePDFDocument.java:377)

All I had to do to get it fixed is to recompile the org.pdfbox.searchengine.lucene.LucenePDFDocument 
class with Java 6 against Lucene 2.2.0</detail>
		<follow_ups>
			<item>
				<date>1184891557</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

I believe this is the case with 0.7.3, the nightly build has already beed updated to use lucene 2.2.0, please give that version a try.  

Thanks,
Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1184891557</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1184891557</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1184891557</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1691370">
		<submitted_by>reubenfirmin</submitted_by>
		<submitted_date>2007-03-30 08:29</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Download is out of sync w/ javadoc is out of sync w/ maven</summary>
		<detail>The javadoc on your page is 0.7.4dev. The download you recommend is 0.7.3. The maven repositories contain only 0.7.1. Please bring them all into sync, and/or provide different versions of the javadoc on your page.

Thanks</detail>
		<follow_ups>
			<item>
				<date>1183425239</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

0.7.3 maven upload is complete

javadocs on pdfbox.org are built from CVS.  

javadocs with release download is for that release.
</text>
			</item>
			<item>
				<date>1176385129</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

I'll work on getting the maven upload corrected.  The 0.7.3 download comes with the javadocs for that version, if you are using a specific version of PDFBox then you will need to use the docs that come with that version.

By design, the javadocs on the website will always be in sync with the CVS version and reflects the nightly build.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1183425239</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1183425239</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1183425239</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1176385129</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1679249">
		<submitted_by>alannon</submitted_by>
		<submitted_date>2007-03-12 12:45</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Maven Upload?</summary>
		<detail>Could one of the developers here please put together a maven upload bundle for 0.7.3 and post a request up at http://jira.codehaus.org/browse/MAVENUPLOAD

The latest version in the maven repository right now is version 0.7.1 which is obviously very old.</detail>
		<follow_ups>
			<item>
				<date>1183425175</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

0.7.3 is now in maven repository, maven upload will now be part of the release process.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1183425175</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1183425175</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1183425175</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1745133">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2007-06-28 19:19</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>OutOfMemoryError exception during text extraction</summary>
		<detail>Exception in thread "Thread-0" java.lang.OutOfMemoryError: Java heap space
        at java.util.Arrays.copyOf(Arrays.java:2760)
        at java.util.Arrays.copyOf(Arrays.java:2734)
        at java.util.ArrayList.ensureCapacity(ArrayList.java:167)
        at java.util.ArrayList.add(ArrayList.java:351)
        at org.fontbox.cmap.CMapParser.parseNextToken(CMapParser.java:236)
        at org.fontbox.cmap.CMapParser.parse(CMapParser.java:79)
        at org.pdfbox.pdmodel.font.PDFont.parseCmap(PDFont.java:535)
        at org.pdfbox.pdmodel.font.PDFont.encode(PDFont.java:387)
        at org.pdfbox.util.PDFStreamEngine.showString(PDFStreamEngine.java:325)
        at org.pdfbox.util.operator.ShowText.process(ShowText.java:64)
        at org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:452)
        at org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:215)
        at org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:174)
        at org.pdfbox.util.PDFTextStripper.processPage(PDFTextStripper.java:336)
        at org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:259)
        at org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:216)
        at us.fed.nmcourt.common.pdfbox.NmdLucenePDFDocument.addContent(NmdLucenePDFDocument.java:433)
        at us.fed.nmcourt.common.pdfbox.NmdLucenePDFDocument.convertDocument(NmdLucenePDFDocument.java:292)
        at us.fed.nmcourt.drs.daemonmanager.handler.AbstractDaemonManagerHandler.writeIncomingDocumentsToIndex(AbstractDaemonManagerHandler.java:272)
        at us.fed.nmcourt.drs.daemonmanager.handler.NddHandler.handle(NddHandler.java:101)
        at us.fed.nmcourt.drs.daemonmanager.MainDaemonRunnable.run(MainDaemonRunnable.java:329)
        at java.lang.Thread.run(Thread.java:619)

Attached is the pdf document that causes this exception.</detail>
		<follow_ups>
			<item>
				<date>1183424977</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

This was an issue with FontBox, and is now fixed in the fontbox jar</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>235015</id>
				<name>0001016402-0000000000-04cv01150.pdf</name>
				<description></description>
				<filesize>100271</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1183083597</adddate>
				<submitted_by>100</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1183424977</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1183424977</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1183424977</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>235015: 0001016402-0000000000-04cv01150.pdf</old_value>
				<date>1183083597</date>
				<by>nobody</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1727594">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2007-05-29 07:23</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Invalid</resolution>
		<summary>Package not Found!</summary>
		<detail>The classes in the pdfparser cannot be compiled. It shows errors like package org.fontbox doesnot exist. These packages are not included in the pdfbox. From where can we download these packages. What are the requirements to run pdfbox in our system like any particular java versions? </detail>
		<follow_ups>
			<item>
				<date>1182818522</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

this jar(FontBox-x.x.x.jar) is in the external directory that ships with pdfbox.  You need this on your classpath.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1182818522</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1182818522</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1182818522</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1714707">
		<submitted_by>coneman</submitted_by>
		<submitted_date>2007-05-07 20:42</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>from pdf to text</summary>
		<detail>error 
 
java.io.IOException: Error: Expected an integer type, actual='354&lt;&lt;'  
at org.pdfbox.pdfparser.BaseParser.readInt(BaseParser.java:1264) 
at org.pdfbox.pdfparser.PDFObjectStreamParser.parse(PDFObjectStreamParser.java:88) 
at org.pdfbox.cos.COSDocument.dereferenceObjectStreams(COSDocument.java:451) 
at org.pdfbox.pdfparser.PDFParser.parse(PDFParser.java:204) 
at org.pdfbox.pdmodel.PDDocument.load(PDDocument.java:703) 
at org.pdfbox.pdmodel.PDDocument.load(PDDocument.java:687) 
at org.pdfbox.pdmodel.PDDocument.load(PDDocument.java:629) 
at clobtest.ClobTest.pdfToText(ClobTest.java:97) 
at clobtest.ClobTest.&lt;init&gt;(ClobTest.java:30) 
at clobtest.ClobTest.main(ClobTest.java:129) 
 
help me </detail>
		<follow_ups>
			<item>
				<date>1178845087</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

fixed in CVS, junit test case added.

Ben</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>228273</id>
				<name>genko_oc.14_shiryo1.pdf</name>
				<description></description>
				<filesize>124888</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1178595730</adddate>
				<submitted_by>1787065</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1178845087</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1178845087</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1178845087</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>summary</field>
				<old_value>from pdt to text</old_value>
				<date>1178675708</date>
				<by>coneman</by>
			</item>
			<item>
				<field>summary</field>
				<old_value>https://sourceforge.net/account/newuser_register.php?confirm</old_value>
				<date>1178595754</date>
				<by>coneman</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>228273: genko_oc.14_shiryo1.pdf</old_value>
				<date>1178595731</date>
				<by>coneman</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1712068">
		<submitted_by>danz0403</submitted_by>
		<submitted_date>2007-05-03 08:20</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>PDDocument.openProtection() throws NullPointerException</summary>
		<detail>
When I tried to open my attached encrypted file with the following code, it throws NullPointerException:

    doc = PDDocument.load("pdfdoc2.pdf");
    if (doc.isEncrypted())
    {
	StandardDecryptionMaterial spm = new StandardDecryptionMaterial("");
	doc.openProtection(spm);
    }

It seems that this PDF file does not contain any DocumentID information, thus causes the NullPointerException.

I tried modifying java file: org.pdfbox.pdmodel.encryption.StandardDecryptionMaterial
by initializing the variable 'id' (line 182, version 0.7.3) with 'new COSString("")' and updating it only when DocumentID exists.
This works for me.
But I do not know whether this is the right way to get rid of this bug.
Please take a look at it.
</detail>
		<follow_ups>
			<item>
				<date>1178842947</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

Fixed in CVS.  Please try tonights nightly build.

Ben</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>227697</id>
				<name>pdfdoc2.pdf</name>
				<description>sample pdf file causes NullPointerException</description>
				<filesize>13688</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1178205646</adddate>
				<submitted_by>1063794</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1178842947</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1178842947</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1178842947</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>227697: pdfdoc2.pdf</old_value>
				<date>1178205646</date>
				<by>danz0403</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1559588">
		<submitted_by>ng_aldridge</submitted_by>
		<submitted_date>2006-09-15 14:41</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>bad processing of page/operator</summary>
		<detail>Hi,

For the last little while, we've been receiving some
documents that seem to get corrupted by pdfbox.

The process is:

1. Load and decrypt document
2. Use pdmodel stuff to call setValue on acroform fields
3. Save out modified form

When I try and load the modified form back into Acrobat
or process with Ghostscript, I get a page corruption. I
have determined that it's not the pdmodel code
adjusting the appearance stream for the fields that is
causing it. Either the load/decrypt or the save.

I will upload the file to your ftp site.

Regards,

Nathan</detail>
		<follow_ups>
			<item>
				<date>1178204834</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

This was a bug in the BaseParser; the incorrect stream length was being set and extra data was being appended to the stream.  This is now fixed in CVS.

Ben</text>
			</item>
			<item>
				<date>1178132161</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

Nathan,

Is this only with encrypted documents?

Is this still an issue when using last nights nightly build?

Can you post the orginal as well, I assume I should be able to easily reproduce this with a couple lines of code.

Ben

</text>
			</item>
			<item>
				<date>1178131624</date>
				<sender>ng_aldridge</sender>
				<text>Logged In: YES 
user_id=1111818
Originator: YES

Problem file uploaded to ftp.pdfbox.org: BadOperator-bug1559588.pdf</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1178204834</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1178204834</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1178204834</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1710894">
		<submitted_by>ng_aldridge</submitted_by>
		<submitted_date>2007-05-01 17:46</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Problem with PDF after PDDocument.openProtection called</summary>
		<detail>If I decrypt a PDF, modify the document and then attempt to save the document out using PDDocument.save(). 

I get the following:
 
java.lang.NullPointerException at org.pdfbox.pdmodel.encryption.StandardSecurityHandler.prepareDocumentForEncryption(StandardSecurityHandler.java:262)  at org.pdfbox.pdfwriter.COSWriter.write(COSWriter.java:1016) 
at org.pdfbox.pdmodel.PDDocument.save(PDDocument.java:736) 
at org.pdfbox.pdmodel.PDDocument.save(PDDocument.java:717) 
at pdf.Driver.run(Driver.java:45) 
at pdf.Driver.main(Driver.java:92) 
 
However, if I mess with PDDocument.openProtection() and add in ***, everything works out fine: 
 
SecurityHandler handler = SecurityHandlersManager.getInstance().getSecurityHandler(dict.getFilter()); 
securityHandler = handler; 
handler.decryptDocument(this, pm); 
document.dereferenceObjectStreams(); 
document.setEncryptionDictionary( null ); 
*** securityHandler = null; *** 
 
Thoughts? 
 
Nathan </detail>
		<follow_ups>
			<item>
				<date>1178204685</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

Yes, this was this issue.  This has been fixed in CVS.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1178204685</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1178204685</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1178204685</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1542662">
		<submitted_by>sanjoa</submitted_by>
		<submitted_date>2006-08-18 07:01</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>PDFont.encode causes ClassCastException: COSName</summary>
		<detail>PDFont.encode causes ClassCastException:
org.pdfbox.cos.COSName for some of my PDF test files.

Exception in thread "main"
java.lang.ClassCastException: org.pdfbox.cos.COSName
	at org.pdfbox.pdmodel.font.PDFont.encode(PDFont.java:369)
	at
org.pdfbox.util.PDFStreamEngine.showString(PDFStreamEngine.java:332)
	at
org.pdfbox.util.operator.ShowText.process(ShowText.java:66)
	at
org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:494)
	at
org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:207)
	at
org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:160)
	at
org.pdfbox.util.PDFTextStripper.processPage(PDFTextStripper.java:355)
	at
org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:268)
	at
org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:220)
	at ...transform.filter.PDFTest.usePdfBox(PDFTest.java:108)
	at ...transform.filter.PDFTest.main(PDFTest.java:47)
</detail>
		<follow_ups>
			<item>
				<date>1177632561</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

This is fixed in CVS, please try the nightly build

http://www.pdfbox.org/dist</text>
			</item>
			<item>
				<date>1177491369</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

I accidently created a new bug report for probably the same bug: 
[ 1707165 ] ClassCastException: when extracting text

I provided more debug information and a file that can be tested with it.

- Tommy SandstrÃ¶m</text>
			</item>
			<item>
				<date>1172871918</date>
				<sender>jheid</sender>
				<text>Logged In: YES 
user_id=974702
Originator: NO

Sorry, I have made so many versions that I get lost somehow...

If the one-liner

 LucenePDFDocument.getDocument (new File ("VA-50-brochure.pdf"));

works for you I it is fixed.</text>
			</item>
			<item>
				<date>1172871450</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

When I run 

java org.pdfbox.ExtractText VA-50-brochure.pdf

From my command line I get no errors.  Do you get errors?

Ben</text>
			</item>
			<item>
				<date>1172871158</date>
				<sender>jheid</sender>
				<text>Logged In: YES 
user_id=974702
Originator: NO

No. Perhaps this is another bug but I've tested the CVS version which gave me a ClassCastException at COSDictionary:600 (he's exepecting a COSName but gets a COSString).

So I changed it to 

public String getNameAsString( COSName key )
    {
        String retval = null;
        // NEW
        if (getDictionaryObject( key ) instanceof COSString)
	    return ((COSString) getDictionaryObject( key )).getString ();
        // /NEW
        COSName name = (COSName) getDictionaryObject( key );
        if( name != null )
        {
            retval = name.getName();
        }
        return retval;
    }

not knowing if this makes sense but I don't get further exceptions (which will work for me right now).</text>
			</item>
			<item>
				<date>1172870827</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

Dear jheid,

I think this is actually a dup of a bug I just fixed yesterday or the day before.  I just ran the org.pdfbox.ExtractText on the file and it appears to work for me.

Please try the nightly build from http://www.pdfbox.org/dist and let me know if this works for you.

Ben
</text>
			</item>
			<item>
				<date>1172866527</date>
				<sender>jheid</sender>
				<text>Logged In: YES 
user_id=974702
Originator: NO

Same problem here.

This is the PDF which makes the problems with

LucenePDFDocument.getDocument (new File ("VA-50-brochure.pdf"));

http://www.n3k.de/pdfs/VA-50-brochure.pdf

Please help, this is a showstopper for me :-(</text>
			</item>
			<item>
				<date>1156229032</date>
				<sender>sanjoa</sender>
				<text>Logged In: YES 
user_id=543179

The previous comment was submitted by me (nobody)</text>
			</item>
			<item>
				<date>1156228844</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

Yes, I'm using PDFBox-0.7.2.jar

I can't provide any example PDF document because of it's
contents.

At org.pdfbox.pdmodel.font.PDFont.encode(PDFont.java:369)
the following line causes the ClassCastException:

COSStream toUnicode = (COSStream)font.getDictionaryObject(
COSName.TO_UNICODE );

The getDictionaryObject method returns the following Object:
	 (org.pdfbox.cos.COSName) COSName{Identity-H}


</text>
			</item>
			<item>
				<date>1156210033</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Is this with 0.7.2?  Can you post an example PDF, either 
attach here or upload to ftp.pdfbox.org

Thanks,
Ben Litchfield</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1177632561</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1177632561</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1177632561</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>category_id</field>
				<old_value>100</old_value>
				<date>1156229032</date>
				<by>sanjoa</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1707165">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2007-04-25 00:59</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Invalid</resolution>
		<summary>ClassCastException: when extracting text</summary>
		<detail>Test document: http://appropriations.senate.gov/download.cfm?file=2007%5F02%5F27%5FChairman%5FByrd%5FPresses%5Ffor%5FStraightforward%5FAnswers%5Fon%5FWar%2Epdf&amp;dir=Press

Platform: Linux Debian/Java 1.5
PDFBox-version: 0.7.3 (latest I could find)

java.lang.ClassCastException: org.pdfbox.cos.COSName
	at org.pdfbox.pdmodel.font.PDFont.encode(PDFont.java:362)
	at org.pdfbox.util.PDFStreamEngine.showString(PDFStreamEngine.java:327)
	at org.pdfbox.util.operator.ShowText.process(ShowText.java:63)
	at org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:487)
	at org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:467)
	at org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:202)
	at org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:156)
	at org.pdfbox.util.PDFTextStripper.processPage(PDFTextStripper.java:351)
	at org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:267)
	at org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:219)
	at org.pdfbox.util.PDFTextStripper.getText(PDFTextStripper.java:139)

It should probably not throw classcast exception, maybe missing font or something (I do not know the code). The best for me would be to replace the missing font with something else. I am not sure if this has anything to do with the font problem. But kpdf reported missing font: 'ArialMT' but still opened the document.

I attached a file aswell. Hopefully that works too!
 </detail>
		<follow_ups>
			<item>
				<date>1177632455</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

This is was fixed in CVS, please try the nightly build from http://www.pdfbox.org/dist

Ben</text>
			</item>
			<item>
				<date>1177491246</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

It seems to be the same problem that occurs in bug: [ 1542662 ] PDFont.encode causes ClassCastException: COSName
I hope my debugs helps you solve the problem.

- Tommy SandstrÃ¶m</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>226521</id>
				<name>testdocument_missing_font_on_linux.pdf</name>
				<description>testdocument_missing_font_on_linux_kpdf.pdf</description>
				<filesize>59361</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1177487987</adddate>
				<submitted_by>100</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1177632455</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1177632455</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1177632455</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>226521: testdocument_missing_font_on_linux.pdf</old_value>
				<date>1177487987</date>
				<by>nobody</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1674908">
		<submitted_by>nunnu</submitted_by>
		<submitted_date>2007-03-06 06:02</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="9">9</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Index was outside the bounds of the array</summary>
		<detail>Extracting text from the attached file gives the following result:

Files\InfoFinder\FileFetch\IF_felles\Retrieval\350108076214034038.pdf" 
   --&gt;System.IndexOutOfRangeException: Index was outside the bounds of the array.. 
   at org.pdfbox.util.PDFStreamEngine.processSubStream(PDPage aPage, PDResources resources, COSStream cosStream) 
   at org.pdfbox.util.PDFStreamEngine.processStream(PDPage aPage, PDResources resources, COSStream cosStream) 
   at org.pdfbox.util.PDFTextStripper.processPage(PDPage page, COSStream content) 
   at org.pdfbox.util.PDFTextStripper.processPages(List pages) 
   at org.pdfbox.util.PDFTextStripper.writeText(PDDocument doc, Writer outputStream) 
   at org.pdfbox.util.PDFTextStripper.getText(PDDocument doc) 
   at InfoFinder.Server.Fetch.Import.DocumentFilterPDF.Filter.GetTextContent(String inn, String&amp; ut) 

What is wrong?</detail>
		<follow_ups>
			<item>
				<date>1174465109</date>
				<sender>nunnu</sender>
				<text>Logged In: YES 
user_id=1726493
Originator: YES

Seems to work in the latest version :-)</text>
			</item>
			<item>
				<date>1173227828</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

I tried extracting the text from that PDF with my version of PDFBox; both Java and .NET and did not have an issue.

From the commandline; this produces valid results

ExtractText.exe  350108076214034038.pdf


I am using the http://www.pdfbox.org/dist/PDFBox-0.7.4-dev.zip build, which includes the updated .NET jars.  Have you tried this version with that PDF?

Ben</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>219085</id>
				<name>350108076214034038.pdf</name>
				<description></description>
				<filesize>58092</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1173189747</adddate>
				<submitted_by>1726493</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1174465109</date>
				<by>nunnu</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1174465109</date>
				<by>nunnu</by>
			</item>
			<item>
				<field>priority</field>
				<old_value>5</old_value>
				<date>1173189760</date>
				<by>nunnu</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>219085: 350108076214034038.pdf</old_value>
				<date>1173189747</date>
				<by>nunnu</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1674903">
		<submitted_by>nunnu</submitted_by>
		<submitted_date>2007-03-06 05:59</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="9">9</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>InvalidCastException in write2file for images</summary>
		<detail>(I have asked about this problem before ;-))

What Iâ€™m trying to do is to extract text from the PDF documents, at first the text itself (getText), and â€“ optionally â€“ by extracting images and pass them to an OCR filter. The PDF document I tried today does actually only consist of images (I believe itâ€™s a scanned document), so no text was found directly.


When I have extracted an image (tiff) I try to write it to file, in order to pass it to the OCR filter. And it fails:
 

28.02.2007 12:56:04 ERROR; Exception caught at GetTextContent-&gt;0: Error occured in write2file "C:\Program Files\InfoFinder\Temp\163020938562089989"

   --&gt;System.InvalidCastException: Unable to cast object of type 'org.pdfbox.cos.COSArray' to type 'org.pdfbox.cos.COSDictionary'..

   at org.pdfbox.pdmodel.graphics.xobject.PDXObjectImage.write2file(String filename)

   at InfoFinder.Server.Fetch.Import.DocumentFilterPDF.Filter.GetTextContent(String inn, String&amp; ut)

 

What is wrong here?


I have already sent you my example file, it is too big to attach here, tell me if I should send it again!
</detail>
		<follow_ups>
			<item>
				<date>1173229637</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

Fix is in CVS.  See .NET nightly build  http://www.pdfbox.org/dist/PDFBox-0.7.4-dev-03-06-2007.zip

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1173229637</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1173229637</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1173229637</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>priority</field>
				<old_value>5</old_value>
				<date>1173189616</date>
				<by>nunnu</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1672700">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2007-03-02 14:20</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Invalid</resolution>
		<summary>[patch] Specify non default printer in silentPrint mode.</summary>
		<detail>I've just added the capability to specify a non-default printer via a command line switch for silentPrint mode to my local copy of PDFBox.

Attached is a diff file containing the patch.
Questions, comments: ben@souther.us

Thanks for a great product.
-Ben Souther</detail>
		<follow_ups>
			<item>
				<date>1173205761</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

Closed: as shown in below comments this was submitted as a patch so I am closing this issue.  FYI: not today but soon I'll get the patches reviewed and added to CVS.

Ben</text>
			</item>
			<item>
				<date>1172928768</date>
				<sender>bpsouther</sender>
				<text>Logged In: YES 
user_id=1733795
Originator: NO

Oops.
Didn't notice there was a page just for patches until after I posted it here.
Reposted in the correct page.</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>218576</id>
				<name>printerName.patch</name>
				<description>Diff file containg patches for PrintPDF.java and PDDocument.java</description>
				<filesize>3836</filesize>
				<filetype>text/x-patch</filetype>
				<adddate>1172874034</adddate>
				<submitted_by>100</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1173205761</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1173205761</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1173205761</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>218576: printerName.patch</old_value>
				<date>1172874034</date>
				<by>nobody</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1666995">
		<submitted_by>nunnu</submitted_by>
		<submitted_date>2007-02-23 03:48</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="9">9</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>InvalidCastException in getText</summary>
		<detail>I have used getText to extract text from PDF documents, it has worked fine for hundreds of them. 
But, using the exact same code, now I get an error for many documents: 
 
--&gt;System.InvalidCastException: Unable to cast object of type 'org.pdfbox.cos.COSString' to type 'org.pdfbox.cos.COSName'..  
at org.pdfbox.util.PDFStreamEngine.processSubStream(PDPage aPage, PDResources resources, COSStream cosStream)  
at org.pdfbox.util.PDFStreamEngine.processStream(PDPage aPage, PDResources resources, COSStream cosStream)  
at org.pdfbox.util.PDFTextStripper.processPage(PDPage page, COSStream content)  
at org.pdfbox.util.PDFTextStripper.processPages(List pages)  
at org.pdfbox.util.PDFTextStripper.writeText(PDDocument doc, Writer outputStream)  
at org.pdfbox.util.PDFTextStripper.getText(PDDocument doc)  
at InfoFinder.Server.Fetch.Import.DocumentFilterPDF.Filter.GetTextContent(String inn, String&amp; ut)  
 
What is wrong? 

I have not checked all the documents, but have noticed that some of them are made with an old version (pdf versjon 1.2 (Acrobat 3.x)) Which versions are supported? In case it is not, is there any chance to fix it? Some of our customers may have old documents...


Thanks, 
Hildegunn 
</detail>
		<follow_ups>
			<item>
				<date>1172536836</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

I believe the issue is that "Compleo - Supervisor 3" is producing invalid PDF documents.  It is not using the correct datatype for the BaseFont.  I have added a workaround for this and the fix is in CVS and should make it to tonights nightly build.  http://www.pdfbox.org/dist

Cheers,
Ben</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>217377</id>
				<name>01.02.2007 19009480.pdf</name>
				<description></description>
				<filesize>9822</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1172231306</adddate>
				<submitted_by>1726493</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1172536836</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1172536836</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>priority</field>
				<old_value>5</old_value>
				<date>1172496834</date>
				<by>nunnu</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>217377: 01.02.2007 19009480.pdf</old_value>
				<date>1172231306</date>
				<by>nunnu</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1652388">
		<submitted_by>jps26401</submitted_by>
		<submitted_date>2007-02-05 05:37</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>text extraction error (ClassCastException: COSArray)</summary>
		<detail>I got the following error when I wanted to extract text from files:

java.lang.ClassCastException: org.pdfbox.cos.COSArray
	at org.pdfbox.filter.FlateFilter.decode(FlateFilter.java:70)
	at org.pdfbox.cos.COSStream.doDecode(COSStream.java:290)
	at org.pdfbox.cos.COSStream.doDecode(COSStream.java:243)
	at org.pdfbox.cos.COSStream.getUnfilteredStream(COSStream.java:170)
	at org.pdfbox.pdfparser.PDFStreamParser.&lt;init&gt;(PDFStreamParser.java:101)
	at org.pdfbox.cos.COSStream.getStreamTokens(COSStream.java:132)
	at org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:202)
	at org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:174)
	at org.pdfbox.util.PDFTextStripper.processPage(PDFTextStripper.java:336)
	at org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:259)
	at org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:216)

This error occured when I used extracttext command line utility even from my source code.

I use version 0.7.3 on Windows system.

</detail>
		<follow_ups>
			<item>
				<date>1171005641</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

Now it's ok with mentioned error. Thank you.

But even it's not working properly, not all rows are interpreted correctly. Last two rows (font Verdana and SansSerif) are not readible. I was trying to add appropriate fonts but without positive result. Could PDFBox read this or it is out of PDFBox's ability?</text>
			</item>
			<item>
				<date>1170765712</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

I think this is a case of me breaking the nightly build by not checking something in.  I'll fix it tonight.  In the meantime I uploaded a manual build you can try at

http://www.pdfbox.org/dist/PDFBox-0.7.4-dev.zip

Ben</text>
			</item>
			<item>
				<date>1170753727</date>
				<sender>jps26401</sender>
				<text>Logged In: YES 
user_id=1522978
Originator: YES

I have tryid it with PDFBox-0.7.4-dev-20070205.jar version and nothing new. The error occured again.</text>
			</item>
			<item>
				<date>1170722986</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

fixed in CVS, please give tonights nightly build a try http://www.pdfbox.org/dist

Ben</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>214568</id>
				<name>sample_fonts_solidconvertor.pdf</name>
				<description>Not working file (firstly written in Word and then pdf generated with Solid Convertor PDF</description>
				<filesize>57099</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1170682636</adddate>
				<submitted_by>1522978</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1170722986</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1170722986</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1170722986</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>214568: sample_fonts_solidconvertor.pdf</old_value>
				<date>1170682638</date>
				<by>jps26401</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1057560">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-10-30 19:57</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Overlay incorrectly orders overlay pages</summary>
		<detail>OS: Windows 2000
JDK: Sun 1.4.1_05

When calling executing org.pdfbox.Overlay from the 
command line, the form overlay (Data.pdf) gets the 
pages jumbled.  The form (Form.pdf) is applied correctly.

The Data.pdf was generated using FOP.  The pages from 
the document get parsed in the correct order when 
using the PDFTextStripper Class.</detail>
		<follow_ups>
			<item>
				<date>1164073599</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708
Originator: NO

fixed in CVS, please try tonights nightly build.</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>107090</id>
				<name>pdfs.zip</name>
				<description>Zip File Containing Form.pdf and Data.pdf</description>
				<filesize>126454</filesize>
				<filetype></filetype>
				<adddate>1099191473</adddate>
				<submitted_by>100</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1164073599</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1164073599</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1164073599</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>107090: pdfs.zip</old_value>
				<date>1099191474</date>
				<by>nobody</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1580898">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2006-10-19 16:14</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Invalid</resolution>
		<summary>error message</summary>
		<detail>in version 0.7.3, i got this error:

Exception in thread "main"
java.lang.NoClassDefFoundError: org/fontbox/cmap/CMapParser
	at
org.pdfbox.pdmodel.font.PDFont.parseCmap(PDFont.java:534)
	at org.pdfbox.pdmodel.font.PDFont.encode(PDFont.java:387)
	at
org.pdfbox.util.PDFStreamEngine.showString(PDFStreamEngine.java:325)
	at
org.pdfbox.util.operator.ShowTextGlyph.process(ShowTextGlyph.java:80)
	at
org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:452)
	at
org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:215)
	at
org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:174)</detail>
		<follow_ups>
			<item>
				<date>1161299803</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

I'm the one who submitted this bug. 

Sorry, I didn't realize that I had to include the jars in
the 'external' directory included with the 0.7.3
distribution zipfile.

I suppose you can ignore/delete this bug.</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1161302628</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1161302628</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1161302628</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1377813">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-12-10 10:47</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Invalid</resolution>
		<summary>closing document problem </summary>
		<detail>java.lang.Throwable: Warning: You did not close the 
PDF Document
        at org.pdfbox.cos.COSDocument.finalize
(COSDocument.java:420)
        at java.lang.ref.Finalizer.invokeFinalizeMethod
(Native Method)
        at java.lang.ref.Finalizer.runFinalizer
(Finalizer.java:83)
        at java.lang.ref.Finalizer.access$100
(Finalizer.java:14)
        at java.lang.ref.Finalizer$FinalizerThread.run
(Finalizer.java:160)


I am getting this error on extracting text from a 
document.</detail>
		<follow_ups>
			<item>
				<date>1158848583</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Sorry for the delay in response.

You are creating two PDDocument objects here

//first one
PDDocument pdDoc = new PDDocument();

//second one
pdDoc.load(pdffile.getAbsolutePath());

load is a static method on PDDocument that returns the 
parsed document.

So you create two and only close one.

Also, you don't call close() in a finally block, you should 
always call close in a finally block.

Ben</text>
			</item>
			<item>
				<date>1135033350</date>
				<sender>noesidoyo</sender>
				<text>Logged In: YES 
user_id=1408730

 java.lang.Throwable: Warning: You did not close the....
 this problem is when the jobs work for "x" time, if only
save quicly the problem not show it,,,,,,,please excuse me i
donÂ´t speak english...

 public void crearPDF(File xml,int op)throws IOException {
    	  File pdffile;
          PDDocument pdDoc = new PDDocument();
        try {
            System.out.println("FOP ExampleXML2PDF\n");
            System.out.println("Preparing...");

            //Setup directories
            File baseDir = new File(".");

            
            File xmlfile = xml;
            File xsltfile = new File(baseDir,
"/elementos/facturaXilvir.xsl");
            pdffile = new File("").createTempFile("pdf",".pdf");
            
            System.out.println("Input: XML (" + xmlfile + ")");
            System.out.println("Stylesheet: " + xsltfile);
            System.out.println("Output: PDF (" + pdffile + ")");
            System.out.println();
            System.out.println("Transforming...");
            
            //Create pdf file in pdffile form xml and xsl
(xmlfile,xsltfile)
            convertXML2PDF(xmlfile, xsltfile, pdffile);
            
            pdDoc.load(pdffile.getAbsolutePath());
            
            
            if(op==1)//print
                pdDoc.print();
            else if(op==2){//save
                JFileChooser jc = new JFileChooser();
                if(jc.showSaveDialog(null) ==
JFileChooser.APPROVE_OPTION){
                    File save = jc.getSelectedFile();
                    String docuPDF = save.getAbsolutePath();
                    if(!docuPDF.endsWith(".pdf"))
                        docuPDF+=".pdf";
                    pdDoc.save(docuPDF);
                }
                
            }
            pdffile.delete();
            pdDoc.close();
            System.out.println("Success!");
        } catch (Exception e) {
            
           
System.err.println("exception:::"+e);//ExceptionUtil.printStackTrace(e));
            System.exit(-1);
        }
 
    }</text>
			</item>
			<item>
				<date>1134354770</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Please post an example that I can use to duplicate the 
problem.

Thanks,
Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1158848583</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1158848583</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1158848583</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="846506">
		<submitted_by>kentgibson</submitted_by>
		<submitted_date>2003-11-21 03:03</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>PDRectangle returns null value for PDCheckbox (2)</summary>
		<detail>second file: the working case!</detail>
		<follow_ups>
			<item>
				<date>1069618665</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

See comments on this bug

http://sourceforge.net/tracker/index.php?
func=detail&amp;amp;aid=846504&amp;amp;group_id=78314&amp;amp;atid=552832</text>
			</item>
			<item>
				<date>1069504482</date>
				<sender>kentgibson</sender>
				<text>Logged In: YES 
user_id=914366

hmm, I swore I attached the first file to the first entry and 
the seocond file to this entry, maybe I am mistaken, sorry for 
the confusion. I will do it again on monday when I have 
access to the files, however the first file should be enough to 
reproduce the problem.</text>
			</item>
			<item>
				<date>1069440359</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Was there a second file that was suppose to be attached.  If 
you had trouble attaching it please email it to me at 
ben@csh.rit.edu and mention the bug number.  Otherwise I 
will close this issue.

Thanks Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1069618665</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1069618665</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="827558">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2003-10-21 07:47</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>log4j should check if debugging is enabled</summary>
		<detail>All log4j calls that perform string concatenation should 
check if isDebugEnabled.  This is a huge performace hit 
that needs to be fixed!!</detail>
		<follow_ups>
			<item>
				<date>1067121444</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

fixed in CVS</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1067121444</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1067121444</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="823946">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2003-10-15 00:52</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Problem with &amp;quot;Header Fill bytes&amp;quot;</summary>
		<detail>Hi,

during parsing of a PDF created by AdLib eXpress
I get the following exception:

java.io.IOException: Error: Expected an integer type, 
actual=''
        at org.pdfbox.pdfparser.BaseParser.readInt
(BaseParser.java:1093)
        at org.pdfbox.pdfparser.PDFParser.parseObject
(PDFParser.java:310)
        at org.pdfbox.pdfparser.PDFParser.parse
(PDFParser.java:129)
        at de.ixit.util.pdf.PatternFinder.parseDocument
(PatternFinder.java:459)
        at de.ixit.util.pdf.PatternFinder.main
(PatternFinder.java:185)


Looking at the PDF it's because of the 2nd line of the 
PDF, the &amp;quot;header fill bytes&amp;quot;, as mentioned in the PDF 
reference under &amp;quot;File Header&amp;quot; (in section 3.4.1 of 
version 1.3). 

My file begins with
%PDF-1.0
Û¯?û
1 0 obj

where it should better be
%PDF-1.0
%Û¯?û
1 0 obj

Still, since Adbobe's Reader actually shows the file, and 
the reference mentions the &amp;quot;&amp;gt;=128&amp;quot;-code bytes, I 
suggest the following fix in PDFParser.parse():

...
            //skipSpaces(); // some crap, not sure
            skipHeaderFillBytes();
...

and a PFDParser.skipHeaderFillBytes() method sth. like:

    /**
     * This will skip a header's binary fill bytes.
     *
     * @throws IOException If there is an error reading 
from the stream.
     */
    protected void skipHeaderFillBytes() throws 
IOException {
        //log( &amp;quot;skipHeaderFillBytes() &amp;quot; + pdfSource );
        int c;
	c = pdfSource.peek();
	if ( c == 37 ) { //37 is the % character, a 
comment
	    // Fill bytes conform with PDF reference
            skipSpaces();
	} else {
	    if ( c &amp;gt;= 128 ) {
		// Fill bytes conform with PDF 
reference (but without comment sign)
		// =&amp;gt; skip until EOL
		readLine();
	    }
	    // else: no fill bytes
	}
    }


This fixes my problem, while still parsing all other files 
I've used so far. There should be no side-effects.

Regards
joerg.holle@ixit.de
</detail>
		<follow_ups>
			<item>
				<date>1066431076</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

This fix is in CVS, thanks for the patch!!

-Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1066431076</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1066431076</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="846782">
		<submitted_by>tadwoods</submitted_by>
		<submitted_date>2003-11-21 10:36</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Character Spacing Not Applied to Spaces</summary>
		<detail>In PDFStreamEngine.showString() the following code 
adds word spacing and character spacing to padding for 
spaces and non-spaces, respectively.

if ((string[i] == 0x20) &amp;amp;&amp;amp; c.equals(&amp;quot; &amp;quot;))
{
  padding = currentWordSpacing;
}
else
{
  padding = currentCharacterSpacing;
}

I believe the code should be modified as follows:

if ((string[i] == 0x20) &amp;amp;&amp;amp; c.equals(&amp;quot; &amp;quot;))
{
  padding = currentWordSpacing + 
currentCharacterSpacing;
}
else
{
  padding = currentCharacterSpacing;
}

During testing I discovered that the position of strings 
with leading spaces were incorrect unless both 
character and word spacing were applied to spaces.</detail>
		<follow_ups>
			<item>
				<date>1069548441</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

added change in CVS</text>
			</item>
			<item>
				<date>1069440702</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Can you mail me the pdf(if possible), I would like to verify 
your proposed change and add it to my test suite.  If you 
can't send me the PDF can you tell me what the Producer 
application was(By opening in reader and viewing document 
properties is the easiest way)


ben@csh.rit.edu</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1069548441</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1069548441</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="823226">
		<submitted_by>tadwoods</submitted_by>
		<submitted_date>2003-10-13 22:28</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Graphic operation was unrecognized due to trailing space</summary>
		<detail>I encountered a graphic operation passed to 
PDFTextStripper.handleOperation(String operation) that 
contained unexpected trailing space. Specifically the 
operation was &amp;quot;RG &amp;quot;. Should operation be trimmed 
somewhere along the way? The document the produced 
this was an MS Word XP produced by Adobe PDF Writer.</detail>
		<follow_ups>
			<item>
				<date>1067207589</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

This was a bug in the PDFStreamParser that was incorrectly 
handling operators that began with R, because there was a 
possibility that it was an object reference.</text>
			</item>
			<item>
				<date>1066495368</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

hmm, that is a little strange because the 
PDFStreamParser.readOperator checks for whitespace. 

Can you send me the PDF document please.

ben@csh.rit.edu</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1067207589</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1067207589</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="849160">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2003-11-25 10:24</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Endless loop in parseCOSName</summary>
		<detail>In parseCOSName() of BaseParser.java there is a while 
loop which can execute endlessly, causing an out of 
memory error eventually.  This happens because, at the 
top of the loop, pdfSource.peek() can return a -1 if the 
stream is at EOF.  (char) -1 is not considered an 
endOfName and so the break is never executed; the 
code is stuck in an endless loop.  I stuck a line in to 
break the loop if peek() returns -1, but maybe you would 
want a different fix.</detail>
		<follow_ups>
			<item>
				<date>1072057521</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Added check in code.  This is in in CVS and will be available in 
0.6.5.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1072057521</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1072057521</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="927793">
		<submitted_by>pcwizard_01</submitted_by>
		<submitted_date>2004-04-01 12:15</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>org.pdfbox.encrytption.DecryptDocument</summary>
		<detail>Due to Adobe allowing the use of RC4 general encryption
on their documents w/o a password (or so it seems), the
decryptDocument fucntion fails when trying to process a
document and throws a null pointer exception. 

~ Erik
(FAST Development)</detail>
		<follow_ups>
			<item>
				<date>1091719705</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

added null check for password check in 0.6.6</text>
			</item>
			<item>
				<date>1081775486</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

If you are passing in null as the password then it is possible 
that it will fail.  As a temporary workaround you could pass in 
the empty string then it should work fine.

I will add a check for null and treat it the same as the empty 
string.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1091719705</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1091719705</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="872526">
		<submitted_by>usprave</submitted_by>
		<submitted_date>2004-01-07 09:42</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>java.lang.ClassCastException: while parsing PDF</summary>
		<detail>I have a problem with one specific PDF file (attached).

I get the following error:

java.lang.ClassCastException: org.pdfbox.cos.COSArray
	at org.pdfbox.cos.COSObject.setObject
(COSObject.java:123)
	at org.pdfbox.pdfparser.PDFParser.parseObject
(PDFParser.java:383)
	at org.pdfbox.pdfparser.PDFParser.parse
(PDFParser.java:132)
	at com.hp.sde.iv.util.PDFparseTest.parseTest
(PDFparseTest.java:??)
	at com.hp.sde.iv.util.PDFparseTest.main
(PDFparseTest.java:??)
Exception in thread "main" 

It happens only with this single PDF document, others 
work fine. The file should be located in c:\Dev\ to 
reproduce.

Here is the source to reproduce:

package com.hp.sde.iv.util;

import java.io.File;
import java.io.FileInputStream;
import java.io.Exception;
import org.pdfbox.pdfparser.PDFParser;

public class PDFparseTest {

  public static void main(String[] args) {
    parseTest();
  }

  public static boolean parseTest() {
    FileInputStream in = null;
    File f = new File("C:\\Dev\\ledinfo.pdf");

    try {
      in = new FileInputStream(f);
      PDFParser parser = null;
      parser = new PDFParser(in);
      parser.parse();
    }
    catch (Exception e) {
       return false;
    }
    return true;
  }
}
</detail>
		<follow_ups>
			<item>
				<date>1074046924</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed in CVS, will be available in next release.</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>72585</id>
				<name>ledinfo.pdf</name>
				<description>PDF file that is not parseable</description>
				<filesize>71978</filesize>
				<filetype></filetype>
				<adddate>1073497363</adddate>
				<submitted_by>238087</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1074046925</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1074046924</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>72585: ledinfo.pdf</old_value>
				<date>1073497363</date>
				<by>usprave</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="864514">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2003-12-22 09:09</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>ClassCastException&amp;gt;org.pdfbox.examples.persistence.AppendDoc</summary>
		<detail>Hi ,
 I am trying to append a PDF to another using
 the org.pdfbox.examples.persistence.AppendDoc .

I get the following error, when one of the pdf has 
the &amp;quot;Navigation Pane&amp;quot; open as default ( I am not sure 
whether the reason is this). 

Any fix for this ?

-------------------------------------------------------
java.lang.ClassCastException: org.pdfbox.cos.COSArray
     at 
org.pdfbox.examples.persistence.AppendDoc.appendDocu
ment(AppendDoc.java:99)
        at 
org.pdfbox.examples.persistence.AppendDoc.doIt
(AppendDoc.java:197)
        at 
org.pdfbox.examples.persistence.AppendDoc.main
(AppendDoc.java:282)</detail>
		<follow_ups>
			<item>
				<date>1074046185</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I have made several improvements to the AppendDoc that is 
in CVS.  Please try again and if you are still having issues 
please e-mail the PDFs.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1074046200</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1074046200</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="863053">
		<submitted_by>brandond</submitted_by>
		<submitted_date>2003-12-19 09:15</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>&amp;quot;corrupt&amp;quot; document caused by classloader issue in PDFont</summary>
		<detail>I have an application build on PDFBox which has the
PDFBox jar in an endorsed directory.   This causes
PDFBox to fail to parse certain PDF files, claiming
they are &amp;quot;corrupt&amp;quot;.

I have tracked the problem down to the following code
in PDFont (line 285 in the 0.6.4 source):

    ClassLoader loader = getClass().getClassLoader();
    InputStream afmStream = loader.getResourceAsStream(
resource );

The second line here throws a NullPointerException in
my environment because the first line returned null. 
The javadoc for getClassLoader()
http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Class.html#getClassLoader()
suggests this is because the classloader is the
bootstrap loader.  

In my application I have changed the code to:

   ClassLoader loader = getClass().getClassLoader();
   // NOTE:  getClassLoader() is allowed to iff the
class has been loaded by the system class loader.
   if (loader == null) 
   {
          loader = ClassLoader.getSystemClassLoader();
   }
   InputStream afmStream = loader.getResourceAsStream(
resource );

With this change, I'm no longer getting &amp;quot;corrupt&amp;quot; PDF's
and the text is being extracted as expected.  

PS - Apologies for the lack of patch file.  If this bug
remains open too long I'll create one.  </detail>
		<follow_ups>
			<item>
				<date>1072048685</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

This fix is now in CVS</text>
			</item>
			<item>
				<date>1071868206</date>
				<sender>brandond</sender>
				<text>Logged In: YES 
user_id=259811

You are correct about the purpose of the boostrap
classloader.  We &amp;quot;shouldn't&amp;quot; be loaded by that classloader,
but we are because of the aforementioned endorsed directory.
 For an explanation of endorsed directories, see
http://java.sun.com/j2se/1.4.2/docs/guide/standards/

The net effect of endorsed directories is that classes in
jars there are loaded by the boostrap loader, so that the
&amp;quot;endorsed&amp;quot; classes can override the classes provided by the JRE.

Without too much detail, our application needs to be
refactored to not use endorsed directories, but for reasons
beyond my control, that refactoring will have to wait.  The
&amp;quot;short-run&amp;quot; solution was to patch pdfbox.

</text>
			</item>
			<item>
				<date>1071866617</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Not patch is necessary, I can see exactly what you have 
changed.  I have not problem adding your code to grab the 
system classloader and hopefully I will have it in CVS this 
weekend.  I am curious about your environment.  You should 
never have PDFBox classes being loaded by the bootstrap 
classloader though.  As far as I know that is only for certain 
classes the JVM needs.

Is this a web environment?  If so what server, and where did 
you place PDFBox-0.6.4.jar?  What do you mean by endorsed 
directory?  In other words, what makes your environment 
different that you are seeing this error.
</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1072048685</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1072048685</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="854637">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2003-12-05 02:28</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="293147"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>appendDoc</summary>
		<detail>AppendDoc sample fails when second doc has more than 
10 pages. It justs appends the first few pages.


vcarbonell@steria.es</detail>
		<follow_ups>
			<item>
				<date>1072048471</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

This fix has been incorporated into CVS.

Ben</text>
			</item>
			<item>
				<date>1071868343</date>
				<sender>jeevanm</sender>
				<text>Logged In: YES 
user_id=934744

Can the correction provided here is tested ? and can it be 
used ?</text>
			</item>
			<item>
				<date>1070970755</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Thanks for the help in looking into this!!  I will get this 
integrated into the pdfbox code right away.

Ben
</text>
			</item>
			<item>
				<date>1070970461</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

It happens that the document root has kids, but those kids 
are not just simple pages but groups of pages; 
so when adding the group of pages, the page count of the 
document must be incremented by the number of pages, and 
not by just one.

Here is a correction :
(AppendDoc, method appendPage :
    public void appendPage(COSDocument destination, 
                      COSDictionary page)
    {
        // get the parent object (pages dictionary)
        COSDictionary pages = getPages(destination);
        // and set in the page object
        page.setItem(COSName.PARENT, destination
                         .createObject(pages));
        // add new page to kids entry in the pages dictionary
        COSArray kids = (COSArray) pages
                         .getItem(COSName.getPDFName(&amp;quot;Kids&amp;quot;));
        kids.add(destination.createObject(page));
        // and increase count
        COSNumber count = (COSNumber) pages
                          .getItem(COSName.COUNT);
//&amp;gt;&amp;gt;
        COSNumber count2 = (COSNumber) page
                         .getItem(COSName.COUNT);
        long count2I = count2 == null ? 1 : count2.intValue();
        pages.setItem(COSName.COUNT, 
                      new COSInteger(count.intValue() + count2I));
//&amp;lt;&amp;lt;
    }
)</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1072048471</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1072048471</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="858134">
		<submitted_by>a_beyo</submitted_by>
		<submitted_date>2003-12-11 01:05</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="556660">writing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>ArrayIndexOutOfBoundsException</summary>
		<detail>
Hi,

I get the following exception:

java.lang.ArrayIndexOutOfBoundsException: -74
	at
org.pdfbox.pdfwriter.COSWriter.visitFromName(COSWriter.java:853)

I then noticed that in the function above function
(COSWriter.visitFromName) the value &amp;quot;current&amp;quot; can be &amp;lt;
0 which causes thew above exception.
so I added the following code (line 845):

                
                if (current &amp;lt; 0)
                	current = (byte) (-1 * current);

and it worked is it OK.

Aharon


</detail>
		<follow_ups>
			<item>
				<date>1072056218</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed in CVS</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1072056218</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1072056218</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="857668">
		<submitted_by>tadwoods</submitted_by>
		<submitted_date>2003-12-10 08:03</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Apostrophes Parse as Copyright Symbols</summary>
		<detail>I have a multi-page PDF that contains some apostrophes 
in the text. Some apostrophes are being parsed 
correctly and other are being parsed as copyright 
symbols.

I have stepped through BaseParser.parseCOSString() 
and find the following hex values in the offending area of 
the pdfSource (a BufferedInputStream): ... 28 44 A9 
45 .... where the A9 is literally a copyright symbol in the 
applicable Courier-Bold font---but Acrobat displays 
this &amp;quot;correctly&amp;quot; as an apostrophe!!! What is going on?

Is there some kind of alternative encoding that should 
be applied here? I see in section 5.5.5 of the PDF 
Spec, &amp;quot;Under certain circumstances, a PDF font 
dictionary can change a font’s built-in encoding...&amp;quot; </detail>
		<follow_ups>
			<item>
				<date>1071850859</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

This is now fixed in CVS and will be available in the next 
release.  The PDF defined 'StandardEncoding' is now the 
default encoding used.</text>
			</item>
			<item>
				<date>1071142191</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Yes there are many different encodings, one being the 
dictionary encoding.  Please mail me the PDF if you can.  
Sometimes the encoding is meaningless and it is not possible 
to correctly extract the text.  If you can't send me the PDF 
try these things for me and see what results you get.

1)Open the PDF in acrobat reader and extract the text, are 
the copyrights gettings extracted properly?  If they are then 
there must be a bug in my code.  If they are not, then it is 
possible(although not certain), that they can't be extracted 
because the encoding is meaningless.

2)Try extracting as unicode, do they work now?
java org.pdfbox.ExtractText -encoding UTF-16BE &amp;lt;PDF-File&amp;gt;

Ben
ben@csh.rit.edu</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1071850902</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1071850902</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="857398">
		<submitted_by>a_beyo</submitted_by>
		<submitted_date>2003-12-09 23:25</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>NullPointerException</summary>
		<detail>
Hi,

I am trying to run the CopDoc example and I am getting
the following exception.

java.lang.NullPointerException
	at
org.pdfbox.examples.persistence.CopyDoc.doIt(CopyDoc.java:92)
	at
org.pdfbox.examples.persistence.CopyDoc.main(CopyDoc.java:115)

it happens when the file is being parsed (parse()).
any ideas?

thanks
Aharon</detail>
		<follow_ups>
			<item>
				<date>1072056541</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Added null check around stream closing</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1072056541</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1072056541</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="853328">
		<submitted_by>tadwoods</submitted_by>
		<submitted_date>2003-12-03 06:58</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>NullPointerException Parsing Header</summary>
		<detail>I have come across a few PDFs that fail to parse with 
NullPointerException reading their headers. The specified 
Creator/Producer for these PDFs is &amp;quot;Not 
Available/PRODUCER.&amp;quot; On close inspection of the headers 
I find there is a single null (0x00) character in front of 
the first object following the version:

%PDF-1.2
_1 0 obj

(where _ is where the null character occurs).

The problem is fixed by modifying the while loop inside 
BaseParser.readInt() to include &amp;quot;&amp;amp;&amp;amp; lastByte != 0&amp;quot; as 
follows. This seems to work without harming reading 
other PDFs...

while( (lastByte = pdfSource.read() ) != 32 &amp;amp;&amp;amp;
        lastByte != 10 &amp;amp;&amp;amp; lastByte != 13 &amp;amp;&amp;amp;
        lastByte != -1 &amp;amp;&amp;amp; lastByte != 0 )

</detail>
		<follow_ups>
			<item>
				<date>1072057186</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed in CVS.</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1072057186</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1072057186</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="850202">
		<submitted_by>beckk</submitted_by>
		<submitted_date>2003-11-27 03:58</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>ClassCastException after modify with Adobe Acrobat</summary>
		<detail>hello

after deleting a FormTextField with Adobe Acrobat 5.0 
my java programm (use pdfbox) throws a 
ClassCastException:

java.lang.ClassCastException: org.pdfbox.cos.COSArray
at org.pdfbox.cos.COSObject.setObject
(COSObject.java:123)

Inserting of a FormTextField with Adobe Acrobat 5.0 and 
parsing with pdfbox works well.
ideas?

cheers
klaus
</detail>
		<follow_ups>
			<item>
				<date>1072057270</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

This should be fixed in CVS and will be available in 0.6.5.

Ben</text>
			</item>
			<item>
				<date>1071057453</date>
				<sender>a_beyo</sender>
				<text>Logged In: YES 
user_id=927954

Hi,

I get the same exception at the same line

Aharon</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1072057270</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1072057270</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="848582">
		<submitted_by>tadwoods</submitted_by>
		<submitted_date>2003-11-24 13:08</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Infinite loop in PDPage.findParentCropBox</summary>
		<detail>PDPage.findParentCropBox() enter an infinite loop and 
results in a StackOverflow when the CropBox needs to 
be inherited.

In this method the call to
rect = findParentCropBox( node );
should be
rect = findParentCropBox( parent );</detail>
		<follow_ups>
			<item>
				<date>1069720361</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed in CVS, thanks for the report!</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1069720361</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1069720361</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="846504">
		<submitted_by>kentgibson</submitted_by>
		<submitted_date>2003-11-21 03:01</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>PDRectangle returns null value for PDCheckbox</summary>
		<detail>Hello,

I will try to attach two pdfs, one made with 5.0 adobe 
writer and the other with 5.2. The one with 5.2 has 
some checkboxes in it that return a null PDRectangle 
object when I do:

if (field instanceof PDTextbox)
{
checkbox = (PDCheckbox)field;
rect = checkbox.getRectangle();
float height = rect.getHeight();
}
I get:
java.lang.NullPointerException
at 
org.pdfbox.pdmodel.common.PDRectangle.getUpperRightY
(PDRectangle.java:148)
at org.pdfbox.pdmodel.common.PDRectangle.getHeight
(PDRectangle.java:180)

funnily enough I tried this with a very simple example 
made in 5.0 writer and it worked perfectly. If I can't 
attach both files here I will add two bug entries.

by the way as feedback, its a good library with some 
clean code. I was going to try and fix it myself and 
submit the fix, but when the simple example worked I 
dunno I suppose I had a change of heart.

take care

kent</detail>
		<follow_ups>
			<item>
				<date>1069720116</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Refactored this a little more, it appears that the a form field 
has 1 or more associated widgets.  If there is only one widget 
then the widget dictionary and the field dictionary are 
merged.  When there is more than one widget then the 
information is stored in &amp;quot;Kids&amp;quot; array.  Refactored such that 
PDField no longer extends PDAnnotation but added a 
PDField.getWidget to get the widget.  The rectangle is 
actually part of the widget.  See javadoc!</text>
			</item>
			<item>
				<date>1069693266</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

super thanks for the prompt response, can't wait to try it!</text>
			</item>
			<item>
				<date>1069618779</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

This was for a PDRadionCollection, which does not have a 
rectangle, it &amp;quot;Kids&amp;quot; do.  The bug was that an invalid 
PDRectangle object was being returned, instead of null.  The 
method will now return when no rectangle is found.</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>68164</id>
				<name>ttt.pdf</name>
				<description>file with PDCheckbox that fails</description>
				<filesize>161017</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1069412514</adddate>
				<submitted_by>914366</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1069618830</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1069618830</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>68164: ttt.pdf</old_value>
				<date>1069412514</date>
				<by>kentgibson</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="840236">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2003-11-11 12:21</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>PDPage implements? COSObjectable</summary>
		<detail>PDDocument.addPage() doesn't work, it looks like the 
PDPage class should implement interface COSObjectable. 
I did that and addPage() works.

btw, cool stuff.</detail>
		<follow_ups>
			<item>
				<date>1068869977</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fix is in CVS!</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1068869977</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1068869977</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="823216">
		<submitted_by>tadwoods</submitted_by>
		<submitted_date>2003-10-13 21:48</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Page Object Entries Not Inheriting</summary>
		<detail>Some entries in a page object are inheritable from their 
parent object and are not being inherited by PdfBox. For 
example, an MS Word XP document printed by the 
Adobe PDF Writer puts the &amp;quot;MediaBox&amp;quot; entry in a node 
higher than the pages object in the 
PDFTextStripper.processPageContents. This attribute 
should be available to the following statement, but it is 
not. I found the attribute in the parent node. According 
to page 88 of the PDF 1.4 spec, this attribute should be 
inheritable.

COSArray mediaBox = (COSArray)
pages.getDictionaryObject( COSName.getPDFName
(&amp;quot;MediaBox&amp;quot;) );
  </detail>
		<follow_ups>
			<item>
				<date>1066496319</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

as designed.  Ok, you have a valid point that certain 
attributes are inherited, but the COS object model is designed 
to reflect exactly the structure of the pdf elements.  So if the 
object is not their then null should be returned.  This type of 
functionality is required sometimes.  

But you are right in that PDFBox should supply logic to deal 
with inherited attributes.  This functionality should be in the 
pdmodel, so I have added a RFE for this at 
http://sourceforge.net/tracker/index.php?
func=detail&amp;amp;aid=826042&amp;amp;group_id=78314&amp;amp;atid=552835

</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1066496319</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1066496319</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="875161">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-01-11 14:43</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>PDFbox does not remove temporary files?</summary>
		<detail>Hello,

PDFBox used in egothor-1.2.4 produces a lot 
of /tmp/pdfboxNNNNtmp files, but never removes them.

Can you help us with this issue? Thank you

http://www.egothor.org/bugzilla/show_bug.cgi?id=2
</detail>
		<follow_ups>
			<item>
				<date>1075998948</date>
				<sender>yourgod</sender>
				<text>Logged In: YES 
user_id=257129

could COSDocument.finalize() be changed to actuall call
close() rather than only complain that it wasn't closed?
</text>
			</item>
			<item>
				<date>1073980845</date>
				<sender>usprave</sender>
				<text>Logged In: YES 
user_id=238087

I recently came across the same problem. I used the module 
from textmining.org that caused the problem. It is not a direct 
problem of PDFbox! You simply need to close the PDDocument 
that was parsed by calling parser.getDocument().close();

This will cleanup the temp files.

PDFBox should simply emphasize the need to close documents 
in the documentation.</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1079313624</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1079313624</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="815755">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2003-10-01 03:35</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="556660">writing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Escape character in COSNames is not escaped</summary>
		<detail>In class COSWriter and method visitFromName() the 
escape character has to be checked too, otherwise it is 
not escaped and written as char, which is wrong!

The appropriate lines should read sth. like

if (current &amp;lt;= 32 || current &amp;gt;= 127 || 
current == NAME_ESCAPE[0]) // or just 35 ('#')
                {
                    // escape ...
                }
 
where it reads now

if (current &amp;lt;= 32 || current &amp;gt;= 127 ) 
                {
                    // escape ...
                }



Regards
joerg.holle@ixit.de

</detail>
		<follow_ups>
			<item>
				<date>1066507749</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

fixed in CVS, thanks for the bug report.

-Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1066507749</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1066507749</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="875159">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-01-11 14:38</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Stack trace</summary>
		<detail>Hi,

the following exception was encountered:

java.lang.Throwable: Warning: You did not close the 
PDF Document
        at org.pdfbox.cos.COSDocument.finalize
(COSDocument.java:384)
        at java.lang.ref.Finalizer.invokeFinalizeMethod
(Native Method)
        at java.lang.ref.Finalizer.runFinalizer
(Finalizer.java:83)
        at java.lang.ref.Finalizer.access0
(Finalizer.java:14)
        at java.lang.ref.Finalizer$FinalizerThread.run
(Finalizer.java:160)

http://www.egothor.org/bugzilla/show_bug.cgi?id=1</detail>
		<follow_ups>
			<item>
				<date>1079313691</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

This has been fixed in CVS and is available in 0.6.5.  The 
document was not being closed when an IOException occured.

Ben</text>
			</item>
			<item>
				<date>1074477029</date>
				<sender>daviss</sender>
				<text>Logged In: YES 
user_id=383219

A workaround to avoid the message is to get the COSDocument
from the parser in the exception handler and explicitly
close the document there.

    PDFParser pp = null;
    try {
      ...
    catch {IOException io) {
      if (pp != null) {
        // we seem to need to do this to avoid the finalizer
giving rude messages later
        COSDocument cd = pp.getDocument();
        if (cd != null) {
          cd.close();
          System.out.println("Closed PDF COSDoc on IO
exception");
        }
</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1079313691</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1079313691</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1046159">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2004-10-13 05:09</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>ExtractText should extract text if given master password</summary>
		<detail>Now, org.pdfbox.ExtractText will check if the extract 
permission bit is set and throw an error if the user is not 
allowed to extract text.  It should allow text extraction 
if given the master password</detail>
		<follow_ups>
			<item>
				<date>1097897349</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Added check if document was decrypted with the owner 
password.  Fixed in CVS.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1097897349</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1097897349</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1046278">
		<submitted_by>thansson</submitted_by>
		<submitted_date>2004-10-13 07:32</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Errors reading in export FDF/XFDF</summary>
		<detail>I am getting ClassCastException and 
NullPointerException when trying to import FDF and XFDF 
files respectively. Both the FDF and XFDF file was 
created using the export methods provided in 0.6.7.

Attached is the PDF file that is giving me these errors. It 
is version 1.5 PDF. Feel free to contact me for further 
details.</detail>
		<follow_ups>
			<item>
				<date>1097887328</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

fixed in CVS.

Ben</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>104979</id>
				<name>parseFDF.pdf</name>
				<description></description>
				<filesize>81450</filesize>
				<filetype></filetype>
				<adddate>1097677929</adddate>
				<submitted_by>197342</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1097887328</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1097887328</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>104979: parseFDF.pdf</old_value>
				<date>1097677929</date>
				<by>thansson</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="807755">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2003-09-17 04:18</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>SetField throws null pointer if no appearance stream</summary>
		<detail>Note that this does rely on the widget having an 
appearance stream (AP)
defined,
which most of the widgets in the example PDF I was 
given don't - but simply
setting a white background on the widget in Adobe 
Acrobat adds an appearance
stream.  (The current code throws a 
NullPointerException in the PDAppearance
constructor if it can't extract &amp;quot;AP&amp;quot; from the widget 
dictionary given.)</detail>
		<follow_ups>
			<item>
				<date>1067136596</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

The appearance stream is no longer updated if it did not exist 
in the first place</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1067136596</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1067136564</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="807756">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2003-09-17 04:18</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="556660">writing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Freetext annotation weirdness</summary>
		<detail>I also found an interesting behaviour with v0.6.3 on my 
example document with
a FreeText annotation - if I ran the example once over 
said PDF, the FreeText
annotation is no longer visible (though looking at the raw 
PDF you can see the
definition still exists).  If you then run the example again 
(because the
example
rewrites the same document, it is now using its previous 
output as input) the
FreeText annotation becomes visible again!  *cue 
twilight zone music* ;-)</detail>
		<follow_ups>
			<item>
				<date>1067182459</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

fixed in CVS, this was actually a bug in the parser</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1067182459</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1067182459</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="803176">
		<submitted_by>peterschaefer</submitted_by>
		<submitted_date>2003-09-09 07:09</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Text Extraction hangs</summary>
		<detail>
On an encrypted PDF document. Decryption works, but
text extraction hangs after a while. Here is part of
the debug output:

...
DEBUG - &amp;lt;q&amp;gt; - save state
32667 [main] DEBUG org.pdfbox.util.PDFTextStripper  -
&amp;lt;q&amp;gt; - save state
32667 [main] DEBUG org.pdfbox.util.PDFTextStripper  -
&amp;lt;q&amp;gt; - save state
DEBUG - &amp;lt;cm a=&amp;quot;614.0&amp;quot; b=&amp;quot;0.0&amp;quot; c=&amp;quot;0.0&amp;quot; d=&amp;quot;792.0&amp;quot; e=&amp;quot;0.0&amp;quot;
f=&amp;quot;0.0&amp;quot; &amp;gt;
32677 [main] DEBUG org.pdfbox.util.PDFTextStripper  -
&amp;lt;cm a=&amp;quot;614.0&amp;quot; b=&amp;quot;0.0&amp;quot; c=&amp;quot;0.0&amp;quot; d=&amp;quot;792.0&amp;quot; e=&amp;quot;0.0&amp;quot; f=&amp;quot;0.0&amp;quot; &amp;gt;
32677 [main] DEBUG org.pdfbox.util.PDFTextStripper  -
&amp;lt;cm a=&amp;quot;614.0&amp;quot; b=&amp;quot;0.0&amp;quot; c=&amp;quot;0.0&amp;quot; d=&amp;quot;792.0&amp;quot; e=&amp;quot;0.0&amp;quot; f=&amp;quot;0.0&amp;quot; &amp;gt;
DEBUG - &amp;lt;Q&amp;gt; - restore state
32677 [main] DEBUG org.pdfbox.util.PDFTextStripper  -
&amp;lt;Q&amp;gt; - restore state
32677 [main] DEBUG org.pdfbox.util.PDFTextStripper  -
&amp;lt;Q&amp;gt; - restore state
DEBUG - &amp;lt;Starting text object list&amp;gt;
32677 [main] DEBUG org.pdfbox.util.PDFTextStripper  -
&amp;lt;Starting text object list&amp;gt;
32677 [main] DEBUG org.pdfbox.util.PDFTextStripper  -
&amp;lt;Starting text object list&amp;gt;
DEBUG - &amp;lt;newline endOfFlush=&amp;quot;true&amp;quot;&amp;gt;
32677 [main] DEBUG org.pdfbox.util.PDFTextStripper  -
&amp;lt;newline endOfFlush=&amp;quot;true&amp;quot;&amp;gt;
32677 [main] DEBUG org.pdfbox.util.PDFTextStripper  -
&amp;lt;newline endOfFlush=&amp;quot;true&amp;quot;&amp;gt;
DEBUG - processPages( COSObject{156, 0} )
32677 [main] DEBUG org.pdfbox.util.PDFTextStripper  -
processPages( COSObject{156, 0} )
32677 [main] DEBUG org.pdfbox.util.PDFTextStripper  -
processPages( COSObject{156, 0} )
DEBUG - processPageContents( COSObject{156, 0},
COSStream{} )
32677 [main] DEBUG org.pdfbox.util.PDFTextStripper  -
processPageContents( COSObject{156, 0}, COSStream{} )
32677 [main] DEBUG org.pdfbox.util.PDFTextStripper  -
processPageContents( COSObject{156, 0}, COSStream{} )
DEBUG - Processing content=COSStream{}
32677 [main] DEBUG org.pdfbox.util.PDFTextStripper  -
Processing content=COSStream{}
32677 [main] DEBUG org.pdfbox.util.PDFTextStripper  -
Processing content=COSStream{}


</detail>
		<follow_ups>
			<item>
				<date>1063475310</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Thanks for the help in reporting/solving this issue.  The fix will 
be available in PDFBox-0.6.3.</text>
			</item>
			<item>
				<date>1063123823</date>
				<sender>peterschaefer</sender>
				<text>Logged In: YES 
user_id=240133

I tracked the problem down to
org.pdfbox.searchengine.BaseParser line 553:

          while( (c = (char)pdfSource.peek()) != ']' )

This loop has no termination condition !
I recommend something like:

          while ((i = pdfSource.peek()) &amp;gt;= 0 &amp;amp;&amp;amp; (i != ']))
</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1063475310</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1063475310</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="803155">
		<submitted_by>peterschaefer</submitted_by>
		<submitted_date>2003-09-09 06:51</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>EmptyStackException during Text Extraction</summary>
		<detail>
DEBUG - processPages( COSObject{99, 0} )
0    [main] DEBUG org.pdfbox.util.PDFTextStripper  -
processPages( COSObject{99, 0} )
0    [main] DEBUG org.pdfbox.util.PDFTextStripper  -
processPages( COSObject{99, 0} )
DEBUG - processPages( COSObject{22, 1} )
0    [main] DEBUG org.pdfbox.util.PDFTextStripper  -
processPages( COSObject{22, 1} )
0    [main] DEBUG org.pdfbox.util.PDFTextStripper  -
processPages( COSObject{22, 1} )
DEBUG - processPageContents( COSObject{22, 1},
COSStream{} )
10   [main] DEBUG org.pdfbox.util.PDFTextStripper  -
processPageContents( COSObject{22, 1}, COSStream{} )
10   [main] DEBUG org.pdfbox.util.PDFTextStripper  -
processPageContents( COSObject{22, 1}, COSStream{} )
DEBUG - Processing content=COSStream{}
10   [main] DEBUG org.pdfbox.util.PDFTextStripper  -
Processing content=COSStream{}
10   [main] DEBUG org.pdfbox.util.PDFTextStripper  -
Processing content=COSStream{}
DEBUG - &amp;lt;cm a=&amp;quot;614.4&amp;quot; b=&amp;quot;0.0&amp;quot; c=&amp;quot;0.0&amp;quot; d=&amp;quot;792.0&amp;quot; e=&amp;quot;0.0&amp;quot;
f=&amp;quot;0.0&amp;quot; &amp;gt;
30   [main] DEBUG org.pdfbox.util.PDFTextStripper  -
&amp;lt;cm a=&amp;quot;614.4&amp;quot; b=&amp;quot;0.0&amp;quot; c=&amp;quot;0.0&amp;quot; d=&amp;quot;792.0&amp;quot; e=&amp;quot;0.0&amp;quot; f=&amp;quot;0.0&amp;quot; &amp;gt;
30   [main] DEBUG org.pdfbox.util.PDFTextStripper  -
&amp;lt;cm a=&amp;quot;614.4&amp;quot; b=&amp;quot;0.0&amp;quot; c=&amp;quot;0.0&amp;quot; d=&amp;quot;792.0&amp;quot; e=&amp;quot;0.0&amp;quot; f=&amp;quot;0.0&amp;quot; &amp;gt;
DEBUG - &amp;lt;Q&amp;gt; - restore state
30   [main] DEBUG org.pdfbox.util.PDFTextStripper  -
&amp;lt;Q&amp;gt; - restore state
30   [main] DEBUG org.pdfbox.util.PDFTextStripper  -
&amp;lt;Q&amp;gt; - restore state

java.util.EmptyStackException
	at java.util.Stack.peek(Stack.java:79)
	at java.util.Stack.pop(Stack.java:61)
	at
org.pdfbox.util.PDFTextStripper.handleOperation(PDFTextStripper.java:777)
	at
org.pdfbox.util.PDFTextStripper.process(PDFTextStripper.java:512)
	at
org.pdfbox.util.PDFTextStripper.process(PDFTextStripper.java:499)
	at
org.pdfbox.util.PDFTextStripper.processPageContents(PDFTextStripper.java:417)
	at
org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:383)
	at
org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:350)
	at
org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:186)
	at
org.pdfbox.util.PDFTextStripper.getText(PDFTextStripper.java:130)
	at
de.ecosx.util.pdf.PdfUtil.getPlainText(PdfUtil.java:213)
	at
de.ecosx.util.pdf.PdfUtil.getPlainText(PdfUtil.java:159)
	at de.ecosx.util.pdf.PdfUtil.process1(PdfUtil.java:242)
	at de.ecosx.util.pdf.PdfUtil.process(PdfUtil.java:228)
	at de.ecosx.util.pdf.PdfUtil.main(PdfUtil.java:265)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native
Method)
	at
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:324)
	at
com.intellij.rt.execution.application.AppMain.main(AppMain.java:78)</detail>
		<follow_ups>
			<item>
				<date>1067120313</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed in CVS.</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>61063</id>
				<name>T05140.pdf</name>
				<description></description>
				<filesize>176030</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1063115652</adddate>
				<submitted_by>240133</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1067120313</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1067120313</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>61063: T05140.pdf</old_value>
				<date>1063115653</date>
				<by>peterschaefer</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="803157">
		<submitted_by>peterschaefer</submitted_by>
		<submitted_date>2003-09-09 06:58</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Error getting PDF version</summary>
		<detail>The PDF file seems to be corrupted but can be read by
Acrobat.

Error getting pdf
version:java.lang.NumberFormatException: For input
string: &amp;quot;.pdf
	at
org.pdfbox.pdfparser.PDFParser.parse(PDFParser.java:114)
	at
de.ecosx.util.pdf.PdfUtil.getPlainText(PdfUtil.java:193)
	at
de.ecosx.util.pdf.PdfUtil.getPlainText(PdfUtil.java:159)
	at de.ecosx.util.pdf.PdfUtil.process1(PdfUtil.java:242)
	at de.ecosx.util.pdf.PdfUtil.process(PdfUtil.java:228)
	at de.ecosx.util.pdf.PdfUtil.main(PdfUtil.java:265)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native
Method)
	at
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:324)
	at
com.intellij.rt.execution.application.AppMain.main(AppMain.java:78)
</detail>
		<follow_ups>
			<item>
				<date>1144229147</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

test</text>
			</item>
			<item>
				<date>1073954363</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed in CVS</text>
			</item>
			<item>
				<date>1072908261</date>
				<sender>hunkydory</sender>
				<text>Logged In: YES 
user_id=940807

I ran across what looks like the same problem.  Ben, I will 
email you a link to the PDF file that causes the problem (it's 
big).</text>
			</item>
			<item>
				<date>1065578950</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Can you email me the pdf or at least the first 20 bytes of the 
files(which is where the version is). 

ben@csh.rit.edu</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1073954363</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1073954363</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="792444">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2003-08-21 03:56</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520288">lucene</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Problem with log4j</summary>
		<detail>Hi
Sorry if this is a really obvious thing to sort out, but I 
cant seem to sort it. I am using the classes provided to 
integrate pdfbox with lucene and it works except that I 
get the following warning:

log4j:WARN No appenders could be found for logger 
(org.pdfbox.util.PDFTextStripper).
log4j:WARN Please initialize the log4j system properly.

Could anyone tell me how to fix this?

Thanks very much</detail>
		<follow_ups>
			<item>
				<date>1063474879</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

PDFBox 0.6.3 now ships with a log4j.xml.  use
java -Dlog4j.configuration=log4j.xml org.pdfbox.Main </text>
			</item>
			<item>
				<date>1063116682</date>
				<sender>peterschaefer</sender>
				<text>Logged In: YES 
user_id=240133

I guess you can ignore that.
If you want debug output from PDFTextStripper, use this:

		Category logger =
Category.getInstance(PDFTextStripper.class.getName());
		logger.addAppender(new ConsoleAppender(new SimpleLayout()));
		logger.setPriority(Priority.DEBUG);
</text>
			</item>
			<item>
				<date>1062153736</date>
				<sender>winstanley_john</sender>
				<text>Logged In: YES 
user_id=747013

Ben Kindly asnswered this question in the help forum.

&amp;quot;If you want to get rid of that message then you need to 
supply a log4j configuration. Information about the log4j 
configuration can be found here

http://jakarta.apache.org/log4j/docs/manual.html

Otherwise you can ignore that message.

I will include a default log4j configuration in the next release 
of pdfbox.&amp;quot;</text>
			</item>
			<item>
				<date>1062078561</date>
				<sender>winstanley_john</sender>
				<text>Logged In: YES 
user_id=747013

Yeah I get this error aswell.</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1063474879</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1063474879</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1022924">
		<submitted_by>jkronegg</submitted_by>
		<submitted_date>2004-09-06 00:53</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>NullPointerException in PDFTextStripper.flushText</summary>
		<detail>Hi ben,

PDFBox version : PDFBox-0.6.7-dev-20040905 (nightly build)
An exception is raised at line 372 of
PDFTextStripper.flushText:

java.lang.NullPointerException
        at
org.pdfbox.util.PDFTextStripper.flushText(PDFTextStripper.java:372)
        at
org.pdfbox.util.PDFTextStripper.processPage(PDFTextStripper.java:214)
        at
org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:185)
        at
org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:161)
        at
org.pdfbox.util.PDFTextStripper.getText(PDFTextStripper.java:92)


The guilty PDFs are annexed.</detail>
		<follow_ups>
			<item>
				<date>1094481617</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed in CVS.

Ben</text>
			</item>
			<item>
				<date>1094457370</date>
				<sender>jkronegg</sender>
				<text>Logged In: YES 
user_id=820653

Attaching files does not work (file too big). It has been
zipped.</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>100481</id>
				<name>Garcia2003b__Correlative_exploration_of_EEG_Signals.zip</name>
				<description>PDF file that raises the above exception</description>
				<filesize>251283</filesize>
				<filetype></filetype>
				<adddate>1094457370</adddate>
				<submitted_by>820653</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1094481617</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1094481617</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>100481: Garcia2003b__Correlative_exploration_of_EEG_Signals.zip</old_value>
				<date>1094457370</date>
				<by>jkronegg</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1413833">
		<submitted_by>f-bertrand</submitted_by>
		<submitted_date>2006-01-24 08:45</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Duplicate</resolution>
		<summary>How to concat pdf with fields ?   </summary>
		<detail>By: f-bertrand - f-bertrand 
 How to concat pdf with fields ?   
2006-01-23 17:47  
Hi, 
I use pdfBox version 0.7.2 
I have two pdf with fields that already filled 
(pdf only one page) 
I want to concat them, so I use the method  
AppendDoc() from the package 
org.pdfbox.examples.persistence.AppendDoc 
The first page it's good and the seconde the fields 
are empty. 
I don't why ? 

 



By: Ben Litchfield - benlitchfield 
 RE: How to concat pdf with fields ?   
2006-01-24 02:55  
sounds like a bug, please create a bug report and 
attach/upload the pdf documents that you are using. 
 
ftp.pdfbox.org 
 
Ben 
</detail>
		<follow_ups>
			<item>
				<date>1138475570</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

dup of 1414350 </text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1138475570</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1138475570</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1138475570</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="788756">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2003-08-14 08:18</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="556660">writing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>COSWriter does not escape strings</summary>
		<detail>The COSWriter needs to escape strings that contain 
bytes outside of the ASCII range.</detail>
		<follow_ups>
			<item>
				<date>1067120241</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed in CVS.</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1067120241</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1067120241</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1413533">
		<submitted_by>f-bertrand</submitted_by>
		<submitted_date>2006-01-24 01:04</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Duplicate</resolution>
		<summary>How to concat pdf with fields ?   </summary>
		<detail>By: f-bertrand - f-bertrand 
 How to concat pdf with fields ?   
2006-01-23 17:47  
Hi, 
I use pdfBox version 0.7.2 
I have two pdf with fields that already filled 
(pdf only one page) 
I want to concat them, so I use the method  
AppendDoc() from the package 
org.pdfbox.examples.persistence.AppendDoc 
The first page it's good and the seconde the fields 
are empty. 
I don't why ? 

 



By: Ben Litchfield - benlitchfield 
 RE: How to concat pdf with fields ?   
2006-01-24 02:55  
sounds like a bug, please create a bug report and 
attach/upload the pdf documents that you are using. 
 
ftp.pdfbox.org 
 
Ben 
</detail>
		<follow_ups>
			<item>
				<date>1138475585</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

dup of 1414350 </text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1138475585</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1138475585</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1138475585</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="784320">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2003-08-06 11:41</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520288">lucene</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>indexing Pdf files takes long time</summary>
		<detail>Three pdf files of the following sizes in bytes:
103765 
5920836 
323219 

takes about 5-10 minutes to index. This obviously is way 
too slow.  My final application will be a web search 
engine for a small knowledge base.

I then made my own PDFDocument class which is like 
LucenePDFDocument but does not add the contents to 
the document.  In sense, I delete these lines:

ByteArrayOutputStream out = new 
ByteArrayOutputStream();
OutputStreamWriter writer = new OutputStreamWriter( 
out );
PDFTextStripper stripper = new PDFTextStripper();
stripper.writeText( pdfDocument.getDocument(), 
writer );
writer.close();            
byte[] contents = out.toByteArray();
InputStreamReader input = new InputStreamReader( 
new ByteArrayInputStream( contents ) );
// Add the tag-stripped contents as a Reader-valued 
Text field so it will
// get tokenized and indexed.
document.add(Field.Text(&amp;quot;contents&amp;quot;, input ));

My logic was that if it did not read all the contents of 
the file then it would speed up. However, it has not sped 
the process at all. 

I would like to know if there is a way that this process 
will be really short. Are there any solutions. </detail>
		<follow_ups>
			<item>
				<date>1067118356</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I am closing this bug not because PDBox is now suddenly fast, 
but because I am always working on performance issues.  At 
what point could I say this is fixed?  Thanks for the feedback.</text>
			</item>
			<item>
				<date>1063123634</date>
				<sender>peterschaefer</sender>
				<text>Logged In: YES 
user_id=240133

I also experienced that PDFTextStripper is extremely slow.
Much slower than the PDF parser.</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1067118356</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1067118355</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="783112">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2003-08-04 14:29</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>NullPointerException extractng text from OpenOffice pdf</summary>
		<detail>I'm not sure if this is a duplicate of bug 720251 or not:   
it didn't complain about hex values.  I got a 
NullPointerException while trying to read a pdf created 
by OpenOffice.org 1.1 rc2.  Adobe's viewer opens is up 
with no trouble.


Here's the relevent code:
PDFParser parser = new PDFParser(getInputStream());
parser.parse();
COSDocument doc = parser.getDocument();
PDFTextStripper textStripper = new PDFTextStripper();
String content = textStripper.getText(doc);

Here's the top of the stack:
java.lang.NullPointerException
at org.pdfbox.util.PDFTextStripper.processPageContents
(PDFTextStripper.java:412)
at org.pdfbox.util.PDFTextStripper.processPages
(PDFTextStripper.java:358)
at org.pdfbox.util.PDFTextStripper.processPages
(PDFTextStripper.java:350)
at org.pdfbox.util.PDFTextStripper.writeText
(PDFTextStripper.java:186)
at org.pdfbox.util.PDFTextStripper.getText
(PDFTextStripper.java:130)

I've attached the file.  

Lowell
lvaughn@iologics.com

 </detail>
		<follow_ups>
			<item>
				<date>1067118129</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed in CVS, will be available in 0.6.4</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>57815</id>
				<name>simple.pdf</name>
				<description>File created by OpenOffice.org 1.1rc2 that caused the exception</description>
				<filesize>15023</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1060032598</adddate>
				<submitted_by>100</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1067118129</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1067118129</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>57815: simple.pdf</old_value>
				<date>1060032598</date>
				<by>nobody</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="780189">
		<submitted_by>wavy</submitted_by>
		<submitted_date>2003-07-30 05:41</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Expected='null' actual='null/XYZ'</summary>
		<detail>
I got the following exception trying to parse the
'Draft PDF Reference, Version 1.5',

http://partners.adobe.com/asn/acrobat/sdk/public/docs/PDFReference.pdf

java.io.IOException: Expected='null' actual='null/XYZ'
        at
org.pdfbox.pdfparser.BaseParser.parseDirObject(BaseParser.java:758)
        at
org.pdfbox.pdfparser.BaseParser.parseCOSArray(BaseParser.java:554)
        at
org.pdfbox.pdfparser.BaseParser.parseDirObject(BaseParser.java:744)
        at
org.pdfbox.pdfparser.BaseParser.parseCOSDictionaryValue(BaseParser.java:131)
        at
org.pdfbox.pdfparser.BaseParser.parseCOSDictionary(BaseParser.java:190)
        at
org.pdfbox.pdfparser.BaseParser.parseDirObject(BaseParser.java:733)
        at
org.pdfbox.pdfparser.PDFParser.parseObject(PDFParser.java:316)
        at
org.pdfbox.pdfparser.PDFParser.parse(PDFParser.java:122)
        at
PdfDocumentParser.parse(PdfDocumentParser.java:28)

I made the attached change to BaseParser.readString()
to work around the problem (not sure if it follows the
spec, but it now parses the PDF without error).</detail>
		<follow_ups>
			<item>
				<date>1066431647</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

fixed in CVS, thanks for the patch, sorry it took so long to 
integrate.

-Ben</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>57324</id>
				<name>null_parse-patch.diff</name>
				<description>change the characters that terminate readString()</description>
				<filesize>597</filesize>
				<filetype>text/plain</filetype>
				<adddate>1059568879</adddate>
				<submitted_by>22296</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1066431647</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1066431646</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>57324: null_parse-patch.diff</old_value>
				<date>1059568880</date>
				<by>wavy</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="765187">
		<submitted_by>lars_koeln</submitted_by>
		<submitted_date>2003-07-03 01:57</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>temporary files are not deleted</summary>
		<detail>Hi,

After migrating from 0.5.5 to 0.6.2 we are finding several 
pdfbox* files in /var/tmp which will not be deleted.

Hence we are getting a &amp;quot;not enough space&amp;quot; error after a 
while.

The pdfbox files are created in the indexing process.

Regards,
Lars</detail>
		<follow_ups>
			<item>
				<date>1057418144</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Starting with 0.6.0 you are required to close() the 
COSDocument when you done with it.  I am going close this 
bug and assume that you are not closing the document, 
please reopen if you are closing the document and the temp 
files are still there.</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1057418144</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1057418144</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1251982">
		<submitted_by>mhilpert</submitted_by>
		<submitted_date>2005-08-04 08:29</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>PDDocumentInformation.getModificationDate() returns null</summary>
		<detail>As all other get methods of PDDocumentInformation 
work, the getModificationDate() always returns null even 
for PDF docuemnts that have modification dates.</detail>
		<follow_ups>
			<item>
				<date>1123204824</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Is this with 0.7.1 or the nightly release?  There have been a 
few changes to better support dates in the past week or so.

If it is still an issue with the nightly release then please 
attach/upload the pdf.

ftp.pdfbox.org

Ben Litchfield</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1123523855</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1123523855</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1123523855</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1123204824</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="719094">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2003-04-10 08:44</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>lucene path is null</summary>
		<detail>
User:
I am using Tomcat server and lucene to search the 
index.  When I click on the null it gives the http status 
as 404 (the requested resource /luceneweb/null is not 
available)

Ben:
I have not checked this out yet, but it looks like the path 
that the default lucene web searcher might not be the 
same as the path that the PDFBox IndexFiles uses.  

</detail>
		<follow_ups>
			<item>
				<date>1057418532</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

added url field to document when indexing from a file source</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1057418532</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1057418532</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="719108">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2003-04-10 09:03</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Problem with German Umlauts</summary>
		<detail>I've figured out another Problem :
I'm extracting the Document Meta Information with 
PDDocumentInformation like
this :
        PDDocumentInformation docInfo =
pdfDocument.getDocumentInformation();
      String title = docInfo.getTitle();

Szenario : E.g. the title of the parsed PDF Document 
is &amp;quot;Geschäftsordnung&amp;quot;
which includes the German Umlaut &amp;quot;ä&amp;quot; but the Method 
getTitle() only returns
&amp;quot;Gesch&amp;quot; and cuts off the rest of the title.
Parsing the text of the PDF Document using the 
PDFTextStripper Object German
Umlauts are properly treated - &amp;quot;Geschäftsordnung&amp;quot; 
stays &amp;quot;Geschäftsordnung .</detail>
		<follow_ups>
			<item>
				<date>1057438729</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

COSString was using UTF-8 instead of the default encoding, 
which was only a problem for the metadata.</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1057438729</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1057438729</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="719332">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2003-04-10 15:32</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>incorrect data check</summary>
		<detail>The attached &amp;quot;connection_pool.pdf&amp;quot; causes the writeText
() method of PDFTextStripper to throw:

java.util.zip.ZipException: incorrect data check</detail>
		<follow_ups>
			<item>
				<date>1066514096</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

fixed in CVS</text>
			</item>
			<item>
				<date>1050014161</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

The PDF was too large to add, trying a zipped version.</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1066514112</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1066514112</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="719333">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2003-04-10 15:37</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Works For Me</resolution>
		<summary>invalid stored block lengths</summary>
		<detail>The attached &amp;quot;whats_new.pdf&amp;quot; causes the writeText() 
method of PDFTextStripper to throw:

java.util.zip.ZipException: invalid stored block lengths</detail>
		<follow_ups>
			<item>
				<date>1050713801</date>
				<sender>leftbrute</sender>
				<text>Logged In: YES 
user_id=753610

Closed.  Can not reproduce in 0.6.2.

Added whats_new.pdf to automated text extraction tests.</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>47377</id>
				<name>whats_new.pdf</name>
				<description>what's new</description>
				<filesize>177431</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1050014266</adddate>
				<submitted_by>601708</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>1050713892</old_value>
				<date>1050713980</date>
				<by>leftbrute</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>1</old_value>
				<date>1050713892</date>
				<by>leftbrute</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>1050713822</old_value>
				<date>1050713892</date>
				<by>leftbrute</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>6</old_value>
				<date>1050713822</date>
				<by>leftbrute</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>1050713801</old_value>
				<date>1050713822</date>
				<by>leftbrute</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1050713801</date>
				<by>leftbrute</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1050713801</date>
				<by>leftbrute</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1050713801</date>
				<by>leftbrute</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>47377: whats_new.pdf</old_value>
				<date>1050014266</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="719335">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2003-04-10 15:39</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>chinese text</summary>
		<detail>
Dear Ben,

Thank you for your message.
But I have tried some Chinese pdf files.
PDFBox can read some Chinese text correctly.

I attach a test pdf file, and it's text is the following.

!@#$%^&amp;amp;* aiCollector v2.01&amp;amp;#25805;&amp;amp;#20316;&amp;amp;#25163;&amp;amp;#20874;  every low
Just keep examining every &amp;amp;#28204;&amp;amp;#35430; low
bid quoted for zinc etchings.

ChunYin


-----Original Message-----
From: Ben Litchfield [mailto:ben@csh.rit.edu]
Sent: Wednesday, March 12, 2003 9:03 PM
To: &amp;amp;#32020;&amp;amp;#21535;
Subject: Re: A question about using PDFBox to read 
multibyte PDF files.



PDFBox currently does not support multibyte text and it 
will probably not
support it in the near future, but eventually.  If you would 
like to try
and get it to work and send me a patch that would be 
great.  I am not sure
exactly what would need to change because I have not 
looked into it yet.

-Ben



-- 

On Wed, 12 Mar 2003, [big5] &amp;amp;#32020;&amp;amp;#21535; wrote:

&amp;gt; Dear Ben,
&amp;gt;
&amp;gt; I am interested in PDFBox and trying to read a 
Chinese PDF file by PDFBox.
&amp;gt; However, I cannot get  correct Chinese text.Could you 
tell me how you encode the pdf text?
&amp;gt;
&amp;gt;
&amp;gt; org.pdfbox.util.PDFTextStripper showString( byte[] 
string );
&amp;gt;            // modify by me
&amp;gt;              if( (c == null || c== &amp;quot;&amp;quot;) &amp;amp;&amp;amp; i+1&amp;lt;string.length)
&amp;gt;             {
&amp;gt;                 //maybe a multibyte encoding
&amp;gt;                 characterCode &amp;lt;&amp;lt;= 8;
&amp;gt;                 i++;
&amp;gt;                 characterCode |= ((string[i]+256)%256);
&amp;gt;                 c = currentFont.encode( characterCode );
&amp;gt;                 // return a empty string
&amp;gt;             }
&amp;gt;
&amp;gt; org.pdfbox.cos.COSObject
&amp;gt;
&amp;gt;     public String encode( int c ) throws IOException
&amp;gt;     {
&amp;gt;         String retval = String.valueOf(new char[] {(char)
c});
&amp;gt;         COSName fontSubtype = (COSName)
getDictionaryObject( COSName.getPDFName
( &amp;quot;Subtype&amp;quot; ) );
&amp;gt;         if( fontSubtype.getName().equals( &amp;quot;Type0&amp;quot; ) )
&amp;gt;         {
&amp;gt;             retval = &amp;quot;&amp;quot;;
&amp;gt;             COSStream toUnicode = (COSStream)
getDictionaryObject( COSName.getPDFName
( &amp;quot;ToUnicode&amp;quot; ) );
&amp;gt;             if( toUnicode != null )
&amp;gt;             {
&amp;gt;                 if( cmap == null )
&amp;gt;                 {
&amp;gt;                     CMapParser parser = new CMapParser( 
toUnicode.getUnfilteredStream(), file );
&amp;gt;                     parser.parse();
&amp;gt;                     cmap = parser.getResult();
&amp;gt;                 }
&amp;gt;                 retval = cmap.lookup( c );
&amp;gt;                 // return a empty string
&amp;gt;             }
&amp;gt;         }
&amp;gt;
&amp;gt;
&amp;gt;
&amp;gt;
&amp;gt;

</detail>
		<follow_ups>
			<item>
				<date>1066514324</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

not planning on supporting chinese text, there is an RFE for 
this which is the better spot</text>
			</item>
			<item>
				<date>1050014431</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

forgot to check the attached file checkbox.  Why a checkbox 
is needed is beyond me.</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>47379</id>
				<name>chinese text.pdf</name>
				<description></description>
				<filesize>7149</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1050014431</adddate>
				<submitted_by>601708</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1066514324</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1066514324</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>47379: chinese text.pdf</old_value>
				<date>1050014431</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="719339">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2003-04-10 15:42</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>ClassCastException in DictionaryEncoding</summary>
		<detail>The error occurs in the E-Gov Strategy PDF file; an 
OMB document
encoded in version 1.4.
I've attached the file.

Here's the stacktrace:

java.lang.ClassCastException: 
org.pdfbox.cos.COSObject
        at
org.pdfbox.encoding.DictionaryEncoding.&amp;lt;init&amp;gt;
(DictionaryEncoding.java
:66)
        at org.pdfbox.cos.COSObject.getEncoding
(COSObject.java:277)
        at org.pdfbox.cos.COSObject.encode
(COSObject.java:218)
        at
org.pdfbox.util.PDFTextStripper.showString
(PDFTextStripper.java:959)
        at
org.pdfbox.util.PDFTextStripper.handleOperation
(PDFTextStripper.java:
788)
        at org.pdfbox.util.PDFTextStripper.process
(PDFTextStripper.java:379)
        at org.pdfbox.util.PDFTextStripper.process
(PDFTextStripper.java:366)
        at
org.pdfbox.util.PDFTextStripper.processPageContents
(PDFTextStripper.j
ava:288)
        at
org.pdfbox.util.PDFTextStripper.processPages
(PDFTextStripper.java:231
)
        at
org.pdfbox.util.PDFTextStripper.processPages
(PDFTextStripper.java:223
)
        at
org.pdfbox.util.PDFTextStripper.processPages
(PDFTextStripper.java:223
)
        at
org.pdfbox.util.PDFTextStripper.writeText
(PDFTextStripper.java:148)
        at PdfToText.parse(PdfToText.java:48)
        at DocSearch.createNewIndex
(DocSearch.java:1912)
        at DocSearch.doNewIndex(DocSearch.java:2204)
        at DocSearch$actThread.run(DocSearch.java:2518)
        at java.lang.Thread.run(Thread.java:484)

Thanks for your help.  PDFBox has been really a lot of 
fun to work with.

This is the only PDF document I've seen so far that it 
hasn't handled.</detail>
		<follow_ups>
			<item>
				<date>1066432259</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

this appears to be fixed now.
</text>
			</item>
			<item>
				<date>1050015154</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Here is another example of the ClassCastExeption on the 
DictionaryEncoding.  These might be unrelated bugs.  The 
PDF is too large to upload to the bug system.


PDF Error on
http://frwebgate.access.gpo.gov/cgi-bin/getdoc.cgi?
dbname=nlrb&amp;amp;docid=f:332-18.pdf
java.lang.ClassCastException: org.pdfbox.cos.COSObject
    at
org.pdfbox.encoding.DictionaryEncoding.&amp;lt;init&amp;gt;
(DictionaryEncoding.java:66)
    at org.pdfbox.cos.COSObject.getEncoding
(COSObject.java:249)
    at org.pdfbox.cos.COSObject.encode(COSObject.java:191)
    at
org.pdfbox.util.PDFTextStripper.showString
(PDFTextStripper.java:921)
    at
org.pdfbox.util.PDFTextStripper.handleOperation
(PDFTextStripper.java:758)
    at org.pdfbox.util.PDFTextStripper.process
(PDFTextStripper.java:354)
    at org.pdfbox.util.PDFTextStripper.process
(PDFTextStripper.java:342)
    at
org.pdfbox.util.PDFTextStripper.processPageContents
(PDFTextStripper.java:270)
    at
org.pdfbox.util.PDFTextStripper.processPages
(PDFTextStripper.java:219)
    at
org.pdfbox.util.PDFTextStripper.processPages
(PDFTextStripper.java:211)
    at
org.pdfbox.util.PDFTextStripper.processPages
(PDFTextStripper.java:211)
    at
org.pdfbox.util.PDFTextStripper.writeText
(PDFTextStripper.java:145)
</text>
			</item>
			<item>
				<date>1050014681</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

The previously attached file was corrupted.  The good one is 
500k which is larger than allowed.</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1066432259</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1066432259</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Deleted</field>
				<old_value>47380: </old_value>
				<date>1050014627</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>47380: egovstrategy.pdf</old_value>
				<date>1050014567</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="719342">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2003-04-10 15:46</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>incorrect data check</summary>
		<detail>errors encountered :
(1)
PDF Error on
http://frwebgate.access.gpo.gov/cgi-bin/getdoc.cgi?
dbname=nlrb&amp;amp;docid=f:332-140.pdf
java.util.zip.ZipException: incorrect data check
    at
java.util.zip.InflaterInputStream.read
(InflaterInputStream.java:134)
    at org.pdfbox.filter.FlateFilter.decode
(FlateFilter.java:61)
    at org.pdfbox.cos.COSStream.doDecode
(COSStream.java:250)
    at org.pdfbox.cos.COSStream.doDecode
(COSStream.java:224)
    at org.pdfbox.cos.COSStream.getUnfilteredStream
(COSStream.java:163)
    at
org.pdfbox.pdfparser.PDFStreamParser.&amp;lt;init&amp;gt;
(PDFStreamParser.java:73)
    at org.pdfbox.cos.COSStream.getStreamTokens
(COSStream.java:105)
    at org.pdfbox.util.PDFTextStripper.process
(PDFTextStripper.java:335)
    at
org.pdfbox.util.PDFTextStripper.processPageContents
(PDFTextStripper.java:270)
    at
org.pdfbox.util.PDFTextStripper.processPages
(PDFTextStripper.java:219)
    at
org.pdfbox.util.PDFTextStripper.processPages
(PDFTextStripper.java:211)
    at
org.pdfbox.util.PDFTextStripper.writeText
(PDFTextStripper.java:145)
</detail>
		<follow_ups>
			<item>
				<date>1066516818</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

This file is corrupt acrobat will open it but throw a bunch of 
errors when you get to the second page.  I don't plan on 
supporting that.</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>47381</id>
				<name>getdoc-332-140.pdf</name>
				<description></description>
				<filesize>24788</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1050014811</adddate>
				<submitted_by>601708</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1066516818</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1066516818</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>47381: getdoc-332-140.pdf</old_value>
				<date>1050014811</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="719345">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2003-04-10 15:49</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>NumberFormatException</summary>
		<detail>PDF Error on
http://frwebgate.access.gpo.gov/cgi-bin/getdoc.cgi?
dbname=nlrb&amp;amp;docid=f:332-168.pdf
java.io.IOException: Error getting pdf
version:java.lang.NumberFormatException: nt-type: 
text/html
    at org.pdfbox.pdfparser.PDFParser.parse
(PDFParser.java:85)</detail>
		<follow_ups>
			<item>
				<date>1050714386</date>
				<sender>leftbrute</sender>
				<text>Logged In: YES 
user_id=753610

Fixed in 0.6.2

Same as 720246.  Verified fix with this test file.</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>47382</id>
				<name>getdoc-332-168.pdf</name>
				<description></description>
				<filesize>40691</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1050014969</adddate>
				<submitted_by>601708</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1050714386</date>
				<by>leftbrute</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1050714386</date>
				<by>leftbrute</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1050714386</date>
				<by>leftbrute</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>47382: getdoc-332-168.pdf</old_value>
				<date>1050014969</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="720246">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2003-04-12 08:17</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Error: expected hex number</summary>
		<detail>I encountered something that seems to be a bug in hex 
to int conversion 
in BaseParser. It throws the following:


java.io.IOException: Error: expected hex number, 
actual='9
'
         at 
org.pdfbox.pdfparser.BaseParser.parseCOSName
(BaseParser.java:600)
         at 
org.pdfbox.pdfparser.BaseParser.parseDirObject
(BaseParser.java:711)
         at 
org.pdfbox.pdfparser.BaseParser.parseCOSArray
(BaseParser.java:544)
         at 
org.pdfbox.pdfparser.BaseParser.parseDirObject
(BaseParser.java:704)
         at 
org.pdfbox.pdfparser.BaseParser.parseCOSDictionaryVal
ue(BaseParser.java:121)
         at 
org.pdfbox.pdfparser.BaseParser.parseCOSDictionary
(BaseParser.java:180)
         at 
org.pdfbox.pdfparser.BaseParser.parseDirObject
(BaseParser.java:693)
         at org.pdfbox.pdfparser.PDFParser.parseObject
(PDFParser.java:316)
         at org.pdfbox.pdfparser.PDFParser.parse
(PDFParser.java:122)
         at ampiro.logic.conv.ConvPdf.convert
(ConvPdf.java:48)
         at ampiro.logic.conv.ConvPdf.main
(ConvPdf.java:101)
Exception in thread &amp;quot;main&amp;quot;
</detail>
		<follow_ups>
			<item>
				<date>1050713535</date>
				<sender>leftbrute</sender>
				<text>Logged In: YES 
user_id=753610

Fixed in 0.6.2

The file in question was generated using ProTool, which itself 
used Etymon PJ.  The file reported PDF version 1.2, but had 
improper usage of the # in a name (which in 1.2 and later is a 
hex escape and must be followed by two hex digits).  The fix, 
which will also handle most pre-1.2 cases, is that the # is 
now interpreted as a hex escape only when followed by two 
hex digits.</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>47534</id>
				<name>hexnumberproblem.pdf</name>
				<description></description>
				<filesize>230257</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1050160679</adddate>
				<submitted_by>601708</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1050713838</date>
				<by>leftbrute</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>1050713535</old_value>
				<date>1050713838</date>
				<by>leftbrute</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1050713535</date>
				<by>leftbrute</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1050713535</date>
				<by>leftbrute</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>47534: hexnumberproblem.pdf</old_value>
				<date>1050160679</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="720251">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2003-04-12 08:22</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>openoffice 1.1 beta PDF hex number problem</summary>
		<detail>I was trying the latest pdfbox with openoffice 1.1 beta 
generated pdf's (from writer).
I created a very basic document (only the word 'Test') 
which caused the following stacktrace:
 
java.io.IOException: Error: Expected hex number, 
actual=' D'
        at 
org.pdfbox.pdfparser.BaseParser.parseCOSString
(BaseParser.java:450)
        at org.pdfbox.pdfparser.BaseParser.parseDirObject
(BaseParser.java:632)
        at 
org.pdfbox.pdfparser.BaseParser.parseCOSArray
(BaseParser.java:480)
        at org.pdfbox.pdfparser.BaseParser.parseDirObject
(BaseParser.java:638)
        at 
org.pdfbox.pdfparser.BaseParser.parseCOSDictionaryVal
ue(BaseParser.j
va:118)
        at 
org.pdfbox.pdfparser.BaseParser.parseCOSDictionary
(BaseParser.java:1
5)
        at org.pdfbox.pdfparser.BaseParser.parseDirObject
(BaseParser.java:627)
        at org.pdfbox.pdfparser.PDFParser.parseObject
(PDFParser.java:265)
        at org.pdfbox.pdfparser.PDFParser.parse
(PDFParser.java:93)
        at 
org.textmining.text.extraction.PDFExtractor.extractText
(PDFExtractor
java:35)
        at 
com.qonline.ftengine.filters.PDFFilter$PipeConnectThrea
d.run(PDFFilt
r.java:133)
java.lang.NullPointerException
        at 
org.pdfbox.util.PDFTextStripper.processPageContents
(PDFTextStripper.
ava:265)
        at org.pdfbox.util.PDFTextStripper.processPages
(PDFTextStripper.java:21
)
        at org.pdfbox.util.PDFTextStripper.processPages
(PDFTextStripper.java:21
)
        at org.pdfbox.util.PDFTextStripper.writeText
(PDFTextStripper.java:145)
 
I don't know if this is a pdfbox or openoffice issue but i 
just wanted to let you know...
</detail>
		<follow_ups>
			<item>
				<date>1066865741</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed in CVS.</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>47538</id>
				<name>openoffice-test-document.pdf</name>
				<description></description>
				<filesize>12418</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1050160923</adddate>
				<submitted_by>601708</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1066865741</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1066865741</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>47538: openoffice-test-document.pdf</old_value>
				<date>1050160923</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="720252">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2003-04-12 08:24</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520288">lucene</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>broken UID generation</summary>
		<detail>I have been having problems with reindexing of files in 
Lucene using PDFBox. After investigation I discovered 
the LucenePDFDocument class is using the 
line.separator property to create file UIDs instead of 
file.separator in the example Lucene HTMLDocument 
class. This totally throws the reindexing out of whack, 
causing files that do not need reindexing to be reindexed.
</detail>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>1050714703</old_value>
				<date>1050714752</date>
				<by>leftbrute</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>1050714689</old_value>
				<date>1050714703</date>
				<by>leftbrute</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1050714689</date>
				<by>leftbrute</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1050714689</date>
				<by>leftbrute</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1050714689</date>
				<by>leftbrute</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="720254">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2003-04-12 08:29</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>getFontWidth throws NullPointer</summary>
		<detail>This reports refers to annual1996.pdf, which is too large 
to post to the issue tracking system.


I got the following exception while trying to extract the 
text-content from
one of my PDF-documents using PDFBox-0.6.1:

java.lang.NullPointerException
at org.pdfbox.cos.COSObject.getFontWidth
(COSObject.java:319)
at
org.pdfbox.util.PDFTextStripper.showString
(PDFTextStripper.java:981)
at
org.pdfbox.util.PDFTextStripper.handleOperation
(PDFTextStripper.java:796)
at org.pdfbox.util.PDFTextStripper.process
(PDFTextStripper.java:387)
at org.pdfbox.util.PDFTextStripper.process
(PDFTextStripper.java:374)
at
org.pdfbox.util.PDFTextStripper.processPageContents
(PDFTextStripper.java:296
)
at
org.pdfbox.util.PDFTextStripper.processPages
(PDFTextStripper.java:239)
at
org.pdfbox.util.PDFTextStripper.processPages
(PDFTextStripper.java:231)
at
org.pdfbox.util.PDFTextStripper.processPages
(PDFTextStripper.java:231)
at
org.pdfbox.util.PDFTextStripper.writeText
(PDFTextStripper.java:156)
at
se.enea.pfm.logic.PDFTextExtracter.getTextFromPDFDo
cument(PDFTextExtracter.j
ava:64)
at
se.enea.pfm.logic.PDFTextExtracter.main
(PDFTextExtracter.java:285)
Exception in thread &amp;quot;main&amp;quot; 

It seems like the widthArray returned by 
COSObject::getDictionaryObject was
null. The baseObject was of type COSDictionary but it 
had no COSName.WIDTHS
(&amp;quot;Widths&amp;quot;) key in it causing a null object to be returned 
from
COSObject::getDictionaryObject.
</detail>
		<follow_ups>
			<item>
				<date>1050713327</date>
				<sender>leftbrute</sender>
				<text>Logged In: YES 
user_id=753610

Fixed in 0.6.2

It was assumed that the widths array would always be 
present, which is not the case for the standard fonts.</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1050713882</date>
				<by>leftbrute</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>1050713327</old_value>
				<date>1050713882</date>
				<by>leftbrute</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1050713327</date>
				<by>leftbrute</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1050713327</date>
				<by>leftbrute</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="740029">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2003-05-19 11:56</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>IOException: Cant handle font width</summary>
		<detail>I got IOException with several pdf documents. For 
example 
http://java.sun.com/xml/downloads/jaxrpc.html#jaxrpcsp

JaxRpc specification.


This is debug output:

adding C:\pdf1\jaxrpc-1_0-fr-spec.pdf
.....
DEBUGMay 19 14:52:35 &amp;lt;Tc characterSpacing=&amp;quot;0.0&amp;quot; /&amp;gt;
DEBUGMay 19 14:52:35 resource: 
Resources/afm/TIR_____.AFM, name: Times-Roman
 caught a class java.io.IOException
 with message: Can't handle font width

http://java.sun.com/xml/downloads/jaxrpc.html#jaxrpcsp
ec

(see atachment)</detail>
		<follow_ups>
			<item>
				<date>1055332714</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I assume that yo have read the limitations file and assured 
that the Resources directory is in your classpath.  I will look 
into this further in a couple days.

2. You get an error message like &amp;quot;java.io.IOException: Can't 
handle font width&amp;quot; this MIGHT be due to the fact that you 
don't have the Resources directory in your classpath.  The 
easiest solution is to simply include the PDFB-x.x.x.jar in your 
classpath.</text>
			</item>
			<item>
				<date>1055308508</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

i have the same problem, here's my stracktrace:

java.io.IOException: Can't handle font width
	at org.pdfbox.cos.COSObject.getAFM
(COSObject.java:178)
	at 
org.pdfbox.cos.COSObject.getFontWidthFromAFMFile
(COSObject.java:352)
	at org.pdfbox.cos.COSObject.getFontWidth
(COSObject.java:332)
	at org.pdfbox.util.PDFTextStripper.showString
(PDFTextStripper.java:1139)
	at org.pdfbox.util.PDFTextStripper.handleOperation
(PDFTextStripper.java:917)
	at org.pdfbox.util.PDFTextStripper.process
(PDFTextStripper.java:512)
	at org.pdfbox.util.PDFTextStripper.process
(PDFTextStripper.java:499)
	at 
org.pdfbox.util.PDFTextStripper.processPageContents
(PDFTextStripper.java:417)
	at org.pdfbox.util.PDFTextStripper.processPages
(PDFTextStripper.java:358)
	at org.pdfbox.util.PDFTextStripper.processPages
(PDFTextStripper.java:350)
	at org.pdfbox.util.PDFTextStripper.processPages
(PDFTextStripper.java:350)
	at org.pdfbox.util.PDFTextStripper.processPages
(PDFTextStripper.java:350)
	at org.pdfbox.util.PDFTextStripper.writeText
(PDFTextStripper.java:186)
	at org.pdfbox.util.PDFTextStripper.getText
(PDFTextStripper.java:130)
	at trl.kzone.core.PDFType.getRawText
(PDFType.java:49)
	at trl.kzone.test.TestClient.main(TestClient.java:19)
</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1057418041</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1057418041</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1055332714</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="740162">
		<submitted_by>duan60</submitted_by>
		<submitted_date>2003-05-19 16:29</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520288">lucene</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>addDocument Exception</summary>
		<detail>In the 0.6.2 version,

The static method getDocument(File)
throws a NullPointerException
when attempting to parse the File in the addContent 
method of the LucenePDFDocument java file

I noticed it worked perfectly in the  0.6.1 version

Hope it will help for the project</detail>
		<follow_ups>
			<item>
				<date>1067117983</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

This appears to work in the current version.  Please reopen if 
you still have this issue with 0.6.3</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1067117983</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1067117983</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="910000">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-03-04 10:58</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>ClassCastException: org.pdfbox.cos.COSArray</summary>
		<detail>Hello,

I get an error while parsing one of my pdf files. It works 
fine for the rest of pdf files. Here is the stack trace:

Exception in thread "main" java.lang.ClassCastException: 
org.pdfbox.cos.COSArray
        at org.pdfbox.cos.COSObject.setObject
(COSObject.java:123)
        at org.pdfbox.pdfparser.PDFParser.parseObject
(PDFParser.java:383)
        at org.pdfbox.pdfparser.PDFParser.parse
(PDFParser.java:132)
        at 
org.pdfbox.searchengine.lucene.LucenePDFDocument.add
Content(LucenePDFDocument.java:201)
        at 
org.pdfbox.searchengine.lucene.LucenePDFDocument.get
Document(LucenePDFDocument.java:121)
        at 
com.capgroup.ri.search.lucene.index.Spider.indexPDFs
(Spider.java:139)
        at 
com.capgroup.ri.search.lucene.index.Spider.indexPDFs
(Spider.java:136)
        at 
com.capgroup.ri.search.lucene.index.Spider.indexPDFs
(Spider.java:136)
        at com.capgroup.ri.search.lucene.index.Spider.go
(Spider.java:115)
        at com.capgroup.ri.search.lucene.index.Spider.main
(Spider.java:55)

Any idea?

Thanks!
</detail>
		<follow_ups>
			<item>
				<date>1079055565</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

This is fixed in version 0.6.5

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1079055565</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1079055565</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="919215">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-03-18 17:40</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520288">lucene</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>IOException in LucenePDFDocument.getDocument</summary>
		<detail>I have get two exceptions:
1) Unknown object substitution type:COSStream{}
2) No 'ToUnicode' and no 'Encoding' for Font
</detail>
		<follow_ups>
			<item>
				<date>1095987119</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

&gt;1)Unknown object substitution type:COSStream{}

Added support for COSStream replacement.

&gt;2) No 'ToUnicode' and no 'Encoding' for Font

This was fixed a while back.

Please verify in CVS and reopen if necessary.

Ben</text>
			</item>
			<item>
				<date>1094773849</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Do you have a PDF document which displays this error?</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1095987119</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1095987119</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1093978528</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1047754">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-10-15 05:40</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>How can I reduce PDFBox Size? (N Textextraction only)</summary>
		<detail>Hi.
First of all, thx very much for this great PDF Tool.
Here's my question:
I am only interested in extracting Text to String from all 
kinds of PDFs, nothing more and nothing less. Therefore 
I dont need all that viewing and writing capabilities for 
example.
Which classes and files do I really need and which 
external jars from the external folder?
Im also using the class in an applet (though with good 
connections), so size matters a bit..

Second, is my extraction code optimizable?

PDFTextStripper stripper = new PDFTextStripper();
PDFParser parser = new PDFParser(in);
parser.parse();
document = parser.getPDDocument();
String Txt = stripper.getText(document);
document.close();


I'm sorry my question may be a little bit of a noob 
question.. Thx for any help..

Best Regards,
Robert Koblischke, student, Vienna</detail>
		<follow_ups>
			<item>
				<date>1097886489</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

It depends on what jars you need.

Basically here is what you need
PDFBox-0.6.X.jar, of course
ant, probably not
checkstyle, never
junit, never
log4j-1.2.8.jar, always
lucene-1.4.2.jar, only if using lucene
lucene-demos-1.4.2.jar, probably not unless you directly use 
one if the classes yourself.
xercesImpl/xml-apis.jar, only if you configure log4j using an 
xml document and using JRE 1.3 or less

&gt;is my extraction code optimizable?

One minor optimization, but maybe not.  The following line of 
code loads the entire text of the document into memory.

String Txt = stripper.getText(document);

You could write the text to a stream instead, which will use 
less memory(unless  of course you are using the 
ByteArrayOutputStream).  I would think this is a minor point 
unless you are working with really large documents.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1097886499</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1097886499</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1050537">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-10-20 01:04</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>extraction speed become lower and lower when process big pdf</summary>
		<detail>I use the pdfbox to process big pdf file (&gt;100M),the 
main work is extraction the text of each page and do 
some analysis.

But i found the process speed become lower and lower.
If i cut the big file into sevaral smaller files(about 
10M),the total process period of these smaller files &lt; 
that of the big one.

PS. i have forbidden the usage of system's pagefile.

And there is an pdfbox temp file in the user's temp 
directory,what dose this file used for?

thanks!</detail>
		<follow_ups>
			<item>
				<date>1100835810</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

closed duplicate of 1050506</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1100835810</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1100835810</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="921745">
		<submitted_by>mp090779</submitted_by>
		<submitted_date>2004-03-23 05:05</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>ClassCastException while getEncryptionDictionary()</summary>
		<detail>I get the following Exception
java.lang.ClassCastException
	at 
org.pdfbox.pdmodel.encryption.PDEncryptionManager.get
EncryptionDictionary(PDEncryptionManager.java:90)
	at 
org.pdfbox.pdmodel.PDDocument.getEncryptionDictionary
(PDDocument.java:201)
	at app.indexer.pdf.PDFDocument.addContent
(PDFDocument.java:186)

COSDictionary.getDictionaryObject() is used to get the 
filter name and returns a COSBase object while the real 
object type is COSName which is saved in the item 
HashMap.
In PDEncryptionManager.getEncryptionDictionary(...) the 
return value of getDictionaryObject() will be cast into 
COSString which throws the exception because 
COSName cannot be cast into COSString. So either the 
HashMap is wrong or the cast is wrong.

Peter MH</detail>
		<follow_ups>
			<item>
				<date>1080060970</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I believe this is actually fixed in CVS, please try that version.

Ben</text>
			</item>
			<item>
				<date>1080053349</date>
				<sender>mp090779</sender>
				<text>Logged In: YES 
user_id=149976

I used PDFbox V0.6.5</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1080130789</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1080130789</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1033633">
		<submitted_by>pczeus</submitted_by>
		<submitted_date>2004-09-23 13:19</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="556660">writing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Error writing document after splitting with Splitter</summary>
		<detail>After using the Splitter to split my PDF file 1 per page, I 
get a NullPointerException when I try to write each page 
as a separate PDF file to disk by calling the 
PDDocument.save("filePath") method.

the COSWriter.write(COSDocument doc) method is 
throwing the exception at line 1053 when it tries to get 
the COSObject.objectNumber().
Both the objectNumber and generationNumber values are 
null in each split document.

To fix the problem temporarily, I added the following 
hack code to set the values to (hopefully) a unique 
value. This seems to fix the problem for me temporarily, 
but is obviously not a good solution.

               try {
                    List objects = subDoc.getDocument
().getObjects();
                    Iterator iter = objects.iterator();
                    long maxNum = 1;
                    COSInteger objNbr = null;
                    COSInteger objGenNbr = null;
                    while (iter.hasNext()) {
                        COSObject object = (COSObject) 
iter.next();
                        objNbr = object.getObjectNumber();
                        if (objNbr == null) {
                            objNbr = new COSInteger
(++maxNum);
                            object.setObjectNumber(objNbr);
                        }
                        objGenNbr = 
object.getGenerationNumber();
                        if (objGenNbr == null) {
                            objGenNbr = new COSInteger
(++maxNum);
                            object.setGenerationNumber
(objGenNbr);
                        }

                        COSObjectKey key = new 
COSObjectKey(objNbr.longValue(), objGenNbr.longValue
());
                        maxNum = Math.max(key.getNumber(), 
maxNum);
                    }

                    subDoc.save(fileName);
                }</detail>
		<follow_ups>
			<item>
				<date>1096329226</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

As stated in previous comments this has been fixed in CVS so 
I am closing this issue.

Ben</text>
			</item>
			<item>
				<date>1096304548</date>
				<sender>pczeus</sender>
				<text>Logged In: YES 
user_id=230504

I got the latest nightly build - 20040927.
The problem has been resolved.
I have removed my hack...great job Ben..Thanks!</text>
			</item>
			<item>
				<date>1096229280</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

mi2ke,pczeus

I think I have a better long term solution.  I changed the 
code near line 1053 to 

if( object.getObjectNumber() != null &amp;&amp;
    object.getGenerationNumber() != null )
{
    COSObjectKey key = new COSObjectKey( 
object.getObjectNumber().longValue(),
                                         object.getGenerationNumber
().longValue() );
    objectKeys.put( object.getObject(), key );
    maxNumber = Math.max( key.getNumber(), maxNumber );
    setNumber( maxNumber );
}

This way if there was no existing object/generation then it 
doesn't store it.  The only reason that the COSWriter even 
tries to store it is so when writing out a document it will 
attempt to reuse the original documents object numbers.

Please try tonight's nightly build and let me know if this fixes 
your problem.  I will leave this issue open until I hear from you.

Ben</text>
			</item>
			<item>
				<date>1096057104</date>
				<sender>mi2ke</sender>
				<text>Logged In: YES 
user_id=1100444

Sorry, don't know how to append files into this Thread...</text>
			</item>
			<item>
				<date>1096056997</date>
				<sender>mi2ke</sender>
				<text>Logged In: YES 
user_id=1100444

Hi!

I had a similar effect on cloning objects. I implemented a
little (also a bit dirty) bugfix which works. But you'll
always get the next unique object id.


New Global variable in COSDocument.java:
===================================
private List objectNumbers = new ArrayList();
===================================

New Method in COSDocument.java:
===============================    
    public int getFreeObjectNumber()
    {
    	int max = 0;
    	
    	for (int i = 0; i &lt; objectNumbers.size(); i++)
		{
			COSNumber currentNumber = (COSNumber) objectNumbers.get(i);
			max = Math.max(max, currentNumber.intValue());	
		}

    	objectNumbers.add(new COSInteger(max+1));
    	return max+1;
    }

Edited addObject Method in COSDocument.java (+1 line):
=======================================
    public void addObject(COSObject obj)
    {
        // the wrapped object may be null when not
completely parsed...
        if (obj.getObject()== null || hasObject(obj))
        {
            // break cycle if already contained
            return;
        }
        objects.add(obj);
        
		objectNumbers.add(obj.getObjectNumber());
        objectMap.put(obj.getObject(), obj);
        if (obj.getObject() != null)
        {
            // call recursive for contained objects
            obj.getObject().addTo(this);
        }
    }
</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1096329226</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1096329226</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Deleted</field>
				<old_value>102587: </old_value>
				<date>1095970861</date>
				<by>pczeus</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>102587: parsetest4.pdf</old_value>
				<date>1095970814</date>
				<by>pczeus</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="846778">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2003-11-21 10:31</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Incorrect behavior with multiple fields with same name</summary>
		<detail>I've got a form with a set of 2 radio buttons setup as 
checkboxes. They indicate whether a person's sex is 
Male or Female. The export values are Male and Female. 
The form field names are the same, i.e., eeSexchk. 

When I display the fdf prior to the merge with the pdf, I 
can see that the value for eeSexchk is set to either 
Male or Female but after the merge is done in PDFBox 
6.4, neither radio button is checked and the value 
displayed on the console upon display of the pdf is &amp;quot;off&amp;quot;. 
For some reason, the merge isn't valuing this radio 
button. I have had problems in the past with 6.3 and 
duplicate form field names but am not sure what to 
expect in 6.4. Is this a known behavior? Is there a way I 
can get this to work? Thx! </detail>
		<follow_ups>
			<item>
				<date>1091886468</date>
				<sender>wdscofield</sender>
				<text>Logged In: YES 
user_id=883847

Ben,

I'm sorry, I just noticed that there is a new bug out there 
(996050) that is open regarding the retesting of the 6.6 fix.  I 
hope you can take a look at it.  We are going live very soon.

Thanks again!
Bill</text>
			</item>
			<item>
				<date>1091886199</date>
				<sender>wdscofield</sender>
				<text>Logged In: YES 
user_id=883847

Ben,

Did you receive my email regarding the testing of your fix?  I 
was getting a NPE every time I tried to do a merge.  I did not 
hear back that this was fixed.  I'd be happy to supply my 
error message again and open a new bug if need be.  

Thanks!
Bill </text>
			</item>
			<item>
				<date>1090415887</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I believe this is fixed in 0.6.6, please verify this is correct and 
reopen this case if this is still an issue.

Ben</text>
			</item>
			<item>
				<date>1069795560</date>
				<sender>wdscofield</sender>
				<text>Logged In: YES 
user_id=883847

Ben, I just notice in my testing that a regular checkbox is 
behaving the same way, i.e. the FDF contains the value &amp;quot;Yes&amp;quot; 
which is what the export value is on the PDF form field, yet 
once the merging is done, the value of the checkbox is &amp;quot;off&amp;quot;.  
So, it seems this bug applies to both check boxes and radio 
buttons.  Hope you find something!

Bill</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1091719621</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1091719621</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1151918">
		<submitted_by>yves_bussard</submitted_by>
		<submitted_date>2005-02-25 08:30</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Error in PDFTextStripper</summary>
		<detail>Hi Ben,

First of all I'd like thank you for your library. I
just started to use it a few days ago and it looks as
if it might solve my problems. 

It is very likely that I'll ask you questions or offer
some suggestions for the library. Since I'm absolutely
new to PDF and your library I might suggest things
which do not make sense. Please be patient with me, if
that happens. :-).

First issue:

There is a bug in PDFTextStripper.writeText(). In the
first line you call startDocument() (which is meant to
be overriden I think) but at that point you haven't set
the member fields output, document and currentPage.
This happens after the call to startDocument() and
after the check of the encryption. I'd say that
startDocument() should be called after the lines 

        output = outputStream;
        currentPage = 0;
        document = doc;

because if I try to use the document or the output when
in startDocument() I obviously get a NullPointerException. 

best regards
Yves

P.S. In the class OperatorProcessor the method
setContext() takes a context parameter of type
PDFStreamEngine. Imho it would be nicer to have an
interface (e.g. OperatorProcessingContext) for the
context which the PDFStreamEngine could implement. The
interface would then contain all methods needed for the
OperatorProcessors. This way it would be possible to
reuse the PDFStreamEngine but provide the
OperatorProcessors with a different context object.
This is not something I need right now, I just noticed
it while browsing through the code. Please let me know
what you think of it.</detail>
		<follow_ups>
			<item>
				<date>1120006307</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed a while back in CVS.

Ben Litchfield</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1120006307</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1120006307</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1120006307</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1182892">
		<submitted_by>dnaber</submitted_by>
		<submitted_date>2005-04-14 02:18</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>setHighlightColor doesn't work</summary>
		<detail>According to the latest(?) Highlight File Format 
specification from Adobe, the "color" attribute was never 
implemented: 
 
http://partners.adobe.com/public/developer/pdf/index_reference.html#4 
 
Thus I always get  a black highlight, never the yellow color 
that's supposed to be default. I'd suggest to just remove 
get/setHighlightColor. 
 
The spec als says that "mode" was never implemented, 
but jumping to the first match works for me. 
 </detail>
		<follow_ups>
			<item>
				<date>1113663213</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

You are correct, I have removed these methods.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1113663213</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1113663213</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1113663213</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="978359">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-06-23 10:00</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>PDDocumentInformation.getTitle() returns unreadable string</summary>
		<detail>Getting the title of a document is rarely successfull.  
using this code:

FileInputStream fis = new FileInputStream(file);
PDFParser parser = new PDFParser(fis);
parser.parse();
PDFTextStripper stripper = new PDFTextStripper();
PDDocument doc = parser.getPDDocument();
PDDocumentInformation info = 
doc.getDocumentInformation();
title = info.getTitle();

title is often set to a string like this:

øš&amp;¶hæ_í®ÁƒŠh?ÚƒÚp©+ Qh«Fëšõƒää&amp;‰§ÇUmÿ`

If the getDocumentInformation() call fails to get the title 
then getTitle() should return null or an empty string.

scarpenter@allofe.net</detail>
		<follow_ups>
			<item>
				<date>1090497745</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

These PDF documents were encrypted and needed to be 
decrypted before the title could be extracted.

Ben</text>
			</item>
			<item>
				<date>1088627184</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

First please verify that the pdf document is not encrypted.  If 
it is then this will certainly fail until you decrypt the 
document.  

If it is not encrypted please send me an example pdf that this 
does not work on and I will take a look at it.

ben@csh.rit.edu</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1090497745</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1090497745</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1179140">
		<submitted_by>gagravarr</submitted_by>
		<submitted_date>2005-04-08 03:54</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>ClassCastException in org.pdfbox.cos.COSArray</summary>
		<detail>When parsing
http://www.ageconcern.org.uk/AgeConcern/media/IS21Bengali.pdf,
I get the following exception:

java.lang.ClassCastException: org.pdfbox.cos.COSArray
        at
org.pdfbox.cmapparser.CMapParser.parse(CMapParser.java:159)
        at
org.pdfbox.pdmodel.font.PDFont.parseCmap(PDFont.java:479)
        at
org.pdfbox.pdmodel.font.PDFont.encode(PDFont.java:360)
        at
org.pdfbox.util.PDFStreamEngine.showString(PDFStreamEngine.java:197)
        at
org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:655)
        at
org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:134)
        at
org.pdfbox.util.PDFTextStripper.processPage(PDFTextStripper.java:201)
        at
org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:179)
        at
org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:158)
        at
org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:109)
</detail>
		<follow_ups>
			<item>
				<date>1113093850</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

This is fixed in CVS, please give a nightly build a try.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1113093850</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1113093850</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1113093850</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="996732">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-07-23 11:16</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520288">lucene</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>log4j:WARNING</summary>
		<detail>So whenever i run my indexer it always prints this 
message to the console on the first pdf

Indexing test1.pdf
log4j:WARN No appenders could be found for logger 
(org.pdfbox.pdfparser.PDFParser).
log4j:WARN Please initialize the log4j system properly.
Indexing test2.pdf
Indexing fourth.doc

I am able to run my search method on the index too but 
this "message" is making my boss edgy? How do I fix? I 
am a novice user to this who prepackaged jar this...

I am using PDFBox 0.6.3...

Thanks!

djesuraj AT mitre.org</detail>
		<follow_ups>
			<item>
				<date>1090624885</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

log4j can be configured in a number of different ways.  The 
easiest is to specify on the command line.  Like this.

java -Dlog4j.configuration=log4j.xml org.pdfbox.ExtractText 
input.pdf

Where log4j.xml is a log4j configuration.  An example one 
ships with PDFBox(the latest version at least).

This is not really a bug, but more of a question.  Please post 
to the help forum.

You should also read some of the log4j documentation at 
http://logging.apache.org/log4j/docs/documentation.html  It 
will be worth your time.

Hope that helps.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1090624885</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1090624885</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1003188">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-08-04 04:33</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Extracting text from pdf containg text under the images</summary>
		<detail>There are various tools that save pdfs in a "text under 
the image" manner.

For example, a tool can make ocr, and save text and the 
same information as image. So, when you open the pdf, 
you see the text but you can search into the pdf (and 
marking of search result in Adobe Acrobat is also 
working).

Is there any way to extract such texts out of pdfs using 
PDFBox ?

Thanx
</detail>
		<follow_ups>
			<item>
				<date>1096154479</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Closed: Not a bug.

Ben</text>
			</item>
			<item>
				<date>1094857506</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

The text should be extracted in these cases.  PDFBox does 
not exclude this text.  Please provide me with an example of 
this, email/link/or attach a PDF.

ben@csh.rit.edu</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1096154479</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1096154479</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1093978523</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="974661">
		<submitted_by>sbelt</submitted_by>
		<submitted_date>2004-06-17 04:04</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>getKids() Null Pointer Exception when parsing pdf</summary>
		<detail>Here is the top of the stack trace when parsing some
PDF documents.:

java.lang.NullPointerException
        at
org.pdfbox.pdmodel.PDPageNode.getKids(PDPageNode.java:171)
        at
org.pdfbox.pdmodel.PDDocumentCatalog.getPageObjects(PDDocumentCatalog
.java:133)
        at
org.pdfbox.pdmodel.PDDocumentCatalog.getAllPages(PDDocumentCatalog.ja
va:127)
        at
org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:172)
        at
org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:120)</detail>
		<follow_ups>
			<item>
				<date>1138479179</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

This is now fixed, woo hoo!!

Cheers,
Ben</text>
			</item>
			<item>
				<date>1115643949</date>
				<sender>pvojtechovsky</sender>
				<text>Logged In: YES 
user_id=1275162

The problem is that InputStream.read(byte b[], int off, int len) 
reads only number of bytes which are currently available in 
buffers. This number can be less then value of variable len. It 
is often case of Internet streams. 
The following code in PDFParser.parseObject()
if( pdfSource.available() &lt; 1000 )
{
   byte[] data = new byte[ 1000 ];
   int amountRead = pdfSource.read( data );
has problem with that.
1. pdfSource.available() do not return number of bytes till end 
of stream
2. when pdfSource.read( data ) reads e.g. 1 byte it does not 
mean that there is no more bytes!

I used following solution:
1. I have added following method into 
org.pdfbox.io.PushBackInputStream
which assures that all available bytes are read. Method read 
is used quite often from several places and we should be 
sure that all available bytes are read.
/**
 * read aLen till EOF
 */
public int read(byte[] aB, int aOff, int aLen) throws 
IOException
{
	int loTotalLength = super.read(aB, aOff, aLen);
	if(loTotalLength==-1)
	{	//EOF
		return -1;
	}
	while(loTotalLength&lt;aLen)
	{
		int loL = super.read(aB, 
aOff+loTotalLength, aLen-loTotalLength);
		if(loL==-1)
		{	//EOF
			break;
		}
		loTotalLength+=loL;
	}
	return loTotalLength;
}

2. I modified PDFParser.parseObject() this way:
...
int amountRead = pdfSource.read( data );
if( amountRead != -1 )
{
    pdfSource.unread( data, 0, amountRead );
}
if(amountRead&lt;1000)
{//if there is less then 1000 bytes then it can be really end of 
file 
    boolean atEndOfFile = true;
    ...
</text>
			</item>
			<item>
				<date>1108578747</date>
				<sender>mschuerig</sender>
				<text>Logged In: YES 
user_id=1088404

No, I mean the opposite. After retrying often enough every URL 
will finally get processed correctly, thus I can give no specific URL 
as none fails consistently. 
 
Further downstream, the cause of the NPE is that PDPageNode 
is constructed with a null argument. I have no idea why this 
happens, and what's more, why it only happens intermittently. 
However, that doesn't mean the NPE occurs only rarely. I've 
used LucenePDFDocument to index a list of about 100 remote 
documents. It took around 30 passes through the list until finally 
each and every document was indexed; on each pass I got NPEs 
for up to 90% of the documents. 
 
As I wrote, when run in the Eclipse debugger, everything works 
flawlessly, not a single NPE or other exception. I have no idea, 
why this is. I've tried to put the thread to sleep between 
accessing the documents and also tried to GC'ing, but that kind 
of voodoo didn't change anything. 
 
I've had a look at how data is read from the InputStream and I 
can see no obvious(!) problem there, but I have a hunch that 
the problem is somewhere in the vicinity. 
 
Michael </text>
			</item>
			<item>
				<date>1108571016</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Alright, I reopened this case, maybe there is a parsing 
problem when using a URL.  Not sure what it could be though 
off the top of my head, I just use an InputStream.

Do you mean that it consistently fails when using a URL, and 
only sometimes works?  If it is a public url can you give it to 
me, so I can test using the same scenario.

Ben</text>
			</item>
			<item>
				<date>1108553066</date>
				<sender>mschuerig</sender>
				<text>Logged In: YES 
user_id=1088404

I think I've got the same or a very similar problem; see stack 
trace below. There are some things of note in my case 
 
(1) The NPE is only thrown for http-URLs 
 
(2) The exception is not always thrown. If I try often enough to 
access a document it will eventually succeed, sometimes taking 
20+ attempts. 
 
(3) When running in the debugger (Eclipse), everything works 
fine; no NPEs. 
 
Michael 
 
 
java.lang.NullPointerException 
 at 
org.pdfbox.pdmodel.PDPageNode.getAllKids(PDPageNode.java:194) 
 at 
org.pdfbox.pdmodel.PDPageNode.getAllKids(PDPageNode.java:182) 
 at 
org.pdfbox.pdmodel.PDDocumentCatalog.getAllPages(PDDocumentCatalog.java:131) 
 at 
org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:180) 
 at 
org.pdfbox.searchengine.lucene.LucenePDFDocument.addContent(LucenePDFDocument.java:261) 
 at 
org.pdfbox.searchengine.lucene.LucenePDFDocument.getDocument(LucenePDFDocument.java:221) </text>
			</item>
			<item>
				<date>1106778142</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I do not have a test case that exhibits this problem so I am 
closing this case, please reopen if this is still an issue.

Ben</text>
			</item>
			<item>
				<date>1101112554</date>
				<sender>ozzybren</sender>
				<text>Logged In: YES 
user_id=1080046

G'day Ben,

This problem was still occuring with the document I attached 
earlier. It was only occuring when trying to access the 
document over an internet connection, so maybe that had 
something to do with it.

Unfortunately I'm no longer working for the company I was 
invovvled with this project so I cannot give you any more 
help right now.

Best of luck,
Brendan
</text>
			</item>
			<item>
				<date>1100835089</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Is this still a problem?  I don't have a test case that 
reproduces this issue.

Ben</text>
			</item>
			<item>
				<date>1098865473</date>
				<sender>ozzybren</sender>
				<text>Logged In: YES 
user_id=1080046

Hi Ben,

I installed the nightly build (btw, prior to this I was using the 
latest version available on SourceForge, v0.6.7a) and still got 
the same problem.

You'll notice that I'm not using the java 
org.pdfbox.ExtractText method to cause this error. I'm 
actually accessing this PDF using a class that is based on the 
LucenePDFDocument you provided. (I had to add a few extra 
fields such as number of pages, renaming your keys and 
modifying the getUid method. I could have extended but it 
was difficult given that I wanted to change the keys you 
used.) Other than these few minor things the 
CimLucenePdfDocument you see in the exception stack trace 
is the same as your class. I was getting the same problem 
when using you class (before I created my new class.)

Line 241 in my class refers to the line saying
            stripper.writeText(pdfDocument, writer);

I can send you a copy of CimLucenePdfDocument if you 
require it.

Cheers for yuo help. Regards,
Brendan</text>
			</item>
			<item>
				<date>1098841533</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

When I run "java org.pdfbox.ExtractText tmp\ruh_english.pdf" 
I do not get the exception, please give the nightly release a 
try and let me know if you still have this issue.

Ben</text>
			</item>
			<item>
				<date>1098837830</date>
				<sender>ozzybren</sender>
				<text>Logged In: YES 
user_id=1080046

G'day Ben,

Sorry for the delay in getting back to you; I've been on 
holidays. In any case, I'm actually back on this project and 
as I said when I index certain PDFs I get an error once, and 
then when I try again I do not get the same problem.

Here's a stack trace with the problem (it include a link to one 
of the PDF's in question.)

27/10/2004 10:36:41 ERROR::pub=1195: Null Pointer 
Exception when creating Lucene document
(http://www.rta.nsw.gov.au/licensing/downloads/ruh_english.
pdf)! (class java.lang.NullPointerException:null). Not indexed.
27/10/2004 10:36:41 ERROR::null
java.lang.NullPointerException
	at org.pdfbox.pdmodel.PDPageNode.getKids
(PDPageNode.java:171)
	at 
org.pdfbox.pdmodel.PDDocumentCatalog.getPageObjects
(PDDocumentCatalog.java:168)
	at 
org.pdfbox.pdmodel.PDDocumentCatalog.getAllPages
(PDDocumentCatalog.java:129)
	at org.pdfbox.util.PDFTextStripper.writeText
(PDFTextStripper.java:161)
	at 
gov.nsw.oit.bookshop.searchengine.CimLucenePdfDocument.a
ddContent(CimLucenePdfDocument.java:241)
	at 
gov.nsw.oit.bookshop.searchengine.CimLucenePdfDocument.g
etDocument(CimLucenePdfDocument.java:152)
	at 
gov.nsw.oit.bookshop.searchengine.PublicationDocument.getD
ocument(PublicationDocument.java:66)
	at 
gov.nsw.oit.bookshop.searchengine.PublicationIndexer.addDoc
ument(PublicationIndexer.java:341)
	at 
gov.nsw.oit.bookshop.searchengine.PublicationIndexer.indexPu
blications(PublicationIndexer.java:228)
	at 
gov.nsw.oit.bookshop.searchengine.PublicationIndexer.main
(PublicationIndexer.java:162)

It's not a major issue for me at the moment as the PDFs do 
get indexed on subsequent indexing calls, however it would 
be better if it just worked first time around.

Cheers for you help,
Brendan
</text>
			</item>
			<item>
				<date>1095989125</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Please attach/link/email a PDF document that has this 
problem.  I cannot reproduce without a PDF. 

Ben</text>
			</item>
			<item>
				<date>1089601697</date>
				<sender>ozzybren</sender>
				<text>Logged In: YES 
user_id=1080046

I've noticed the same problem. Curiously enough I've had the 
same PDF file process correctly and then at another time give 
this error. </text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1138479179</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1138479179</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>1106778142</old_value>
				<date>1138479179</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>2</old_value>
				<date>1108571016</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>103</old_value>
				<date>1108571016</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1106778142</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1106778142</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1106778142</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1093978526</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1085799">
		<submitted_by>kurthanner</submitted_by>
		<submitted_date>2004-12-15 05:38</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="556660">writing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Incorrect escaping of COSName objects</summary>
		<detail>Objects of type COSName are not formatted correctly, if 
they contain special characters.

For example a PDF document contains the following 
array:
[/Separation /PANTONE#20661#20CVU /DeviceCMYK 
5534 0 R]

Wehn I parse this document and store it to a new file, 
this array looks like this:
[/Separation /PANTONE /20f#1 /20#CVU /DeviceCMYK 
5534 0 R]

The cause of the problem is located in 
COSName.java:240:
    public static final byte[] NAME_ESCAPE = new byte[] 
{ 47  };  //The # character

Character 47 is a slash ('/') and not a hash ('#'). Please 
change this value from 47 to 35.</detail>
		<follow_ups>
			<item>
				<date>1103257671</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

The anon CVS is several hours behind the server that files get 
comitted to.  I think this was just a case of you trying to 
early.  

http://cvs.sourceforge.net/viewcvs.py/pdfbox/pdfbox/src/org/
pdfbox/cos/COSName.java?rev=1.28&amp;view=markup

Shows that it is 35 for the byte value.

Ben</text>
			</item>
			<item>
				<date>1103223851</date>
				<sender>kurthanner</sender>
				<text>Logged In: YES 
user_id=1164704

The changes are actually not in CVS nor in the nightly build. 
Please check in as you find time.</text>
			</item>
			<item>
				<date>1103167968</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

damn copy/paste errors.  fixed in CVS.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1103257671</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>1103167968</old_value>
				<date>1103257671</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>2</old_value>
				<date>1103223851</date>
				<by>kurthanner</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1103223851</date>
				<by>kurthanner</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1103167968</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1103167968</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="943319">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-04-27 14:28</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Openoffice pdf export</summary>
		<detail>Hi,

Looks like PDF file generated using OpenOffice.org'
(v1.1) "PDF export"  are not correctly handled by
ExtractText as it fails, most of the time saying :

Exception in thread "main" java.io.IOException: Error:
Expected hex number, actual=' 0'
        at
org.pdfbox.pdfparser.BaseParser.parseCOSString(BaseParser.java:574)
        at
org.pdfbox.pdfparser.BaseParser.parseDirObject(BaseParser.java:804)
        at
org.pdfbox.pdfparser.BaseParser.parseCOSArray(BaseParser.java:611)
        at
org.pdfbox.pdfparser.BaseParser.parseDirObject(BaseParser.java:810)
        at
org.pdfbox.pdfparser.BaseParser.parseCOSDictionaryValue(BaseParser.java:131)
        at
org.pdfbox.pdfparser.BaseParser.parseCOSDictionary(BaseParser.java:191)
        at
org.pdfbox.pdfparser.BaseParser.parseDirObject(BaseParser.java:799)
        at
org.pdfbox.pdfparser.PDFParser.parseObject(PDFParser.java:383)
        at
org.pdfbox.pdfparser.PDFParser.parse(PDFParser.java:144)
        at
org.pdfbox.ExtractText.parseDocument(ExtractText.java:246)
        at
org.pdfbox.ExtractText.main(ExtractText.java:172)

Some files do not raise the Exception, but the output I
get is still incorrect (bunch of garbage text)


</detail>
		<follow_ups>
			<item>
				<date>1093735842</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed in CVS, please give it a try and let me know if there are 
still problems.

Ben</text>
			</item>
			<item>
				<date>1093508862</date>
				<sender>bcr</sender>
				<text>Logged In: YES 
user_id=6616

I have added patch 1016603 which fixes it in my 
environment. Basically there are non hex characters in the 
stream (spaces), so I switched it to just ignore them. Works 
fine for my situation. 
http://sourceforge.net/tracker/index.php?
func=detail&amp;aid=1016603&amp;group_id=78314&amp;atid=552834</text>
			</item>
			<item>
				<date>1083875320</date>
				<sender>savageps91</sender>
				<text>Logged In: YES 
user_id=773604

Ok, Here is the problem:

According to the PDF standard, &lt;&gt; characters deliniate
hexidecimal strings.    Inside of an Indexed DeviceRGB color
space definition (which by the way, Open Office likes to use
for some reason), the lookup table according to the PDF
standard is delineated by &lt;&gt;.  The primary gotcha with this
is the hexidecimal string in indexed devicergb color spaces
(&lt;&gt; deliniates a hex string - remember) contain spaces
seperating the individual colors.  So, in short, the PDF
standard doesn't follow itself here. (SHOCK!!!)  If it were
to be an array, it should be enclosed in [ ] - not &lt;&gt;.

I am trying to find a way to get the Indexed device
colorspaces to work in spite of this anomoly.

PDF standard - hex strings are defined in chapter 3, page 32
of the PDF 1.5 standard

/Indexed Device RGB color spaces start on chapter 4, page
232 of the PDF 1.5 standard

Also, the /Indexed /DeviceRGB color spaces are valid as of
PDF 1.4</text>
			</item>
			<item>
				<date>1083848936</date>
				<sender>savageps91</sender>
				<text>Logged In: YES 
user_id=773604

My above comment about images is incorrect - It definately
follows Indexed DeviceRGB colorspaces.  Not so sure about
images now.  Found if I went into pdfparser/BaseParser.java
and modified the parseCOSString() method, and added a case for:

else if ( c == ' ' )
{
  //do nothing
}

But unfortunately, it breaks encryption in some pdf files.</text>
			</item>
			<item>
				<date>1083784107</date>
				<sender>savageps91</sender>
				<text>Logged In: YES 
user_id=773604

I have this exact same problem - seems to be (for me,
anyways) that it is a problem if there is an image in the
pdf stream.</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1093735854</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1093735854</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="803162">
		<submitted_by>peterschaefer</submitted_by>
		<submitted_date>2003-09-09 07:00</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>IOException during Parsing</summary>
		<detail>The PDF file seems to be corrupted but can be read by
Acrobat.

ava.io.IOException: expected='/' actual='?'
org.pdfbox.io.PushBackInputStream@19106c7
	at
org.pdfbox.pdfparser.BaseParser.parseCOSName(BaseParser.java:604)
	at
org.pdfbox.pdfparser.BaseParser.parseCOSDictionary(BaseParser.java:189)
	at
org.pdfbox.pdfparser.BaseParser.parseDirObject(BaseParser.java:733)
	at
org.pdfbox.pdfparser.PDFParser.parseObject(PDFParser.java:316)
	at
org.pdfbox.pdfparser.PDFParser.parse(PDFParser.java:122)
	at
de.ecosx.util.pdf.PdfUtil.getPlainText(PdfUtil.java:193)
	at
de.ecosx.util.pdf.PdfUtil.getPlainText(PdfUtil.java:159)
	at de.ecosx.util.pdf.PdfUtil.process1(PdfUtil.java:242)
	at de.ecosx.util.pdf.PdfUtil.process(PdfUtil.java:228)
	at de.ecosx.util.pdf.PdfUtil.process(PdfUtil.java:232)
	at de.ecosx.util.pdf.PdfUtil.main(PdfUtil.java:265)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native
Method)
	at
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:324)
	at
com.intellij.rt.execution.application.AppMain.main(AppMain.java:78)</detail>
		<follow_ups>
			<item>
				<date>1093736929</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

No PDF to test, so unable to reproduce.  Closing issue unless 
a PDF can be used to reproduce this issue.

Ben</text>
			</item>
			<item>
				<date>1079145267</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I realize this has been open for a while.  Can you please send 
me the PDF in question or try it against the latest version
(0.6.5) and let me know if this is still a problem.

Thanks,
Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1093736929</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1093736929</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="921373">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-03-22 13:11</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>No 'ToUnicode' and no 'Encoding' for Font</summary>
		<detail>I tried to extract text content from the following pdf file 
http://eval.veritas.com/downloads/pro/ins/ins.pdf and 
I've got the following error:
 java.io.IOException: Error: No 'ToUnicode' and 
no 'Encoding' for Font
     at org.pdfbox.pdmodel.font.PDFont.encode
(PDFont.java:347)
     at org.pdfbox.util.PDFStreamEngine.showString
(PDFStreamEngine.java:169)
     at org.pdfbox.util.PDFTextStripper.showString
(PDFTextStripper.java:461)
     at org.pdfbox.util.PDFStreamEngine.processOperator
(PDFStreamEngine.java:692)
     at org.pdfbox.util.PDFStreamEngine.processStream
(PDFStreamEngine.java:128)
     at org.pdfbox.util.PDFTextStripper.processPage
(PDFTextStripper.java:268)
     at org.pdfbox.util.PDFTextStripper.processPages
(PDFTextStripper.java:230)
     at org.pdfbox.util.PDFTextStripper.writeText
(PDFTextStripper.java:172)
     at org.pdfbox.util.PDFTextStripper.getText
(PDFTextStripper.java:99)</detail>
		<follow_ups>
			<item>
				<date>1094457154</date>
				<sender>jkronegg</sender>
				<text>Logged In: YES 
user_id=820653

The patch (niglthy build PDFBox-0.6.7-dev-20040905) is
working on several PDF files that previously raises this
exception with PDFbox 0.6.6.

Thanks ben.
</text>
			</item>
			<item>
				<date>1093870074</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed in CVS, will be available in 0.6.7+.

Ben</text>
			</item>
			<item>
				<date>1092848281</date>
				<sender>abellmann</sender>
				<text>Logged In: YES 
user_id=1102915

I checked the current cvs version of pdfont.java
 
ben litchfield has corrected the problem there. I guess this 
means, that this error will be fixed with the next release.

Cheers,
Andreas</text>
			</item>
			<item>
				<date>1092847977</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

I am also having this problem.  PDFs created by Microsoft
Word appear to use the symbol font to display list bullets,
which seems to be the problem font.

</text>
			</item>
			<item>
				<date>1092331899</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

I had this same error and did a little test to pinpoint the
problem:

I replaced: throw new IOException("Error ....
with: log.warn ("Error... " + font);
in PDFont.java (line 385 in version 0.6.6):

This way I was able to parse the pdf-document and discovered
that the culprit was always the "symbol" font...

</text>
			</item>
			<item>
				<date>1090578709</date>
				<sender>jkronegg</sender>
				<text>Logged In: YES 
user_id=820653

same bug in 0.6.6.</text>
			</item>
			<item>
				<date>1087999713</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

i am also having the same problem. I am using PDFBOX- 
0.6.5.

christian</text>
			</item>
			<item>
				<date>1087999658</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

ho</text>
			</item>
			<item>
				<date>1086964058</date>
				<sender>jnioche</sender>
				<text>Logged In: YES 
user_id=479465

I had this problem too on the following file :
http://www.up.univ-mrs.fr/~veronis/pdf/1998wsd.pdf
</text>
			</item>
			<item>
				<date>1080281687</date>
				<sender>brickankur</sender>
				<text>Logged In: YES 
user_id=1006831

i am also having the same problem. I am using PDFBOX- 
0.6.5. Is it not the latest verison?</text>
			</item>
			<item>
				<date>1080053194</date>
				<sender>mp090779</sender>
				<text>Logged In: YES 
user_id=149976

I got the same error on one special file. (PDFbox 0.6.5)
Peter MH</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1093870074</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1093870074</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="803171">
		<submitted_by>peterschaefer</submitted_by>
		<submitted_date>2003-09-09 07:07</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Out of Memory during Text Extraction</summary>
		<detail>
Allocated 256 MB of memory. Get OutOfMemoryException.

Here is part of the debug output:

DEBUG - &amp;lt;q&amp;gt; - save state
120  [main] DEBUG org.pdfbox.util.PDFTextStripper  -
&amp;lt;q&amp;gt; - save state
120  [main] DEBUG org.pdfbox.util.PDFTextStripper  -
&amp;lt;q&amp;gt; - save state
DEBUG - &amp;lt;cm a=&amp;quot;622.0&amp;quot; b=&amp;quot;0.0&amp;quot; c=&amp;quot;0.0&amp;quot; d=&amp;quot;797.0&amp;quot; e=&amp;quot;0.0&amp;quot;
f=&amp;quot;0.0&amp;quot; &amp;gt;
120  [main] DEBUG org.pdfbox.util.PDFTextStripper  -
&amp;lt;cm a=&amp;quot;622.0&amp;quot; b=&amp;quot;0.0&amp;quot; c=&amp;quot;0.0&amp;quot; d=&amp;quot;797.0&amp;quot; e=&amp;quot;0.0&amp;quot; f=&amp;quot;0.0&amp;quot; &amp;gt;
120  [main] DEBUG org.pdfbox.util.PDFTextStripper  -
&amp;lt;cm a=&amp;quot;622.0&amp;quot; b=&amp;quot;0.0&amp;quot; c=&amp;quot;0.0&amp;quot; d=&amp;quot;797.0&amp;quot; e=&amp;quot;0.0&amp;quot; f=&amp;quot;0.0&amp;quot; &amp;gt;
DEBUG - &amp;lt;Q&amp;gt; - restore state
120  [main] DEBUG org.pdfbox.util.PDFTextStripper  -
&amp;lt;Q&amp;gt; - restore state
120  [main] DEBUG org.pdfbox.util.PDFTextStripper  -
&amp;lt;Q&amp;gt; - restore state
DEBUG - &amp;lt;Starting text object list&amp;gt;
120  [main] DEBUG org.pdfbox.util.PDFTextStripper  -
&amp;lt;Starting text object list&amp;gt;
120  [main] DEBUG org.pdfbox.util.PDFTextStripper  -
&amp;lt;Starting text object list&amp;gt;
DEBUG - &amp;lt;newline endOfFlush=&amp;quot;true&amp;quot;&amp;gt;
120  [main] DEBUG org.pdfbox.util.PDFTextStripper  -
&amp;lt;newline endOfFlush=&amp;quot;true&amp;quot;&amp;gt;
120  [main] DEBUG org.pdfbox.util.PDFTextStripper  -
&amp;lt;newline endOfFlush=&amp;quot;true&amp;quot;&amp;gt;
DEBUG - processPages( COSObject{50, 0} )
120  [main] DEBUG org.pdfbox.util.PDFTextStripper  -
processPages( COSObject{50, 0} )
120  [main] DEBUG org.pdfbox.util.PDFTextStripper  -
processPages( COSObject{50, 0} )
DEBUG - processPageContents( COSObject{50, 0},
COSStream{} )
120  [main] DEBUG org.pdfbox.util.PDFTextStripper  -
processPageContents( COSObject{50, 0}, COSStream{} )
120  [main] DEBUG org.pdfbox.util.PDFTextStripper  -
processPageContents( COSObject{50, 0}, COSStream{} )
DEBUG - Processing content=COSStream{}
120  [main] DEBUG org.pdfbox.util.PDFTextStripper  -
Processing content=COSStream{}
120  [main] DEBUG org.pdfbox.util.PDFTextStripper  -
Processing content=COSStream{}
DEBUG - &amp;lt;q&amp;gt; - save state
130  [main] DEBUG org.pdfbox.util.PDFTextStripper  -
&amp;lt;q&amp;gt; - save state
130  [main] DEBUG org.pdfbox.util.PDFTextStripper  -
&amp;lt;q&amp;gt; - save state
DEBUG - &amp;lt;cm a=&amp;quot;614.0&amp;quot; b=&amp;quot;0.0&amp;quot; c=&amp;quot;0.0&amp;quot; d=&amp;quot;792.0&amp;quot; e=&amp;quot;0.0&amp;quot;
f=&amp;quot;0.0&amp;quot; &amp;gt;
130  [main] DEBUG org.pdfbox.util.PDFTextStripper  -
&amp;lt;cm a=&amp;quot;614.0&amp;quot; b=&amp;quot;0.0&amp;quot; c=&amp;quot;0.0&amp;quot; d=&amp;quot;792.0&amp;quot; e=&amp;quot;0.0&amp;quot; f=&amp;quot;0.0&amp;quot; &amp;gt;
130  [main] DEBUG org.pdfbox.util.PDFTextStripper  -
&amp;lt;cm a=&amp;quot;614.0&amp;quot; b=&amp;quot;0.0&amp;quot; c=&amp;quot;0.0&amp;quot; d=&amp;quot;792.0&amp;quot; e=&amp;quot;0.0&amp;quot; f=&amp;quot;0.0&amp;quot; &amp;gt;
DEBUG - &amp;lt;Q&amp;gt; - restore state
130  [main] DEBUG org.pdfbox.util.PDFTextStripper  -
&amp;lt;Q&amp;gt; - restore state
130  [main] DEBUG org.pdfbox.util.PDFTextStripper  -
&amp;lt;Q&amp;gt; - restore state
DEBUG - &amp;lt;Starting text object list&amp;gt;
130  [main] DEBUG org.pdfbox.util.PDFTextStripper  -
&amp;lt;Starting text object list&amp;gt;
130  [main] DEBUG org.pdfbox.util.PDFTextStripper  -
&amp;lt;Starting text object list&amp;gt;
DEBUG - &amp;lt;newline endOfFlush=&amp;quot;true&amp;quot;&amp;gt;
130  [main] DEBUG org.pdfbox.util.PDFTextStripper  -
&amp;lt;newline endOfFlush=&amp;quot;true&amp;quot;&amp;gt;
130  [main] DEBUG org.pdfbox.util.PDFTextStripper  -
&amp;lt;newline endOfFlush=&amp;quot;true&amp;quot;&amp;gt;
DEBUG - processPages( COSObject{87, 0} )
130  [main] DEBUG org.pdfbox.util.PDFTextStripper  -
processPages( COSObject{87, 0} )
130  [main] DEBUG org.pdfbox.util.PDFTextStripper  -
processPages( COSObject{87, 0} )
DEBUG - processPages( COSObject{55, 0} )
130  [main] DEBUG org.pdfbox.util.PDFTextStripper  -
processPages( COSObject{55, 0} )
130  [main] DEBUG org.pdfbox.util.PDFTextStripper  -
processPages( COSObject{55, 0} )
DEBUG - processPageContents( COSObject{55, 0},
COSStream{} )
140  [main] DEBUG org.pdfbox.util.PDFTextStripper  -
processPageContents( COSObject{55, 0}, COSStream{} )
140  [main] DEBUG org.pdfbox.util.PDFTextStripper  -
processPageContents( COSObject{55, 0}, COSStream{} )
DEBUG - Processing content=COSStream{}
140  [main] DEBUG org.pdfbox.util.PDFTextStripper  -
Processing content=COSStream{}
140  [main] DEBUG org.pdfbox.util.PDFTextStripper  -
Processing content=COSStream{}

java.lang.OutOfMemoryError
</detail>
		<follow_ups>
			<item>
				<date>1093869830</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I am closing this because I do not have a PDF document that 
I can use to reproduce the problem.  If this is still a problem 
please reopen issue</text>
			</item>
			<item>
				<date>1065578830</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I just fixed another similiar bug which may have fixed this 
issue.  Can you build from CVS and try again or mail me the 
PDF and I can verify.  If building is a problem, let me know 
and I can send you an interim release.</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1093869830</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1093869830</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="977267">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-06-22 00:35</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Unable to extract OpenOffice pdf export</summary>
		<detail>Unabe to extract text from a simple OpenOffice pdf 
export. (OOo1.1.2 / pdfbox0.6.5)
No Exception, first character is correct, others are may 
be encoded.
here my code:
SmbFile smbfile=new SmbFile(getProtocol()+getPathDoc()
+"/"+getNameDoc());
InputStream is=smbfile.getInputStream();
PDFParser parser = new PDFParser(is);
Parser.parse();
PDDocument pdDocument=parser.getPDDocument();
ByteArrayOutputStream out = new 
ByteArrayOutputStream();
PDFTextStripper stripper = new PDFTextStripper();
stripper.writeText(pdDocument, new OutputStreamWriter
(out));
	  
byte[] contents = out.toByteArray();
InputStreamReader input = new InputStreamReader(new 
ByteArrayInputStream(contents));
is.close();
pdDocument.close();
return input;

Thanks in advance.</detail>
		<follow_ups>
			<item>
				<date>1097338137</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Confirmed that was fixed in CVS so closing this issue.

Ben</text>
			</item>
			<item>
				<date>1097147478</date>
				<sender>mezzaluna</sender>
				<text>Logged In: YES 
user_id=1134048

Just checked with the current Nightly Build
(PDFBox-0.6.7-dev-20041007) and it works ...

Sorry for the inconvenience,
Andreas Ziegler
</text>
			</item>
			<item>
				<date>1097113840</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

mezzaluna,

can you attach or e-mail me the PDF

ben@csh.rit.edu</text>
			</item>
			<item>
				<date>1097062850</date>
				<sender>mezzaluna</sender>
				<text>Logged In: YES 
user_id=1134048

I seem to experience the same phenomenon. The reason lies in
decoding the "Indexed" colorspace:

   /ColorSpace [  /Indexed /DeviceRGB 1 &lt; 000000 FFFFFF &gt; ]

PDFBox interprets the last part as an array of size "1",
while the PDF1.4 specification says:

   [/Indexed base hival lookup]

"The color table is de&amp;#64257;ned by the lookup parameter, which
can be either a stream or (in PDF 1.2) a string. It provides
the mapping between index values and the corresponding
colors in the base color space. 

The color table data must be m × (hival + 1) bytes long,
where m is the number of color components in the base color
space. Each byte is an unsigned integer in the range 0 to
255 that is scaled to the range of the corresponding color
component in the base color space; that is, 0 corresponds to
the minimum value in the range for that component, and 255
corresponds to the maximum."

Sorry I can't be more specific; I just started to look into
the package ... 

Hope that helps,
Andreas Ziegler
</text>
			</item>
			<item>
				<date>1094857391</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Need more information.  Please attach PDF document if 
possible.  Please also try with nightly build as many bugs have 
been fixed.  It is also possible that the PDF that you have has 
a custom encoding and it is impossible to extract text from it.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1097338137</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1097338137</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1093978525</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="907432">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-03-01 02:21</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Exception While trying to extract pdf with Japanese fonts</summary>
		<detail>Hi,
We are trying to extract text from a pdf file containing 
Japanese characters. We get the following exception :
java.lang.NullPointerException.

Any poiters regarding any settings to be made?

Thanks,
sgurunat</detail>
		<follow_ups>
			<item>
				<date>1095986145</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I don't believe that this is an issue anymore, please reopen 
and attach a PDF if it is still an issue.

Ben</text>
			</item>
			<item>
				<date>1080136040</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

I have the similer problem while extracting text from pdf files
written in Chinese.

It show me exception like that: 
    "Unknow excoding for 'GBK-EUC-H' "

Why can't the pdfbox read and use the encoding dictionary
that contains in the directory "Resource/cmap", which packed 
up with the V0.6.5 release?

Please help me.

Thank you!

kingiori@126.com
or
kingiori@21cn.com</text>
			</item>
			<item>
				<date>1078838618</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Please try 0.6.5 and let me know if it works.  If not please e-
mail me the PDF and I will take a look at it.

ben@csh.rit.edu</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1095986145</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1095986145</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1093978529</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="880508">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-01-20 03:37</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>How to associate font into with the text extracted?</summary>
		<detail>How to associate font into with the text extracted?

PDFBox extracts text page by page. Each page will have 
some font info, how font info is associated with the text?

System.out.println("Font info ..");
			//System.out.println
("FD : "+dic.getItem(COSName.FontDescriptor));
			//System.out.println
("Type : "+dic.getItem(COSName.TYPE));
			System.out.println("Base 
Font : "+((COSName)dic.getItem
(COSName.BASE_FONT)).getName());
			System.out.println("Sub 
Type : "+((COSName)dic.getItem
(COSName.SUBTYPE)).getName());
			System.out.println
("Width : "+((COSArray)dic.getItem
(COSName.WIDTHS)).toString());

What is the use of WIDTHS key in COSName class?


</detail>
		<follow_ups>
			<item>
				<date>1094691992</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

TextPosition has contained font information for a few releases 
now.  Please let me know if that is not adequate.

Ben</text>
			</item>
			<item>
				<date>1077028530</date>
				<sender>tadwoods</sender>
				<text>Logged In: YES 
user_id=722301

Here is a modified version of the PDFStreamEngine.showString 
method that extracts font name and font size. As the 
pdmodel improves this should become simpler.

    private TextPositionX showString( byte[] string ) throws 
IOException
    {
        float xPos = 0;
        float yPos = 0;
        float width = 0;
        float fontSize = currentGraphicsState.fontSize.floatValue
();
        float lastCharWidth = fontSize; // This is a worst-case 
value
        float wordSpacing = 0;
        float padding = 0;
        StringBuffer encodedString = new StringBuffer( 
string.length );
        
		List charPosList = new ArrayList( 
string.length ); // save the width at each character

		COSDictionary fontCOSDictionary = 
(COSDictionary)currentGraphicsState.font.getCOSObject();
		COSName fontCOSName = (COSName)
fontCOSDictionary.getDictionaryObject
(COSName.BASE_FONT);
		String fontName = (fontCOSName != null ? 
fontCOSName.getName() : ""); // Type 3 fonts don't have 
BaseFont entry
 		fontName = fontName.substring
(fontName.indexOf("+")+1);
 		
        Matrix textRenderingMatrix = textMatrix.multiply
(currentGraphicsState.transformationMatrix);

		// get scale for conversion to device units 
(note: currently only works for horizontal text)
        float xScale = textRenderingMatrix.getValue(0,0);
        float yScale = textRenderingMatrix.getValue(1,1);

		// get the boundaries of the text clipping 
area (note: currently only works for horizontal text)
		float clipTextMin = (float)
currentGraphicsState.getClip().getMinX();
		float clipTextMax = (float)
currentGraphicsState.getClip().getMaxX();
		
        int codeLength = 1;
        for( int i=0; i&lt;string.length; i+=codeLength )
        {
            codeLength = 1;
            float characterWidth;
            /*
            log.debug( "Checking code '" + characterCode + "' 
font=" + currentFont +
                 " Tc=" + currentCharacterSpacing +
                 " Tw=" + currentWordSpacing +
                 " width=" + width );
             */
            String c = currentGraphicsState.font.encode( string, 
i, codeLength );
            if( c == null &amp;&amp; i+1&lt;string.length)
            {
                //maybe a multibyte encoding
                codeLength++;
                c = currentGraphicsState.font.encode( string, i, 
codeLength );
                characterWidth = 
(currentGraphicsState.font.getFontWidth( string, i, 
codeLength )/1000)*fontSize;
            }
            else
            {
                characterWidth = 
(currentGraphicsState.font.getFontWidth( string, i, 
codeLength )/1000)*fontSize;
            }
            if( c != null )
            {
                encodedString.append( c );
            }


            if( c != null )
            {
                // PDF Spec - 5.5.2 Word Spacing
                //
                // Word spacing works the same was as character 
spacing, but applies
                // only to the space character, code 32.
                //
                // Note: Word spacing is applied to every 
occurrence of the single-byte
                // character code 32 in a string.  This can occur 
when using a simple
                // font or a composite font that defines code 32 
as a single-byte code.
                // It does not apply to occurrences of the byte 
value 32 in multiple-byte
                // codes.
                //
                // RDD - My interpretation of this is that only 
character code 32's that
                // encode to spaces should have word spacing 
applied.  Cases have been
                // observed where a font has a space character 
with a character code
                // other than 32, and where word spacing (Tw) 
was used.  In these cases,
                // applying word spacing to either the non-32 
space or to the character
                // code 32 non-space resulted in errors 
consistent with this interpretation.
                //
                if ((string[i] == 0x20) &amp;&amp; (c == " "))
                {
                    padding = 
currentGraphicsState.characterSpacing + 
currentGraphicsState.wordSpacing;
                }
                else
                {
                    padding = 
currentGraphicsState.characterSpacing;
                }
            }
            if( i == 0 )
            {
                xPos = textRenderingMatrix.getValue( 2, 0 );
                yPos = textRenderingMatrix.getValue( 2, 1 );

                // RDD - Attempt to compute a "wordSpacing" 
value that represents the space between
                // words for space determination by the 
TextPosition user.
                //
                byte[] baseWidthChar = new byte[]{ (byte)'n'};
                if ("n".equals( currentGraphicsState.font.encode
(baseWidthChar, 0, 1) ) )
                {
                    wordSpacing = 
(currentGraphicsState.font.getFontWidth( baseWidthChar, 0, 
1 )/1000)*fontSize;
                }

                if (wordSpacing == 0)
                {
                    // If we can't a space character, or if its width 
was zero, we
                    // use the width of the current character.
                    //
                    wordSpacing = characterWidth;
                }

                if (wordSpacing == 0)
                {
                    // If we can't get any character width at all, 
we approximate
                    // using a percentage of the font height.
                    //
                    wordSpacing = fontSize * 0.075f;
                }

                wordSpacing += 
currentGraphicsState.wordSpacing;
            }

            if (characterWidth != 0)
            {
                // RDD - Track the last character width so that it 
can be used for
                // rough kerning approximation by the 
TextPosition user.
                //
                lastCharWidth = characterWidth;
            }

             if (c != null)
             {
             	for(int j = c.length()-1; j &gt;= 0; j--) // in 
case c contains more than one character due to failed 
encoding
             	{
             		boolean clippedLeft = (xPos + 
width + 
characterWidth*PdfBoxesExtractor.clippedCharacterTolerance 
&lt; clipTextMin);
             		boolean clippedRight = (xPos + 
width + characterWidth*(1.0f-
PdfBoxesExtractor.clippedCharacterTolerance) &gt; clipTextMax);
             		
             		CharacterPosition cp = new 
CharacterPosition(
             		
	characterWidth,padding,width + 
characterWidth,clippedLeft,clippedRight);
             		
				
	charPosList.add( cp );
            	}
             }
             
             width += characterWidth + padding;
       }

        // We want to update the textMatrix using the width, in 
text space units.
        //
        Matrix td = new Matrix();
        td.setValue( 2, 0, width * textMatrix.getValue(0,0));
        //log.debug( "TextMatrix before " + textMatrix );
        textMatrix = textMatrix.multiply( td );
        //log.debug( "TextMatrix after " + textMatrix );

        // Scale everything to convert to textRendering 
(device) units.
        //
        //float xScale = textRenderingMatrix.getValue(0,0);
        //float yScale = textRenderingMatrix.getValue(1,1);

        width *= xScale;
        fontSize *= yScale;
        lastCharWidth *= xScale;
        wordSpacing *= xScale;
        padding *= xScale;

        if (log.isDebugEnabled())
        {
            log.debug("TextPositionX" +
                      " x=" + xPos +
                      " y=" + yPos +
                      " width=" + (width - padding) +
                      " string=\"" + encodedString.toString() + "\"" +
                      " fontSize=" + fontSize +
                      " lastCharWidth=" + lastCharWidth +
                      " wordSpacing=" + wordSpacing +
                      " padding=" + padding + 
                      " font=" + fontName);
        }

		// scale the character position information
		for(int i = charPosList.size()-1; i &gt;= 0; i-- )
		{
			CharacterPosition cp = 
(CharacterPosition)charPosList.get(i);
			cp.setCharacterWidth( 
cp.getCharacterWidth() * xScale );
			cp.setTextWidth( 
cp.getTextWidth() * xScale );
			cp.setPadding( cp.getPadding() 
* xScale );
		}
		
		CharacterPosition[] charPos = 
(CharacterPosition[])charPosList.toArray(new 
CharacterPosition[charPosList.size()]);
		
		// note: the original PdfBox example 
includes padding in the text widths but we do not
		
		TextPositionX positionX = new 
TextPositionX( xPos, yPos, width - padding, 
encodedString.toString(),
                                                  fontSize, lastCharWidth, 
wordSpacing, padding,
                                                  charPos, fontName );
        textsList.add( positionX );

        return positionX;
    }
</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1094691992</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1094691992</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1093978530</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="840204">
		<submitted_by>tadwoods</submitted_by>
		<submitted_date>2003-11-11 11:34</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>TextPosition data wrong when orientation is landscape</summary>
		<detail>In PDFStreamEngaine.showString, the xScale and yScale 
values come out zero when a page is printed landscape 
(i.e. the page Rotation is 90) resulting in invalid 
TextPosition values for width, fontSize, padding, etc.
</detail>
		<follow_ups>
			<item>
				<date>1095985164</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Duplicate of 830512.</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1095985164</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1095985164</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1093978532</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="875606">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-01-12 11:46</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>missing endobj causing IOException</summary>
		<detail>I found some PDFs created by OmniForm that are failing 
to parse with the exception: java.io.IOException: 
expected='endobj' actual='0' 
org.pdfbox.io.PushBackInputStream

An excerpt of the offending objects follow. It appears 
that OmniForm fails to properly terminate objects that 
consist of only an array. However Acrobat Reader 
tolerates this.

Suggested solutions:
(A) Recognize the upcoming 'obj' command and 
inherently close the previous object.
(B) Have PdfBox continue reading, ignoring all input, until 
the next endobj is encountered.


13 0 obj
[
750 750 278 278 355 556 556 889 667 191 333 333 389 
584 278 333 
278 278 556 556 556 556 556 556 556 556 556 556 278 
278 584 584 
584 556 1015 667 667 722 722 667 611 778 722 278 500 
667 556 833 
722 778 667 778 722 667 611 722 667 944 667 667 611 
278 278 278 
469 556 333 556 556 500 556 556 278 556 556 222 222 
500 222 833 
556 556 556 556 333 500 278 556 500 722 500 500 500 
334 260 334 
584 750 556 750 222 556 333 1000 556 556 333 1000 
667 333 1000 750 
611 750 750 222 222 333 333 350 556 1000 333 1000 
500 333 944 750 
500 667 278 333 556 556 556 556 260 556 333 737 370 
556 584 333 
737 552 400 549 333 333 333 576 537 278 333 333 365 
556 834 834 
834 611 667 667 667 667 667 667 1000 722 667 667 667 
667 278 278 
278 278 722 722 778 778 778 778 778 584 778 722 722 
722 722 667 
667 611 556 556 556 556 556 556 889 500 556 556 556 
556 278 278 
278 278 556 556 556 556 556 556 556 549 611 556 556 
556 556 500 
556 500 
]
14 0 obj
&lt;&lt; 
/Type /Font
/Subtype /TrueType
/Name /F2
/BaseFont /TimesNewRoman,Bold
/FirstChar 30
/LastChar 255
/Encoding /WinAnsiEncoding
/FontDescriptor 15 0 R
/Widths 16 0 R
&gt;&gt;
endobj
15 0 obj
&lt;&lt; 
/Type /FontDescriptor
/Flags 34
/FontName /TimesNewRoman,Bold
/FontBBox [ -558 -307 2034 1026 ]
/MissingWidth 778
/StemV 85
/StemH 85
/ItalicAngle 0
/CapHeight 891
/XHeight 623
/Ascent 891
/Descent -216
/Leading 149
/MaxWidth 2592
/AvgWidth 427
&gt;&gt;
endobj
16 0 obj
[
778 778 250 333 555 500 500 1000 833 278 333 333 500 
570 250 333 
250 278 500 500 500 500 500 500 500 500 500 500 333 
333 570 570 
570 500 930 722 667 722 722 667 611 778 778 389 500 
778 667 944 
722 778 611 778 722 556 667 722 722 1000 722 722 667 
333 278 333 
581 500 333 500 556 444 556 444 333 500 556 278 333 
556 278 833 
556 500 556 556 444 389 333 556 500 722 500 500 444 
394 220 394 
520 778 500 778 333 500 500 1000 500 500 333 1000 
556 333 1000 778 
667 778 778 333 333 500 500 350 500 1000 333 1000 
389 333 722 778 
444 722 250 333 500 500 500 500 220 500 333 747 300 
500 570 333 
747 500 400 549 300 300 333 576 540 250 333 300 330 
500 750 750 
750 500 722 722 722 722 722 722 1000 722 667 667 667 
667 389 389 
389 389 722 722 778 778 778 778 778 570 778 722 722 
722 722 722 
611 556 500 500 500 500 500 500 722 444 444 444 444 
444 278 278 
278 278 500 556 500 500 500 500 500 549 500 556 556 
556 556 500 
556 500 
]
18 0 obj
&lt;&lt; 
/Type /Font
/Subtype /TrueType
/Name /F3
/BaseFont /ArialBlack
/FirstChar 30
/LastChar 255
/Encoding /WinAnsiEncoding
/FontDescriptor 19 0 R
/Widths 20 0 R
&gt;&gt;
endobj</detail>
		<follow_ups>
			<item>
				<date>1093995865</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed in CVS, will be available in 0.6.7+

Ben</text>
			</item>
			<item>
				<date>1073936938</date>
				<sender>tadwoods</sender>
				<text>Logged In: YES 
user_id=722301

Submitted by tadwoods (I forgot to log in)</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1093995865</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1093995865</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1093978531</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="921378">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-03-22 13:18</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>IOException: expected='endobj'</summary>
		<detail>I tried to extract text content from the following file 
http://java.sun.com/performance/reference/whitepapers/
XML_Test-1_0.pdf and I've got the following error:
java.io.IOException: expected='endobj' actual='0' 
org.pdfbox.io.PushBackInputStream@1e2ca7
     at org.pdfbox.pdfparser.PDFParser.parseObject
(PDFParser.java:416)
     at org.pdfbox.pdfparser.PDFParser.parse
(PDFParser.java:144)</detail>
		<follow_ups>
			<item>
				<date>1093995950</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed in CVS and will be available in release 0.6.7+.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1093995950</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1093995950</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1093978527</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="996450">
		<submitted_by>jkronegg</submitted_by>
		<submitted_date>2004-07-23 03:39</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Error: Could not find predefined CMAP file for 'Identity-H'</summary>
		<detail>Hello ben,

There is an exception in the attached file (using
PDFBox 0.6.6).

The stack trace is :

java.io.IOException: Error: Could not find predefined
CMAP file for 'Identity-H'
        at
org.pdfbox.pdmodel.font.PDFont.encode(PDFont.java:355)
        at
org.pdfbox.util.PDFStreamEngine.showString(PDFStreamEngine.java:169)
        at
org.pdfbox.util.PDFTextStripper.showString(PDFTextStripper.java:461)
        at
org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:695)
        at
org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:128)
        at
org.pdfbox.util.PDFTextStripper.processPage(PDFTextStripper.java:268)
        at
org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:200)
        at
org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:172)
        at
org.pdfbox.util.PDFTextStripper.getText(PDFTextStripper.java:99)


Thank you for your work on PDFBox.

Julien</detail>
		<follow_ups>
			<item>
				<date>1093996037</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed in CVS, will be available in the next release 0.6.7+.

Ben</text>
			</item>
			<item>
				<date>1092101953</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

You can google for the file Identity-H and add it into the 
CMAP resource folder in the jar file.</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>94962</id>
				<name>Garcia2003d__Support_vector_in_fourier_and_TFC_domains.pdf</name>
				<description>PDF file that produce the exception</description>
				<filesize>244278</filesize>
				<filetype></filetype>
				<adddate>1090579163</adddate>
				<submitted_by>820653</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1093996037</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1093996037</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1093978524</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>category_id</field>
				<old_value>100</old_value>
				<date>1090579214</date>
				<by>jkronegg</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>94962: Garcia2003d__Support_vector_in_fourier_and_TFC_domains.pdf</old_value>
				<date>1090579165</date>
				<by>jkronegg</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1085326">
		<submitted_by>kurthanner</submitted_by>
		<submitted_date>2004-12-14 11:25</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="556660">writing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Incorrect xref offsets</summary>
		<detail>When I load an existing PDF document and save it to a 
new file then the "xref" and "startref" objects will contain 
incorrect offsets.

I have experienced this problem with the current nightly 
builds (20041209 - 20041214). It does not occur with 
version 0.6.7a.

See attached files in pdf-docs.zip:
fox.pdf: the source document
fox-saved.pdf: saved document
fox-saved-fixed.pdf: saved document with manually 
corrected offsets (offset of the last object and the 
startxref offset)
</detail>
		<follow_ups>
			<item>
				<date>1103257813</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

please try again.

Ben</text>
			</item>
			<item>
				<date>1103223803</date>
				<sender>kurthanner</sender>
				<text>Logged In: YES 
user_id=1164704

The changes are actually not in CVS nor in the nightly build. 
Please check in as you find time.</text>
			</item>
			<item>
				<date>1103167815</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

fixed in CVS, ran decode example before and after change 
and xref appears correct.

Ben</text>
			</item>
			<item>
				<date>1103080037</date>
				<sender>horstreiterer</sender>
				<text>Logged In: YES 
user_id=1178504

I can confirm the problem and have a fix against the last
nightly build (2004-12-14):

diff -Naur orig/org/pdfbox/pdfwriter/COSWriter.java
dev/org/pdfbox/pdfwriter/COSWriter.java
--- orig/org/pdfbox/pdfwriter/COSWriter.java    2004-12-14
20:48:25.000000000 -0600
+++ dev/org/pdfbox/pdfwriter/COSWriter.java     2004-12-14
20:51:28.000000000 -0600
@@ -685,7 +685,7 @@

         try
         {
-            obj.writePDF( getOutput() );
+            obj.writePDF( getStandardOutput() );
             return null;
         }
         catch (IOException e)
@@ -861,7 +861,7 @@
     {
         try
         {
-            obj.writePDF( getOutput() );
+            obj.writePDF( getStandardOutput() );
             return null;
         }
         catch (IOException e)

In the case of COSBoolean's and null values, the
serialization was done via the actual output stream given by
the caller, not the COSStandardOutputStream. As a result,
the COSStandardOutputStream loses track of the offsets
because it cannot "see" the output and returns incorrect
data to the writer.

Ben, please test and integrate the fix!

Hope this helps!

Horst.</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>112458</id>
				<name>pdf-docs.zip</name>
				<description>The source and destination pdf files</description>
				<filesize>5470</filesize>
				<filetype></filetype>
				<adddate>1103052336</adddate>
				<submitted_by>1164704</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1103257813</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>1103167816</old_value>
				<date>1103257813</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>2</old_value>
				<date>1103223803</date>
				<by>kurthanner</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1103223803</date>
				<by>kurthanner</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1103167816</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1103167815</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>112458: pdf-docs.zip</old_value>
				<date>1103052336</date>
				<by>kurthanner</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="918220">
		<submitted_by>duffbeer703</submitted_by>
		<submitted_date>2004-03-17 10:56</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="293147"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>freezing/out of memory while parsing</summary>
		<detail>When executing the LucenePDFDocument.getDocument(
&lt;filename&gt;) method on certain PDFs, the application
freezes and eventually gets out of memory errors.

This seems to happen with vendor documenation from IBM.
I believe the PDFs are generated by FrameMaker, if that
matters. I'm attaching a sample.</detail>
		<follow_ups>
			<item>
				<date>1094077520</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Yes, that is where I fixed it.  SF says that Anon CVS can be 
up to 5 hours lagged.  So, it should be there no later than 
about 8pm EST.  

Ben</text>
			</item>
			<item>
				<date>1094075826</date>
				<sender>cutting</sender>
				<text>Logged In: YES 
user_id=21778

CVS HEAD still hangs for me when parsing
http://www.ehdo.go.jp/kyoto/antore/anto.pdf, but perhaps
anonymous CVS is lagging? 
http://cvs.sourceforge.net/viewcvs.py/pdfbox/pdfbox/src/org/pdfbox/cmapparser/
 does not yet show a new version.  Is this where you fixed this?</text>
			</item>
			<item>
				<date>1094068522</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

This was a problem with the cmap parser, this is fixed in CVS 
and will be available in 0.6.7+.

Ben</text>
			</item>
			<item>
				<date>1094060131</date>
				<sender>cutting</sender>
				<text>Logged In: YES 
user_id=21778

Here's a document which hangs PDFBox for me:

http://www.ehdo.go.jp/kyoto/antore/anto.pdf

This is a problem for Nutch.

Thanks,

Doug</text>
			</item>
			<item>
				<date>1086840113</date>
				<sender>paulevan</sender>
				<text>Logged In: YES 
user_id=722382

I am also receiving an out of memory error.

This file will repro it for me:
http://www.americasarmy.com/downloads/files/AA_manual.pdf

If I comment out this line (stripper.writeText(pdfDoc,
writer);) then I don't run out of memory.

Here is the code frag that I am using:

PDFParser parser = new PDFParser(new FileInputStream(pdfFile));
parser.parse();
pdfDoc = parser.getPDDocument();
		
OutputStreamWriter writer = new OutputStreamWriter(out);
PDFTextStripper stripper = new PDFTextStripper();
stripper.writeText(pdfDoc, writer);
writer.close();


Thanks</text>
			</item>
			<item>
				<date>1079619013</date>
				<sender>duffbeer703</sender>
				<text>Logged In: YES 
user_id=624756

Here's one that is known to not work:
http://publib.boulder.ibm.com/tividd/td/sis/sis36ga/en_US/PDF/sis36ga.pdf

There are others as well if you want to compare... they are
linked from this page:
http://publib.boulder.ibm.com/tividd/td/tdmktlist.html
</text>
			</item>
			<item>
				<date>1079614794</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I don't see the attachement.  Make sure you check the file 
attachment checkbox when you submit.  Or if the 
documentation is publicly available, just post the link.

Thanks for the feedback,
Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1094068522</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1094068522</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1093978528</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="835290">
		<submitted_by>tadwoods</submitted_by>
		<submitted_date>2003-11-03 13:04</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>EOFException reading InflaterInputStream</summary>
		<detail>&amp;quot;java.io.EOFException: Unexpected end of ZLIB input 
stream&amp;quot; occurs in a particular PDF that contains multiple 
pages of images. If I use Acrobat to extract any 
individual page to a new PDF file the exception will not 
occur parsing that PDF, so the error is not specific to 
any individual page. However it will occur if I extract and 
parse any two or more pages.

Stack trace:

InflaterInputStream.fill() line: not available [local 
variables unavailable]
InflaterInputStream.read(byte[], int, int) line: not 
available
FlateFilter.decode(InputStream, OutputStream, 
COSDictionary) line: 78
COSStream.doDecode(COSName) line: 289
COSStream.doDecode() line: 241
COSStream.getUnfilteredStream() line: 189

Additional information:

I experimented with the code in COSStream.doDecode
(COSName)...if I change the line &amp;quot;length--;&amp;quot; to &amp;quot;position-
-;&amp;quot; the PDF will parse successfully after the exception is 
caught one time.</detail>
		<follow_ups>
			<item>
				<date>1095985099</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

This was added to COSStream a little while back.  Please let 
me know if this is still a problem.

Ben</text>
			</item>
			<item>
				<date>1073937461</date>
				<sender>tadwoods</sender>
				<text>Logged In: YES 
user_id=722301

I continue to encounter a number of PDFs with this error. 
Some PDFs with this problem have only images on all pages, 
but some have pages with images and pages with text. The 
creator is "Not Available". he producer is "activePDF Toolkit 
(www.activepdf.com)".</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1095985099</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1095985099</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1093978533</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1170068">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-03-24 10:27</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>text field is not found</summary>
		<detail>Hello all, 
It seems something wrong with 
org.pdfbox.pdmodel.interactive.form.PDAcroForm.getFiel
d(String name)
Example PrintFields prints field "surname" in the list, 
but SetField says: "No field found with name:surname".
Could you please check if this condition works properly: 
if ( fieldName.getString().equals( name ) )
or maybe this field has a different type, not 
COSString fieldName = (COSString)
element.getDictionaryObject( COSName.getPDFName
( "T" ) );
__________________________________________
Please try to get field "surname" from attached file.
Sincerely, Ilya
</detail>
		<follow_ups>
			<item>
				<date>1113180979</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed in 0.7.1.

Ben</text>
			</item>
			<item>
				<date>1111916083</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

Look in the PrintFields example, it tries to decrypt the
document with a blank password. SetField doesn't bother.
This just caught me out also.</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>127036</id>
				<name>imm1295b.pdf</name>
				<description></description>
				<filesize>222931</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1111688843</adddate>
				<submitted_by>100</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1113180979</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1113180979</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1113180978</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>127036: imm1295b.pdf</old_value>
				<date>1111688843</date>
				<by>nobody</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="878903">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-01-17 08:56</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Extracting special non-english-alphabet characters</summary>
		<detail>Extracting the text that contains characters found in
the Croatian language (in the regional settings  code
page conversion tables, the language is specified as
MAC 10082 on windows).

What happens is that the text that is extracted from
the PDF file contains a '?' (question mark, without the
single quotes) for each occurence of any of the special
non-english-alphabet characters found in the target
croatian language. The other output is a question-mark
followed by a newline (depends what character is found)

PDF file read has the following properties:
Document creator: PScript5.dll Version 5.2,
PDFDistiller for WIndows (converted from MS Word), PDF
Version: 1.3 (Reader 4.x)

Is there anything else that I should be doing - is
there a settings that must additionaly be set to read
these files properly (Perhaps something to do with the
font.properties file?)

Any suggestions is much appreciated!</detail>
		<follow_ups>
			<item>
				<date>1095986064</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Many new improvements to the character encoding, verify 
that you are extracting to UTF-16 when using non-ascii 
characters.

Ben</text>
			</item>
			<item>
				<date>1082102276</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

I tried the new encode() method and it works fine with Greek 
pdf's.</text>
			</item>
			<item>
				<date>1075104347</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

Hi I was having the same problem for central european 
character set, in my case slovak and I have workaround for 
this. I am not sure wheter or not it is proper solution but 
nevertheless it solved my problem. I have asked Ben for his 
opinion.

So what you have to do is to modify PDFont.encode method

    public String encode( byte[] c, int offset, int length ) 
throws IOException
    {
        String retval = new String( c );
        COSName fontSubtype = (COSName)
font.getDictionaryObject( COSName.getPDFName
( "Subtype" ) );
        if( (fontSubtype.getName().equals( "Type0" ) ||
            fontSubtype.getName().equals( "TrueType" ) ) &amp;&amp;
            font.getDictionaryObject( COSName.getPDFName
( "ToUnicode" ) ) != null )
        //if( getDictionaryObject( COSName.getPDFName
( "ToUnicode" ) ) != null )
        {
            retval = "";
            COSStream toUnicode = (COSStream)
font.getDictionaryObject( COSName.getPDFName
( "ToUnicode" ) );
            if( toUnicode != null )
            {
                if( cmap == null )
                {
                    CMapParser parser = new CMapParser( 
toUnicode.getUnfilteredStream(), toUnicode.getScratchFile
() );
                    parser.parse();
                    cmap = parser.getResult();
                }
                retval = cmap.lookup( c, offset, length );
            }
        }
        else
        {
            Encoding encoding = getEncoding();
            if( encoding != null )
            {
              if (c.length == 1 &amp;&amp; length == 1)
                retval = new String(c);
              else
                retval = encoding.getCharacter( 
getCodeFromArray( c, offset, length ) );
            }
        }
        return retval;
    }
</text>
			</item>
			<item>
				<date>1074392492</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

What encoding are you using when you extract the text?  
The org.pdfbox.ExtractText program allows you to set 
encoding.  The encoding you mentioned might be available on 
your platform but you might need to try unicode.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1095986064</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1095986064</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1093978530</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="996050">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-07-22 10:24</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Class Cast exception when importing</summary>
		<detail>Installed 6.6 and am now getting a class cast exception 
when importing FDF.  Error follows:

Processing COSString{eeSSN} &lt;--- first form field in pdf
&lt;Jul 22, 2004 12:18:18 PM CDT&gt; &lt;Error&gt; &lt;HTTP&gt; &lt;
[WebAppServletContext
(32697505,iEnrollment,/iEnrollment)] Servlet failed with 
Exception
java.lang.ClassCastException
	at 
org.pdfbox.pdmodel.interactive.annotation.PDAppearance
Dictionary.getNormalAppearance
(PDAppearanceDictionary.java:115)
	at 
org.pdfbox.pdmodel.interactive.form.PDAppearance.&lt;init&gt;
(PDAppearance.java:103)
	at 
org.pdfbox.pdmodel.interactive.form.PDTextbox.setValue
(PDTextbox.java:111)
	at 
org.pdfbox.pdmodel.interactive.form.PDField.importFDF
(PDField.java:217)
	at org.pdfbox.examples.fdf.ImportFDF.importFDF
(ImportFDF.java:100)
	at 
com.reliastar.wfs.iEnrollment.servlets.EOIFormServlet.doG
et(EOIFormServlet.java:72)
	at javax.servlet.http.HttpServlet.service
(HttpServlet.java:740)
	at javax.servlet.http.HttpServlet.service
(HttpServlet.java:853)
	at 
weblogic.servlet.internal.ServletStubImpl.invokeServlet
(ServletStubImpl.java:265)
	at 
weblogic.servlet.internal.ServletStubImpl.invokeServlet
(ServletStubImpl.java:200)
	at 
weblogic.servlet.internal.WebAppServletContext.invokeSe
rvlet(WebAppServletContext.java:2546)
	at 
weblogic.servlet.internal.ServletRequestImpl.execute
(ServletRequestImpl.java:2260)
	at weblogic.kernel.ExecuteThread.execute
(ExecuteThread.java:139)
	at weblogic.kernel.ExecuteThread.run
(ExecuteThread.java:120)
&gt; 

Let me know if I can provide additional information.

Thanks,
Bill</detail>
		<follow_ups>
			<item>
				<date>1095989599</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Thanks for the patch onb, it is not integrated into CVS.

Ben</text>
			</item>
			<item>
				<date>1092393803</date>
				<sender>onb</sender>
				<text>Logged In: YES 
user_id=1102802

The following change should solve this issue.
-- Osvaldo.

------------------------------------------
RCS 
file: /cvsroot/pdfbox/pdfbox/src/org/pdfbox/pdmodel/interactiv
e/annotation/PDAppearanceDictionary.java,v
retrieving revision 1.1
diff -r1.1 PDAppearanceDictionary.java
105,106c105,107
&lt; ap = new COSDictionary();
&lt; ((COSDictionary)ap).setItem(COSName.getPDFName
( "default" ), ap );
---
&gt; COSStream aux = (COSStream) ap;
&gt; ap = new COSDictionary();
&gt; ((COSDictionary)ap).setItem(COSName.getPDFName
( "default" ), aux );
------------------------------------------</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1095989599</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1095989599</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="995914">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2004-07-22 06:20</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>NPE is isButton for org.pdfbox.examples.fdf.PrintFields</summary>
		<detail>I just got started with PDFBox. I tried to call 
org.pdfbox.examples.fdf.PrintFields on one existing PDF 
containing a lot of form fields. PDFBox 0.6.4 crashes:

java.lang.NullPointerException
at 
org.pdfbox.pdmodel.annotation.interactive.PDFieldFactory
.isButton(PDFieldFactory.java:166)
at 
org.pdfbox.pdmodel.annotation.interactive.PDFieldFactory
.createField(PDFieldFactory.java:67)
at 
org.pdfbox.pdmodel.annotation.interactive.PDAcroForm.g
etFields(PDAcroForm.java:111)
at org.pdfbox.examples.fdf.PrintFields.printFields
(PrintFields.java:70)
at org.pdfbox.examples.fdf.PrintFields.main
(PrintFields.java:129)</detail>
		<follow_ups>
			<item>
				<date>1095989257</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

This was fixed in CVS a while back.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1095989257</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1095989257</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1093978525</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="955043">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-05-16 18:14</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="293147"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Extracting from pdf with Chinese  characters</summary>
		<detail>I read the news about PDFBox that it's implmenting CJK 
supports. So now I am testing if it can support CJK 
characters extracting. Result: NO. Here is the exception.


Exception in thread "main" java.io.IOException: Unknown 
encoding for 'ETenms-B5-
H'
        at 
org.pdfbox.encoding.EncodingManager.getEncoding
(EncodingManager.java:83)
        at org.pdfbox.pdmodel.font.PDFont.getEncoding
(PDFont.java:436)
        at org.pdfbox.pdmodel.font.PDFont.encode
(PDFont.java:325)
        at org.pdfbox.util.PDFStreamEngine.showString
(PDFStreamEngine.java:169)
        at org.pdfbox.util.PDFTextStripper.showString
(PDFTextStripper.java:461)
        at 
org.pdfbox.util.PDFStreamEngine.processOperator
(PDFStreamEngine.java:692)
        at org.pdfbox.util.PDFStreamEngine.processStream
(PDFStreamEngine.java:128)
        at org.pdfbox.util.PDFTextStripper.processPage
(PDFTextStripper.java:268)

        at org.pdfbox.util.PDFTextStripper.processPages
(PDFTextStripper.java:200)
        at org.pdfbox.util.PDFTextStripper.writeText
(PDFTextStripper.java:172)
        at org.pdfbox.util.PDFTextStripper.writeText
(PDFTextStripper.java:120)
        at test.pdfbox.util.TestTextStripper.doTestFile
(TestTextStripper.java:166)
        at test.pdfbox.util.TestTextStripper.testExtract
(TestTextStripper.java:263)</detail>
		<follow_ups>
			<item>
				<date>1095988998</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

This encoding is a synonym of another encoding.  I added 
cmap name substitutions to PDFont to support this.  Please 
try again and reopen if it is still a problem.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1095988998</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1095988998</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1093978527</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1024169">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-09-07 22:32</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>java.io.IOException: Error: Expected an integer type, actual</summary>
		<detail>java.io.IOException: Error: Expected an integer type, 
actual='L?s?'
	at org.pdfbox.pdfparser.BaseParser.readInt
(BaseParser.java:1213)
	at org.pdfbox.pdfparser.PDFParser.parseObject
(PDFParser.java:370)
	at org.pdfbox.pdfparser.PDFParser.parse
(PDFParser.java:144)
	at org.pdfbox.ExtractText.parseDocument
(ExtractText.java:297)
	at org.pdfbox.ExtractText.getTextContent
(ExtractText.java:262)
	at org.pdfbox.ExtractText.main
(ExtractText.java:92)
Exception in thread "main" 

when I am trying to parse a PDF file I am getting the 
above exeception

please could you held me out in this</detail>
		<follow_ups>
			<item>
				<date>1094647372</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

submitted twice</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1094647372</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1094647372</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1024174">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-09-07 22:53</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>java.io.IOException: Error: Expected an integer type, actual</summary>
		<detail>java.io.IOException: Error: Expected an integer type, 
actual='L?s?'
at org.pdfbox.pdfparser.BaseParser.readInt
(BaseParser.java:1213)
at org.pdfbox.pdfparser.PDFParser.parseObject
(PDFParser.java:370)
at org.pdfbox.pdfparser.PDFParser.parse
(PDFParser.java:144)
at org.pdfbox.ExtractText.parseDocument
(ExtractText.java:297)
at org.pdfbox.ExtractText.getTextContent
(ExtractText.java:262)
at org.pdfbox.ExtractText.main
(ExtractText.java:92)
Exception in thread "main" 

when I am trying to parse a PDF file I am getting the 
above exeception

please could you held me out in this </detail>
		<follow_ups>
			<item>
				<date>1098037500</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

If this is due to 1.5 object streams then it has been fixed in 
CVS.  Please let me know if it is still a problem with tonight 
nightly build.

Ben</text>
			</item>
			<item>
				<date>1097024511</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I believe this issue is due to PDF documents that use the new 
PDF 1.5 object streams.

If you open up the pdf in a text editor and search for the 
string 'ObjStm' and find it then that means it is using the new 
object stream.  PDFBox does not support object streams yet 
but this is the next RFE to be implemented.

Ben</text>
			</item>
			<item>
				<date>1096228751</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I still don't have a PDF document for this yet.  I can't fix this 
issue if I can't reproduce it.  

Ben</text>
			</item>
			<item>
				<date>1094692248</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Then please mail or send link to the PDF document.</text>
			</item>
			<item>
				<date>1094647993</date>
				<sender>santoshp</sender>
				<text>Logged In: YES 
user_id=1117929

I cant attach the PDF here</text>
			</item>
			<item>
				<date>1094647425</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Is it possible for you to mail me or attach the PDF document?  

ben@csh.rit.edu</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1098037501</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1098037500</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1023460">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-09-06 23:03</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>when I parse I am not getting the correct content</summary>
		<detail>When I parse the pdf file, I am not getting the correct 
content.  I want to know why it is giving like this</detail>
		<follow_ups>
			<item>
				<date>1096226561</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Unable to reproduce.

Ben</text>
			</item>
			<item>
				<date>1094647280</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

The information that you have given me is not enough to do 
anything.  There is no way for me to test if I have actually 
fixed the bug or not.

I must note that there are some PDF documents that it is 
impossible to extract content out of.  This is because some 
PDF documents use a meaningless encoding.

Without the PDF it is impossible for me to determine what the 
problem is.  I will need to close this issue without further 
information.

Ben</text>
			</item>
			<item>
				<date>1094647211</date>
				<sender>santoshp</sender>
				<text>Logged In: YES 
user_id=1117929

It is parsing other PDFs except one.  I cannot send you the 
PDF.  I am running this in eclipse. and I am giving the PDF as 
argument.  It is not giving any errors but I am not getting the 
content it should give.  It is give some content with boxes.
I dont know that is it encrypted or not. </text>
			</item>
			<item>
				<date>1094646977</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

It is working fine for other PDFs except one.  I am running this 
in eclipse. I cannot send you the PDF file. It is not giving any 
error. It simply parsing the file, but not giving the expected 
content. </text>
			</item>
			<item>
				<date>1094569491</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I need more information.  Please post/email the PDF if 
possible.  Is there an error message?  What happened/what 
did you expect to happen?  Are you using a command line app 
org.pdfbox.ExtractText or your own source, please post 
source or complete command line.

ben@csh.rit.edu</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1096226561</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1096226561</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1033455">
		<submitted_by>maxim72</submitted_by>
		<submitted_date>2004-09-23 08:24</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Wrong text formatting after parsing Landscape-formated .pdf</summary>
		<detail>PDFBox 0.6.7 (CVS HEAD version)

Output text file has carriage return(line feed)character 
after each parsed text character.

Attached source pdf document and output text file, 
which demonstrates a problem.</detail>
		<follow_ups>
			<item>
				<date>1096228689</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

maxim72,

Thanks for the bug report.  I took a look at the PDF and this 
is actually the same issue as bug 830512.  The problem is 
that the pags in the document have a Rotation applied to 
them.  So the x/y coordinates that PDFBox is calculating are 
all wrong.  I took the document that you attached and 
attached it to that issue.  

I am going to close this issue but please monitor the other 
bug.

Ben</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>102541</id>
				<name>test.zip</name>
				<description>.zip file, which includes source pdf document and output text file</description>
				<filesize>250453</filesize>
				<filetype></filetype>
				<adddate>1095953077</adddate>
				<submitted_by>1115651</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1096228689</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1096228689</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>102541: test.zip</old_value>
				<date>1095953077</date>
				<by>maxim72</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="860027">
		<submitted_by>jabrown</submitted_by>
		<submitted_date>2003-12-14 14:42</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Cant handle PDF documents made in OO</summary>
		<detail>Here's a stack trace from one such document:

[john@localhost PDFBox-0.6.4]$ java
org.pdfbox.ExtractText
/home/john/work_stuff/PDFs/egovstrategy.pdf
/tmp/temp_pdf_file_john.txt
log4j:WARN No appenders could be found for logger
(org.pdfbox.ExtractText).
log4j:WARN Please initialize the log4j system properly.
Exception in thread &amp;quot;main&amp;quot;
java.lang.ClassCastException: org.pdfbox.cos.COSObject
        at
org.pdfbox.encoding.DictionaryEncoding.&amp;lt;init&amp;gt;(DictionaryEncoding.java:66)
        at
org.pdfbox.cos.COSObject.getEncoding(COSObject.java:283)
        at
org.pdfbox.cos.COSObject.encode(COSObject.java:224)
        at
org.pdfbox.util.PDFTextStripper.showString(PDFTextStripper.java:959)
        at
org.pdfbox.util.PDFTextStripper.handleOperation(PDFTextStripper.java:788)
        at
org.pdfbox.util.PDFTextStripper.process(PDFTextStripper.java:379)
        at
org.pdfbox.util.PDFTextStripper.process(PDFTextStripper.java:366)
        at
org.pdfbox.util.PDFTextStripper.processPageContents(PDFTextStripper.java:288)
        at
org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:231)
        at
org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:223)
        at
org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:223)
        at
org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:148)
        at
org.pdfbox.ExtractText.main(ExtractText.java:189)
</detail>
		<follow_ups>
			<item>
				<date>1094691904</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

The egovstrategy.pdf that I have is corrupt.  If there is 
another I will give it a try.  I have tried 
ToscanaJ_User_Manual.pdf and it works now.  Please give the 
nightly build a try.

Ben</text>
			</item>
			<item>
				<date>1081208746</date>
				<sender>peterbecker</sender>
				<text>Logged In: YES 
user_id=41603

I have the same problem, although just with some OpenOffice
created documents. Here is an example that fails for me:
-  http://www.wormuth.info/ICFCA04/ToscanaJ_User_Manual.pdf

This document fails to be extracted with 0.6.5, and some
older version (I think it was 0.6.1).

Here is the code used to do the extraction:
-
http://cvs.sourceforge.net/viewcvs.py/toscanaj/docco/plugins/pdfbox/source/org/tockit/docco/documenthandler/PdfDocumentHandler.java?rev=1.7&amp;view=auto
</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1094691904</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1094691904</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1093978532</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="881428">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-01-21 07:03</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Document encoding determination</summary>
		<detail>Is there any way to determine encoding used in the pdf 
document and thus to extract text in proper encoding ?</detail>
		<follow_ups>
			<item>
				<date>1094692095</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

The best way is to always extract to unicode.  From there 
you can encode to whatever encoding you want.  I don't 
believe it should be the resposibility of PDFBox to determine 
what encoding a string could be turned into.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1094692095</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1094692095</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1093978530</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="882216">
		<submitted_by>tadwoods</submitted_by>
		<submitted_date>2004-01-22 08:23</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Complex transformation matrices making incorrect coordinates</summary>
		<detail>The user space coordinates calculated for objects in 
PDFs created by the PDFMAILER software (see 
PDFMailer.Com) are incorrect. I noticed that these PDFs 
contain some unusual scaling and coordinate 
transformations. Acrobat Reader displays these PDFs 
correctly but PDFBox is coming up with incorrect 
coordinates for most of the drawing and text objects. 

I did some research but the math is a little over my head 
on this one. My first thought was that 
org.pdfbox.util.Matrix.multiply() should be multiplying 
the "b" matrix by the current matrix, instead of the other 
way around, which it currently does. Section 4.2.3 of 
the PDF Spec does imply that that should be the case. 
While this may be true, and it did appear to make some 
coordinates more accurate, it did not fix the problem by 
itself.

For example, the PDF contains cm and save/restore 
state commands in the following sequence (drawing 
operations in between are removed):

...
&lt;cm a="1.0" b="0.0" c="0.0" d="1.0" e="14.0" f="763.0" &gt;
&lt;q&gt;
&lt;q&gt;
&lt;cm a="13.0" b="0.0" c="0.0" d="13.0" e="4.0" f="1.0" &gt;
&lt;Q&gt;
&lt;Q&gt;
&lt;cm a="0.24" b="0.0" c="0.0" d="-0.24" e="0.0" f="0.0" &gt;
...

Drawing and text after this point in the PDF produce 
incorrect user space coordinates.</detail>
		<follow_ups>
			<item>
				<date>1094692179</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

The matrix multiplication was wrong and has now been 
corrected please give the nightly build a try.

Ben</text>
			</item>
			<item>
				<date>1077127383</date>
				<sender>tadwoods</sender>
				<text>Logged In: YES 
user_id=722301

Addson,

I reposted and attempted to answer your question in the Help 
Forum for this project.</text>
			</item>
			<item>
				<date>1077123163</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

How can I keep the layout of table after converted the pdf
file to txt file? My problem is if there is a row of pdf
table whith 2 lines it works as if it were 2 rows on txt
file. And can't I separate the fields of txt table converted
with any string or character? 

Thanks

Addson Bastos

</text>
			</item>
			<item>
				<date>1077033514</date>
				<sender>tadwoods</sender>
				<text>Logged In: YES 
user_id=722301

I have come across additional PDFs generated by the 
PDFMAILER (www.pdfmailer.com) that extract garbage in 
place of some text. In this case Acrobat displays the text on-
screen correctly but cosmetically poor, prints cosmetically 
very well, and if you try to copy/paste the text it copies 
garbage.</text>
			</item>
			<item>
				<date>1074788787</date>
				<sender>tadwoods</sender>
				<text>Logged In: YES 
user_id=722301

Oops, the code example didn't appear in the original comment. 
Here it is...

&amp;lt;cm a="1.0" b="0.0" c="0.0" d="1.0" e="14.0" f="763.0"&amp;gt;
&amp;lt;q&amp;gt;
&amp;lt;q&amp;gt;
&amp;lt;cm a="13.0" b="0.0" c="0.0" d="13.0" e="4.0" f="1.0"&amp;gt;
&amp;lt;Q&amp;gt;
&amp;lt;Q&amp;gt;
&amp;lt;cm a="0.24" b="0.0" c="0.0" d="-0.24" e="0.0" f="0.0"&amp;gt;</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1094692180</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1094692179</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1093978529</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="969592">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-06-09 06:27</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Problems with german characters</summary>
		<detail>German characters like ü, ö, ä can not be extracted. 
The text extractor extracts only the two dots above the
character and places a whitespace instead of the right
character. We use the UTf-16 encoding.</detail>
		<follow_ups>
			<item>
				<date>1094692345</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

actually never mind, this is a dupe of 1000165, and that issue 
has more comments and a test PDF.  Closing this issue.</text>
			</item>
			<item>
				<date>1094692221</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Please attach a PDF that I can use to test with.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1094692345</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1094692345</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1093978526</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1039166">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-10-02 14:18</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>PDTextStream Constructor Error</summary>
		<detail>A constructor in PDTextStream is doing a self 
assignment to it's COSStream member variable:

public PDTextStream(COSStream str){
    stream = stream;
}

should be changed to:

public PDTextStream(COSStream str){
   stream = str;
}</detail>
		<follow_ups>
			<item>
				<date>1096834681</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed in CVS.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1096834681</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1096834681</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1011244">
		<submitted_by>onb</submitted_by>
		<submitted_date>2004-08-18 00:03</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>writeDecodedDoc example on a file with textFields</summary>
		<detail>After running writeDecodedDoc example on a PDF file 
with a textField with border and background, the field is 
not visible in the output file until it gains focus.

I reproduced this behaviour with PDFBox 0.6.6 and with 
current CVS version.

testdoc.zip contains 3 sample files:

testdoc-a.pdf is a not encrypted PDF file that contains 
one textField with red background.
testdoc-b.pdf is the encrypted version of testdoc-a.pdf
testdoc-c.pdf is the result of running writeDecodedDoc 
on testdoc-b.pdf

When you open testdoc-c.pdf using Abrobat5.0 or 6.0, 
you'll see that the field is there but it's not visible until it 
gains focus.  If you open field's properties box and click 
Ok then the field is visible again.

If need more info let me know.
Regards,
-- Osvaldo.

</detail>
		<follow_ups>
			<item>
				<date>1095815145</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Thanks for the bug report.  There was a problem when 
reading in extra carriage return bytes and decrypting them 
into garbage.  This has been fixed in CVS.

Ben</text>
			</item>
			<item>
				<date>1092814543</date>
				<sender>onb</sender>
				<text>Logged In: YES 
user_id=1102802

I visually compared testdoc-a.pdf and testdoc-c.pdf using 
pdfViewer and found 2 differences. 
I Don't know if they are significant or not.

1. Field's appearance stream is the same in both files except 
for an ending "Z" in testdoc-c.pdf 
   (Dictionary-&gt;AcroForm-&gt;Fields[0]-&gt;AP-&gt;N:Stream )

2. testdoc-a.pdf has an attribute at the root level 
called "Prev" with value 10294.

-- Osvaldo.</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>98207</id>
				<name>testdoc.zip</name>
				<description>Sample files that reproduce writeDecodedDoc bug.</description>
				<filesize>20319</filesize>
				<filetype></filetype>
				<adddate>1092812580</adddate>
				<submitted_by>1102802</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1095815145</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1095815144</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1093978522</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>98207: testdoc.zip</old_value>
				<date>1092812580</date>
				<by>onb</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1025060">
		<submitted_by>ralphscheuer</submitted_by>
		<submitted_date>2004-09-09 05:13</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>PDFTextStripper extracting garbage</summary>
		<detail>The releases 0.6.6 and 0.6.5 are concerned regarding the following 
problem. I have already posted this to the forum here and thought 
I might as well file a bug so that this won't be forgotten. 

https://sourceforge.net/forum/forum.php?
thread_id=1069693&amp;forum_id=267205

The issue can be reproduced with the following PDF: 
http://www.adobe.com/products/acrobat/pdfs/docsforms.pdf

Release 0.6.4 extracts the correct content but there are 
superfluous spaces inside the words, the subsequent releases 0.6.5 
and 0.6.6 produce complete garbage (see my previous post to the 
forum)

I will also test this against the nightly builds to check if anything 
has changed. 

BTW Ben, thanks for all the work you put into this, I really 
appreciate it. </detail>
		<follow_ups>
			<item>
				<date>1096226720</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

It works for me as well using CVS HEAD so I am closing this 
issue.

Ben</text>
			</item>
			<item>
				<date>1094733775</date>
				<sender>ralphscheuer</sender>
				<text>Logged In: YES 
user_id=1034839

This issue seems to be resolved with the nightly from September 9. 

I will perform some additional tests to verify this, but this nightly 
definitely seems to be on the right track. 

Thanks a lot!!!</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1096226720</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1096226720</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1094732247</date>
				<by>ralphscheuer</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1029873">
		<submitted_by>thansson</submitted_by>
		<submitted_date>2004-09-17 06:35</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Parse error, xref where startxref expected   </summary>
		<detail>In version 1.5 PDF documents, there are instances 
where a second xref occurs. Here is a sample:

...
xref
0 877
0000000004 65535 f
...
0000000875 65535 f
trailer
&lt;&lt;/Size 877/Root 1 0 R&gt;&gt;
xref
0 0
trailer
&lt;&lt;/Size 877/Prev 146059/XRefStm 13250/Root 1 0 
R/Info 3 0 R/ID
[&lt;ba621c7edc7ff44087e57959635906b2&gt;&lt;ca3c426b2a2f9
0449a84032343002aaa&gt;]&gt;&gt;
startxref
163647
%%EOF

This consistently happens in PDF documents published 
from Adobe Designer 6.0

Sample PDF file is attached.</detail>
		<follow_ups>
			<item>
				<date>1096532091</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

Working for me as well. thanks.
&gt;&gt;Date: 2004-09-23 03:42
&gt;&gt;Sender: nobody
&gt;&gt;Logged In: NO 

&gt;&gt;I am also having a similar problem and my stackTrace reads 
&gt;&gt;something like following:
</text>
			</item>
			<item>
				<date>1096292609</date>
				<sender>thansson</sender>
				<text>Logged In: YES 
user_id=197342

Confirmed as working on the sample PDF files that I have.

Thanks!
</text>
			</item>
			<item>
				<date>1096228183</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I added support for multiple xref sections and it now works 
fine on the document that you attached.  Please try the next 
nightly build and let me know if it works for other documents 
that you are processsing.

Ben</text>
			</item>
			<item>
				<date>1095936150</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

I am also having a similar problem and my stackTrace reads 
something like following:

java.io.IOException: expected='startxref' actual='xref' 
org.pdfbox.io.PushBackInputStream@1ed1b0b
	at org.pdfbox.pdfparser.PDFParser.parseObject
(PDFParser.java:311)
	at org.pdfbox.pdfparser.PDFParser.parse
(PDFParser.java:144)
	at 
org.pdfbox.searchengine.lucene.LucenePDFDocument.addCont
ent(LucenePDFDocument.java:198)
	at 
org.pdfbox.searchengine.lucene.LucenePDFDocument.getDocu
ment(LucenePDFDocument.java:118)

Can I hear from someone out there what exactly the problem 
is and if there is some workaround for now.</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>101840</id>
				<name>crm_budget_a.pdf</name>
				<description>Sample PDF file</description>
				<filesize>163829</filesize>
				<filetype></filetype>
				<adddate>1095428100</adddate>
				<submitted_by>197342</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1096228183</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1096228183</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1095815307</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>101840: crm_budget_a.pdf</old_value>
				<date>1095428100</date>
				<by>thansson</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1025101">
		<submitted_by>maxim72</submitted_by>
		<submitted_date>2004-09-09 06:06</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>IOException:You do not have permission to extract text</summary>
		<detail>Exception when parsing pdf document:

Exception in thread "main" java.io.IOException: You do 
not have permission to ex
tract text
        at org.pdfbox.util.PDFTextStripper.writeText
(PDFTextStripper.java:140)
        at org.pdfbox.ExtractText.main
(ExtractText.java:223)</detail>
		<follow_ups>
			<item>
				<date>1094773749</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

It means that the author of the PDF document set 
permissions on the PDF document.  A permission is set to 
disallow you from extracting text.  If you open the document 
in acrobat and look at the document security settings you will 
see what I mean.

Ben</text>
			</item>
			<item>
				<date>1094736786</date>
				<sender>maxim72</sender>
				<text>Logged In: YES 
user_id=1115651

Surprised.
If it is expected, what does it mean? </text>
			</item>
			<item>
				<date>1094736416</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

This is expected functionality!!</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>100888</id>
				<name>1.pdf</name>
				<description>file, which brings exception</description>
				<filesize>236326</filesize>
				<filetype></filetype>
				<adddate>1094735162</adddate>
				<submitted_by>1115651</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1094773749</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1094773749</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>100888: 1.pdf</old_value>
				<date>1094735162</date>
				<by>maxim72</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1025116">
		<submitted_by>maxim72</submitted_by>
		<submitted_date>2004-09-09 06:35</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>IOException:You do not have permission to extract text</summary>
		<detail>Exception when parsing pdf document:

Exception in thread "main" java.io.IOException: You do 
not have permission to ex
tract text
        at org.pdfbox.util.PDFTextStripper.writeText
(PDFTextStripper.java:140)
        at org.pdfbox.ExtractText.main
(ExtractText.java:223)</detail>
		<follow_ups>
			<item>
				<date>1094773677</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

closed dup of 1025101</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>100892</id>
				<name>1.pdf</name>
				<description>file, which brings exception</description>
				<filesize>236326</filesize>
				<filetype></filetype>
				<adddate>1094736917</adddate>
				<submitted_by>1115651</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1094773677</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1094773677</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>100892: 1.pdf</old_value>
				<date>1094736917</date>
				<by>maxim72</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="920900">
		<submitted_by>hal_9ooo</submitted_by>
		<submitted_date>2004-03-22 02:48</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>PDFTextStripper hangs on extraction</summary>
		<detail>PDFTextStripper hangs on
stripper.writeText(pdfDocument, writer); call when
extracting text from the pdf in attachment.
CPU stuck at 99%, no OutOfMemory errors.</detail>
		<follow_ups>
			<item>
				<date>1094773608</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

http://www.hal9ooo.it/pdfbox/bo7.pdf no longer hangs for me.

Ben</text>
			</item>
			<item>
				<date>1084549067</date>
				<sender>hal_9ooo</sender>
				<text>Logged In: YES 
user_id=1003586

in PdfParser source, method parseObject(), I changed the line
while( !nextLine.equals( "trailer" ) &amp;&amp; !pdfSource.isEOF()  )

with

while( !nextLine.equals( "trailer" ) &amp;&amp; !pdfSource.isEOF()
&amp;&amp; !nextLine.equals("") )

and now does'nt hang.
Apparently empty lines in pdf caused an infinite loop.</text>
			</item>
			<item>
				<date>1080860259</date>
				<sender>dhamner</sender>
				<text>Logged In: YES 
user_id=1011716

(last comment was from me)</text>
			</item>
			<item>
				<date>1080859963</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

I get this as well.  I'm happy to provide more information if 
neccessary.</text>
			</item>
			<item>
				<date>1079991422</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

Same thing for me.
Another url with a sample pdf document:
http://www.veritas.com/offer?a_id=3105
(login required but this the only document I've got
generating this)</text>
			</item>
			<item>
				<date>1079952649</date>
				<sender>hal_9ooo</sender>
				<text>Logged In: YES 
user_id=1003586

Can't send the pdf as an attachment.... try there:
http://www.hal9ooo.it/pdfbox/bo7.pdf</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1094773608</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1094773608</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1093978527</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="926998">
		<submitted_by>yalnifj</submitted_by>
		<submitted_date>2004-03-31 13:07</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="556660">writing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Class Cast Exception During appendDocument</summary>
		<detail>I am trying to append two documents together. 
Basically all I want to do is to add a title page to PDF 
documents when they are uploaded to the server. I am 
using the AppendDoc example class. Unfortunately, I am 
getting a class cast exception.

java.lang.ClassCastException
at 
org.pdfbox.examples.persistence.AppendDoc.appendDocu
ment(AppendDoc.java:114)
at org.pdfbox.examples.persistence.AppendDoc.doIt
(AppendDoc.java:215)

Line 114 of AppendDoc is:
COSArray srcThreads = (COSArray)
srcRoot.getDictionaryObject( threads );

I was able to get the AppendDoc example to work by 
wrapping lines 112-125 in a try block and catching the 
ClassCastException. After the exception I allowed the 
appendDocument function to continue on.

Attached are the two documents that I was trying to 
append.

Thanks,
--John</detail>
		<follow_ups>
			<item>
				<date>1094774260</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed in CVS, please give the nightly build a try.

Ben</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>82100</id>
				<name>ird.pdf</name>
				<description></description>
				<filesize>175659</filesize>
				<filetype></filetype>
				<adddate>1080767840</adddate>
				<submitted_by>300048</submitted_by>
			</file>
			<file>
				<id>82106</id>
				<name>switching_consensus.pdf</name>
				<description></description>
				<filesize>200677</filesize>
				<filetype></filetype>
				<adddate>1080769711</adddate>
				<submitted_by>300048</submitted_by>
			</file>
			<file>
				<id>82120</id>
				<name>ird.pdf</name>
				<description></description>
				<filesize>92143</filesize>
				<filetype></filetype>
				<adddate>1080775393</adddate>
				<submitted_by>300048</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1094774260</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1094774260</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>82120: ird.pdf</old_value>
				<date>1080775394</date>
				<by>yalnifj</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>82106: switching_consensus.pdf</old_value>
				<date>1080769712</date>
				<by>yalnifj</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>82100: ird.pdf</old_value>
				<date>1080767841</date>
				<by>yalnifj</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1085429">
		<submitted_by>yourgod</submitted_by>
		<submitted_date>2004-12-14 14:14</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>release doesn't build</summary>
		<detail>"ant dist" (the default) fails looking for the Config
directory that doesn't exist in the released zip

</detail>
		<follow_ups>
			<item>
				<date>1103167271</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

good catch.  Fixed in CVS, try tonights nightly build.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1103167271</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1103167271</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1013163">
		<submitted_by>runako</submitted_by>
		<submitted_date>2004-08-20 15:26</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Can't Parse PDFs with Filter Abbreviations</summary>
		<detail>In parsing a PDf that refers to a Filter using an
abberviation (i.e. "Fl" for FlateDecode), PDFBox
crashes.  Here's the stack trace (more after the trace):

java.io.IOException: Unknown stream filter:COSName{Fl}
        at
org.pdfbox.filter.FilterManager.getFilter(FilterManager.java:106)
        at
org.pdfbox.cos.COSStream.doDecode(COSStream.java:252)
        at
org.pdfbox.cos.COSStream.doDecode(COSStream.java:227)
        at
org.pdfbox.cos.COSStream.getUnfilteredStream(COSStream.java:175)
        at
org.pdfbox.pdfparser.PDFStreamParser.&lt;init&gt;(PDFStreamParser.java:84)
        at
org.pdfbox.cos.COSStream.getStreamTokens(COSStream.java:128)
        at
org.pdfbox.util.PDFTextStripper.process(PDFTextStripper.java:492)
        at
org.pdfbox.util.PDFTextStripper.processPageContents(PDFTextStripper.j
ava:417)
        at
org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:358
)
        at
org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:350
)
        at
org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:186)
        at
org.pdfbox.util.PDFTextStripper.getText(PDFTextStripper.java:130)

Here's the beginning of the file:

1 0 obj&lt;&lt;/Producer(htmldoc 1.8.13 Copyright 1997-2001
Easy Software Products, All Rights
Reserved.)/CreationDate(D:20040819141710-0800)&gt;&gt;endobj

This file came from Salon.com's download in PDF format,
and I'm not sure I can legally redistribute it.  I've
patched my PDFBox, from the 0.6.2 codebase and attached
the patched files.</detail>
		<follow_ups>
			<item>
				<date>1094857144</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed in CVS, please give tommorows nightly build a try.

Ben</text>
			</item>
			<item>
				<date>1093040961</date>
				<sender>runako</sender>
				<text>Logged In: YES 
user_id=214336

I should have mentioned that these changes appear to apply
equally to the head, but I'm not working with HEAD so I
don't know.  I also don't have access to a file that uses
the other abbreviations, so I haven't patched those cases.  

A full list of abbreviations can be found in the Adobe PDF
Reference, Fourth Edition covering PDF format Version 1.5,
page 317.  This is available freely from Adobe's website.</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>98550</id>
				<name>COSName.java</name>
				<description>COSName.java</description>
				<filesize>7571</filesize>
				<filetype></filetype>
				<adddate>1093040769</adddate>
				<submitted_by>214336</submitted_by>
			</file>
			<file>
				<id>98551</id>
				<name>FilterManager.java</name>
				<description>FilterManager.java</description>
				<filesize>3815</filesize>
				<filetype></filetype>
				<adddate>1093040810</adddate>
				<submitted_by>214336</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1094857144</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1094857144</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1093978522</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>98551: FilterManager.java</old_value>
				<date>1093040810</date>
				<by>runako</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>98550: COSName.java</old_value>
				<date>1093040770</date>
				<by>runako</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1004032">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-08-05 08:51</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Encyption of certain characters appears incorrect</summary>
		<detail>The new encryption utility seems to have problems 
encrypting certain characters.  I have a PDF form with a 
submit URL which is already encrypted.  When I use 
the "Encrypt" application, this URL does not seem to be 
properly encrypted.
Here is an example of the URL I am referring to.

portal.jsp?
IdHP6EE7RHL/HkCNJkGgZTBIzBf0QfLQkUwK4QBZaJuxoWcG
yTuGyKnGo/jNrMaFKRdDmlXJsC8=

The Encrypt utility encrypts the action object as:
56 0 obj
&lt;&lt;
/FS /URL
/F 
&lt;4F931A617F6666E6DC74EBE453A97DC2297F38486C3A21
4C837BAA4B01F1D86BDFB8DD9F05D510F16D92990BCC1F
582E3182C3B7FE2F5481F95F288D02B7378CF0456F33FFB
D596C5090357AC8DEEFF2347475008F7E53&gt;
&gt;&gt;

And Acrobat encrypts it as:
36 0 obj
&lt;&lt; 
/S /SubmitForm 
/F &lt;&lt; /FS /URL /F (?h›Ã=.a@xý£S›"\r»„ßÅ_—
ä@“É¸?o2?¡.?ü?'|?&gt;ÈÒU:Ã?
?†ÅÑBWçÌÎéwa?•oÛ?5÷?¬\
cÖÜ&lt;qü †Ó?þ¨ÃÂ?;)&gt;&gt; 
&gt;&gt; 
endobj

Any ideas on how I can fix this?  It doesn't make sense 
to me why the encryption doesn't work since there are 
no special characters in the query string.</detail>
		<follow_ups>
			<item>
				<date>1094857605</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Closing this issue, encryption/decryption does work.  No 
example to reproduce issue.

Ben</text>
			</item>
			<item>
				<date>1091723291</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

Upon further inspection, all URL's enterned into the submit 
form action appear to be encrypted incorrectly.
I also noticed that the attempt to encrypt appears to be in 
hex. (ie, no letters above F and all caps )</text>
			</item>
			<item>
				<date>1091722567</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

You are showing me two encrypted strings, one from Acrobat 
and one from adobe.  They are different I see that but is 
what PDFBox produced incorrect?  They might be different for 
a variety of reasons, but that does not mean it is wrong.

Notice that PDFBox uses &lt;&gt; for the string and acrobat uses
().  PDFBox does that because it notices non-ascii characters 
in the string and makes a hex string instead.  

Are you claiming that you cannot open the PDFBox encrypted 
PDF in acrobat anymore?  Can you use PDFBox's decrypt and 
get the URL back?  

If you are still having a problem please attach the pdf or mail 
it to me and I will take a look at it.

ben@csh.rit.edu</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1094857605</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1094857605</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1091722588</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1026366">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-09-11 08:29</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>pdfbox stops extracting text when encoutering a bullet (149)</summary>
		<detail>pdfbox stops extracting text when encountering a bullet 
(149) and/or registered name character (174). These 
are the two characters I have come across so far that 
stops extraction.

The PDF document was converted from a MS Word XP 
document.

Is there a way to have pdfbox skip these characters 
and proceed with text extraction?</detail>
		<follow_ups>
			<item>
				<date>1096226958</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

This works for me, I think this was fixed several days ago.  
Please try a nightly release and reopen if it is still an issue.

Ben</text>
			</item>
			<item>
				<date>1094916634</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

the issue pertains to verstion 0.6.6.</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>101131</id>
				<name>doc1.pdf</name>
				<description>example pdf that stops extraction upon encountering bullet</description>
				<filesize>37076</filesize>
				<filetype></filetype>
				<adddate>1094916579</adddate>
				<submitted_by>100</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1096226958</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1096226958</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>101131: doc1.pdf</old_value>
				<date>1094916579</date>
				<by>nobody</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1006832">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-08-10 13:03</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>PDFParser invoking COSObject.setObject with a COSStream</summary>
		<detail>This issue manifested itself when I was parsing a PDF 
without a digital signature.  PDFParser.parseObject() 
contains the following line:

pdfObject.setObject(pb);

In this case, pb (declared as COSBase) is an instance of 
COSStream...perhaps due to the following code that 
preceeds it:

if( pb instanceof COSDictionary )
{
  pb = parseCOSStream( (COSDictionary)pb, 
getDocument().getScratchFile() );
}

COSObject.setObject will throw an IOException if the 
COSBase argument is not an instance of COSDictionary 
or COSArray.

I hacked together a PDFParser class that did the 
following instead:

if (pb instanceof COSStream)
{
  pdfObject.setObject(((COSStream)pb).getDictionary());
}
else
{            
  pdfObject.setObject(pb);
}

And this seems to work.  It's a rather obnoxious 
workaround, since I had to copy a lot of code due to 
the fact that most of the objects &amp; methods involved 
were declared private.</detail>
		<follow_ups>
			<item>
				<date>1096030326</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

The setObject now allows for COSDictionary/COSArray and 
now COSStream please give the nightly build a try and let me 
know if you are still having a problem.

Ben</text>
			</item>
			<item>
				<date>1094191005</date>
				<sender>fluetm</sender>
				<text>Logged In: YES 
user_id=1101499

The workaround we're using has been changed...the original 
version wasn't quite right.  What we do now is check the 
object inside of the COSObject being set.  If it's not null, and 
the object is not a COSDictionary or COSArray, then we avoid 
attempting the setObject call, which will give us an 
IOException (we're usually seeing a COSStream in these 
cases where the exception is being thrown).

COSBase checkObject = pdfObject.getObject();
if (checkObject == null || (checkObject instanceof 
COSDictionary || checkObject instanceof COSArray))
{
    pdfObject.setObject(pb);
}
else
{
    log.debug("Skipping setObject for established baseObject 
of type: "+checkObject.getClass().getName());
}
</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1096030326</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1096030326</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1093978523</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1060260">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2004-11-04 06:53</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="4">4</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>PDDocument does not create document id</summary>
		<detail>When a PDDocument is created from scratch it should 
generate a document id, currently it does not.

Ben</detail>
		<follow_ups>
			<item>
				<date>1100489083</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

document id is now set if it does not exist.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1100489083</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1100489083</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="999071">
		<submitted_by>snshor</submitted_by>
		<submitted_date>2004-07-27 16:26</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="556660">writing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>ClassCastEx PDAppearanceDictionary::getNormalAppearance</summary>
		<detail>Apparently the following code contains an error:
======================================
        COSBase ap = dictionary.getDictionaryObject(
COSName.getPDFName( "N" ) );
        
        if( ap instanceof COSStream )
        {
            ap = new COSDictionary();
           
((COSDictionary)ap).setItem(COSName.getPDFName(
"default" ), ap);
        }
=================================
instead of putting a stream you put the new dictionary
into itself. Later on it causes ClassCastException


I am trying to do the following: 

Fill out fields in
http://www.irs.gov/pub/irs-pdf/f1040ez.pdf.

using setValue() for text fields.

Unfortunately even after fixing the problem with
ClassCastException I still have a problem: the
resulting pdf does not show the values in fields (only
if you put cursor in Acrobat inthe field the value
appears). Do you have any idea how to fix this issue? 




</detail>
		<follow_ups>
			<item>
				<date>1096153491</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed in CVS and will be available in the next release.  Also 
note that I fixed some spacing issues when importing into a 
textbox.  The ImportFDF example works really well on the 
f1040ez.pdf PDF.  Please let me know if there are still issues.

Ben</text>
			</item>
			<item>
				<date>1092321044</date>
				<sender>onb</sender>
				<text>Logged In: YES 
user_id=1102802

Hi,

I experienced the same issue and in my opinion 
it's due to a problem in field's appearance diectionary
(AP: Dictionary).

I built a tiny test.pdf that reproduces this problem.
When I modify the field contents using Acrobat, 
the field is rendered fine and it's AP attribute looks like : 

  AP: Dictionary 
  --&gt; N: Stream

but when I modify it using setValue() method the 
field's value is only renderd when the field has focus 
and AP attribute looks like

  AP: Dictionary
  --&gt; N: Dictionary 
      --&gt; default: Stream

I managed to change the code and make my tiny example
work, but someone who has a better understanding of the 
code should look for a better solution.

-- Osvaldo.
   
</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>95490</id>
				<name>f1040ez.pdf</name>
				<description></description>
				<filesize>79756</filesize>
				<filetype></filetype>
				<adddate>1090970792</adddate>
				<submitted_by>889800</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1096153491</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1096153491</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>95490: f1040ez.pdf</old_value>
				<date>1090970792</date>
				<by>snshor</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1010849">
		<submitted_by>steveholt</submitted_by>
		<submitted_date>2004-08-17 09:23</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>SetField always throws NullPointer</summary>
		<detail>Any attempt to try to get the SetField example working 
(read only textbox) results in

java.lang.NullPointerException
        at 
org.pdfbox.pdmodel.interactive.form.PDAppearance.setFo
ntReference(PDAppearance.java:313)
        at 
org.pdfbox.pdmodel.interactive.form.PDAppearance.setAp
pearanceValue(PDAppearance.java:247)
        at 
org.pdfbox.pdmodel.interactive.form.PDTextbox.setValue
(PDTextbox.java:113)
        at org.pdfbox.examples.fdf.SetField.setField
(SetField.java:73)
        at org.pdfbox.examples.fdf.SetField.main
(SetField.java:123)</detail>
		<follow_ups>
			<item>
				<date>1097143926</date>
				<sender>steveholt</sender>
				<text>Logged In: YES 
user_id=1021782


Works OK for me. Thanks!

Steve</text>
			</item>
			<item>
				<date>1096165289</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed in CVS, give the nightly build a try.

Ben</text>
			</item>
			<item>
				<date>1095160057</date>
				<sender>steveholt</sender>
				<text>Logged In: YES 
user_id=1021782


In creating a document I could post, I found that giving the
field a border yeilds

java.lang.ClassCastException: org.pdfbox.cos.COSDictionary
        at
org.pdfbox.pdmodel.interactive.annotation.PDAppearanceDictionary.getN
ormalAppearance(PDAppearanceDictionary.java:115)
        at
org.pdfbox.pdmodel.interactive.form.PDAppearance.&lt;init&gt;(PDAppearance.
java:103)
        at
org.pdfbox.pdmodel.interactive.form.PDTextbox.setValue(PDTextbox.java
:111)
        at
org.pdfbox.examples.fdf.SetField.setField(SetField.java:73)
        at
org.pdfbox.examples.fdf.SetField.main(SetField.java:123)</text>
			</item>
			<item>
				<date>1094857653</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Can you attache/email/post link to a PDF that has this 
problem.

Ben</text>
			</item>
			<item>
				<date>1092932639</date>
				<sender>steveholt</sender>
				<text>Logged In: YES 
user_id=1021782

Works OK on 0.6.4 - fails on 0.6.5 and 6</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>101441</id>
				<name>Test value3.pdf</name>
				<description>Test file for null pointer</description>
				<filesize>6525</filesize>
				<filetype></filetype>
				<adddate>1095159891</adddate>
				<submitted_by>1021782</submitted_by>
			</file>
			<file>
				<id>101442</id>
				<name>Test value1.pdf</name>
				<description>Class cast</description>
				<filesize>6775</filesize>
				<filetype></filetype>
				<adddate>1095160057</adddate>
				<submitted_by>1021782</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1096165289</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1096165289</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>101442: Test value1.pdf</old_value>
				<date>1095160057</date>
				<by>steveholt</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>101441: Test value3.pdf</old_value>
				<date>1095159891</date>
				<by>steveholt</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1093978523</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1017175">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-08-26 13:44</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Large number converted when re-written</summary>
		<detail>I have noticed that sometimes when parsing a pdf with
pdf box, really small numbers get changed into
scientific notation when they are re-written out to a file.
This does not corrupt the file, and acrobat is still
able to open the file without error.  However, when you
try to re-parse the file with pdfbox, the parser throws
an exception.  Here is an example object where the
error is occuring. Notice the value of the StartIndent
entry.

PDF before Parsing:

493 0 obj
&lt;&lt; 
/O /Layout 
/BBox [ 28.79987 37.06352 591.42522 774.84584 ] 
/Placement /Block 
/StartIndent -0.00014 
/EndIndent -8.22522 
&gt;&gt; 
endobj

PDF After Parsing:

493 0 obj
&lt;&lt;
/O /Layout
/BBox [28.79987 37.06352 591.42523 774.8458]
/Placement /Block
/StartIndent -1.4E-4
/EndIndent -8.22522
&gt;&gt;
endobj

Here is the exception that is thrown when an attempt to
re-parse the document is made.

java.io.IOException: expected='/' actual='E'
org.pdfbox.io.PushBackInputStream@6176ddb5
	at
org.pdfbox.pdfparser.BaseParser.parseCOSName(BaseParser.java(Compiled
Code))
	at
org.pdfbox.pdfparser.BaseParser.parseCOSDictionary(BaseParser.java(Compiled
Code))
	at
org.pdfbox.pdfparser.BaseParser.parseDirObject(BaseParser.java(Compiled
Code))
	at
org.pdfbox.pdfparser.PDFParser.parseObject(PDFParser.java(Compiled
Code))
	at
org.pdfbox.pdfparser.PDFParser.parse(PDFParser.java(Compiled
Code))
        at
org.pdfbox.examples.fdf.SetField.main(SetField.java:113)

I am unable to attach the entire PDF due to the
sensitive nature of the data it contains.  Hope this is
enough information.  E-mail me at
ryan_orth9@hotmail.com if you want to know more.

Ryan</detail>
		<follow_ups>
			<item>
				<date>1096166817</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed in CVS.  PDFBox no longer writes out PDF with scientific 
notation as that is not allowed by the PDF spec, but acrobat 
can read in files with that notation so I also updated PDFBox 
to be able to read in scientific notation.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1096166817</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1096166817</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1093978522</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1021691">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-09-03 02:09</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>IOException</summary>
		<detail>The following exception occurs with PDFBox version 
0.6.5 and 0.6.6 when parsing PDF file:

0.6.5:

Exception in thread "main" java.io.IOException: Error: 
No 'ToUnicode' and no 'En
coding' for Font
        at org.pdfbox.pdmodel.font.PDFont.encode
(PDFont.java:347)
        at org.pdfbox.util.PDFStreamEngine.showString
(PDFStreamEngine.java:169)
        at org.pdfbox.util.PDFTextStripper.showString
(PDFTextStripper.java:461)
        at 
org.pdfbox.util.PDFStreamEngine.processOperator
(PDFStreamEngine.java:
692)
        at org.pdfbox.util.PDFStreamEngine.processStream
(PDFStreamEngine.java:12
8)
        at org.pdfbox.util.PDFTextStripper.processPage
(PDFTextStripper.java:268)

        at org.pdfbox.util.PDFTextStripper.processPages
(PDFTextStripper.java:230
)
        at org.pdfbox.util.PDFTextStripper.writeText
(PDFTextStripper.java:172)
        at org.pdfbox.util.PDFTextStripper.writeText
(PDFTextStripper.java:120)
        at org.pdfbox.ExtractText.main
(ExtractText.java:213)

0.6.6:

Exception in thread "main" java.io.IOException: Error: 
No 'ToUnicode' and no 'En
coding' for Font
        at org.pdfbox.pdmodel.font.PDFont.encode
(PDFont.java:385)
        at org.pdfbox.util.PDFStreamEngine.showString
(PDFStreamEngine.java:169)
        at org.pdfbox.util.PDFTextStripper.showString
(PDFTextStripper.java:461)
        at 
org.pdfbox.util.PDFStreamEngine.processOperator
(PDFStreamEngine.java:
695)
        at org.pdfbox.util.PDFStreamEngine.processStream
(PDFStreamEngine.java:12
8)
        at org.pdfbox.util.PDFTextStripper.processPage
(PDFTextStripper.java:268)

        at org.pdfbox.util.PDFTextStripper.processPages
(PDFTextStripper.java:230
)
        at org.pdfbox.util.PDFTextStripper.writeText
(PDFTextStripper.java:172)
        at org.pdfbox.ExtractText.main
(ExtractText.java:223)

With version 0.6.3 I have no problem.</detail>
		<follow_ups>
			<item>
				<date>1096166993</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

No 'ToUnicode' and no 'Encoding' for Font has been fixed in 
CVS.

Ben</text>
			</item>
			<item>
				<date>1095952195</date>
				<sender>maxim72</sender>
				<text>Logged In: YES 
user_id=1115651

I checked out CVS version. after building it with ant I have 
PDFBox-0.6.7-dev.jar, in RELEASE.txt also mentioned, that it 
is 0.6.7.

I can create new bug for space character problem, but 
unfortunatelly I can't provide .pdf for this because I don't 
have a permission to publish it.</text>
			</item>
			<item>
				<date>1095950609</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

0.6.7 or 0.6.6?  I assume you mean CVS.  If not I would 
suggest you try from CVS or the nightly build, it contains 
several fixes for character spacing.  

If it is a problem please post a new bug and attach/email me 
the pdf because it is not related to this issue.

Ben</text>
			</item>
			<item>
				<date>1095949950</date>
				<sender>maxim72</sender>
				<text>Logged In: YES 
user_id=1115651

Ben, thanks a lot, the problem is fixed now with using 
complete .jar file (with Resources included).

However, the output of 0.6.7  in comparison to 0.6.3(which I 
use currently) differs:
(below is a 
0.6.3 output:

Seite 2 von 197
12.08.2002

0.6.7. output:

Seite 2 von 197PLANTA Projektmanagement-Systeme GmbH
12.08.2002http://planta3/PLANTA/servlet/P002

Between the page number and date in the 0.6.7 output must 
stay a space, because it is a page fotter and header and in 
original .pdf file it is looking this way:

Seite 2 von 197    PLANTA Projektmanagement-Systeme GmbH

-------- page break ----------------------------------------
12.08.2002          http://planta3/PLANTA/servlet/P002


</text>
			</item>
			<item>
				<date>1095944603</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

maxim72, 

This sounds like a problem with your environment.  Are you 
using the PDFBox-0.6.6.jar or compiling it yourself?  If 
compiling yourself please make sure that you include the 
Resources directory in you classpath.

Ben</text>
			</item>
			<item>
				<date>1095933352</date>
				<sender>maxim72</sender>
				<text>Logged In: YES 
user_id=1115651

I tested with CVS version (0.6.7) and got the following 
exception:

Exception in thread "main" java.lang.ExceptionInInitializerError
        at org.pdfbox.encoding.EncodingManager.&lt;clinit&gt;
(EncodingManager.java:52)

        at org.pdfbox.pdmodel.font.PDFont.getEncoding
(PDFont.java:481)
        at org.pdfbox.pdmodel.font.PDFont.encode
(PDFont.java:391)
        at org.pdfbox.util.PDFStreamEngine.showString
(PDFStreamEngine.java:202)
        at org.pdfbox.util.PDFStreamEngine.processOperator
(PDFStreamEngine.java:
736)
        at org.pdfbox.util.PDFStreamEngine.processStream
(PDFStreamEngine.java:13
9)
        at org.pdfbox.util.PDFTextStripper.processPage
(PDFTextStripper.java:211)

        at org.pdfbox.util.PDFTextStripper.processPages
(PDFTextStripper.java:185
)
        at org.pdfbox.util.PDFTextStripper.writeText
(PDFTextStripper.java:161)
        at org.pdfbox.ExtractText.main(ExtractText.java:220)
Caused by: java.lang.NullPointerException
        at java.io.Reader.&lt;init&gt;(Unknown Source)
        at java.io.InputStreamReader.&lt;init&gt;(Unknown Source)
        at org.pdfbox.encoding.Encoding.&lt;clinit&gt;
(Encoding.java:79)
        ... 10 more</text>
			</item>
			<item>
				<date>1095855935</date>
				<sender>maxim72</sender>
				<text>Logged In: YES 
user_id=1115651

I will test and inform!</text>
			</item>
			<item>
				<date>1095855774</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

Seems to work in nightly buid</text>
			</item>
			<item>
				<date>1094732944</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Also please try the nightly build to see if you have the same 
problem.

Ben</text>
			</item>
			<item>
				<date>1094215902</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

If possible please e-mail or attach file.

ben@csh.rit.edu</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1096166993</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1096166992</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1034427">
		<submitted_by>pczeus</submitted_by>
		<submitted_date>2004-09-24 20:16</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="556660">writing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>After Splitting page orientation is lost</summary>
		<detail>After using the Splitter, and writing the new split 
documents to file, documents in Landscape orientation 
have been changed to Portrait.

See my previous defect for the file used with the Splitter.
</detail>
		<follow_ups>
			<item>
				<date>1097352560</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed in CVS.

Ben</text>
			</item>
			<item>
				<date>1097113077</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

yes please give me the PDF, I tried it on a landscape PDF that 
I have and it worked, but something might be different.

You can e-mail me the pdf if you would like.

ben@csh.rit.edu</text>
			</item>
			<item>
				<date>1096297986</date>
				<sender>pczeus</sender>
				<text>Logged In: YES 
user_id=230504

Well...it wouldn't let me upload the file...too big (750k).
Regardless, any landscape oriented PDF should work, but if 
you need to give you a file, let me know and I will create a 
smaller version.</text>
			</item>
			<item>
				<date>1096297952</date>
				<sender>pczeus</sender>
				<text>Logged In: YES 
user_id=230504

Well...it wouldn't let me upload the file...too big (750k).
Regardless, any landscape oriented PDF should work, but if 
you need to give you a file, let me know and I will create a 
smaller version.</text>
			</item>
			<item>
				<date>1096296750</date>
				<sender>pczeus</sender>
				<text>Logged In: YES 
user_id=230504

I have attached the file.
Also, I found that by setting the split document 
Resources,CropBox, and MediaBox (Not sure which one did the 
trick..strick timeline), that the Landscape orientation was 
transferred to the new document. Here is the code:

            PDDocument destination = currentDocument;
            PDDocument source = pdfDocument;

            destination.setDocumentInformation
(source.getDocumentInformation());
            PDPageNode destPageNode = 
destination.getDocumentCatalog().getPages();
            PDPageNode sourcePageNode = 
source.getDocumentCatalog().getPages();
            destPageNode.setResources
(sourcePageNode.findResources());
            destPageNode.setCropBox
(sourcePageNode.findCropBox());
            destPageNode.setMediaBox
(sourcePageNode.findMediaBox());

Where destination is the new split document.
One more thing, shouldn't the and orientation (landscape) 
apply  at the page level? I should be able to get the attribute 
from each page and apply  to a new page. I have seen cases 
where in a single PDF, each page can be set to landscape or 
portrait separate from other pages.

By the way..thanks a million for responding so quickly and 
providing me with a great open source tool...the only one I 
have found to get the job done...Great work!</text>
			</item>
			<item>
				<date>1096296703</date>
				<sender>pczeus</sender>
				<text>Logged In: YES 
user_id=230504

I have attached the file.
Also, I found that by setting the split document 
Resources,CropBox, and MediaBox (Not sure which one did the 
trick..strick timeline), that the Landscape orientation was 
transferred to the new document. Here is the code:

            PDDocument destination = currentDocument;
            PDDocument source = pdfDocument;

            destination.setDocumentInformation
(source.getDocumentInformation());
            PDPageNode destPageNode = 
destination.getDocumentCatalog().getPages();
            PDPageNode sourcePageNode = 
source.getDocumentCatalog().getPages();
            destPageNode.setResources
(sourcePageNode.findResources());
            destPageNode.setCropBox
(sourcePageNode.findCropBox());
            destPageNode.setMediaBox
(sourcePageNode.findMediaBox());

Where destination is the new split document.
One more thing, shouldn't the and orientation (landscape) 
apply  at the page level? I should be able to get the attribute 
from each page and apply  to a new page. I have seen cases 
where in a single PDF, each page can be set to landscape or 
portrait separate from other pages.

By the way..thanks a million for responding so quickly and 
providing me with a great open source tool...the only one I 
have found to get the job done...Great work!</text>
			</item>
			<item>
				<date>1096229381</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

&gt;See my previous defect for the file used with the Splitter.

Did you attach a file?  I don't see one.  Make sure you check 
the stupid "Check to Upload and Attach a File" when 
uploading a file.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1097352560</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1097352560</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1088586">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-12-20 11:10</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Leading whitespace in xref causing error</summary>
		<detail>I am trying to parse a document which contains the 
following xref snippet (file dump is between lines 
of===):

=========================
xref
    11    139
0000000016 00000 n
0000003026 00000 n
...
...
0000003112 00000 n
0000003869 00000 n
trailer
&lt;&lt;
/Size    150
/Prev   161196
/Root     12 0 R
/Info      1 0 R
&gt;&gt;
startxref
=========================

The spaces before "11" and "139" in the "xref" 
definition causes BaseParser.readInt() to throw an 
IOException.

Acrobat Reader is able to display the document okay.  
PDFBox is able to parse the document cleanly too, if I 
change the content to
=========================
xref
11 139
....
=========================
</detail>
		<follow_ups>
			<item>
				<date>1104439834</date>
				<sender>vasavadas</sender>
				<text>Logged In: YES 
user_id=1181865

Yes, adding the call to skipSpaces() took care of the 
problem.  Thank you for the prompt response!</text>
			</item>
			<item>
				<date>1103598381</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

fixed in CVS, give tonights nightly build a try.

Ben</text>
			</item>
			<item>
				<date>1103570592</date>
				<sender>vasavadas</sender>
				<text>Logged In: YES 
user_id=1181865

I apologize!  The correct file dump is:
=========================
xref
    11    139
0000000016 00000 n
0000003026 00000 n
...
...
0000003112 00000 n
0000003869 00000 n
trailer
&lt;&lt;
/Size    150
/Prev   161196
/Root     12 0 R
/Info      1 0 R
&gt;&gt;
startxref
=========================
</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1103598381</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1103598381</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1103598381</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1040684">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-10-05 07:15</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>java.io.IOException: Error: Unknown colorspace 'Pattern'</summary>
		<detail>Anyone seen this ?

java.io.IOException: Error: Unknown colorspace 'Pattern'
	at 
org.pdfbox.pdmodel.graphics.color.PDColorSpaceFactory.
createColorSpace(PDColorSpaceFactory.java:152)
	at 
org.pdfbox.pdmodel.graphics.color.PDColorSpaceFactory.
createColorSpace(PDColorSpaceFactory.java:68)
	at 
org.pdfbox.pdmodel.PDResources.getColorSpaces
(PDResources.java:153)
	at 
org.pdfbox.util.PDFStreamEngine.processStream
(PDFStreamEngine.java:115)
	at org.pdfbox.util.PDFTextStripper.processPage
(PDFTextStripper.java:211)
	at org.pdfbox.util.PDFTextStripper.processPages
(PDFTextStripper.java:185)
	at org.pdfbox.util.PDFTextStripper.writeText
(PDFTextStripper.java:161)
	at org.pdfbox.util.PDFTextStripper.writeText
(PDFTextStripper.java:111)</detail>
		<follow_ups>
			<item>
				<date>1097112893</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Ok, I think I got it this time.  Please try tonights release.

"The content of element type "web-app" must match" this 
error is due to your web.xml being invalid.  You should 
validate it against a DTD, don't forget that the order of 
elements matters!

"java.lang.Throwable: Warning: You did not close the PDF 
Document" means just that, when you are done with the 
PDDocument/COSDocument you need to call close on the 
object.

Ben


</text>
			</item>
			<item>
				<date>1097092658</date>
				<sender>kgorrell</sender>
				<text>Logged In: YES 
user_id=1134129

I am also getting this error in the stderr.log file in Tomcat

Oct 6, 2004 3:42:35 PM 
org.apache.commons.digester.Digester error
SEVERE: Parse Error at line 23 column 11: The content of 
element type "web-app" must match "(icon?,display-
name?,description?,distributable?,context-param*,filter*,filter-
mapping*,listener*,servlet*,servlet-mapping*,session-
config?,mime-mapping*,welcome-file-list?,error-
page*,taglib*,resource-env-ref*,resource-ref*,security-
constraint*,login-config?,security-role*,env-entry*,ejb-
ref*,ejb-local-ref*)".
org.xml.sax.SAXParseException: The content of element 
type "web-app" must match "(icon?,display-
name?,description?,distributable?,context-param*,filter*,filter-
mapping*,listener*,servlet*,servlet-mapping*,session-
config?,mime-mapping*,welcome-file-list?,error-
page*,taglib*,resource-env-ref*,resource-ref*,security-
constraint*,login-config?,security-role*,env-entry*,ejb-
ref*,ejb-local-ref*)".
	at 
org.apache.xerces.util.ErrorHandlerWrapper.createSAXParseEx
ception(Unknown Source)
	at org.apache.xerces.util.ErrorHandlerWrapper.error
(Unknown Source)
	at 
org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown 
Source)
	at 
org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown 
Source)
	at 
org.apache.xerces.impl.dtd.XMLDTDValidator.handleEndElement
(Unknown Source)
	at 
org.apache.xerces.impl.dtd.XMLDTDValidator.endElement
(Unknown Source)
	at 
org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.sc
anEndElement(Unknown Source)
	at 
org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$Fr
agmentContentDispatcher.dispatch(Unknown Source)
	at 
org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.sc
anDocument(Unknown Source)
	at org.apache.xerces.parsers.DTDConfiguration.parse
(Unknown Source)
	at org.apache.xerces.parsers.DTDConfiguration.parse
(Unknown Source)
	at org.apache.xerces.parsers.XMLParser.parse
(Unknown Source)
	at 
org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown 
Source)
	at org.apache.commons.digester.Digester.parse
(Digester.java:1543)
	at 
org.apache.catalina.startup.ContextConfig.applicationConfig
(ContextConfig.java:282)
	at org.apache.catalina.startup.ContextConfig.start
(ContextConfig.java:639)
	at 
org.apache.catalina.startup.ContextConfig.lifecycleEvent
(ContextConfig.java:243)
	at 
org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent
(LifecycleSupport.java:166)
	at org.apache.catalina.core.StandardContext.start
(StandardContext.java:3567)
	at 
org.apache.catalina.core.ContainerBase.addChildInternal
(ContainerBase.java:821)
	at org.apache.catalina.core.ContainerBase.addChild
(ContainerBase.java:807)
	at org.apache.catalina.core.StandardHost.addChild
(StandardHost.java:579)
	at 
org.apache.catalina.core.StandardHostDeployer.install
(StandardHostDeployer.java:307)
	at org.apache.catalina.core.StandardHost.install
(StandardHost.java:772)
	at 
org.apache.catalina.startup.HostConfig.deployWARs
(HostConfig.java:492)
	at 
org.apache.catalina.startup.HostConfig.deployApps
(HostConfig.java:400)
	at org.apache.catalina.startup.HostConfig.start
(HostConfig.java:718)
	at 
org.apache.catalina.startup.HostConfig.lifecycleEvent
(HostConfig.java:358)
	at 
org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent
(LifecycleSupport.java:166)
	at org.apache.catalina.core.ContainerBase.start
(ContainerBase.java:1196)
	at org.apache.catalina.core.StandardHost.start
(StandardHost.java:738)
	at org.apache.catalina.core.ContainerBase.start
(ContainerBase.java:1188)
	at org.apache.catalina.core.StandardEngine.start
(StandardEngine.java:347)
	at org.apache.catalina.core.StandardService.start
(StandardService.java:497)
	at org.apache.catalina.core.StandardServer.start
(StandardServer.java:2190)
	at org.apache.catalina.startup.CatalinaService.start
(CatalinaService.java:273)
	at sun.reflect.NativeMethodAccessorImpl.invoke0
(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke
(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:324)
	at 
org.apache.catalina.startup.BootstrapService.start
(BootstrapService.java:245)
	at org.apache.catalina.startup.BootstrapService.main
(BootstrapService.java:307)
Oct 6, 2004 3:42:36 PM 
org.apache.coyote.http11.Http11Protocol start
INFO: Starting Coyote HTTP/1.1 on port 8018
Oct 6, 2004 3:42:36 PM 
org.apache.jk.common.ChannelSocket init
INFO: JK2: ajp13 listening on /0.0.0.0:8009
Oct 6, 2004 3:42:36 PM org.apache.jk.server.JkMain start
INFO: Jk running ID=0 time=16/46  config=d:\Tomcat 4.1
\conf\jk2.properties
java.lang.Throwable: Warning: You did not close the PDF 
Document
	at org.pdfbox.cos.COSDocument.finalize
(COSDocument.java:389)
	at java.lang.ref.Finalizer.invokeFinalizeMethod
(Native Method)
	at java.lang.ref.Finalizer.runFinalizer
(Finalizer.java:83)
	at java.lang.ref.Finalizer.access$100
(Finalizer.java:14)
	at java.lang.ref.Finalizer$FinalizerThread.run
(Finalizer.java:160)
</text>
			</item>
			<item>
				<date>1097070947</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

Ben, I loaded the newest 1006 nightly build and I am still 
getting the error. Should all the code I need be in the PDFBox-
0.6.7-dev-20041006.jar file ?</text>
			</item>
			<item>
				<date>1097004761</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

This should be fixed in the lastest nightly release, please let 
me know if you are still having a problem with that release.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1097112893</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1097112893</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1043906">
		<submitted_by>cherzeel</submitted_by>
		<submitted_date>2004-10-10 02:27</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>PDFTextStripper gives yibberish</summary>
		<detail>Hey,

When extracting text using PDFStripper with some pdf
documents, it gives yibberish in following form
a0a2a1a4a3a6a5a113a130a97a179 and so on ...

Example pdf's:
http://citeseer.ist.psu.edu/cache/papers/cs/981/http:zSzzSzarti.vub.ac.bezSzsteelszSzperarc.pdf/steels94mathematical.pdf
http://citeseer.ist.psu.edu/rd/75182736%2C354767%2C1%2C0.25%2CDownload/http://citeseer.ist.psu.edu/cache/papers/cs/4390/http:zSzzSzwww-ai.cs.uni-dortmund.dezSzDOKUMENTEzSzklingspor_etal_97a.pdf/klingspor97humanrobotcommunication.pdf

I am interested in this tool for extracting meta-data
from scientific documents but it seems to do this 1/3
of the time which is too much to be really reliable:(
</detail>
		<follow_ups>
			<item>
				<date>1183474044</date>
				<sender>nazario_lucas</sender>
				<text>Logged In: YES 
user_id=1835219
Originator: NO

Ben said...
"The characters encoding uses meaningless codes(ie not ASCII 
or unicode) to represent characters.  There is nothing that 
can be done in these documents."

Are you sure that is nothing PDFBox could do? So how Adobe Reader perfectly displays these documents?</text>
			</item>
			<item>
				<date>1101129436</date>
				<sender>jkronegg</sender>
				<text>Logged In: YES 
user_id=820653

A discussion on this bug is open here:
http://sourceforge.net/forum/forum.php?thread_id=1182709&amp;forum_id=267204</text>
			</item>
			<item>
				<date>1101119552</date>
				<sender>jkronegg</sender>
				<text>Logged In: YES 
user_id=820653

This "error" appears on 15 files on 370 (4 %). For such
files, the text cannot be extracted neither with PDFBox, nor
using Adobe Acrobat copy/paste (the writer, not the Reader).

At least the "yibberish files" can be recognized using the
following code (the text is extracted using
PDFBox-0.7.0-dev-20041118):

  Pattern p = Pattern.compile(".{10,40}(?:a\\d{1,3}){10}.*");
  Matcher m = p.matcher(extracted_text);
  if (m.find()) {
     System.err.println("Error: \"meaningless encoding\" ");
  }//end if

The following producers/PDF format were found in the
specified files:

Producer: GNU Ghostscript 6.51
PDF format: 1.2

Producer: AFPL Ghostscript 7.04
PDF format: 1.2

Producer: AFPL Ghostscript 7.04
PDF format: 1.4

Producer: GNU Ghostscript 6.51
PDF format: 1.4

Producer: AFPL Ghostscript 7.0
PDF format: 1.4

Producer: GNU Ghostscript 7.05
PDF format: 1.2

Producer: AFPL Ghostscript 7.0
PDF format: 1.2

Producer: AFPL Ghostscript 8.12
PDF format: 1.2

Producer: Aladdin Ghostscript 6.01
PDF format: 1.2

Producer: AFPL Ghostscript 6.50
PDF format: 1.2

Producer: AFPL Ghostscript 6.50
PDF format: 1.2

Producer: AFPL Ghostscript 6.50
PDF format: 1.4

Producer: AFPL Ghostscript 7.0
PDF format: 1.2

Producer: GNU Ghostscript 6.51
PDF format: 1.2

Producer: Aladdin Ghostscript 6.0
PDF format: 1.2


Is anyone experiencing the same results ?  Do you think the
error could come from Ghostscript or is there other PDF
producers that gives the same errors ?

Anyway, does anyone know how Acrobat can render letters if
the text cannot be extracted ?


Julien</text>
			</item>
			<item>
				<date>1098037803</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

The characters encoding uses meaningless codes(ie not ASCII 
or unicode) to represent characters.  There is nothing that 
can be done in these documents.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1098037803</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1098037803</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1037145">
		<submitted_by>robertnewson</submitted_by>
		<submitted_date>2004-09-29 10:17</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Infinite loop in PDFParser.parseObject</summary>
		<detail>I have a PDF that causes an infinite loop in
PDFParser.parseObject, line 279;

           String nextLine = readString();
            while( !nextLine.equals( "trailer" ) &amp;&amp;
!pdfSource.isEOF() )
            {
                //skip past all the xref entries.
                nextLine = readString();
            }

I'm trying to get permission to release the file in
question.</detail>
		<follow_ups>
			<item>
				<date>1102995587</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Added code from below comment to CVS.  Please reopen if 
this is still a problem.

Ben</text>
			</item>
			<item>
				<date>1098713588</date>
				<sender>joelgolovaty</sender>
				<text>Logged In: YES 
user_id=1146036

I experienced the dead loop in  pdfparser.BaseParser class
in method COSBase parseDirObject() on running into 
              else
                {
                    //This is not suppose to happen, but we
will allow for it
                    //so we are more compatible with POS
writers that don't
                    //follow the spec
//                   String badString = readString(); //here
is error JG
                    String badString = readBadString(); //fix JG
                    //throw new IOException( "Unknown dir
object c='" + c +
                    //"' peek='" + (char)pdfSource.peek() +
"' " + pdfSource );
                }

unfortunatly I can not publish the pdf but it's pretty much
readble. The char c in switch was hex 29.


</text>
			</item>
			<item>
				<date>1098408019</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

PDF document was corrupted, made some changes to PDFBox 
to break out of the infinite loop.</text>
			</item>
			<item>
				<date>1098292528</date>
				<sender>robertnewson</sender>
				<text>Logged In: YES 
user_id=1130336

I've sent you the file in question, let me know if you need
more.</text>
			</item>
			<item>
				<date>1096481209</date>
				<sender>robertnewson</sender>
				<text>Logged In: YES 
user_id=1130336

I've now tried it with PDFBox-0.6.7-dev-20040929.jar.

I still get the problem.

For now, I'm wrapping my parsing attempt inside a
FutureResult and I'll use timedGet to put an upper limit on
this infinite loop.

As soon as I get clearance, I'll email you the file.


This might be useful to you;

Thread [Thread-246] (Suspended)
	String.&lt;init&gt;(StringBuffer) line: 406
	StringBuffer.toString() line: 1256
	PDFParser(BaseParser).readString() line: 974
	PDFParser.parseXrefSection() line: 457
	PDFParser.parseObject() line: 290
	PDFParser.parse() line: 146
	PDFParser.onParse(DocumentPart) line: 21
	AbstractParser$1.call() line: 47
	FutureResult$1.run() line: 75
	Thread.run() line: 534
</text>
			</item>
			<item>
				<date>1096480502</date>
				<sender>robertnewson</sender>
				<text>Logged In: YES 
user_id=1130336

I'm using 0.6.6, I'll grab a nightly release.</text>
			</item>
			<item>
				<date>1096480472</date>
				<sender>robertnewson</sender>
				<text>Logged In: YES 
user_id=1130336


Actually, I can't even open this PDF with GPDF :)

I'm trying to get the PDF but it's a UK customer and so we
have time zone issues here as well.

Thanks for the swift response!

B.
</text>
			</item>
			<item>
				<date>1096480362</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

One other comment, is this with 0.6.6 or a nightly release?  If 
not with the nightly release please give it a try, available off 
of http://www.pdfbox.org  I have fixed a ton of bugs since 
0.6.6

Ben</text>
			</item>
			<item>
				<date>1096480179</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Not sure what level of sensitivity the PDF is but you can 
certainly email the PDF or send me a link if you can't post it 
publicly here.  If you can figure out which page the error 
occurs on you might be able to use Acrobat to extract that 
page and just send that

ben@csh.rit.edu</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1102995587</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1102995587</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1062432">
		<submitted_by>thansson</submitted_by>
		<submitted_date>2004-11-08 06:15</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Wrong size entry for the xref table</summary>
		<detail>When trying to linearize PDF documents saved with the 
0.6.7 version of PDFBox, PLOP is giving errors. According 
to the tech support folks at PDFLib, this is caused by a 
wrong size entry for the xref table. See snippet from 
attached PDF file:

[snip from intest.pdf]
xref
0 20
0000000000 65535 f
0000000421 00000 n
0000004039 00000 n
0000000357 00000 n
0000000463 00000 n
0000000108 00000 n
0000000000 65535 f
0000000017 00000 n
0000000000 65535 f
0000003889 00000 n
0000004431 00000 n
0000007349 00000 n
0000000000 65535 f
0000004071 00000 n
0000004662 00000 n
0000007850 00000 n
0000007747 00000 n
0000004533 00000 n
0000004584 00000 n
0000004623 00000 n
trailer
&lt;&lt;
/Size 17
[snip]

This problem started with 0.6.7, it wasn't occuring with 
0.6.6.
</detail>
		<follow_ups>
			<item>
				<date>1100528706</date>
				<sender>thansson</sender>
				<text>Logged In: YES 
user_id=197342

Confirmed.

Thanks, Ben!</text>
			</item>
			<item>
				<date>1100482617</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I believe this is now fixed in CVS, please try tonights nightly 
build and reopen if it is still an issue.

Ben</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>108027</id>
				<name>intest.pdf</name>
				<description></description>
				<filesize>8690</filesize>
				<filetype></filetype>
				<adddate>1099923309</adddate>
				<submitted_by>197342</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1100482618</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1100482617</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>108027: intest.pdf</old_value>
				<date>1099923310</date>
				<by>thansson</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1067799">
		<submitted_by>daviss</submitted_by>
		<submitted_date>2004-11-16 19:26</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>PDFBox falsely claims doc is encrypted</summary>
		<detail>The attached file opens fine in Acrobat reader  (Linux
v 5.0.9) with no request for a password.

However PDFBox claims that it can't extract the text:

% java org.pdfbox.ExtractText qf_pdfTimetable.pdf
Exception in thread "main" java.io.IOException: You do
not have permission to extract text
        at
org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:131)
        at
org.pdfbox.ExtractText.main(ExtractText.java:220)

</detail>
		<follow_ups>
			<item>
				<date>1100664985</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

PDF documents have certain permission sets associated with 
them.  If it is encrypted with a user password then you need 
to supply the password to open and view it.  If not then 
there are other permission bits that are stored in the file that 
restrict certain operations.

There is an legal encumbrance on the part of PDFBox to honor 
the permission bits.  Adobe allows people to write software 
which consume PDF documents but are required to honor the 
permissions that are set on the PDF document.

That being said, technology wise it is not impossible to 
access the text, it is just that PDFBox needs to honor the 
permission bit.  PDFBox is a great library that allows text 
extraction and "modifying" PDF documents.

Ben</text>
			</item>
			<item>
				<date>1100664388</date>
				<sender>daviss</sender>
				<text>Logged In: YES 
user_id=383219

Hi Ben. Thanks for the quick answer. No I don't work for
Qantas (but am in Australia) - there's a number of Scott
Davis's around, although I don't personally know any others.
I don't know Mike Rossi either.

Is this "text extraction not permitted" thing inherent in
the document structure (in which case how come I can read it
on screen?), or is it only enforced by software and PDFBox
refuses to extract it due to some licence of the format or
other legal encumbrance?</text>
			</item>
			<item>
				<date>1100663018</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Actually that file is encrypted and has text extraction 
disallowed.  Notice the lock on the bottom left of the 
Acrobat, also go to Document-&gt;Security-&gt;Display Restrictions 
&amp; Security(Acrobat 6.0 Standard) you will see that text 
extraction is disallowed.

A PDF is encrypted with two passwords/an owner password 
and a user password.  If no user password is set then you 
can open the document in Acrobat and it will not prompt you 
for a password, but document permissions will be enforced 
unless you supply the owner password.

"Scott Davis" sounds familiar to me.  Do you work for 
Qantas?  Do you know a Mike Rossi?

Ben
ben@csh.rit.edu</text>
			</item>
			<item>
				<date>1100662188</date>
				<sender>daviss</sender>
				<text>Logged In: YES 
user_id=383219

Oops. The file could not be attached as it is larger than 256kb.

It is the timetable file found at
http://www.qantas.com.au/flightinfo/qf_pdfTimetable.pdf
</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1100663018</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1100663018</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1066661">
		<submitted_by>mddev</submitted_by>
		<submitted_date>2004-11-15 05:34</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Error extracting text from PDF - org.pdfbox.cos.COSDocument</summary>
		<detail>
Hi Ben,

Firstly congratulations on a really good open source
project. Been using PDFBox to extract text for almost a
year now, and have encountered very few problems...

Here is a bug I discovered that's stopping play at the
moment though... When extracting text from some pdf
documents, I'm seeing this error:

13:19:57,341 ERROR [STDERR] java.lang.Throwable:
Warning: You did not close the PDF Document
13:19:57,341 ERROR [STDERR]     at
org.pdfbox.cos.COSDocument.finalize(COSDocument.java:384)
13:19:57,341 ERROR [STDERR]     at
java.lang.ref.Finalizer.invokeFinalizeMethod(Native Method)
13:19:57,341 ERROR [STDERR]     at
java.lang.ref.Finalizer.runFinalizer(Finalizer.java:83)
13:19:57,341 ERROR [STDERR]     at
java.lang.ref.Finalizer.access$100(Finalizer.java:14)
13:19:57,341 ERROR [STDERR]     at
java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:160)

I cannot detect anything wrong with the pdf documents
that cause this (i have many examples) and other
applications seem happy reading these pdf's.

I am currently using PDFBox 0.6.5 in production, but i
believe this bug is still present in the current CVS build.

I attach a pdf document (66-04.pdf) which throws this
error when trying to extract text from it.

I am calling PDFBox in the following manner:

inputStream = new FileInputStream(pdfFile);
			PDFTextStripper stripper = new PDFTextStripper();
			org.pdfbox.pdfparser.PDFParser parser = new
org.pdfbox.pdfparser.PDFParser(inputStream);
			parser.parse();

			pdDocument = parser.getPDDocument();
			PDDocumentInformation information =
pdDocument.getDocumentInformation();

Hope you can shed some light on what's causing this error!

Many thanks,

Martin.



</detail>
		<follow_ups>
			<item>
				<date>1101443209</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

user claims it works with latest version, closing issue.

Ben</text>
			</item>
			<item>
				<date>1101304008</date>
				<sender>nobody</sender>
				<text>Logged In: NO 


Thank you again for the speedy response Ben.

I updated my testing stack to use the latest released
version of PDFBox (0.6.7a). Using this newer release (and
without making any code changes whatsoever) i can no longer
reproduce this error when extracting text from PDF documents
that reliably threw this error before. I think you must have
nailed the problem somewhere between 0.6.5 and the current
version... many thanks!

If i see this error again and can reliably reproduce it i'll
upload the documents...

Thanks once again,

Martin.

</text>
			</item>
			<item>
				<date>1100886234</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

That error is due to a document not getting closed.  It looks 
like your code is good, there may be an exception being 
thrown somewhere that is causing the document to not get 
closed.

Also note, that many bugs have been fixed in the latest 
version of PDFBox.  There is also a PDDocument.load() 
method which will get rid of some of your document loading 
code.

I ran ExtractText on the attached document, and did not 
notice any problems, do you have a concrete test case that I 
can use to reproduce this issue?

Ben</text>
			</item>
			<item>
				<date>1100885118</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

Hi Ben, thanks for the quick response..

Yes i call close on every pdDocument object just before i 
close the inputStream. Here's the rest of the method:

try {
			inputStream = new 
FileInputStream(pdfFile);
			PDFTextStripper stripper = new 
PDFTextStripper();
			org.pdfbox.pdfparser.PDFParser 
parser = new org.pdfbox.pdfparser.PDFParser(inputStream);
			parser.parse();

			pdDocument = 
parser.getPDDocument();
			PDDocumentInformation 
information = pdDocument.getDocumentInformation();
			if (information != null) {
				pdfInfo.setTitle
(information.getTitle());
			}
			pdfInfo.setContent
(stripper.getText(pdDocument));

		} catch (FileNotFoundException fnfe) {
			log.error("PDF: " + pdfFile + " 
could NOT be found:  ", fnfe);
		} catch (IOException ioe) {
			log.error("PDF: " + pdfFile + " 
problem: " + ioe.getMessage());
		} finally {
			try {
				pdDocument.close();
				inputStream.close();
			} catch (IOException ioe) {
				log.error("PDF: " + 
pdfFile + " finally closing problem: ", ioe);
			}
		}</text>
			</item>
			<item>
				<date>1100834887</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Do you call close() on every PDF document?  I don't see that 
in your code.

Ben</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>108841</id>
				<name>64-04.pdf</name>
				<description>Example pdf press release for org.pdfbox.cos.COSDocument.finalize error.</description>
				<filesize>33415</filesize>
				<filetype></filetype>
				<adddate>1100525692</adddate>
				<submitted_by>1118230</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1101443209</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1101443209</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>108841: 64-04.pdf</old_value>
				<date>1100525693</date>
				<by>mddev</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1062528">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-11-08 08:35</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520288">lucene</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Lucene/PDF Box Newbie</summary>
		<detail>Hi;

I was getting an IOException error (reguarding a lock
on my index files) so I decided to simplify my code a
little.

I just want to see PDF Book work with Lucene.

However the creation of my lucene document takes about
50 minutes for a single pdf document (I was previously
parsing through 10,000 text files in 33 second) and
when I search on the index that get returned I am
unable to get any results.

I am sure I am doing something silly, but I am on a
tight deadline and am having to rush through things.

A little help would be appreciated.

Here is the method I am working with.

private void indexDocs(File file) throws Exception {
		if (file.isDirectory()) { // if a directory
			String[] files = file.list(); // list its files
			//Arrays.sort(files); // sort the files
			for (int i = 0; i &lt; files.length; i++)
				// recursively index them
				indexDocs(new File(file, files[i]));

		}
		//handle everything else
		else if (file.getPath().endsWith(".html")
				|| file.getPath().endsWith(".htm")
				|| file.getPath().endsWith(".txt")
				|| file.getPath().endsWith(".jsp")
				|| file.getPath().endsWith(".pdf")) {
			
			if (file.getPath().endsWith(".pdf")) {
				Document doc = LucenePDFDocument.getDocument(file);
				writer.addDocument(doc);
			} else {
				Document doc = HTMLDocument.Document(file);
				writer.addDocument(doc);
			}
			
		}//close the else if for the file types
	}//close the method

This method is called after an indexWriter has been
created and configured.

Any ideas as to why the document creation for PDF takes
so long and why I can't get any search results from the
index?

Thanks,

Luke</detail>
		<follow_ups>
			<item>
				<date>1099932719</date>
				<sender>lshannon</sender>
				<text>Logged In: YES 
user_id=1155071

Please disreguard this posting. I have created a more
current one.

Thanks,

Luke</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1100488181</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1100488181</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="875685">
		<submitted_by>tadwoods</submitted_by>
		<submitted_date>2004-01-12 13:24</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Type 3 Font Extracts As Garbage</summary>
		<detail>The text in some PDFs with Type 3 Fonts extracts as 
garbage, even though the text is displayed accurately 
and can be copied/pasted accurately from Acrobat 
Reader. The byte[] that is passed into 
PDFStreamEngine.showString(byte[]) consistently 
contains zeros for these Type 3 texts. Creator 
is "ADOBEPS4.DRV". Producer is "Acrobat Distiller 5.0.5".</detail>
		<follow_ups>
			<item>
				<date>1100835240</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

unable to reproduce.</text>
			</item>
			<item>
				<date>1095985355</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Do you have an example of a document that does this.  This 
is an old bug, is this still a problem with the nightly builds?  
Please let me know or I will close this issue.

Ben</text>
			</item>
			<item>
				<date>1073942751</date>
				<sender>tadwoods</sender>
				<text>Logged In: YES 
user_id=722301

I tried changing the encoding with no change in the result.</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1100835240</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1100835240</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1093978531</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1062535">
		<submitted_by>lshannon</submitted_by>
		<submitted_date>2004-11-08 08:50</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520288">lucene</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>PDF/Lucene Integration create of PDF is slow</summary>
		<detail>Hi;

I am trying to build a search engine for an internal
site. I need to parse html, xml, pdf and word doc. 

When parsing pdf I am able to get search results from
the file however it takes 50 seconds to process a
single pdf file. I need faster performance because I
will be deadling with 1000 of files.

Here is the code, it is called after creating an
IndexWriter and optimizing it. I am new to this API
(both Lucene and PDFBox) and on a tight deadline so I
am rusing a little. I am sure there are things I don't
fully understand or are not doing correctly.

Please let me know if any suggestions come to mind.
Thanks. :-)

private void indexDocs(File file) throws Exception {
		if (file.isDirectory()) { // if a directory
			String[] files = file.list(); // list its files
			//Arrays.sort(files); // sort the files
			for (int i = 0; i &lt; files.length; i++)
				// recursively index them
				indexDocs(new File(file, files[i]));

		}
		//handle everything else
		else if (file.getPath().endsWith(".html")
				|| file.getPath().endsWith(".htm")
				|| file.getPath().endsWith(".txt")
				|| file.getPath().endsWith(".jsp")
				|| file.getPath().endsWith(".pdf")) {
			
			if (file.getPath().endsWith(".pdf")) {
				Document doc = LucenePDFDocument.getDocument(file);
				System.out.println(doc.get("summary"));
				writer.addDocument(doc);
			} else {
				Document doc = HTMLDocument.Document(file);
				writer.addDocument(doc);
			}
			
		}//close the else if for the file types
	}//close the method

</detail>
		<follow_ups>
			<item>
				<date>1100488136</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

duplicate of http://sourceforge.net/tracker/index.php?
func=detail&amp;aid=1046300&amp;group_id=78314&amp;atid=552832</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1100488137</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1100488136</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1065166">
		<submitted_by>mohni</submitted_by>
		<submitted_date>2004-11-12 05:29</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Error while splitting documents</summary>
		<detail>I get corrupt pdfs, when splitting pdfs with PDFBox 0.6.7a.

Those corrupt pdfs cannot be opened with Acrobat Reader
and cannot be converted with ImageMagick (convert).
xpdf is still able to open them.

A sample file (test.pdf), sample code (PDFBoxTest.java)
and the generated output (out_0.pdf, out_1.pdf) is
attached.</detail>
		<follow_ups>
			<item>
				<date>1100488053</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

fixed in cvs.

I can run org.pdfbox.PDFSplit test.pdf  and open the 
documents in acrobat.

Ben</text>
			</item>
			<item>
				<date>1100270567</date>
				<sender>mohni</sender>
				<text>Logged In: YES 
user_id=308803

Same result with PDFBox-0.7.0-dev-20041112 :-(</text>
			</item>
			<item>
				<date>1100268189</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Thanks for the report, I will take a look at the PDFs when I 
can.

I did make one bug fix to the PDF writing functionality 
recently so if you tried a nightly release that might work.

Ben</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>108558</id>
				<name>pdfbox.zip</name>
				<description>sample pdfs, generated output and sample code</description>
				<filesize>11291</filesize>
				<filetype></filetype>
				<adddate>1100266156</adddate>
				<submitted_by>308803</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1100488053</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1100488053</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>108558: pdfbox.zip</old_value>
				<date>1100266156</date>
				<by>mohni</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1066003">
		<submitted_by>egalluzzo</submitted_by>
		<submitted_date>2004-11-13 18:53</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>FDF annotation parsing error</summary>
		<detail>I tried using PDFBox 0.6.7a to parse an FDF file
generated with Acrobat 5.0's Export Comments function,
but it failed with a ClassCastException during
FDFDictionary.getAnnotations().  The problem was that
the annotations in my FDF file are COSObjects
containing COSDictionary objects, not COSDictionary
objects directly.  The attached patch (generated on
Windows) fixes the problem, but I don't know enough
about PDFBox to know if it's the "right" fix.

Thanks for the useful library!

    - Eric</detail>
		<follow_ups>
			<item>
				<date>1100487796</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

fixed in CVS.

Ben</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>108712</id>
				<name>fdf.patch</name>
				<description>Patch to fix FDF parsing bug</description>
				<filesize>1380</filesize>
				<filetype></filetype>
				<adddate>1100400800</adddate>
				<submitted_by>549993</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1100487796</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1100487796</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>108712: fdf.patch</old_value>
				<date>1100400800</date>
				<by>egalluzzo</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1068813">
		<submitted_by>jkronegg</submitted_by>
		<submitted_date>2004-11-18 08:27</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>NullPointerException in PDFTextStripper.processPages</summary>
		<detail>Hi ben,

There is a NullPointerException in
PDFTextStripper.processPages:

java.lang.NullPointerException
        at
org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:195)
        at
org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:174)
        at
org.pdfbox.util.PDFTextStripper.getText(PDFTextStripper.java:102)


PDFBox version: PDFBox-0.7.0-dev-20041118

The suspect PDF is too big to be attached (3 MB), so
you can download it here:
http://cui.unige.ch/~kroneggj/Garcia2004_thesis.pdf


Thanks for your amazing work on PDFbox!

best regards,

Julien</detail>
		<follow_ups>
			<item>
				<date>1101127947</date>
				<sender>jkronegg</sender>
				<text>Logged In: YES 
user_id=820653

Hi,
Fix is working with two files that have the
NullPointerexception (PDFBox-0.7.0-dev-20041121).

Thanks Ben.


Julien</text>
			</item>
			<item>
				<date>1100833101</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

fixed in CVS, try tonights nightly build.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1100833101</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1100833101</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1051197">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-10-20 19:33</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Infinite loop converting document to text</summary>
		<detail>When trying to index the document at the below URL 
with the LucenePDFDocument.getDocument(url) 
function, we appear to get an infinite loop. In version 
0.5.6, this loop caused an OutOfMemoryError after about 
10 minutes which we would catch and then move on to 
the next URL. However, in more recent versions, the 
memory management appears to work better, and we 
never run out of memory. Unfortunately, this means that 
once the indexer hits this document, it will just site 
there trying to parse the document forever.

Any ideas what could be wrong here?

http://www.corrections.govt.nz/public/pdf/correctionsne
ws/jun2003.pdf</detail>
		<follow_ups>
			<item>
				<date>1100834594</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

fixed in CVS, please try the nightly build</text>
			</item>
			<item>
				<date>1098326125</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

Forgot to leave my e-mail address:

beaumont_brett@yahoo.com</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1100834594</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1100834594</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1058693">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-11-02 01:49</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>TextPosition does not take account of tz operator</summary>
		<detail>I have subclassed the PDFTextStripper class for 
searching a text and its position. 
The position is wrong when the stream contains a tz 
operator.
I think a possible correction is replacing

float tx = (characterDisplacement-adjustment/1000)
*fontSize + spacing;

with

float tx = (characterDisplacement-adjustment/1000)
*fontSize*horizontalScaling + spacing;

in the org.pdfbox.util.PDFStreamEngine.showString(byte
[] string) method

</detail>
		<follow_ups>
			<item>
				<date>1101404740</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

fixed in CVS.

Ben</text>
			</item>
			<item>
				<date>1100160269</date>
				<sender>akupfer</sender>
				<text>Logged In: YES 
user_id=1156648

Right, horizontalScaling is missing in that assignment. But
it should be corrected to

float tx = ((characterDisplacement-adjustment/1000)*fontSize
+ spacing) * horizontalScaling;

as seen in the PDF reference, version 1.5 on page 372

t_x = (( w0 - T_j/1000 ) * T_fs + T_c + T_w ) * T_h</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1101404740</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1101404740</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1046300">
		<submitted_by>jnioche</submitted_by>
		<submitted_date>2004-10-13 07:55</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Improve extraction speed</summary>
		<detail>I compared different versions of PDFBox for extracting
the text of the following pdf : 
http://java.sun.com/j2ee/1.3/docs/tutorial/doc/J2EETutorial.pdf

0.6.5 : 15 sec
0.6.6 : 25 sec
0.6.7a : 110 sec

I really enjoy the recents improvments in PDFBox,
almost all my pdf documents are correctly  converted to
text, but unfortunatly I had to move back to 0.6.6 as
the last version is much too slow for my application.

Is there an explanation to this? Can it be improved?

Thanks a lot for this great project</detail>
		<follow_ups>
			<item>
				<date>1101484726</date>
				<sender>jkronegg</sender>
				<text>Logged In: YES 
user_id=820653

Hi,

I tested and I'm impressed:

PDFBox-0.7.0-dev-20041125: 3558 chars/s
PDFBox-0.7.0-dev-20041126: 7703 chars/s

That's twice the speed of the old version!

(mean speed over 372 PDFs totalling 21 MB of extracted text.
I emailed the speed histogram to benlitchfield). 

Thanks,

Julien</text>
			</item>
			<item>
				<date>1101477678</date>
				<sender>jnioche</sender>
				<text>Logged In: YES 
user_id=479465

Performances for J2EETutorial.pdf are now (using Xmx=100M) 

0.6.5 : 13 sec
0.6.6 : 24 sec
0.7.0 : 14 sec

Thank you ! </text>
			</item>
			<item>
				<date>1101407355</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Alright, stuff is checked in give it a try, quite a few 
improvements.

Ben</text>
			</item>
			<item>
				<date>1101310714</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I have fixed the performance problem related to the 
overlapping characters.  I am doing some more performance 
tuning and will have stuff checked into CVS by the end of this 
week.

Ben</text>
			</item>
			<item>
				<date>1101293195</date>
				<sender>nestefan</sender>
				<text>Logged In: YES 
user_id=392154

Hello everyone,

I've done some experiments which might be interesting here.
Concerning PDFTextStripper.flushText() and PDFont.encode().
First I applied the patches loongrom explicitely described.
Which both safed 5-10% in my test cases. 

Then I simply commented out the overlap checking at all
which caused the text extraction to run 4 to 20 times faster
(!). This makes the proposition by loongrom to reduce the
complexity from O(n^2) to O(n log n) by spacial sorting of
the elements looking very very promising. 

An alternative could be to devise a (2D) bookkeeping about
which regions are allready covered by preceeding letters,
i.e. keep a list of "extreme" characters. Well, I have to
think about that in more detail :-)

Are there any experiences how often these overlaps really
occur. I mean if the letter is in the file it is in the
file. When it overlaps in display this might be a different
story. Or does the PDF standard really specify how to handle
overlapping of letters? What do other libraries to handle
those cases??</text>
			</item>
			<item>
				<date>1100867414</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Julien,

I think that might be related to issue 
https://sourceforge.net/tracker/index.php?
func=detail&amp;aid=1050506&amp;group_id=78314&amp;atid=552832

This person also claims that it takes exponentially longer with 
file size when it should really be linear.

I am planning on doing tuning this week and hoping that I can 
get some real performance gains.

Ben</text>
			</item>
			<item>
				<date>1100851859</date>
				<sender>jkronegg</sender>
				<text>Logged In: YES 
user_id=820653

Using the nightly build PDFBox-0.7.0-dev-20041118, the text
extraction process took 21 seconds by document (mean over
370 documents, total size 323 MB).

One strong outlier : a the text extraction is greater than
10 minutes on a 11 MB 640 pages PDF.

Julien</text>
			</item>
			<item>
				<date>1098090020</date>
				<sender>loongrom</sender>
				<text>Logged In: YES 
user_id=1139731

In order to improve performance of flushText()'s region 
overlap checking, how about these methods?

1.O(n*n)-&gt;O(nlogn) or O(n) by using sort/binarySearch
Prepare 4 collections made from charactersList.
  a.list which stores TextPositions ordered by getX()
  b.list which stores TextPositions ordered by getY()
  c.list which stores TextPositions ordered by getX()+getWidth
()/3.0f
  d.list which stores TextPositions ordered by getY()+getWidth
()/3.0f
Sorting can be done very easily by using Collections.sort(list, 
new Comparator(){...(methods which comapre x or y)}
And it's cost are , at most, nlogn.
(maybe nearly n, cause charactersList is nearly sorted for this 
meaning, I think)

Then, the checking is only to 
  a.get all TextPosition which has X smaller than getX()
+getWidth()/3.0f
  b.get all TextPosition which has Y smaller than getY()
+getWidth()/3.0f
  c.get all TextPosition which has X+getWidth()/3.0f bigger 
than getX()
  d.get all TextPosition which has Y+getWidth()/3.0f bigger 
than getY()
, using Collections.binarySearch with appropriate Comparator.
And, check wheter there is any other TextPosition listed in a 
and b and c and d.

2.decrease size of the characteresList(=n)
Sometime characterList has a TextPosition whose width 
is "0.0f" (often garbled characters of CJK).
Is it needed to check such TextPositions?
If such TextPositions are removed, performance wil be 
improved and , maybe , garbled characters on result are 
removed, too.
</text>
			</item>
			<item>
				<date>1097906634</date>
				<sender>loongrom</sender>
				<text>Logged In: YES 
user_id=1139731

oh!
I tried to use 
&gt; (http://eclipsecolorer.sourceforge.net/index_profiler.html). 
and got strange results.

It's not a mistery that the profiling-mode is slow(40 times!), 
however, as a strange thing, cost-percentages of each part 
differs so much from what I've got in other testing way
(implanting some codes).

It seems to tend overestimate costs of "not so costing, but  
very frequent" functions, such as TextPosition#getCharacter
() which only returns an existing String object.
I think it may have some relation with VM optimization .

Anyway, it's sure that flushText() costs (even in my result), 
and I'll look for a way to speed it up.

To benlitchfield:
Could you help me to understand and improve performance of 
this function?</text>
			</item>
			<item>
				<date>1097874209</date>
				<sender>loongrom</sender>
				<text>Logged In: YES 
user_id=1139731

jnioche
I looked and test flushText() code.
sure, this can cost much, too.
This function iterates so much time for square of 
characterList which can become 1000 over.

First, it's good to stop frequent calling of 
position.getCharacter() like

String positionCharacter = position.getCharacter();
....
if(positionCharacter != null) 
.... (replace all position.getCharacter() to positionCharacter)

Second , speedup detection of suppressing(whta's this??) by 
replacing 
            for( int i=0; i&lt;charactersList.size() &amp;&amp; 
position.getCharacter() != null; i++ )
            {
                TextPosition character = (TextPosition)
charactersList.get( i );
                //only want to suppress
                if( character == position )
                {
                    //the characters are in order when we get to 
this character
                    //then stop looking for duplicates
                    break;
                }
                else
                {
                    if( character.getCharacter() != null &amp;&amp;
                        character.getCharacter().equals( 
position.getCharacter() ) &amp;&amp;
                        within( character.getX(), position.getX(), 
position.getWidth()/3.0f ) &amp;&amp;
                        within( character.getY(), position.getY(), 
position.getWidth()/3.0f ) )
                    {
                        suppressCharacter = true;
                     }

to

                float lowerBoundaryX = position.getX() - 
position.getWidth()/3.0f;
                float upperBoundaryX = position.getX() + 
position.getWidth()/3.0f;
                float lowerBoundaryY = position.getX() - 
position.getWidth()/3.0f;
                float upperBoundaryY = position.getX() + 
position.getWidth()/3.0f;
            for( int i=0; i&lt;charactersList.size() &amp;&amp; 
positionCharacter != null; i++ )
            {
                TextPosition character = (TextPosition)
charactersList.get( i );
                //only want to suppress
                if( character == position )
                {
                    //the characters are in order when we get to 
this character
                    //then stop looking for duplicates
                    break;
                }
                else
                {
                    if( character.getCharacter() != null &amp;&amp;
                        character.getCharacter().equals( 
position.getCharacter() ) &amp;&amp;
(),                         lowerBoundaryX &lt; character.getX() &amp;&amp; 
upperBoundaryX &gt; character.getX() &amp;&amp;
                        lowerBoundaryY &lt; character.getY() &amp;&amp; 
upperBoundaryY &gt; character.getY())
                    {
                        suppressCharacter = true;
                        break;
                    }

In my environment, this change affects much.
And , if iteration times can be reduced , much more.
For that, I have to understand this class more.
</text>
			</item>
			<item>
				<date>1097861315</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Taken from forums, post by loongrom.

I think pdfbox can be more speeded up with some tunings. 
And that's needed to use pdfbox with enough availability at 
heavy use(now I'm trying). 
Can I ask and suggest about it? 
 
For example, 0.6.7a has a bottle neck on 
org.pdfbox.pdmodel.font.PDFont#encode() because of so 
frequent file access and parsing of CMap file. 
Parsed CMap objects are stored, but (I don't know why) not 
used now. 
 
After I replaced  
 
String cmapName = encodingName.getName(); 
cmapName = performCMAPSubstitution( cmapName ); 
String resourceName = "Resources/cmap/" + cmapName; 
parseCmap( ResourceLoader.loadResource( resourceName ), 
encodingName ); 
 
To 
 
if(!encodingName.getName().equals( 
COSName.IDENTITY_H.getName() )) 
{ 
//uses existing cmap objects if available(for performance) 
cmap = (CMap) cmapObjects.get(encodingName); 
if(cmap == null) 
{ 
//new CMap 
String cmapName = encodingName.getName(); 
cmapName = performCMAPSubstitution( cmapName ); 
String resourceName = "Resources/cmap/" + cmapName; 
InputStream stream = ResourceLoader.loadResource( 
resourceName ); 
if(stream != null) 
{ 
CMapParser parser = new CMapParser(stream , null ); 
parser.parse(); 
cmap = parser.getResult(); 
stream.close(); 
cmapObjects.put(encodingName, cmap); 
} 
} 
} 
 
the cost of encoding() became much more smaller. 
And, the total cost also became less than half. 
 
In addition to it, I found some codes can be much more faster 
especially for specialized purpose(in my case, only text 
extraction) . 
ex.PDFStreamEngine#showString() is one of the costing 
codes and can be much more faster with "only text extraction 
MODE" of PDFStreamEngine. 
 
As I haven't read much of pdfbox codes(a newbie of pdfbox) , 
I might misunderstand. 
So I need any comments about this. Pls. </text>
			</item>
			<item>
				<date>1097853793</date>
				<sender>jnioche</sender>
				<text>Logged In: YES 
user_id=479465

Using writeText() does not improve the speed of extraction
in a significant way. 

I ran another profiling : 
91% of CPU is spent in PDFTextStripper.flushText(),
including 35% in TextPosition.getCharacter().


</text>
			</item>
			<item>
				<date>1097845503</date>
				<sender>jnioche</sender>
				<text>Logged In: YES 
user_id=479465

To Ben : 

I used a profiler plugin for eclipse
(http://eclipsecolorer.sourceforge.net/index_profiler.html). 

To Loogrom : I'll try to use writeText() and see if I get a
big difference.

</text>
			</item>
			<item>
				<date>1097829707</date>
				<sender>loongrom</sender>
				<text>Logged In: YES 
user_id=1139731

jnioche, and I think "getText()" shouldn't be used for large 
PDF. It passes StringWriter(in other word, StringBuffer) to 
writeText() as Writer.
It's not good to store huge objects in JavaVM and frequently 
reassign it.

So, in my case, I call writeText() with buffered file writer.
like,
Writer writer = new BufferedWriter(new OutputStreamWriter
(new FileOutputStream(tmp), "UTF-8"));
stripper.writeText(document, writer);

</text>
			</item>
			<item>
				<date>1097827278</date>
				<sender>loongrom</sender>
				<text>Logged In: YES 
user_id=1139731

jnioche , Could you test my suggestion on public forum? 
Also I need to improve performance for my purpose, and 
trying it now.</text>
			</item>
			<item>
				<date>1097686283</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

&gt;Profiling with version 0.6.7a indicates more than 54% time
&gt;is spent in PDFTextStripper.flushText() and 38% in
&gt;TextPosition.getCharacter().

What tool did you use to profile?  I am not aware of any good 
profiling tools.  I have used -Xprof and -Xrunhprof, but the 
output is a little tough to wade through.

On a former project at a former company I had used jProbe 
and it was pretty nice, but too expensive for open source.

I know there are a couple things that I added that I could 
add a tuning parameter to the text stripper to either perform 
or not perform.  One example is for some word-&gt;pdf 
converted documents it does bold by drawing the same string 
on the screen multiple times just one pixel off each time.  You 
can't tell the difference on the screen.  PDFBox currently 
recognizes that situation and only outputs one set, but it 
does come at a cost and some people might not care if there 
is some duplicated text in their output.  I also think a some 
code modifications could make that part of the algorithm 
faster.

Speed has taken the back seat to accuracy in PDFBox but I 
agree that I need to spend a couple days doing some tuning.

Ben

</text>
			</item>
			<item>
				<date>1097685455</date>
				<sender>jnioche</sender>
				<text>Logged In: YES 
user_id=479465

Here is a snippet of my code : 
*************************************** 
PDFParser pdfparser = new PDFParser(new
ByteArrayInputStream(flow));
pdfparser.parse();

this.document = pdfparser.getPDDocument();

PDFTextStripper pdftextstripper = new PDFTextStripper();
String text = pdftextstripper.getText(this.document);
if (text==null)return "";
return text;
*******************************************

Profiling with version 0.6.7a indicates more than 54% time
is spent in PDFTextStripper.flushText() and 38% in
TextPosition.getCharacter().

With 0.6.6 no method has more than 9% time


</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1101407355</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1101407355</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1071831">
		<submitted_by>cardondenis</submitted_by>
		<submitted_date>2004-11-23 08:10</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>NPE in PrintFields class</summary>
		<detail>Note : attached pdf ok in acro 6.0, some pbs with
fields in acro5.0

version : pdfbox 0.6.7a
stacktrace : 
java.lang.NullPointerException
	at
org.pdfbox.pdmodel.interactive.form.PDCheckbox.&lt;init&gt;(PDCheckbox.java:63)
	at
org.pdfbox.pdmodel.interactive.form.PDFieldFactory.createField(PDFieldFactory.java:93)
	at
org.pdfbox.pdmodel.interactive.form.PDAcroForm.getFields(PDAcroForm.java:191)
	at
org.pdfbox.examples.fdf.PrintFields.printFields(PrintFields.java:73)
	at
org.pdfbox.examples.fdf.PrintFields.main(PrintFields.java:137)
</detail>
		<follow_ups>
			<item>
				<date>1101443148</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

fixed in cvs.

Ben</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>109818</id>
				<name>test.pdf</name>
				<description>file creating the above NPE</description>
				<filesize>17167</filesize>
				<filetype></filetype>
				<adddate>1101226254</adddate>
				<submitted_by>515741</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1101443148</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1101443147</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>109818: test.pdf</old_value>
				<date>1101226254</date>
				<by>cardondenis</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1074251">
		<submitted_by>nestefan</submitted_by>
		<submitted_date>2004-11-27 08:44</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Multithreading issue</summary>
		<detail>In a multithreaded environment we observed PDFBox-0.7.0
getting slower and slower. As it turned out COSName
contains a static HashMap instance (aka Singleton)
which is accessed unsynchronized and gets damaged over
the time.

Attached find a implementation of
org.pdfbox.cos.COSName which solves the problem for us.
(It's only one additional syncrhonized block). For
those who care for speed: Even in a single threaded
environment I cannot see much of a difference with this
additional synchronization.</detail>
		<follow_ups>
			<item>
				<date>1102196684</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

fixed in CVS.

Ben</text>
			</item>
			<item>
				<date>1101799643</date>
				<sender>nestefan</sender>
				<text>Logged In: YES 
user_id=392154

I'm sorry to post sourcecode here, but I'm locked behind a
CVSs proof firewall.</text>
			</item>
			<item>
				<date>1101722422</date>
				<sender>nestefan</sender>
				<text>Logged In: YES 
user_id=392154

About performance: The sync block does become a observable
bottleneck with 5+ threads. One point to avoid this (and to
help PDFBox performance anyway) would be to avoid all calls
of COSName.getPDFName() with a CONSTANT (final) String
argument. All these calls should be done once in a static
context and then the returned object should be stored and
reused over and over!</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>110283</id>
				<name>COSName.java</name>
				<description>Patched source, solves the problem for us.</description>
				<filesize>9542</filesize>
				<filetype></filetype>
				<adddate>1101573897</adddate>
				<submitted_by>392154</submitted_by>
			</file>
			<file>
				<id>110657</id>
				<name>PDFont.java</name>
				<description>An optimized version of PDFont which is a few percent faster and avoid some lock contention in multithreading context.</description>
				<filesize>29098</filesize>
				<filetype></filetype>
				<adddate>1101799643</adddate>
				<submitted_by>392154</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1102196684</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1102196684</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>110657: PDFont.java</old_value>
				<date>1101799643</date>
				<by>nestefan</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>110283: COSName.java</old_value>
				<date>1101573897</date>
				<by>nestefan</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1051446">
		<submitted_by>avadn</submitted_by>
		<submitted_date>2004-10-21 05:38</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="556660">writing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Read / Write from an existing pdf</summary>
		<detail>api version used:PDFBox-0.6.7-dev-20041007

I try to read a pdf created from word 2002 (empty 
page) and created with acrobat distiller 5.0 and just 
write it on disk with an other name.

when i open the new pdf created i have the follow error :
"an error occurs during the process of the document 
(110)" 

the code used is :
 public static void main(String[] args) {
    try{
           String file1="c:/vide.pdf";// original
           String file2="c:/arnaud.pdf";// dest
           InputStream input = null;
           File f1 = new File( file1 );
           input = new FileInputStream(f1);
           PDFParser parser = new PDFParser(input);
           parser.parse();
           PDDocument doc2 = parser.getPDDocument() ;
           File f2 = new File(file2);
           OutputStream output = new FileOutputStream
(f2);
           doc2.save(output); 


        }catch(Exception e){
          System.err.println(e.toString());
        }

  }

thanks
best regards,
Arnaud
</detail>
		<follow_ups>
			<item>
				<date>1102196265</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

fixed in CVS, please try nightly build.

Ben</text>
			</item>
			<item>
				<date>1102075619</date>
				<sender>kurthanner</sender>
				<text>Logged In: YES 
user_id=1164704

I inspected such a PDF document written by PDFBox and 
found out that floating point numbers mistakenly contain a "," 
instead of a ".". Seems like the current user locale causes the 
problem. The following snippet of a PDF (generated with 
german locale) shows a dictionary object with an invalid 
floating point member ("SM"):

24 0 obj
&lt;&lt;
/Type /ExtGState
/SA false
/OP false
/SM 0,0199999996
/op false
/OPM 1
&gt;&gt;
endobj

I identified several locations in the source code, where 
floating point numbers are formatted with the current locale. 
For example:
PDFBox 0.6.7a, COSWriter.java:208:
    private NumberFormat formatDecimal = 
NumberFormat.getNumberInstance();
</text>
			</item>
			<item>
				<date>1101219902</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

I have the same problem with PDFs generated by Adobe 
Distiller 6.0 (by printing to the PDF printer). A corrupt PDF 
document will be created when I load such a document with 
the PDFParser class and save it using COSWriter::write(). The 
Adobe Acrobat Reader reports error 110 when opening the 
generated document.

The same is true for appending Distiller-generated documents.

The PDF CanOpener Adobe Plugin (from Windjack Solutions) is 
able to browse the structure of the saved document except 
the "Resources" dictionary of the pages. Apparently a 
corrupted resources dictionary?

Best regards and thanks,
Kurt</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>105939</id>
				<name>pdf_sample.zip</name>
				<description>the original (vide.pdf) and the result(arnaud.pdf)</description>
				<filesize>24732</filesize>
				<filetype></filetype>
				<adddate>1098362313</adddate>
				<submitted_by>1139928</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1102196265</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1102196265</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>105939: pdf_sample.zip</old_value>
				<date>1098362313</date>
				<by>avadn</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1104546">
		<submitted_by>frobese</submitted_by>
		<submitted_date>2005-01-18 07:42</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Invalid</resolution>
		<summary>InputStream closed in PDFParser</summary>
		<detail>In the class org.pdfbox.pdfparser.PDFParser after
calling the method
parse() the given InputStream is closed by this method.

This is a bad idea, because  continuous reading of a
stream (example: mail) containing multiple pdfs is not
possible.

At my point of view, the given InputStream in the
constructor of
PDFParser has to be closed externally.</detail>
		<follow_ups>
			<item>
				<date>1106699812</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Yes, as PDFBox reads the stream until the very end, you need 
to figure out a way to pass PDFBox a complete stream.  

If you pass PDFBox a stream with multiple PDFs or with extra 
data then it will fail.

Ben</text>
			</item>
			<item>
				<date>1106641674</date>
				<sender>frobese</sender>
				<text>Logged In: YES 
user_id=658913

unfortunatly the method parse() is closing the stream inside the finally 
clause (line 191 of PDFParser.java). The only thing I can do from outside 
is to  subclass the OutputStream, overwrite the close method  and calling 
something like realClose().  But this all sounds not  very nice.</text>
			</item>
			<item>
				<date>1106101057</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

not calling close will not fix your problem.  PDFBox reads until 
the end of the stream!!  You need to pass in a single 
complete PDF stream.  It has been a little while since I have 
worked with the mail API but I must assume that you can get 
an attachment a single stream.  You may need to write a 
facade stream on top of your mail stream that recognizes 
when it is at the end of an attachment.


Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1106699812</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1106699812</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1106699811</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1110029">
		<submitted_by>kurthanner</submitted_by>
		<submitted_date>2005-01-26 08:45</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="556660">writing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Character "&gt;" not quoted in COSName::writePDF</summary>
		<detail>If a PDF document contains a COSName with the special 
character "&gt;" then COSName::writePDF() will not quote 
this character. The resulting PDF document is corrupt 
and can not be parsed, because the character "&gt;" is 
interpreted as starter of the "end of dictionary" 
separator ("&gt;&gt;").

Please extend the condition in the if-statement of the 
method "COSName::writePDF" (file COSName.java, line 
349 - 376) by the following two expressions:

    current == '&lt;' ||
    current == '&gt;' ||
</detail>
		<follow_ups>
			<item>
				<date>1106775949</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Thanks for the report and figuring out the problem.  Fixed in 
CVS.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1106775949</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1106775949</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1106775949</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1097950">
		<submitted_by>fkalfane</submitted_by>
		<submitted_date>2005-01-07 07:57</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Trouble with setField</summary>
		<detail>Hi,

Thanks for your previous reply.

I Have donwnloaded night build and the bug has
disappear but I heve a new issue.

Here is the command line:

d:\fdeb.pdf f67_1 2

When launchnig the programm I have the following
stackTrace:

java.lang.ArrayIndexOutOfBoundsException: -2
	at java.util.ArrayList.set(ArrayList.java:342)
	at
org.pdfbox.pdmodel.interactive.form.PDAppearance.setAppearanceValue(PDAppearance.java:237)
	at
org.pdfbox.pdmodel.interactive.form.PDVariableText.setValue(PDVariableText.java:134)
	at
org.pdfbox.examples.fdf.SetField.setField(SetField.java:70)
	at
org.pdfbox.examples.fdf.SetField.setField(SetField.java:109)
	at org.pdfbox.examples.fdf.SetField.main(SetField.java:92)
Exception in thread "main" 

and here is the actual line. steFontIndex is set to -1.
                    int setFontIndex = tokens.indexOf(
PDFOperator.getOperator( "Tf" ));

You can check with the attached pdf file.

Regards
FK

</detail>
		<follow_ups>
			<item>
				<date>1106710719</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

This is now fixed in CVS, it will be released in 0.7.1.

Ben</text>
			</item>
			<item>
				<date>1106566303</date>
				<sender>jbmurat</sender>
				<text>Logged In: YES 
user_id=1142054

I tested setField example with exactly the same pdf file
that I posted in bug 1050006.
With the new PDFBOX version it throws exactly the same
exception.

I tried to debug it modifying source code :

I changed following code from PDappearance.java (line 237) :

                    int setFontIndex = tokens.indexOf(
PDFOperator.getOperator( "Tf" ));
                    tokens.set( setFontIndex-1, new
COSFloat( fontSize ) );

By the following code :

                    int setFontIndex = tokens.indexOf(
PDFOperator.getOperator( "Tf" ));
                    if (setFontIndex!=-1)
                    {
                    	tokens.set( setFontIndex-1, new
COSFloat( fontSize ) );
                    }

Now there isn't any exception during execution.
When I open the pdf file I modified, I see that modified
field value as changed but text is "transparent". I can
verify the field has the good value extracting form datas in
a external "xfdf" document, but it is impossible to read it
in pdf like it has no color affected to text.

</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>114912</id>
				<name>fdeb.pdf</name>
				<description></description>
				<filesize>98809</filesize>
				<filetype></filetype>
				<adddate>1105113466</adddate>
				<submitted_by>649690</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1106710719</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1106710719</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1106710719</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>114912: fdeb.pdf</old_value>
				<date>1105113466</date>
				<by>fkalfane</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1048834">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-10-17 13:24</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Out of Date</resolution>
		<summary>Problem with PPDDocument.load(inputSteam) in 0.6.7a</summary>
		<detail>Hi,

   When doing text extraction from  PDF Files using the 
PPDDocument.load(inputSteam) in 0.6.7a, as suggested 
by documentation and ExtractText.java, some of the 
files end up with each character being separated by a 
space. The same files are extracted well when using 
version 0.6.6 and 0.6.5 and the PDFParser (as was in 
the previous documentation.)

Regards,
Paulseph Farrugia</detail>
		<follow_ups>
			<item>
				<date>1106777359</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I believe that this has been fixed with the latest text 
extraction algorithm.  I have no PDF to test with so I am 
closing this issue, please reopen if this is still a problem.

Ben</text>
			</item>
			<item>
				<date>1100835736</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

can you please attach the PDF or mail it to me.

Thanks,
ben@csh.rit.edu</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1106777359</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1106777359</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1106777359</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1062544">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-11-08 09:05</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Text extracted as sequence of ?'s</summary>
		<detail>When extracting (Amyuni) generated PDF files we do not
get the text of the PDF. Instead we get a question mark
for every single character of the document. The PDF is
attached, it works fine with Acrobat Reader and XPDF.
It is also possible to "redistill" a working PDF. But
we'd love to see a working Java solution to that problem.</detail>
		<follow_ups>
			<item>
				<date>1106783782</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

fixed</text>
			</item>
			<item>
				<date>1099937844</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

When attaching make sure you check the checkbox.  It is the 
most retarded thing in the world, I don't know why they do 
that.  There is also an attachment size limit, so if you still 
cannot get it working please e-mail me the PDF.

One other thing you could try is to make sure you are using 
unicode output, to do that using the cmd line do this

java org.pdfbox.ExtractText -encoding UTF-16 &lt;pdffile&gt;


Thanks,
ben@csh.rit.edu</text>
			</item>
			<item>
				<date>1099933783</date>
				<sender>nestefan</sender>
				<text>Logged In: YES 
user_id=392154

Me again. I cannot see my attached example PDF. In case you
cannot see it either (maybe it is only accessible to project
coworkers?), I can provide an example PDF demonstrating the
problem.

Thank you for yaou patience and regards,
Frankl</text>
			</item>
			<item>
				<date>1099933584</date>
				<sender>nestefan</sender>
				<text>Logged In: YES 
user_id=392154

Oops. This anonymous post was me. If I can assist you with
debugging, please feel free to ask me.</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1106783782</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1106783782</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1097913">
		<submitted_by>olivier-parent</submitted_by>
		<submitted_date>2005-01-07 07:19</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520288">lucene</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Enhance LucenePDFDocument streams</summary>
		<detail>I would like to submit a little enhancement for the
Lucene PDF indexer:

ByteArrayInputStream/ByteArrayOutputStream replacement
by StringReader/StringWriter

Advantages :
- avoid platform default encoding issues 
  (String construction from ByteArrayOutputStream
without encoding)
- "byte(s) to char"/"char to byte(s)" encoding/decoding
when writing/reading

Disadvantage:
 - in memory content size when processing may double
(char vs. byte).

If the disadvantage prevails, I will provide a patch to
add encoding for InputStreamReader/OutputStreamWriter

Best regards,

Olivier.</detail>
		<existingfiles>
			<file>
				<id>114908</id>
				<name>patch.txt</name>
				<description>LucenePDFDocument streams patch</description>
				<filesize>2978</filesize>
				<filetype></filetype>
				<adddate>1105111175</adddate>
				<submitted_by>1192336</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1106429164</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1106429164</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1106429164</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>114908: patch.txt</old_value>
				<date>1105111175</date>
				<by>olivier-parent</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1436661">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2006-02-22 05:29</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="817859">PDFReader</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Invalid</resolution>
		<summary>displaying a pdf by using a panel</summary>
		<detail>hello,

I want do display a pdf file; i want to parse this 
pdf file into a panel (jpanel, canvas or something 
like that) and then dislaying that panel

but i didn't find any usefull information...

so, could you please help me? hod do i parse the pdf 
file onto a panel? code examples would be great


thanks 
tibe</detail>
		<follow_ups>
			<item>
				<date>1142137941</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

This is not a bug!

See org.pdfbox.pdfviewer.PDFPagePanel

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1142137941</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1142137941</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1142137940</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1109443">
		<submitted_by>purplish_cat</submitted_by>
		<submitted_date>2005-01-25 14:41</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="556660">writing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Exception during write of PDF caused by null COSBase object</summary>
		<detail>
The attached PDF file causes a nullpointerexception
during processing. Basically I run the following code
(similar to the copy example) (this is not production
code but part of the test-suite testing the production
code):

1) Create a parser
2) Parse the file
3) Create a writer
4) Write the complete document to a new file

This particular file causes an exception, that seems to
be caused by a weird object. I haven't completely
looked into it but I believe there is an object that is
referenced in this file (70 0 obj) but isn't used.
There is a 70 1 obj but no 0 and it seems to be different.

I have the suspicion that this causes a COSObject with
a COSBase of null. Which seems to work during parse but
causes an exception in COSObject "accept". 

I've changed the one line in that function to:

return (getObject() != null) ? getObject().accept(
visitor ) : null;

This seems to solve the problem for me, but I've only
been working with PDFBox for a couple days so I'm not
sure of the consequences elsewhere :-)
</detail>
		<follow_ups>
			<item>
				<date>1106693350</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Thanks for the bug report, I made this slightly altered change.

return getObject() != null ? getObject().accept( visitor ) : 
COSNull.NULL.accept( visitor );

Should be in CVS in a couple hours, or try tonights nightly 
build.

Ben</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>117151</id>
				<name>Null COSBase.pdf</name>
				<description>Example file</description>
				<filesize>161550</filesize>
				<filetype></filetype>
				<adddate>1106692890</adddate>
				<submitted_by>1204798</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1106693350</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1106693350</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>117151: Null COSBase.pdf</old_value>
				<date>1106692891</date>
				<by>purplish_cat</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1110301">
		<submitted_by>saaker</submitted_by>
		<submitted_date>2005-01-26 15:15</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="556660">writing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>ArrayIndexOutOfBoundsException</summary>
		<detail>java.lang.ArrayIndexOutOfBoundsException: -2
        at java.util.ArrayList.set(ArrayList.java:342)
        at
org.pdfbox.pdmodel.interactive.form.PDAppearance.setAppearanceValue(PDAppearance.java:237)
        at
org.pdfbox.pdmodel.interactive.form.PDVariableText.setValue(PDVariableText.java:134)
        at
org.pdfbox.examples.fdf.SetField.setField(SetField.java:70)
        at
com.abtex1.jobs.lacounty.pdfbox.PostFields.main(PostFields.java:292)

Broken Statements in class PDAppearance:
int setFontIndex = tokens.indexOf(
PDFOperator.getOperator( "Tf" ));
tokens.set( setFontIndex-1, new COSFloat( fontSize ) );

tokens contents:
[COSName{Tx}, PDFOperator{BMC}, PDFOperator{EMC}]

setFontIndex value:
-1

setField value attempting to post:
c_last

PrintFields display name:
c_first=null
rect=[326.20514,365.79538,475.85953,378.89877]
type=org.pdfbox.pdmodel.interactive.form.PDTextbox

Note: value and display name are the same.

Version: PDFBox-0.7.0 on windows xp.

Below is a class that should reproduce the problem.
Thanks for all your help.


package com.abtex1.jobs.lacounty.pdfbox;

import java.io.IOException;

import org.pdfbox.examples.fdf.SetField;
import org.pdfbox.exceptions.COSVisitorException;
import org.pdfbox.pdmodel.PDDocument;
/**
 * @author a
 *
 * To change the template for this generated type
comment go to
 * Window&amp;gt;Preferences&amp;gt;Java&amp;gt;Code
Generation&amp;gt;Code and Comments
 */
public class PostFields2 {

	private static String[][] labels = {
			{"c_first",            "c_first"},                    
	};
	public static void main(String[] args) throws
IOException, COSVisitorException
	{
		String fileName = "C:\\2002_Empapp.pdf";
		PDDocument pdf = null;
	    try
	    {
            SetField setField = new SetField();

            pdf = PDDocument.load( fileName );
            for (int i = 0; i &lt; labels.length; i++) {
        		System.out.println("" + labels[i][0] +
labels[i][1]);
        		try {
            		setField.setField( pdf, labels[i][0],
labels[i][1] );
				} 
        	    catch(ArrayIndexOutOfBoundsException e){
        	    	System.out.println("Exception " + e +
labels[i][0] + labels[i][1]);
        	    	System.out.println("" );
        	    	e.printStackTrace();
        	    }
            } //	for i
            pdf.save( fileName );
	    }
	    finally
	    {
	        if( pdf != null )
	        {
	            pdf.close();
	        }
	    }

	}
}

</detail>
		<follow_ups>
			<item>
				<date>1106790628</date>
				<sender>saaker</sender>
				<text>Logged In: YES 
user_id=931986

Works great.</text>
			</item>
			<item>
				<date>1106783633</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I actually fixed this bug last night, please give the latest
nightly release a try.

I ran

java org.pdfbox.examples.fdf.SetField tmp\Copy.pdf c_last
Litchfield

and this worked as expected for me, please reopen if it is
still an issue for you.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1106790628</date>
				<by>saaker</by>
			</item>
			<item>
				<field>File Deleted</field>
				<old_value>117294: </old_value>
				<date>1106790628</date>
				<by>saaker</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1106783633</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1106783633</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>117294: Copy of 2002_Empapp.pdf</old_value>
				<date>1106781340</date>
				<by>saaker</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1169060">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-03-23 04:30</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>DateConverter fails on short forms of dates</summary>
		<detail>The DateConverter fails to correctly convert dates that
are supplied in an abbreviated form, such as
"D:20050323", for example. This is the form of dates
when entered in MS-Office as a document property and
then converted to pdf. The day is only converted if the
date string's length is &gt; 8, but the length is ==8. So
the day of the date is 1 instead of 23.

DateConverter should be fixed like this:

if (date.length() &gt;= 6) {
            month = Integer.parseInt(date.substring(4, 6));
         }
         if (date.length() &gt;= 8) {
            day = Integer.parseInt(date.substring(6, 8));
         }
         if (date.length() &gt;= 10) {
            hour = Integer.parseInt(date.substring(8, 10));
         }
         if (date.length() &gt;= 12) {
            minute =
Integer.parseInt(date.substring(10, 12));
         }
         if (date.length() &gt;= 14) {
            second =
Integer.parseInt(date.substring(12, 14));
         }


Greetings, 
Niko Theiner
ntr@sybit.de</detail>
		<follow_ups>
			<item>
				<date>1111879493</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed in CVS.

Ben Litchfield</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1111879493</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1111879493</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1111879493</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1169130">
		<submitted_by>davidhedley</submitted_by>
		<submitted_date>2005-03-23 06:31</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>PDActionLaunch bug</summary>
		<detail>PDActionLaunch incorrectly sets its /Type to /Launch
instead of its /SubType

Trivial fix below:

diff -u -r1.1 PDActionLaunch.java
--- PDActionLaunch.java 27 Feb 2005 20:58:46 -0000      1.1
+++ PDActionLaunch.java 23 Mar 2005 14:31:01 -0000
@@ -55,7 +55,7 @@
     public PDActionLaunch()
     {
         super();
-        setType( SUB_TYPE );
+        setSubType( SUB_TYPE );
     }
 
     /**
</detail>
		<follow_ups>
			<item>
				<date>1111629758</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

good catch, fix is in CVS.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1111629758</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1111629758</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1111629758</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1114045">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2005-02-01 07:13</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="9">9</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Fix file releases</summary>
		<detail>There should be one package called PDFBox, not PDFBox-
0.6 and PDFBox-0.7

Then all the releases should be under that one package.

This will fix the sorting issue that is happening now.

Probably can just rename PDFBox-0.6 to the PDFBox and 
get rid of the PDFBox-0.7 package.

Ben</detail>
		<follow_ups>
			<item>
				<date>1107399911</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

much better</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1107399912</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1107399911</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1000165">
		<submitted_by>b4market</submitted_by>
		<submitted_date>2004-07-29 08:28</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Wont Fix</resolution>
		<summary>German umlauts are not extracted correctly</summary>
		<detail>I have a German PDF document containing umlauts like ä,
ö, ü. If I use the PDFTextStripper to extract the text
of the document, the umlauts are not extracted
correctly, e.g. the German word 'zugänglichen' is
extracted as 'zug¨ lichen'.

Attached is a sample document containing six words with
umlauts as little letters and as capital letters.

Thanks,
Tilman</detail>
		<follow_ups>
			<item>
				<date>1113144904</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I think the solution to this is for you to run the extracted text 
with a post processor.  Something that just just looks for 
the 'a' and the diaeresis next to each other and replaces it 
with the correct character.  You might even be able to create 
a special case Filter Stream that you pass to the 
PDFTextStripper.getText method.

I don't think handling this directly in the PDFBox code would 
be the correct solution for a couple different reasons.

If the post-process solution is not good enough for you then 
please re-open this issue.

Ben</text>
			</item>
			<item>
				<date>1106222532</date>
				<sender>dianeshen</sender>
				<text>Logged In: YES 
user_id=61141

Guys..

I've already change the FileOutputStream encoding to UTF-8,
however, the german umlauts is not extracted correctly in
the text file (i.e. 'ä' is converted to 'a' and the diaeresis).

Anyone has solutions?

Thanks,
Diane
diane.shen (at) gmail.com</text>
			</item>
			<item>
				<date>1093870369</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Wait, I do see an attached file, I will take a look at that.

Ben</text>
			</item>
			<item>
				<date>1093870325</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

b4market

If you are able to send me the PDF document, maybe there is 
something that I can do.  I might be able to add a condition 
that says if these two characters are drawn on top of each 
other then output an umlaut.

Please attache file, post link, or email me a document and I 
will take a look, otherwise I will close this issue.

ben@csh.rit.edu</text>
			</item>
			<item>
				<date>1092847831</date>
				<sender>b4market</sender>
				<text>Logged In: YES 
user_id=330781

I tried setting the character set for the OutputStreamWriter
but this did not change anything. But maybe I can give you
an explanation of what is happening. As far as I know, LaTeX
does not handle umlauts as one character but as two
characters, e.g. 'ä' consist of the 'a' and the diaeresis
above the 'a'. So LaTeX can combine existing characters to
form umlauts. If you want to write an 'ä' in LaTeX, you will
use "a, saying I want the character that has a diaeresis
above the 'a'. Though it looks correct using Acrobat Reader,
I suppose PDFBox cannot handle this.

Tilman</text>
			</item>
			<item>
				<date>1091597657</date>
				<sender>b4market</sender>
				<text>Logged In: YES 
user_id=330781

Well, I will try to do so next week (my notebook is currently in 
repair). Meanwhile I found out that text extraction depends 
on the PDF document. The documents I used at first were 
generated by LaTeX. But incidentally, I used a different 
document (which was created by an Adobe product) and 
those umlauts were extracted flawlessly. So there must be a 
diference, somehow.

Tilman</text>
			</item>
			<item>
				<date>1091597235</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

You have to set your preferred charset in the writer in order 
to extract the umlaute.

The second parameter of stripper.writeText is a writer. This 
writer has to be cretaed using a sensfull encoder (e.g. 
OutputStreamWriter writer = new OutputStreamWriter(new 
FileOutputStream(args[0] + ".txt"), "UTF-8");) 

If you dont like utf-8 encoding, you can use any java valid 
charset here (ISO-8859-1 for example).</text>
			</item>
			<item>
				<date>1091597182</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

You have to set your preferred charset in the writer in order 
to extract the umlaute.

The second parameter of stripper.writeText is a writer. This 
writer has to be cretaed using a sensfull encoder (e.g. 
OutputStreamWriter writer = new OutputStreamWriter(new 
FileOutputStream(args[0] + ".txt"), "UTF-8");) 

If you dont like utf-8 encoding, you can use any java valid 
charset here (ISO-8859-1 for example).</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>95683</id>
				<name>test.pdf</name>
				<description>PDF document containing umlauts</description>
				<filesize>8126</filesize>
				<filetype></filetype>
				<adddate>1091114920</adddate>
				<submitted_by>330781</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1113144904</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1113144904</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1113144904</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1093978524</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>95683: test.pdf</old_value>
				<date>1091114920</date>
				<by>b4market</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1003149">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-08-04 03:02</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Wont Fix</resolution>
		<summary>Extracting images places when extracting the text</summary>
		<detail>I used pdfbox to extract text out of pdf documents.

Is there any way to also insert a &lt;IMAGE/&gt; tag inlined in 
the text exactly in the place where the image should be 
placed?


I tried to modify the textStripper, method processPage 
to see if there is a image in the page or not. 

COSDictionary dic = resources.getCOSDictionary();
    COSBase pdfName = dic.getItem
(COSName.getPDFName("XObject"));
    if (pdfName != null) {
        System.out.println("IMAGE on page " + 
currentPage);
    }


But this is loosing the flow. 

Any ideea how to do ?

Thanx
</detail>
		<follow_ups>
			<item>
				<date>1113264422</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I don't think this should be part of the standard PDF text 
extraction, but there is still hope.

This can be done by implementing the Do operator and 
putting an updated PDFTextStripper.properties in your 
classpath before the PDFBox.jar file.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1113264422</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1113264422</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1113264422</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1093978524</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1050512">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-10-20 00:04</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>bug in COSObject#setObject</summary>
		<detail>I found that the 0.6.7a version has fixed the bug that 
when the ”baseObject“ is an instance of COSStream the 
setObject method throws "Unknown object substitution 
type:" Exception.

but i have encountered a new situation,that is 
the "baseObject" is an instance of COSStream but 
the "object“ is an instance of COSDictionary,so it throws 
cast Exception.

how can i deal with it ?

thanks!</detail>
		<follow_ups>
			<item>
				<date>1107400000</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

fixed in CVS.

Ben</text>
			</item>
			<item>
				<date>1100834670</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Please send me the PDF document if possible.

ben@csh.rit.edu</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1107400000</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1107400000</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1112660">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2005-01-30 09:39</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>TextPosition.getFontSize returns 1 instead of actual size</summary>
		<detail>When I use the following to obtain the font size of a 
text object, I always
get 1.0:

TextPosition text;
...
float n = text.getFontSize()

This occurs with text of differing sizes, so I imagine it 
isn't due to the document
having a scaling factor.  In comparison, JPedal always 
gives me the correct
font sizes that the text is printed at.

I am using the latest version (0.7.0) of PDFBox.  Am I 
doing something wrong
or has this functionality not yet been implemented?  
Does anyone know of any
workarounds?  (I need to somehow get either the 
height, or the font size, of
the text block.)
</detail>
		<follow_ups>
			<item>
				<date>1107709339</date>
				<sender>tamirhassan</sender>
				<text>Logged In: YES 
user_id=938436

It seems to be working beautifully now.  Thanks very much!

Tam</text>
			</item>
			<item>
				<date>1107626348</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Try tonights build.  I recently refactored COSStream to 
extend COSDictionary, and that introduced a bug which is 
fixed now.

Ben</text>
			</item>
			<item>
				<date>1107515622</date>
				<sender>tamirhassan</sender>
				<text>Logged In: YES 
user_id=938436

Thanks very much for your work.  However, I can't seem to
get any of the latest nightly builds working.  I keep
getting a Null Pointer Exception in COSDictionary.  As an
example, running ExtractText gives:

(I am using the .jar file as compiled with Ant.)

java -classpath .:PDFBox-0.7.1-dev.jar:log4j-1.2.9.jar
org.pdfbox.ExtractText /data/pdfs/demo1.pdf demo1.temp
log4j:WARN No appenders could be found for logger
(org.pdfbox.util.ResourceLoader).
log4j:WARN Please initialize the log4j system properly.
Exception in thread "main" java.lang.NullPointerException
        at
org.pdfbox.cos.COSDictionary.&lt;init&gt;(COSDictionary.java:79)
        at org.pdfbox.cos.COSStream.&lt;init&gt;(COSStream.java:96)
        at
org.pdfbox.pdmodel.common.COSStreamArray.&lt;init&gt;(COSStreamArray.java:78)
        at
org.pdfbox.pdmodel.common.PDStream.createFromCOS(PDStream.java:161)
        at
org.pdfbox.pdmodel.PDPage.getContents(PDPage.java:550)
        at
org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:201)
        at
org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:180)
        at org.pdfbox.ExtractText.main(ExtractText.java:220)
</text>
			</item>
			<item>
				<date>1107398875</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Alright this is now available on the TextPosition class.  It is a 
combination of three parameters

fontSize
xScale
yScale

Unfortunately you need all three to tell the size of the font.  
There are many cases where the fontSize will be 1, but 
xScale/yScale are 8, so it could be interpreted that the 
actual font size is 8.  But there are other cases where 
fontSize is 1 and xScale it 4 and yScale is 8( a tall squished 
font) how should the actual font size be interpreted?  It can't 
be by PDFBox anyway, so that is why there are three 
parameters.

Hope this helps, please let me know if there are any problems.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1107398875</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1107398875</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1117475">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2005-02-06 12:14</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>ExtractText adds extra spaces</summary>
		<detail>PDFBox works very well for extracting the text from most 
of the PDF
files we get (with the ExtractText utility), but I've 
noticed a few
that cause some big problems. I've attached one of 
them.

I note in particular two problems:
1) it doesn't reassemble the words correctly ("Volumetric 
Layer"
becomes "V olumetric La y er")
2) it is dropping characters occasionally ("The problem of 
segmenting"
becomes "The oblem gmenting")

See cvpr98.pdf

Ben
</detail>
		<follow_ups>
			<item>
				<date>1113145428</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

cvpr98.pdf contained type3 fonts which use a special font 
matrix for sizing.  This is fixed in CVS now.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1113145428</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1113145428</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1113145428</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>summary</field>
				<old_value>Extract adds extra spaces</old_value>
				<date>1107720904</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1038595">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-10-01 10:09</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Out of Date</resolution>
		<summary>Font-Exception during processOperator in PDFStreamEngine</summary>
		<detail>I want handle with Fontsize during tracing the text. But 
i got in the file: 

http://www.www2004.org/proceedings/docs/1p155.pdf

only fontsize=1 for all text.
I use the code from PdfTextStripper. I tried to call 
information about the size with the method flushText().

I can't find the reason for that!
I thank for ever comment or advice.</detail>
		<follow_ups>
			<item>
				<date>1113266251</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

You need to look at the xScale and yScale parameters to 
determine the true size of the glyph.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1113266251</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1113266251</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1113266251</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1154082">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-03-01 01:21</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>endless parsing</summary>
		<detail>I used the Lucene document implementation to index some
pdf files when I encountered the following problem:

Parsing of the (quite small) file
http://www.faa.gov/certification/aircraft/av-info/software/Research/COTS.pdf
seems to lead to an endless operation.

Since I used the lucene part, the "parsing" category is
just a guess.

PDFBox Version 0.7.0 
Java 1.4.2 (Linux) and also 1.5 (Windows)

Hope it helps.
</detail>
		<follow_ups>
			<item>
				<date>1111399419</date>
				<sender>milesbarr</sender>
				<text>Logged In: YES 
user_id=763217

The fix works great. 
 
 
Thanks, 
Miles </text>
			</item>
			<item>
				<date>1110854638</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed in CVS, please try nightly build.

Ben</text>
			</item>
			<item>
				<date>1109677125</date>
				<sender>milesbarr</sender>
				<text>Logged In: YES 
user_id=763217

I'm experiencing the same thing when I try to index this PDF file: 
 
http://www.manchester.gov.uk/leisure/pdf/debdaleform.pdf 
 
Below is the code I'm using to get the text from the file: 
 
String filename = ... 
FileInputStream in = new FileInputStream(filename); 
PDFParser pdfParser = new PDFParser(in); 
pdfParser.parse(); 
PDDocument pdf = pdfParser.getPDDocument(); 
 
String ret; 
if (!pdf.isEncrypted()) { 
    CharArrayWriter out = new CharArrayWriter(); 
    PDFTextStripper stripper = new PDFTextStripper(); 
    stripper.writeText(pdf, out); &lt;---- HANGS HERE 
    ret = out.toString(); 
} 
else { 
    // PDF is encrypted, content is meaningless 
    ret = null; 
} 
 
pdf.close(); 
return ret; 
 
I've traced it down to CMapParser.java lines 180-196. I'm not sure what 
the function does but the test for the while loop is 
lessThanOrEqual( startBytes, endBytes ) and endBytes[0] is 127, i.e. 
the maximum value for a byte so the condition is never false. I've 
watched startBytes[0] go from -128 up to 127 and round again. 
 
I don't have a workaround at the moment. </text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1110854638</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1110854638</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1110854638</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1044047">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2004-10-10 08:37</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Default encryption does not work</summary>
		<detail>PDDocument pdf = PDDocument.load( "test.pdf" );
PDStandardEncryption encryptionOptions = new 
PDStandardEncryption();
encryptionOptions.setCanPrint( false );
pdf.setEncryptionDictionary( encryptionOptions );
pdf.encrypt( "master", null );
pdf.save( "test-output.pdf");

Does not seem to work for some reason.</detail>
		<follow_ups>
			<item>
				<date>1123809406</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed in CVS, give it a try!!

Ben Litchfield</text>
			</item>
			<item>
				<date>1114710521</date>
				<sender>dmarreco</sender>
				<text>Logged In: YES 
user_id=1225955

Well, it DOES work, if you de-crypt de document with pdfbox 
(pdf.decrypt("master")).

Still, ACROBAT wont open the encrypted file. WELL, it will, 
but all scrumbled data.

the encryption algorithm is not quite the same used by 
acrobat?
</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1123809406</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1123809406</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1123809406</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1050006">
		<submitted_by>jbmurat</submitted_by>
		<submitted_date>2004-10-19 05:52</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Out of Date</resolution>
		<summary>Can't read PDF document after modifying one form field value</summary>
		<detail>First of all, sorry for my english ;-).  
I tried to test the "SetField" example from
PDFBox-0.6.7a package. When I run it, it looks good, I
have no exception... 
But the modified file is an empty document with the
same page number than the original doc got. 
 
If you want, you can test it with the attached pdf
 
Thanks a lot 
</detail>
		<follow_ups>
			<item>
				<date>1113266773</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

The below line now works for me.

java org.pdfbox.examples.fdf.SetField m0.pdf 
M0_02_A_DEN_1 "Benjamin"

Ben</text>
			</item>
			<item>
				<date>1098190615</date>
				<sender>jbmurat</sender>
				<text>Logged In: YES 
user_id=1142054

Sorry the attachement didn't work..
I give you a link :
http://www.mecene.net/m0.pdf 
</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1113266773</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1113266773</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1113266773</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1103032308</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1050506">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2004-10-19 23:50</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Out of Date</resolution>
		<summary>extraction speed become lower and lower when process big pdf</summary>
		<detail>I use the pdfbox to process big pdf file (&gt;100M),the 
main work is extraction the text of each page and do 
some analysis.

But i found the process speed become lower and lower.
If i cut the big file into sevaral smaller files(about 
10M),the total process period of these smaller files &lt; 
that of the big one.

PS. i have forbidden the usage of system's pagefile.

And there is an pdfbox temp file in the user's temp 
directory,what dose this file used for?

thanks!</detail>
		<follow_ups>
			<item>
				<date>1113266925</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I believe this was fixed during speed improvements from last 
version.  I don't have a 100MB PDF but I tried on a 50MB file 
and it seemed to be normal speeds.

Please reopen if this is still an issue for you.

Ben</text>
			</item>
			<item>
				<date>1102196779</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Can you please try the nightly build to see if that fixes this 
issue, otherwise can you arrange to send me the PDF file.

Thanks,
Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1113266925</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1113266925</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1113266925</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1176142">
		<submitted_by>kentfitch</submitted_by>
		<submitted_date>2005-04-03 21:06</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Duplicate</resolution>
		<summary>cpu loop on parsing (0.7.0)</summary>
		<detail>0)  env:
java -version
java version "1.5.0_01"
Java(TM) 2 Runtime Environment, Standard Edition (build
1.5.0_01-b08)
Java HotSpot(TM) Client VM (build 1.5.0_01-b08, mixed
mode, sharing)

uname -a
Linux beckett 2.4.21-4.EL #1 Fri Oct 3 18:13:58 EDT
2003 i686 i686 i386 GNU/Linux

1) Save
http://oig.hhs.gov/oei/reports/oei-01-97-00192.pdf to 
/tmp/oei-01-97-00192.pdf

2) run the pdfBox (0.7.0 jar release)
LucenePDFDocument.getDocument method on this file:

String fn = "/tmp/oei-01-97-00192.pdf" ;
File f = new File(fn) ;
doc = LucenePDFDocument.getDocument(f) ;

3) cpu loop results.  kill -QUIT shows various stack traces
within org.pdfbox.cmapparser.CMapParser.parse, eg:

at
org.pdfbox.cmapparser.CMapParser.increment(CMapParser.java:205)
        at
org.pdfbox.cmapparser.CMapParser.parse(CMapParser.java:187)
        at
org.pdfbox.pdmodel.font.PDFont.parseCmap(PDFont.java:532)
        at
org.pdfbox.pdmodel.font.PDFont.encode(PDFont.java:358)
        at
org.pdfbox.util.PDFStreamEngine.showString(PDFStreamEngine.java:261)
        at
org.pdfbox.util.operator.ShowText.process(ShowText.java:63)
        at
org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:405)
        at
org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:385)
        at
org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:168)
        at
org.pdfbox.util.PDFTextStripper.processPage(PDFTextStripper.java:232)
        at
org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:205)
        at
org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:180)
        at
org.pdfbox.searchengine.lucene.LucenePDFDocument.addContent(LucenePDFDocument.java:261)
        at
org.pdfbox.searchengine.lucene.LucenePDFDocument.getDocument(LucenePDFDocument.java:170)
        at
org.apache.lucene.demo.PDFTestDocument.Document(PDFTestDocument.java:69)
        at
org.apache.lucene.demo.PDFTestDocument.main(PDFTestDocument.java:40)
</detail>
		<follow_ups>
			<item>
				<date>1112654609</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

duplicate of previously reported issue, as you noticed it has 
been fixed in the nightly build.

Ben</text>
			</item>
			<item>
				<date>1112588699</date>
				<sender>kentfitch</sender>
				<text>Logged In: YES 
user_id=551173

Just tried nightly build 20050330 and the parse/extract
nolonger loops.</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1112654609</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1112654609</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1112654609</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1154326">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2005-03-01 08:06</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>ContentStreamWriter does not support arrays</summary>
		<detail>java.io.IOException: Error:Unknown type in content 
stream:COSArray{[COSString{M
ster}, COSFloat{-250.0}, COSString{Specification}, 
COSFloat{-250.0}, COSString{
}, COSFloat{-250.0}, COSString{Results}, COSFloat{-
250.0}, COSString{Entry}]}
        at 
org.pdfbox.pdfwriter.ContentStreamWriter.writeObject
(ContentStreamWr
ter.java:150)
        at 
org.pdfbox.pdfwriter.ContentStreamWriter.writeTokens
(ContentStreamWr
ter.java:91)
        at 
org.pdfbox.pdfwriter.ContentStreamWriter.writeTokens
(ContentStreamWr
ter.java:162)
</detail>
		<follow_ups>
			<item>
				<date>1110854511</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed in CVS thanks to submission from user.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1110854511</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1110854510</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1110854510</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1153322">
		<submitted_by>o_otto</submitted_by>
		<submitted_date>2005-02-28 01:36</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>PDDocument: getPageCount fails to handle nested arrays</summary>
		<detail>Affects: PDFbox release 0.7.0

ISSUE:

Classcast exception when attempting to parse PDF -
document:

java.lang.ClassCastException
        at
org.pdfbox.pdmodel.PDDocument.getPageCount(PDDocument.java:548)
        at
org.pdfbox.pdmodel.PDDocument.getPageCount(PDDocument.java:534)
        at
org.pdfbox.examples.persistence.AppendDoc.appendDocument(AppendDoc.java:176)


CAUSE:

When using a pdf - document with a nested content
structure, 
the PDDocument method getPageCount causes a classcast
exception, as it always expects a COSObject instance in
the COSArray, but the COSArray may also contain
COSDictionary instances.

RESOLUTION:

Use a recursive method that recurses whenever it finds
a COSDictionary instance in the COSArray:
     /**
     * This recursive function handles nested arrays found
     * int the pageArray by recursing accordingly.
     * @param array a COSArray, may be null.
     * @return int pagecount, defaults to 0.
     */
    private int getPageCount(COSArray array) {
        //init count
        int count = 0;
        if(array != null) {
            for(int k=0; k &lt; array.size(); k++) {
                Object entry = array.get(k);
                if(entry != null) {
                    if(entry instanceof COSObject) {
                        count +=
getPageCount((COSObject) entry);
                    } else if(entry instanceof
COSDictionary) {
                        COSArray nestedArray =
(COSArray) ((COSDictionary) entry).getDictionaryObject(
COSName.KIDS );
                        count += getPageCount(nestedArray);
                    }
                }
            }
        } else {
            count ++;
        }
        return count;
    }

Sorry for posting code here, but i don't have tim to
set up a CVS account by now.</detail>
		<follow_ups>
			<item>
				<date>1110855961</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Thanks for the report, this is fixed in CVS.

Ben</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>123453</id>
				<name>PDDocument.java</name>
				<description>The fixed PDDocument of release 0.7.0</description>
				<filesize>21058</filesize>
				<filetype>application/octet-stream</filetype>
				<adddate>1109583400</adddate>
				<submitted_by>1229070</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1110855961</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1110855961</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1110855961</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>123453: PDDocument.java</old_value>
				<date>1109583400</date>
				<by>o_otto</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="830512">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2003-10-26 06:42</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Poor text extraction for excel/landscape PDFs</summary>
		<detail>Symptoms: I use PDFBox to index PDF documents with 
Lucene. Those documents are
produced by ActivePDF which convert many file formats 
to PDF. It works fine
with Word and PowerPoint documents but it produces 
bad lucene index for Excel
converted files : content of the cells cannot be 
retreived with Lucene.

Diagnostic: I've performs some investigations (with 
PDFStripper) and I discover
that the content of the Excel cells are concatenated 
without spaces (i.e. &amp;quot;Content
of A1Content of B1Content of A2...&amp;quot;) . Note 
that 'visually' the PDF seems correct
(content of cell are really separated).
</detail>
		<follow_ups>
			<item>
				<date>1133347132</date>
				<sender>dybjsun</sender>
				<text>Logged In: YES 
user_id=1384103

Identity-H</text>
			</item>
			<item>
				<date>1112670754</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

There are few things that feel better than closing out the 
oldest bug in your project!

This is fixed in CVS and will be available in the next release, 
due in a couple days.

Ben</text>
			</item>
			<item>
				<date>1110422107</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Also see jstl-quick-reference.pdf

Ben</text>
			</item>
			<item>
				<date>1106232824</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

The below comment was emailed to me from a user.

----------------------------------------------------
I use PDFTextStripper of pdfbox nightly release 1/14/05 to 
extract text from a
landscape pdf file,

but the string which should be in one line is split to several 
lines in the
result.

I have found that

     context.setTextMatrix(adjMatrix.multiply
(context.getTextMatrix()));

in ShowTextGlyph.java may should be

     context.setTextMatrix(context.getTextMatrix().multiply
(adjMatrix));

but it still dosn't work.

the pdf file is attached!
</text>
			</item>
			<item>
				<date>1096228523</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I am attaching another document that has a Rotate of 270 
degrees, which is basically the same problem.

Ben</text>
			</item>
			<item>
				<date>1095985262</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I spent quite some time working on this, but couldn't quite 
get it working.  The page has a Rotate 90 degrees in it and 
the x/y scales are zero.  Will revisit this at a later date.

Ben</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>65467</id>
				<name>test2.xls.pdf</name>
				<description></description>
				<filesize>2352</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1067179372</adddate>
				<submitted_by>601708</submitted_by>
			</file>
			<file>
				<id>102863</id>
				<name>test.zip</name>
				<description>another PDF with Rotate of 270</description>
				<filesize>250453</filesize>
				<filetype></filetype>
				<adddate>1096228523</adddate>
				<submitted_by>601708</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1112670754</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1112670754</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1112670754</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>102863: test.zip</old_value>
				<date>1096228523</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>summary</field>
				<old_value>Poor text extraction for excel converter PDF</old_value>
				<date>1095985262</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1093978533</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>65467: test2.xls.pdf</old_value>
				<date>1067179372</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1171474">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-03-27 11:10</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Unable to extract field names with some PDFs (even crypted)</summary>
		<detail>I ran into a previous bug with the current release, it
threw an ArrayIndexOutOfBoundsException when trying to
set a field value.

I checked out the source from CVS and built what it
calls 0.7.1-dev.

Tried the PrintFields program on some of the included
examples, works fine. Doesn't work on this one though,
where the previous version managed to parse the names.

http://www.efanniemae.com/singlefamily/pdf/1003_revised_i.pdf

318 top-level fields were found on the form
|--£¯%
  |--£¯%null = null, 
type=org.pdfbox.pdmodel.interactive.form.PDCheckbox
|  |--£¯%null = null, 
type=org.pdfbox.pdmodel.interactive.form.PDCheckbox
|--?y}ÎH9“»;U$
|  |--?y}ÎH9“»;U$.null = null, 
type=org.pdfbox.pdmodel.interactive.form.PDCheckbox
|  |--?y}ÎH9“»;U$.null = null, 
type=org.pdfbox.pdmodel.interactive.form.PDCheckbox
|  |--?y}ÎH9“»;U$.null = null, 
type=org.pdfbox.pdmodel.interactive.form.PDCheckbox
|  |--?y}ÎH9“»;U$.null = null, 
type=org.pdfbox.pdmodel.interactive.form.PDCheckbox
|  |--?y}ÎH9“»;U$.null = null, 
type=org.pdfbox.pdmodel.interactive.form.PDCheckbox
|--Yy.Yy = null, 
type=org.pdfbox.pdmodel.interactive.form.PDTextbox
|--
   ÇÆ-—m•.

etc......

Good luck. Great project, thanks.
rnice atsymbol fraudscrub adot com
if you need more info.</detail>
		<follow_ups>
			<item>
				<date>1113167215</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed in CVS.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1113167215</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1113167215</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1113167215</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1153499">
		<submitted_by>ninki</submitted_by>
		<submitted_date>2005-02-28 06:24</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Splitter splits 1 page too soon for first file.</summary>
		<detail>The first file the Splitter produces always has 1 page
too few if splitAtPage &gt; 1. The problem occurs because
of the following line in createNewDocumentIfNecessary():

if( (pageNumber+1) % splitAtPage == 0 ||
currentDocument == null )

Also, I would suggest splitting the method into two
other methods for better refactoring and ease of
overridding:

protected boolean isNewDocNecessary() {
return pageNumber % splitAtPage == 0 || currentDocument
== null;
}

protected void createNewDocument() throws IOException {
currentDocument = new PDDocument();
currentDocument.setDocumentInfo(pdfDocument.getDocumentInformation());
currentDocument.getDocumentCatalog().setViewerPreferences(
 pdfDocument.getDocumentCatalog().getViewerPreferences());
newDocuments.add(currentDocument);
}

And finally:

protected void createNewDocumentIfNecessary() throws
IOException {
if (isNewDocNecessary()) {
  createNewDocument();
}
}
</detail>
		<follow_ups>
			<item>
				<date>1110855114</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Excellent suggestion, this is now in CVS.  Give the nightly 
build a try.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1110855114</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1110855114</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1110855114</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1165686">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2005-03-17 16:31</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Expected int type parse error</summary>
		<detail>Parsing error for 
data-000001.pdf 
data-000002.pdf
data-000120.pdf
data-000122.pdf
data-000137.pdf
data-000163.pdf
data-000165.pdf
data-000348.pdf</detail>
		<follow_ups>
			<item>
				<date>1113667098</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

data-000001.pdf has been fixed, a couple were corrupted 
documents.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1113667098</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1113667097</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1113667097</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1261796">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-08-17 01:40</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Exception: Unknown encoding for 'GBK-EUC-H' </summary>
		<detail>the issue is same as issue #1208652. Moreover i have 
upload a test pdf to reproudce the issue.</detail>
		<follow_ups>
			<item>
				<date>1137898648</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

oa03.pdf and 5.pdf now work correctly with

java org.pdfbox.ExtractText -encoding UTF-16LE &lt;pdf-file&gt;

Ben</text>
			</item>
			<item>
				<date>1124761254</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Also see 5.pdf on FTP
</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>145937</id>
				<name>oa03.pdf</name>
				<description></description>
				<filesize>23700</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1124268000</adddate>
				<submitted_by>100</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1137898648</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1137898648</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1137898648</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>145937: oa03.pdf</old_value>
				<date>1124268001</date>
				<by>nobody</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1261803">
		<submitted_by>foxwyp</submitted_by>
		<submitted_date>2005-08-17 01:46</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Duplicate</resolution>
		<summary>Exception: Unknown encoding for 'GBK-EUC-H' </summary>
		<detail>the issue is same as #1208652. moreover, i have 
uploaded a test pdf to reproduce it.</detail>
		<follow_ups>
			<item>
				<date>1124330272</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

duplicate of 1261796</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>145939</id>
				<name>oa03.pdf</name>
				<description>the test pdf</description>
				<filesize>23700</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1124268419</adddate>
				<submitted_by>1329060</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1124330273</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1124330272</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1124330272</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>145939: oa03.pdf</old_value>
				<date>1124268420</date>
				<by>foxwyp</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1172740">
		<submitted_by>a_liu</submitted_by>
		<submitted_date>2005-03-29 11:49</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Text extraction enters infinite loop </summary>
		<detail>Attempting text extraction for these PDF files causes
PDFBox to hang:

http://www.ptc.com/support/notice/ProI_Quality41_CH.pdf
http://www.qualstar.com/WORM_Tape.pdf
http://www.ptc.com/support/notice/ProI_Quality41_CS.pdf
http://www.oig.hhs.gov/oas/reports/region3/30100023.pdf
http://www.epa.gov/smartgrowth/pdf/built.pdf

"kill -QUIT" yields this stack trace:

Full thread dump Java HotSpot(TM) Client VM
(1.4.2_06-b03 mixed mode):

"Signal Dispatcher" daemon prio=1 tid=0x080a6798
nid=0x975 waiting on condition [0..0]

"Finalizer" daemon prio=1 tid=0x08092bc0 nid=0x975 in
Object.wait() [aad3d000..aad3d87c]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0xab3ad8e8&gt; (a
java.lang.ref.ReferenceQueue$Lock)
        at
java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:111)
        - locked &lt;0xab3ad8e8&gt; (a
java.lang.ref.ReferenceQueue$Lock)
        at
java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:127)
        at
java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)

"Reference Handler" daemon prio=1 tid=0x08091180
nid=0x975 in Object.wait() [aadbe000..aadbe87c]
        at java.lang.Object.wait(Native Method)
        - waiting on &lt;0xab3ad950&gt; (a
java.lang.ref.Reference$Lock)
        at java.lang.Object.wait(Object.java:429)
        at
java.lang.ref.Reference$ReferenceHandler.run(Reference.java:115)
        - locked &lt;0xab3ad950&gt; (a
java.lang.ref.Reference$Lock)

"main" prio=1 tid=0x0805ba28 nid=0x975 runnable
[bfffb000..bfffb91c]
        at java.nio.CharBuffer.wrap(CharBuffer.java:347)
        at java.nio.CharBuffer.wrap(CharBuffer.java:370)
        at
java.lang.StringCoding$CharsetSD.decode(StringCoding.java:184)
        at
java.lang.StringCoding.decode(StringCoding.java:224)
        at java.lang.String.&lt;init&gt;(String.java:320)
        at java.lang.String.&lt;init&gt;(String.java:346)
        at
org.pdfbox.cmapparser.CMapParser.createStringFromBytes(CMapParser.java:230)
        at
org.pdfbox.cmapparser.CMapParser.parse(CMapParser.java:182)
        at
org.pdfbox.pdmodel.font.PDFont.parseCmap(PDFont.java:532)
        at
org.pdfbox.pdmodel.font.PDFont.encode(PDFont.java:358)
        at
org.pdfbox.util.PDFStreamEngine.showString(PDFStreamEngine.java:261)
        at
org.pdfbox.util.operator.ShowText.process(ShowText.java:63)
        at
org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:405)
        at
org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:385)
        at
org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:168)
        at
org.pdfbox.util.PDFTextStripper.processPage(PDFTextStripper.java:232)
        at
org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:205)
        at
org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:180)
        at
org.pdfbox.ExtractText.main(ExtractText.java:220)

"VM Thread" prio=1 tid=0x0808ff20 nid=0x975 runnable

"VM Periodic Task Thread" prio=1 tid=0xaa800cf0
nid=0x975 waiting on condition
"Suspend Checker Thread" prio=1 tid=0x080a5dc0
nid=0x975 runnable

Discovered when using PDFBox in conjunction with Nutch.
 Reproducible using org.pdfbox.ExtractText command line
tool.

Using PDFBox-0.7.0.
</detail>
		<follow_ups>
			<item>
				<date>1112228475</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

fixed in CVS.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1112228475</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1112228475</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1112228475</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1215180">
		<submitted_by>benczes</submitted_by>
		<submitted_date>2005-06-05 07:43</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Charts</summary>
		<detail>As I mentioned in the forum, I' ve created PDF file
with iText containing some graphical charts, which are
not rendered at all by the PDFReader. The same file
contains some titles in other color than black and are
rendered black.
A new promlem, what I found is with the
PDFTextStripper, which at parsing the same file throws
NullPointerException, when meets the above mentioned
graphical objects.
Here is the PDF file!
Thank You!
Best regards! 
benczes</detail>
		<follow_ups>
			<item>
				<date>1142138902</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

File no longer throws a NPE when extracting text.

Ben</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>137289</id>
				<name>document_en.pdf</name>
				<description>iText created PDF file</description>
				<filesize>38196</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1117982639</adddate>
				<submitted_by>1291183</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1142138902</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1142138902</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1142138902</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>137289: document_en.pdf</old_value>
				<date>1117982641</date>
				<by>benczes</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1157911">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-03-06 13:36</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Duplicate</resolution>
		<summary>ClassCastException error on converting pdf to image</summary>
		<detail>I'm getting the following error when i convert the attached 
pdf file with the demo class PDFToImage.class.

Exception in thread "main" java.lang.ClassCastException
        at org.pdfbox.cos.COSDictionary.getString
(COSDictionary.java:446)
        at org.pdfbox.cos.COSDictionary.getString
(COSDictionary.java:432)
        at 
org.pdfbox.pdmodel.graphics.xobject.PDXObject.createX
Object(PDXObject.java:91)
        at org.pdfbox.pdmodel.PDResources.getXObjects
(PDResources.java:149)
        at 
org.pdfbox.pdfviewer.PageDrawer.processOperator
(PageDrawer.java:220)
        at 
org.pdfbox.util.PDFStreamEngine.processStream
(PDFStreamEngine.java:169)
        at org.pdfbox.pdfviewer.PageDrawer.drawPage
(PageDrawer.java:110)
        at org.pdfbox.pdmodel.PDPage.convertToImage
(PDPage.java:650)
        at org.pdfbox.PDFToImage.main
(PDFToImage.java:182)</detail>
		<follow_ups>
			<item>
				<date>1110222209</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

closed, dup of 1157892, looks like it got submitted twice.

You should log in when submitting bugs, you will be able to 
track it easier.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1110222209</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1110222209</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1110222209</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1157892">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-03-06 13:06</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>ClassCastException error on converting pdf to image</summary>
		<detail>I'm getting the following error when i convert the attached 
pdf file with the demo class PDFToImage.class.

Exception in thread "main" java.lang.ClassCastException
        at org.pdfbox.cos.COSDictionary.getString
(COSDictionary.java:446)
        at org.pdfbox.cos.COSDictionary.getString
(COSDictionary.java:432)
        at 
org.pdfbox.pdmodel.graphics.xobject.PDXObject.createX
Object(PDXObject.java:91)
        at org.pdfbox.pdmodel.PDResources.getXObjects
(PDResources.java:149)
        at 
org.pdfbox.pdfviewer.PageDrawer.processOperator
(PageDrawer.java:220)
        at 
org.pdfbox.util.PDFStreamEngine.processStream
(PDFStreamEngine.java:169)
        at org.pdfbox.pdfviewer.PageDrawer.drawPage
(PageDrawer.java:110)
        at org.pdfbox.pdmodel.PDPage.convertToImage
(PDPage.java:650)
        at org.pdfbox.PDFToImage.main
(PDFToImage.java:182)</detail>
		<follow_ups>
			<item>
				<date>1110854363</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed in CVS.

Ben</text>
			</item>
			<item>
				<date>1110222280</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

There is no attached PDF, make sure to remember to check 
the stupid "Check to Upload and Attach a File" checkbox.

Alternatively, you can upload it to ftp.pdfbox.org, please post 
a message here with the name of the file that was uploaded.

Ben
</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1110854363</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1110854363</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1110854363</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1110222280</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1159649">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-03-09 00:27</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>learning to work with PDFBox</summary>
		<detail>Hi,

I am new to this PDF Library, and I noticed that there is 
hardly any documentation. Can anyone tell me what the 
best way is to learn about PDFBox??

Thanks.</detail>
		<follow_ups>
			<item>
				<date>1110421942</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

You have posted a question in the issues list.  You should 
post this in the forums.

The website has some documentation including javadoc,  
there are also some examples in the examples folder.

If you post in the forum what it is that you are trying to solve 
you will get more help than posting here.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1110421943</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1110421942</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1159866">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2005-03-09 06:42</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>ClassCastException when creating PDDestination</summary>
		<detail>Hi, 
I have a bookmark that I want to find the page num of 
the destination for, and I get  
 
java.lang.ClassCastException 
at 
org.pdfbox.pdmodel.interactive.documentnavigation.desti
nation.PDDestination.create(PDDestination.java:70) 
at 
org.pdfbox.pdmodel.interactive.documentnavigation.outlin
e.PDOutlineItem.getDestination(PDOutlineItem.java:176) 
at pdfExcel.PdfDetailsSignets.printBookmark
(PdfDetailsSignets.java:169) 
at pdfExcel.PdfDetailsSignets.main
(PdfDetailsSignets.java:115) 
 
It seems like the problem is that in  
public static PDDestination create( COSBase base ) 
It has the following call 
COSName type = (COSName)array.get( 0 ); 
 
The problem is that in the file I have the COSName gets 
put at 1, not 0, and 0 is a COSDictionary.</detail>
		<follow_ups>
			<item>
				<date>1110981511</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Not a legend yet, but working towards it. :)

I am always looking for some help, so that would be 
awesome.

Ben</text>
			</item>
			<item>
				<date>1110959263</date>
				<sender>antonovich</sender>
				<text>Logged In: YES 
user_id=1135590

You're a legend!
Cheers
Antoine
ps. I am involved in a far too many things at the moment but
getting to know (and helping out) pdfbox is moving up the
priorities list fast...</text>
			</item>
			<item>
				<date>1110854225</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed in CVS.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1110854225</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1110854225</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1110854225</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1167037">
		<submitted_by>roskakori</submitted_by>
		<submitted_date>2005-03-20 09:19</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Some DCT*Filters use print instead of logger</summary>
		<detail>Just a minor issue, but maybe you want to fix it: some filters log warnings using System.err.println(). I'd expected them to use logger.warn() and show up in my applications log file.

Example: CCITTFaxDecodeFilter, DCTFilter:

    public void decode( InputStream compressedData, OutputStream result, COSDictionary options ) throws IOException
    {
        System.err.println( "Warning: DCTFilter.decode is not implemented yet, skipping this stream." );
    }

Tools like CheckStyle can be configured to automatically find these.
</detail>
		<follow_ups>
			<item>
				<date>1111353155</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

The filters have been changed to correctly use the log4j 
logging.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1111353155</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1111353155</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1111353155</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1182825">
		<submitted_by>verae</submitted_by>
		<submitted_date>2005-04-14 01:38</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Wrong handling of signed/unsigned byte/int</summary>
		<detail>==1==
MemoryTTFDataStream.java, method read(), approx. line 119:
this:

   retval = data[currentPosition];

is wrong, needs to be

    byte retval_byte = data[currentPosition];
    retval = retval_byte &gt;= 0 ? retval_byte : ((int) retval_byte) + 
256;

if you really want to return an _un_signed value (so, 0 to 255), as 
stated in the javadoc.
(in the wrong version, data is a byte array, such returning one 
element, a byte, will result in values 127 to -128 );

==2==
TTFDataStream.java, method readSignedByte(), approx. line 110:
this:

        return read() - 255;

is wrong needs, to be

    	int uvalue = read();
    	return uvalue &lt;= 127 ? uvalue : uvalue - 256;

(e.g. byte 11111111 (= unsigned decimal 255) represents -1 if
interpreted _signed_, so you have to subtract 256 not 255)
BTW: the method is wrong documented (remove "un" twice!)
BTW2: the method returns "int", why?, java´s "byte" is exactly 
"signed byte".
BTW3: PDFBox is really _great_, many thanks!

  
</detail>
		<follow_ups>
			<item>
				<date>1113663978</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Thanks for the report, this is fixed in CVS now.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1113663978</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1113663978</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1113663978</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1179137">
		<submitted_by>gagravarr</submitted_by>
		<submitted_date>2005-04-08 03:53</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>NullPointerException in LZWDictionary.visit</summary>
		<detail>When trying to load
http://www.ageconcern.org.uk/AgeConcern/media/Rural_affairs_report.pdf,
pdfbox blows up with this exception:

java.lang.NullPointerException
        at
org.pdfbox.filter.LZWDictionary.visit(LZWDictionary.java:92)
        at
org.pdfbox.filter.LZWFilter.decode(LZWFilter.java:95)
        at
org.pdfbox.cos.COSStream.doDecode(COSStream.java:326)
        at
org.pdfbox.cos.COSStream.doDecode(COSStream.java:283)
        at
org.pdfbox.cos.COSStream.getUnfilteredStream(COSStream.java:227)
        at
org.pdfbox.pdfparser.PDFStreamParser.&lt;init&gt;(PDFStreamParser.java:89)
        at
org.pdfbox.cos.COSStream.getStreamTokens(COSStream.java:179)
        at
org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:119)
        at
org.pdfbox.util.PDFTextStripper.processPage(PDFTextStripper.java:201)
        at
org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:179)
        at
org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:158)
        at
org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:109)
</detail>
		<follow_ups>
			<item>
				<date>1113264061</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

This now throws a StreamCorruptedException

Ben</text>
			</item>
			<item>
				<date>1113210310</date>
				<sender>gagravarr</sender>
				<text>Logged In: YES 
user_id=157622

I think an IOException (or maybe even a
StreamCorruptedException that inherits from IOException)
would be better. The npe seems a bit random, and isn't
something you normally catch. An IOException is something
you expect, and can put things in place to deal with it

Nick</text>
			</item>
			<item>
				<date>1113098397</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

This is happening because the stream is corrupted.  What 
should PDFBox do in this case?  I think the best that we can 
do is to check for null and throw an IOException( "Error: 
Stream data is corrupted" ) instead of a NPE.  What do you 
think?

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1113264061</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1113264061</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1113264061</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1163144">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-03-14 09:28</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="556660">writing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Setting text field value: 2 font problems</summary>
		<detail>Hello,
I am trying to set text field value into existing document 
and save it in different file. Your library set it without 
exceptions, but when I open form in Adobe Acrobat, field 
seems empty until I click on it. In edit mode in Adobe 
Acrobat I can see value I've set with pdfBox but when I 
am starting to edit different field, first one disapears 
again. If I edit text field first and than use pdfBox, than 
font size become visible but twice larger after pdfBox 
editing. It seems something wrong with 
org.pdfbox.pdmodel.interactive.form.PDAppearance 
function setAppearanceValue(String apValue)

Please try attached file with this fragment:
______________________________________
field = acroForm.getField("surname");
if (field!=null)
  field.setValue("Pupkin");
______________________________________
Sincerely,
Ilya
ie@fromru.com</detail>
		<follow_ups>
			<item>
				<date>1113700892</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

This issue has been partially fixed.  The actual setting of the 
field works, but the encryption is broken.  There are existing 
issues that cover the encryption so I am closing this issue.

Ben</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>125545</id>
				<name>imm1295b.pdf</name>
				<description></description>
				<filesize>222931</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1110821291</adddate>
				<submitted_by>100</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1113700892</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1113700892</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1113700892</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>125545: imm1295b.pdf</old_value>
				<date>1110821291</date>
				<by>nobody</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1184648">
		<submitted_by>verae</submitted_by>
		<submitted_date>2005-04-17 07:27</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>PDFToImage: Wrong  positions of page elements (and more)</summary>
		<detail>(See attached
the original PDF [generated with iText], 
the JPG generated at my site)

==1==
Positions of pictures seem to be horizontally swapped.
Something like
 pos_y
needs to be 
 PAGE_HEIGHT - pos_y

==2==
Text positions are - at certain circumstances -
stretched by a factor, approx. two. 

the "circumstance" seems to be the fact
when the text is _horizontally scaled_.

In the attached file
each text line starts with the "horizontal scaling factor"
The first line, with the value "h:1" is
not scaled, it it positioned correctly.
The others, having a scaling factor of 0.99, 2.5, 0.5,
are positioned incorrectly. 
   
ADDITIONALLY: Text, originally stretched only horizontally,
is stretched both horizontally and vertically in the
JPEG

===

I will do my best to find the bugs myself, but will have to
look into the PDF format in details first, hope
you are faster ;-)
</detail>
		<follow_ups>
			<item>
				<date>1114356286</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

The positioning of elements is now correct and the result 
looks pretty good.  The wrong font is being used right now, 
but there are many changes that need to happen to always 
choose the correct font.

Ben</text>
			</item>
			<item>
				<date>1113753917</date>
				<sender>verae</sender>
				<text>Logged In: YES 
user_id=31619

upload does not work, find the
files here:

http://www.propagandaclub.de/oliver_JJBNHGFCEPOLI/
</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1114356286</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1114356286</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1114356286</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1185209">
		<submitted_by>l0pes</submitted_by>
		<submitted_date>2005-04-18 07:21</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>UnsupportedOperationException using PDPage.convertToImage()</summary>
		<detail>Here is the StackTrace:

java.lang.UnsupportedOperationException: not yet
implemented
    at
org.pdfbox.ttf.MemoryTTFDataStream.getCOSStream(MemoryTTFDataStream.java:227)
    at
org.pdfbox.ttf.TrueTypeFont.getCOSStream(TrueTypeFont.java:219)
    at
org.pdfbox.pdmodel.font.PDTrueTypeFont.getExternalFontFile2(PDTrueTypeFont.java:426)
    at
org.pdfbox.pdmodel.font.PDTrueTypeFont.drawString(PDTrueTypeFont.java:358)
    at
org.pdfbox.pdfviewer.PageDrawer.showCharacter(PageDrawer.java:144)
    at
org.pdfbox.util.PDFStreamEngine.showString(PDFStreamEngine.java:444)
    at
org.pdfbox.util.operator.ShowTextGlyph.process(ShowTextGlyph.java:88)
    at
org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:489)
    at
org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:469)
    at
org.pdfbox.pdfviewer.PageDrawer.processOperator(PageDrawer.java:163)
    at
org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:204)
    at
org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:158)
    at
org.pdfbox.pdfviewer.PageDrawer.drawPage(PageDrawer.java:113)
    at
org.pdfbox.pdmodel.PDPage.convertToImage(PDPage.java:656)
    at thumbs.PDFThumbnail.getThumb(PDFThumbnail.java:30)
    at thumbs.Main.doPDF(Main.java:90)
    at thumbs.Main.main(Main.java:114)</detail>
		<follow_ups>
			<item>
				<date>1114356414</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed in CVS.

Ben</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>130697</id>
				<name>Network Planning and Design.pdf</name>
				<description>PDF causing the exception</description>
				<filesize>166621</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1113834095</adddate>
				<submitted_by>940936</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1114356414</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1114356414</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1114356414</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>130697: Network Planning and Design.pdf</old_value>
				<date>1113834095</date>
				<by>l0pes</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1207113">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-05-23 07:22</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Enhancement: runtime accessible version</summary>
		<detail>Could you include a "Version" class, with a 
static "getVersion( )" method that returns a string that 
reports on the version of the PDFBox library?  You could 
set this string as part of your build process, and clients 
who use this library then have a reporting mechanism to 
see exactly what they are dealing with.</detail>
		<follow_ups>
			<item>
				<date>1118588746</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I made is PDFBox-0.7.3, it is easy to change it if you want.

Here is what is available now to get the PDFBox version.

the cmd line org.pdfbox.Version, with getVersion method

In Resources/pdfbox.version is a property with the version

The JAR manifest now also contains the version.

And as always the jar file that gets created contains the 
version number.

I agree that it should be easy to know what version of libraries 
people are using, I wish more projects made it so.

Thanks for the request, let me know if it doesn't work for you.

Ben</text>
			</item>
			<item>
				<date>1118588005</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Which would you prefer to be the returned value?

0.7.3

OR prefixed with PDFBox, like this

PDFBox-0.7.3</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1118588746</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1118588746</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1118588746</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1207227">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-05-23 10:33</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Wont Fix</resolution>
		<summary>Enhancement: commons-logging rather than log4j</summary>
		<detail>Please consider changing the logging subsystem used 
within PDFBox from the current 'log4j' to the Jakarta 
standard of "commons-logging".  

You lose no functionality, since "commons-logging" will 
act as a wrapper and use "log4j" if log4j is present in the 
system.  However, if log4j is not included within the 
system, you still get basic logging.

"commons-logging" is the standard within Jakarta, which 
means it is the standard within Tomcat.  It is also the 
package used within Axis  (the WSDL java package)
</detail>
		<follow_ups>
			<item>
				<date>1122749448</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Why does commons logging exist?

Why is commons-logging the stadard within Jakarta when 
log4j exists and does more?

Name one thing I can do with commons logging that I can't do 
with log4j.

All things considered (confusion among 2 logging packages 
from jakarta/pain in the ass to work with when another 
package doesn't use it/) commons logging should go away!


The only reason commons logging exists is because the 
commons folks didn't want to depend on any packages 
outside of commons.  Unfortunately people outside of 
commons started using it, which is beyond me.  WTF, was it 
really worth it guys!

No, I will in no way shape or form support commons-logging.  
Please go to the tomcat/axis mailing lists/issues and have 
them switch to log4j!

Ben Litchfield</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1122749448</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1122749448</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1122749448</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1198912">
		<submitted_by>kurthanner</submitted_by>
		<submitted_date>2005-05-10 03:12</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>COSName with escaped characters not parsed correctly</summary>
		<detail>A COSName with escaped characters is parsed 
incorrectly.

sample input token:
/PANTONE#20116#20CV

should result in:
PANTONE 116 CV

Because of a bug in the parser the output looks like this:
/PANTONE *#6 #CV

The cause of the problem is located in BaseParser.java, 
nearby line 768. A new character must be read from the 
input stream after the escape handling:

   if (isHexDigit(ch1) &amp;&amp; isHexDigit(ch2))
   {
       String hex = "" + ch1 + ch2;
       try
       {
           buffer.append( (char) Integer.parseInt(hex, 16));
       }
       catch (NumberFormatException e)
       {
           if( log.isDebugEnabled() ) 
           {
               log.debug("isHexDigit(ch1)=" + isHexDigit
(ch1) + ", isHexDigit(ch2)=" + isHexDigit(ch2));
           }
           throw new IOException("Error: expected hex 
number, actual='" + hex + "'");
       }
       c = pdfSource.read();  // *** FIX ***
   }
   else
   {
       pdfSource.unread(ch2);
       c = ch1;
       buffer.append( ch );
   }
</detail>
		<follow_ups>
			<item>
				<date>1116109573</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

fixed in CVS, thanks for finding the fix.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1116109573</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1116109573</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1116109573</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1208652">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-05-25 10:54</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Out of Date</resolution>
		<summary>PDFTextStripper.writeText Exception:Unknown encoding for ..</summary>
		<detail>I'm useing PDFBox-0.7.1,when to view text endonging 
in 'GBK-EUC-H' cath Exception :java.io.IOException: 
Unknown encoding for 'GBK-EUC-H' .
But in Resources/cmap/GBK-EUC-H is exist.
why?It is not functionary?</detail>
		<follow_ups>
			<item>
				<date>1137898807</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

No example PDF, so I am closing this issue.  Please give 
the nightly build a try, many fixes have been implemented.

Ben</text>
			</item>
			<item>
				<date>1126694062</date>
				<sender>ooiocha</sender>
				<text>Logged In: YES 
user_id=1344511

I confirmed this case with PDFBox-0.7.2.
I saw the source code and I have found that CMapParser 
doesn't recognize "begincidrange" and CMap  "lookup" 
method returns null.

</text>
			</item>
			<item>
				<date>1122748015</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

what OS?
Are you using the PDFBox-0.7.1.jar or are you building it 
yourself?
Can you attach/upload the PDF that you see this issue with?
Do you still see the same issue with the nightly build?


ftp.pdfbox.org

Ben Litchfield</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1137898808</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1137898807</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1137898807</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1215945">
		<submitted_by>yves_bussard</submitted_by>
		<submitted_date>2005-06-06 12:53</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="556660">writing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Error in COSString.writePDF()</summary>
		<detail>Hi Ben, 

I just spent the day debugging some error and before I
forget everything I just wanted to tell you the results:

In some of my documents I have fonts with a cmap.
Therefore it is quite usual to have some characters
mapped to the bytes 10, 12, 13 and so on. Now the PDF
Reference states that in string literals one should
escape these special characters. In writePDF() you
actually do this using the constants CR_ESCAPE,
LF_ESCAPE, etc. The problem is, these constants have
the wrong values. 
If you take a look at CR_ESCAPE for example. You
initialize it as

public static final byte[] CR_ESCAPE = new byte[]{ 13 }; 

Imho this is incorrect. You're comment though
(//"\\n".getBytes( "ISO-8859-1" );) is right :-) . A CR
should be escaped by writing the escape character '\\'
and then the character 'n'. In bytes this would be 92
followed by 110. Therefore the constant should be
initialized as:

public static final byte[] CR_ESCAPE = new byte[]{ 92,
110 }; 

The same applies for the other constants. Please
correct me if I'm wrong.

best regards
Yves Bussard




</detail>
		<follow_ups>
			<item>
				<date>1118584731</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Wow did I screw that up.  Anyway it is fixed in CVS, thanks 
for the bug report.

Ben Litchfield</text>
			</item>
			<item>
				<date>1118124920</date>
				<sender>yves_bussard</sender>
				<text>Logged In: YES 
user_id=908162

I mixed up CR and LF just like you did. CR is of course '\r'
and LF is '\n'. In your comments you assign CR to "\\n" and
LF to "\\r". It should be the other way around.</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1118584731</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1118584731</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1118584731</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1213320">
		<submitted_by>seafoxx</submitted_by>
		<submitted_date>2005-06-02 00:49</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>setFfFlag() of PDField not working correctly</summary>
		<detail>method setFfFlag() of
org.pdfbox.pdmodel.interactive.form.PDField seems work
incorrect.
The method is used by setReadonly(boolean),
setReqired(boolean) and setNoExport(boolean).
what it shoud do: set or unset the specific flag
according to the given boolean.
what it does: if the given boolean is "true" the flag
is always set to "true" (okay).
if the boolean is "false" the flag is inverted instead
of set to "false".
so if i call setReadonly(false) the first time, the
flag is set to readonly=true, the second time it's set
to false and so on.

i'm not an expert in bit-moving, i tink, the solution
woud be to change the code within the "else" part of
"if(value)" from "ffval = ffval ^ bitFlag;" to "ffval =
ffval &amp; !bitFlag;" (not sure).</detail>
		<follow_ups>
			<item>
				<date>1118585424</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

ffval = ffval &amp;= ~bitFlag;

is the correct way to clear a bit flag.  This is fixed in CVS, 
please give the nightly build a try.

Ben Litchfield</text>
			</item>
			<item>
				<date>1117984717</date>
				<sender>seafoxx</sender>
				<text>Logged In: YES 
user_id=305823

i've written two classes:
a simple test class that calls the method setReadonly() 5
times with somy SystemOut
and a junit test case - please don't laugh, my experience
with junit is ~20 minutes :-/
i hope it's that what you need.

problem with your junit test case:
you call the method setComb two times first with (true) -&gt;
field is set to true - okay - then with (false) -&gt; flag is
inverted -&gt; seems to be ok. but if you call the same method
once again with (false) the result would be "true" instead
of (still) "false".

to get the bug-situation: call setComb(false) at the beginning
or call setComb(false) two times.

bye.
bastian Kaempfe</text>
			</item>
			<item>
				<date>1117904551</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I think this is correct as implemented.  I have created a junit 
test case that will be available in tonights nightly build

test.pdfbox.pdmodel.interactive.form.TestFields

Which test setting and clearing flags.

Please send a me a testXXX method that shows the failure.

Ben Litchfield</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>137292</id>
				<name>bug1213320.zip</name>
				<description>Zip with 2 files - 1 junit and 1 example</description>
				<filesize>1950</filesize>
				<filetype>application/x-zip-compressed</filetype>
				<adddate>1117984717</adddate>
				<submitted_by>305823</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1118585424</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1118585424</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1118585424</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>137292: bug1213320.zip</old_value>
				<date>1117984717</date>
				<by>seafoxx</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1212897">
		<submitted_by>vishpool</submitted_by>
		<submitted_date>2005-06-01 10:32</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Image Extration</summary>
		<detail>I am having trouble extract images. I get the following: 

java.lang.NullPointerException 
at
org.pdfbox.pdmodel.graphics.xobject.PDPixelMap.getRGBImage(PDPixelMap.java:135)

at
org.pdfbox.pdmodel.graphics.xobject.PDPixelMap.write2OutputStream(PDPixelMap.java:153)

at
org.pdfbox.pdmodel.graphics.xobject.PDXObjectImage.write2file(PDXObjectImage.java:117)

at Test.extractImages(Test.java:84) 
at Test.main(Test.java:119) 


PDF: LO Vol 44 No 2 Pg 436 154000.pdf

</detail>
		<follow_ups>
			<item>
				<date>1118586385</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I have fixed the NullPointerException, but the images that are 
extracted are black.  That is probably because they use 
CCITT filter which is not implemented yet.  Please post a 
feature request if one does not already exist for the CCITT 
implementation.

Ben Litchfield</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>136832</id>
				<name>LO Vol 44 No 2 Pg 436 154000.pdf</name>
				<description>PDF Input</description>
				<filesize>61287</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1117647206</adddate>
				<submitted_by>1289309</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1118586385</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1118586385</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1118586385</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>136832: LO Vol 44 No 2 Pg 436 154000.pdf</old_value>
				<date>1117647207</date>
				<by>vishpool</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1237381">
		<submitted_by>mi2ke</submitted_by>
		<submitted_date>2005-07-13 03:08</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="556660">writing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="1">1</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Newlines disappears in Mulitline-nonRTF Textfields</summary>
		<detail>Hello!

After simply opening and saving a document with a
multiline textfield without doing any changes to the
document, the newlines in this textfield disappear.

After checking the value in the documenttree with
PDFCanopener, it shows in the original stream: 0D (hex)
and in the pdfbox-saved document 0A (hex)

So I think 0D (hex) = charCode 13 would be the correct
translation for an CR in an Textfield.

I tried to figure out where to change in the COSWriter
classes but coulnd't afford any success. Maybe someone
knows where to change this?

bye.</detail>
		<follow_ups>
			<item>
				<date>1121326091</date>
				<sender>mi2ke</sender>
				<text>Logged In: YES 
user_id=1100444

Hi Ben,

Thanks a lot, I tried the latest cvs version of COSString
and now it works. </text>
			</item>
			<item>
				<date>1121256902</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

mi2ke,

I don't have time to try it right now but I believe this has been 
fixed in CVS and you can try the nightly build, 
http://www.pdfbox.org/dist  If it works for you then we can 
close the issue otherwise I will look at the PDF you have 
attached a little bit later.

Ben Litchfield

</text>
			</item>
			<item>
				<date>1121253055</date>
				<sender>mi2ke</sender>
				<text>Logged In: YES 
user_id=1100444

ok, I found the problem
For some reason Acrobat is using "\" and "r" for a CR
when I chance in org.pdfbox.cos.COSString the variable
CR_ESCAPE  from:
new byte[]{ 13 }; 
to 
"\\r".getBytes(); 
than it works correctly.

Sorry, forgot to mention that I test it in Acrobat 6.01 pro

Ben, do you think this is a hardfix or will it be work in
every case pdfbox is using COSString Objects?</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>141911</id>
				<name>1field_Tahoma_nortf.pdf</name>
				<description>my testpdf</description>
				<filesize>8281</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1121249320</adddate>
				<submitted_by>1100444</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1121326091</date>
				<by>mi2ke</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1121326091</date>
				<by>mi2ke</by>
			</item>
			<item>
				<field>priority</field>
				<old_value>5</old_value>
				<date>1121253055</date>
				<by>mi2ke</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>601708</old_value>
				<date>1121253055</date>
				<by>mi2ke</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>141911: 1field_Tahoma_nortf.pdf</old_value>
				<date>1121249321</date>
				<by>mi2ke</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1217567">
		<submitted_by>yleguern</submitted_by>
		<submitted_date>2005-06-09 07:17</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="556660">writing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="8">8</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>setting color when default locale is not English</summary>
		<detail>When you set a color on a platform which default locale 
is not English (French in my case) the formatter used in 
PDPageContentStream writes comas instead of dots as 
decimal separator.

I temporaly fixed the problem by forcing the locale :
private NumberFormat formatDecimal = 
NumberFormat.getNumberInstance(Locale.ENGLISH);
instead of :
private NumberFormat formatDecimal = 
NumberFormat.getNumberInstance();

80th line in 
org.pdfbox.pdmodel.edit.PDPageContentStream</detail>
		<follow_ups>
			<item>
				<date>1118521898</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

This has actually already been fixed in CVS for a couple 
weeks.   It uses Locale.US though, I am not sure what the 
difference between Locale.US and Locale.ENGLISH is,  
please give CVS/nightly build a try and let me know if you are 
still having a problem.

Ben Litchfield</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1118521898</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1118521898</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>priority</field>
				<old_value>5</old_value>
				<date>1118326717</date>
				<by>yleguern</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1227426">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-06-25 09:27</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>null pointer in PDFToImage</summary>
		<detail>parms fail to return a ColorSpace in
pdmodel/graphics/xobject/PDFInlineImage

to reproduce: run PDFToImage against the sample file
attached

patch against dev20050624: fall back on the original
method when parms return null for the ColorSpace

42a43
&gt; import java.awt.image.IndexColorModel;
47a49,50
&gt; import org.pdfbox.pdmodel.graphics.color.PDColorSpace;
&gt; 
131,132c134,143
&lt;         ColorModel colorModel = 
&lt;             params.getColorSpace().createColorModel(
params.getBitsPerComponent() );
---
&gt; 	PDColorSpace pcs = params.getColorSpace();
&gt; 	ColorModel colorModel = null;
&gt; 	if(pcs != null){
&gt;         	colorModel =
params.getColorSpace().createColorModel(
params.getBitsPerComponent() );
&gt; 	}
&gt; 	else {
&gt; 		byte[] transparentColors = new
byte[]{(byte)0xFF,(byte)0xFF};
&gt;         	byte[] colors=new byte[]{0, (byte)0xFF};
&gt;         	colorModel = new IndexColorModel( 1, 2,
colors, colors, colors, transparentColors );
&gt; 	}</detail>
		<follow_ups>
			<item>
				<date>1120097714</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Thanks for the patch, it is in CVS now.  Getting Closer!!

Ben Litchfield</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>139710</id>
				<name>pci23.pdf</name>
				<description>sample pdf</description>
				<filesize>245850</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1119716833</adddate>
				<submitted_by>100</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1120097714</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1120097714</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1120097714</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>139710: pci23.pdf</old_value>
				<date>1119716833</date>
				<by>nobody</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1223055">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-06-17 22:42</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Out of Date</resolution>
		<summary>Some PDFToImage Crashes</summary>
		<detail>Please see the attached pdf. This is all from a dev
snapshot dated 6/16/05

I believe there are two issues.
1. PDPage.java:635

PDRectangle mBox = getMediaBox();
doesn't work. Seems better when I changed it to
findMediaBox(), but I don't know what I'm doing :)

2. Once past that. This document seems to either
contain it's own fonts or tries loading truetype fonts
which crashes.

java.io.IOException: The handle is invalid
        at java.io.RandomAccessFile.length(Native Method)
        at
org.pdfbox.io.RandomAccessFileOutputStream.&lt;init&gt;(RandomAccessFileOutputStream.java:67)
        at
org.pdfbox.cos.COSStream.doDecode(COSStream.java:293)
        at
org.pdfbox.cos.COSStream.doDecode(COSStream.java:249)
        at
org.pdfbox.cos.COSStream.getUnfilteredStream(COSStream.java:173)
        at
org.pdfbox.pdmodel.common.PDStream.createInputStream(PDStream.java:213)
        at
org.pdfbox.pdmodel.font.PDTrueTypeFont.drawString(PDTrueTypeFont.java:371)
....

Thanks again for a cool product.</detail>
		<follow_ups>
			<item>
				<date>1120097841</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

The first issue where getMediaBox should have been 
findMediaBox is fixed.  There is no PDF to test the second 
part, so closing this issue.

Ben Litchfield</text>
			</item>
			<item>
				<date>1119273021</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I don't see the attached PDF.  Please make sure you check 
the checkbox when uploading the file.  Also, you should log 
in so I know who has created the issue.

If you are still having trouble attaching the file, you can upload 
it to ftp.pdfbox.org and just add a comment here that 
references the name of the PDF.

Ben Litchfield</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1120097842</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1120097841</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1120097841</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1227428">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-06-25 09:32</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>failure of getMediaBox</summary>
		<detail>Exception in thread "main" java.lang.NullPointerException
        at
org.pdfbox.pdmodel.PDPage.convertToImage(PDPage.java:623)
        at org.pdfbox.PDFToImage.main(PDFToImage.java:183)

dev-20050624 and earlier running PDFToImage against the
attached sample file

experimentation with the code shows that getMediaBox
returned null
getMediaBox is used here only to set the height and
width; setting these to some arbitrary defaults and
testing mbox for null fixes the crash, but doesn't
results in any useful output</detail>
		<follow_ups>
			<item>
				<date>1120096962</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

The problem was that it should have been using 
findMediaBox, which does an upwards recursive search.  This 
is fixed in CVS.  Please give that a try.

Ben Litchfield</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1120096962</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1120096962</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1120096962</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1174855">
		<submitted_by>davidhedley</submitted_by>
		<submitted_date>2005-04-01 07:14</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="556660">writing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Invalid</resolution>
		<summary>indirect objects in DecodeParms array</summary>
		<detail>
Saving a PDF file currently writes out the DecodeParms
entry of stream dictionaries using indirect object
references instead of explicit dictionary objects. This
seems to break two different Java PDF viewers I've
tried (JPedal and activetree's SmartJPrint), although
Adobe Acrobat reader v5 handles it fine. This could
well be a fault with these two packages and not with
PDFBox but I would appreciate confirmation of this.

Example:

Imput file snippet:

431 0 obj
&lt;&lt; 
  /Type /XObject 
  /Subtype /Image 
  /Width 32
  /Height 1752
  /BitsPerComponent 1 
  /ImageMask true
  /Length 2776
  /Filter [ /ASCII85Decode /CCITTFaxDecode ] 
  /DecodeParms [ null &lt;&lt; /K -1 /Columns 32 &gt;&gt; ] 
&gt;&gt; 
stream

On writing this becomes:

431 0 obj
&lt;&lt; 
  /Type /XObject 
  /Subtype /Image 
  /Width 32
  /Height 1752
  /BitsPerComponent 1 
  /ImageMask true
  /Length 531 0 R
  /Filter [ /ASCII85Decode /CCITTFaxDecode ] 
  /DecodeParms [ null 532 0 R ] 
&gt;&gt; 
stream

I've tweaked my version of PDFBox to output
Dictionaries explicitly within Arrays, but I would like
to know whether PDFBox is at fault here.
</detail>
		<follow_ups>
			<item>
				<date>1120098048</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

closing this issue because I have not heard back from the 
user and it appears to be valid functionality.  Feel free to 
reopen if you have more information.

Ben Litchfield</text>
			</item>
			<item>
				<date>1112546736</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I reread the PDF Specification regarding the DecodeParms 
entry, it doesn't appear to say that the dictionary can't be an 
indirect reference.

It appears to be a bug in the other APIs, but if you submit a 
patch for the change I will add it to the COSWriter and have a 
flag to turn it on/off.

As a side note, please submit an RFE for functionality that is 
missing in PDFBox that is causing you to use 
JPedal/SmartJPrint, I make no promises that it will get 
implemented, but I do promise that if there is no RFE it won't.</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1120098048</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1120098048</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1120098048</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1218138">
		<submitted_by>yleguern</submitted_by>
		<submitted_date>2005-06-10 04:34</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="556660">writing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>PDTrueTypeFont.loadTTF throws NullPointerException</summary>
		<detail>When I try to load "exotics" fonts (japanese, korean, 
chinese...) the loadTTF method throws a 
NullPointerException :

java.lang.NullPointerException
	at org.pdfbox.ttf.TTFParser.parseTTF
(TTFParser.java:94)
	at org.pdfbox.ttf.TTFParser.parseTTF
(TTFParser.java:69)
	at 
org.pdfbox.pdmodel.font.PDTrueTypeFont.loadTTF
(PDTrueTypeFont.java:166)
	at 
org.pdfbox.pdmodel.font.PDTrueTypeFont.loadTTF
(PDTrueTypeFont.java:139)
	at MentorBusinessCards.writeDocument
(MentorBusinessCards.java:126)
	at MentorBusinessCards.main
(MentorBusinessCards.java:204)
</detail>
		<follow_ups>
			<item>
				<date>1119566051</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I was able to reproduce the problem and I believe this is fixed 
now, please give tonights build a try.

Ben Litchfield</text>
			</item>
			<item>
				<date>1119527995</date>
				<sender>yleguern</sender>
				<text>Logged In: YES 
user_id=228299

"java org.pdfbox.ttf.TTFParser simhei.ttf" works but the 
following lines does not :

doc = new PDDocument();
PDPage page = new PDPage();
doc.addPage( page );
PDFont font = PDTrueTypeFont.loadTTF(doc, "simhei.ttf");
PDPageContentStream contentStream = new 
PDPageContentStream(doc, page);
contentStream.beginText();
contentStream.setFont( font, 12 );
contentStream.moveTextPositionByAmount( 100, 700 );
contentStream.drawString( message );
contentStream.endText();
contentStream.close();
doc.save( file );



java.lang.NullPointerException
	at 
org.pdfbox.pdmodel.font.PDTrueTypeFont.loadTTF
(PDTrueTypeFont.java:265)
	at 
org.pdfbox.pdmodel.font.PDTrueTypeFont.loadTTF
(PDTrueTypeFont.java:139)
	at HelloWorld.doIt(HelloWorld.java:87)
	at HelloWorld.main(HelloWorld.java:112)


any idea ?
</text>
			</item>
			<item>
				<date>1119488612</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I just added the method so it probably did not make it to that 
build.  Try a 0622 build.

Ben</text>
			</item>
			<item>
				<date>1119428703</date>
				<sender>yleguern</sender>
				<text>Logged In: YES 
user_id=228299

Sorry, but I downloaded PDFBox-0.7.2-dev-20050621.zip and 
I can't see any main method in org.pdfbox.ttf.TTFParser</text>
			</item>
			<item>
				<date>1119403718</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I added a simple main method to TTFParser to test parsing of 
TTF files from the command line here is my results

C:\ben\pdfbox-eclipse&gt;java org.pdfbox.ttf.TTFParser simhei.ttf
Font:org.pdfbox.ttf.TrueTypeFont@17d5d2a


Can you try the nightly build of PDFBox and let me know if 
you are seeing the same results?

Ben</text>
			</item>
			<item>
				<date>1118682642</date>
				<sender>yleguern</sender>
				<text>Logged In: YES 
user_id=228299

see ftp://ftp.pdfbox.org/simhei.zip</text>
			</item>
			<item>
				<date>1118521974</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Can you attach/upload an example TTF that does this.

ftp.pdfbox.org

Thanks,
Ben Litchfield</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1119566051</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1119566051</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1119566051</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1241670">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-07-20 08:47</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Invalid</resolution>
		<summary>PDDocument Error  </summary>
		<detail>When trying to run the program I've written outside of
the NetBeans IDE , I am given this error.

Exception in thread "main"
java.lang.NoClassDefFoundError:
org/pdfbox/pdmodel/PDDocument

IF anyone has any solutions to this problem please
contact me at buk110@psu.edu </detail>
		<follow_ups>
			<item>
				<date>1122668731</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

This is not a bug in PDFBox, you should ask this question in 
the forums.

What is your classpath?  Make sure that the PDFBox jar file 
is in your classpath!!

Also, you should log into SF when you post this issue so that 
you will get notified of changes and I know who you are.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1122668731</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1122668731</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1122668731</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1227629">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-06-25 22:54</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>getmediabox</summary>
		<detail>sorry, failed to upload the file last time

this is probably the same error reported several issues
below.

email address (same for the getColorSpace)
david@dklevine.com</detail>
		<follow_ups>
			<item>
				<date>1120097201</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Yes, the stupid checkbox makes no sense to me either.

The null pointer is fixed please give it a try and let me know.

Ben Litchfield</text>
			</item>
			<item>
				<date>1119765408</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

something is wrong with the file uploading; this time I
double-checked that I had checked the box to indicate a file
upload

you can download the file at
http://www.dklevine.com/papers/evoshort15.pdf</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1120097207</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1120097201</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1120097201</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1233732">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2005-07-06 13:11</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>lines not drawn correctly</summary>
		<detail>java org.pdfbox.PDFReader "test-
pdf.bck\spcn.g3.u01.p008-011.nc.pdf"

does not display lines in the correct locations.

</detail>
		<follow_ups>
			<item>
				<date>1126145046</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

this is fixed in CVS and will be available in the 0.7.2 release.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1126145046</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1126145046</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1126145046</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1199828">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-05-11 06:13</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="293147"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>CreationDate and ModifiedDate always 'Null'</summary>
		<detail>I am having problems with extracting CreationDate and
ModifiedDate from any PDF file. I have checked in
Acrobat and the files I am testing with definitely have
content in these fields.

I thought this might be similar to another posted bug,
but could not determine the nature of the problem in
the other post so decided to report this as a seperate
issue.

I have run the
org.pdfbox.examples.pdmodel.PrintDocumentMetaData
class, which is producing the same output that I am
getting in my code: (Only difference is log4j is
initialised in my code)

---
log4j:WARN No appenders could be found for logger
(org.pdfbox.pdfparser.PDFParser).
log4j:WARN Please initialize the log4j system properly.
Page Count=19
Title=CF001202
Author=null
Subject=RESOLUTION OF FORCES IN ORTHOGONAL ANVIL
CUTTING OF DRY HAIR.  I.
Keywords=null
Creator=Acrobat Capture 3.0
Producer=Adobe PDF Library 4.0
Creation Date=null
Modification Date=null
Trapped=null
---
</detail>
		<follow_ups>
			<item>
				<date>1122746153</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I believe this is completely fixed now, please try tonights 
release and reopen if it is still an issue.

Ben</text>
			</item>
			<item>
				<date>1118588872</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

The PDDocumentInformation has been updated to just to the 
DateConverter.  Can you try again, and if it doesn't work can 
you post the PDF in question.

Thanks,
Ben Litchfield</text>
			</item>
			<item>
				<date>1117604702</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

Just had the same problem: the official Adobe date format is

YYYYMMDDHHmmSSOHH'mm'

where O = + - or Z.  E.g. D:20040730142451+10'00'

This means that the isDigit test in
PDDocumentInformation::getDateItem fails and always returns
nulls.

Quick and dirty fix:

getDateItem:
...
            boolean validDate = true;
            // length(YYYYMMDDHHmmSS) = 14
            int last = Math.min(strValue.length(), 14+index);

            for( int i=index; i&lt;last; i++ )

</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1122746153</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1122746153</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1122746153</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1118468">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-02-08 00:58</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>error extracting CreationDate</summary>
		<detail>There is a problem when you extract any date item from 
document information.
I have studied PDDocumentInformation source code and 
getDateItem method fails.
The date string can include no digit characters like 'Z', 
so the next code is not valid to check date item.

for( int i=index; i&lt;strValue.length(); i++ )
            {
                validDate = validDate &amp;&amp; Character.isDigit( 
strValue.charAt( i ) );
            }

Well, I think so, but I can be wrong.

Bye</detail>
		<follow_ups>
			<item>
				<date>1122746218</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

This code has been update to use the DateConverter, please 
try tonights build and reopen if this is still an issue.

Ben</text>
			</item>
			<item>
				<date>1107890084</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Can you supply a PDF that exhibits this problem when using 
the 

org.pdfbox.example.pdmodel.PrintDocumentMetaData

command line application

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1122746218</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1122746218</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1122746218</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1250991">
		<submitted_by>awood2000</submitted_by>
		<submitted_date>2005-08-03 05:16</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>PDFTextStripper.getText (NullPointer error)</summary>
		<detail>Using PDFTextStripper.getText it is failing with the 
following error: 
 
java.lang.NullPointerException 
at 
org.pdfbox.pdmodel.interactive.pagenavigation.PDThread
Bead.getRectang 
le(PDThreadBead.java:216) 
at org.pdfbox.util.PDFTextStripper.showCharacter
(PDFTextStripper.java:70 
1) 
at org.pdfbox.util.PDFStreamEngine.showString
(PDFStreamEngine.java:442) 
at org.pdfbox.util.operator.ShowText.process
(ShowText.java:63) 
at org.pdfbox.util.PDFStreamEngine.processOperator
(PDFStreamEngine.java: 
487) 
at org.pdfbox.util.PDFStreamEngine.processOperator
(PDFStreamEngine.java: 
467) 
at org.pdfbox.util.PDFStreamEngine.processSubStream
(PDFStreamEngine.java 
:202) 
at org.pdfbox.util.PDFStreamEngine.processStream
(PDFStreamEngine.java:15 
6) 
at org.pdfbox.util.PDFTextStripper.processPage
(PDFTextStripper.java:351) 
at org.pdfbox.util.PDFTextStripper.processPages
(PDFTextStripper.java:267 
) 
at org.pdfbox.util.PDFTextStripper.writeText
(PDFTextStripper.java:219) 
at org.pdfbox.util.PDFTextStripper.getText
(PDFTextStripper.java:139) 
 
I have managed to extract text from many other PDF's.  
The PDF is not encrypted. 
I can select text from this PDF via Adobe Reader. Using 
ExtractText also fails. 
 
I have wrapped the getText within a try block to allow the 
code to continue but would like to know why this 
particular PDF cannot be converted. 

I've uploaded bad.pdf which causes this error.
</detail>
		<follow_ups>
			<item>
				<date>1123114296</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

This is fixed in CVS and added as a junit test case so it 
should never be a problem again.

Ben Litchfield</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>144268</id>
				<name>bad.pdf</name>
				<description>PDF file which causes the error</description>
				<filesize>191023</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1123071362</adddate>
				<submitted_by>1315215</submitted_by>
			</file>
			<file>
				<id>144295</id>
				<name>tnq.pdf</name>
				<description>This tnq.pdf also fails with the same message</description>
				<filesize>62531</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1123085179</adddate>
				<submitted_by>1315215</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1123114296</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1123114296</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1123114296</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>144295: tnq.pdf</old_value>
				<date>1123085179</date>
				<by>awood2000</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>144268: bad.pdf</old_value>
				<date>1123071363</date>
				<by>awood2000</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1250684">
		<submitted_by>chipper3</submitted_by>
		<submitted_date>2005-08-02 17:46</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>java.io.IOException: expected='/' actual='?' </summary>
		<detail>I get the following exception when I try and parse the 
attached document using PDDocument.load( new 
ByteArrayInputStream(getFileContents()) ). I tried to 
attach an example pdf but was unable to bcause it 
exceeded the size requirement. Let me know I you want 
me to email you an example document.

java.io.IOException: expected='/' actual='?' 
org.pdfbox.io.PushBackInputStream@1
3785d3
        at 
org.pdfbox.pdfparser.BaseParser.parseCOSName
(BaseParser.java:733)
        at 
org.pdfbox.pdfparser.BaseParser.parseCOSDictionary
(BaseParser.java:21
7)
        at org.pdfbox.pdfparser.BaseParser.parseDirObject
(BaseParser.java:869)
        at org.pdfbox.pdfparser.PDFParser.parseObject
(PDFParser.java:429)
        at org.pdfbox.pdfparser.PDFParser.parse
(PDFParser.java:176)
        at org.pdfbox.pdmodel.PDDocument.load
(PDDocument.java:524)
        at 
com.senearthco.action.association.managedocuments.
AssociationDocument
.write(Unknown Source)
        at 
com.senearthco.barney.action.association.managedocu
ments.AssociationD
ocumentServer$ServerProcess.&lt;init&gt;(Unknown Source)
        at 
com.senearthco.barney.action.association.managedocu
ments.AssociationD
ocumentServer.run(Unknown Source)
</detail>
		<follow_ups>
			<item>
				<date>1123116081</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

This is now fixed in CVS, the Bull River PDF is somewhat 
corrupt but PDFBox can now handle reading it.

This PDF crashes acrobat 6.0 on my machine when I do the 
following.  Open PDF, ctrl-a(to select all but get a warning 
message), then try to close acrobat and it crashes.


Ben Litchfield</text>
			</item>
			<item>
				<date>1123073669</date>
				<sender>chipper3</sender>
				<text>Logged In: YES 
user_id=1252022

Hi Ben, 
The name of the file I uploaded to the ftp server is "Bull 
River Rules and Regulations.pdf". </text>
			</item>
			<item>
				<date>1123039339</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Can you please upload the file to ftp.pdfbox.org and post a 
comment here telling me what the file name it.

Thanks,
Ben Litchfield</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1123116081</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1123116081</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1123116081</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1022127">
		<submitted_by>ng_aldridge</submitted_by>
		<submitted_date>2004-09-03 15:19</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Problem decrypting documents with v6 security</summary>
		<detail>Hi,

Using the latest PDFBox built from CVS, I am unable to
decrypt a file that has been given a Acrobat v6
password security setting. If I use the v5 option,
things work just fine.

I will upload an example. The error traces aren't very
useful as I only get a
org.pdfbox.exceptions.InvalidPasswordException.

Password for this file is 'password' :)

Nathan

</detail>
		<follow_ups>
			<item>
				<date>1124159492</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I have made several encryption changes and I believe this 
issue is fixed now.  I am able to open the pdfPwdtestProt.pdf 
with PDFDebugger and PDFReader.  

Please reopen if this is still an issue.

Ben Litchfield</text>
			</item>
			<item>
				<date>1097775526</date>
				<sender>tsh</sender>
				<text>Logged In: YES 
user_id=116095

I too just ran into this problem.  At a minimum, PDFBox
should throw an unsupported_crypto_format exception because
it doesn't support the v4 crypto scheme.

In looking at the adobe pdf file format docs, it looks like
v4 is quite different that v3.</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>100282</id>
				<name>pdfPwdtestProt.pdf</name>
				<description>Simple file with Acro v6 security setting</description>
				<filesize>9825</filesize>
				<filetype></filetype>
				<adddate>1094249999</adddate>
				<submitted_by>1111818</submitted_by>
			</file>
			<file>
				<id>100283</id>
				<name>pdfPwdtestProtv5.pdf</name>
				<description>Simple file with Acro v5 security setting - works</description>
				<filesize>9751</filesize>
				<filetype></filetype>
				<adddate>1094250046</adddate>
				<submitted_by>1111818</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1124159492</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1124159492</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1124159492</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>100283: pdfPwdtestProtv5.pdf</old_value>
				<date>1094250046</date>
				<by>ng_aldridge</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>100282: pdfPwdtestProt.pdf</old_value>
				<date>1094249999</date>
				<by>ng_aldridge</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1226665">
		<submitted_by>nirupama_kumar</submitted_by>
		<submitted_date>2005-06-23 16:38</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>ImportXFDF error</summary>
		<detail>I'm using ImportXFDF to merge XFDF into a pdf form, and
get an IndexOutOfBoundsException 
 
Please let me know if you have any ideas about where
this is coming from. 
 
Here's my code snippet: 
 
PDDocument pdDoc = PDDocument.load(pdfTemplateFileName); 
FDFDocument fdfDoc = new FDFDocument(new
org.dom4j.io.DOMWriter().write(XmlDoc)); 
ImportXFDF impXfdf = new ImportXFDF(); 
try { 
impXfdf.importFDF(pdDoc, fdfDoc); 
} catch (Exception e){ 
System.out.println(e); 
}  
 
java.lang.IndexOutOfBoundsException: Index: 5, Size: 5 
at java.util.ArrayList.RangeCheck(ArrayList.java:547) 
at java.util.ArrayList.get(ArrayList.java:322) 
at
org.pdfbox.pdmodel.common.COSArrayList.get(COSArrayList.java:523)

at
org.pdfbox.pdmodel.interactive.form.PDField.importFDF(PDField.java:438)

at
org.pdfbox.pdmodel.interactive.form.PDAcroForm.importFDF(PDAcroForm.java:131)

at org.pdfbox.ImportXFDF.importFDF(ImportXFDF.java:73)
</detail>
		<follow_ups>
			<item>
				<date>1124160531</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

This is fixed in CVS now.

Cheers,
Ben Litchfield</text>
			</item>
			<item>
				<date>1119569980</date>
				<sender>nirupama_kumar</sender>
				<text>Logged In: YES 
user_id=1301994

Attaching pdf</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>139571</id>
				<name>test.xfdf</name>
				<description>XFDF</description>
				<filesize>858</filesize>
				<filetype>application/vnd.adobe.xfdf</filetype>
				<adddate>1119569937</adddate>
				<submitted_by>1301994</submitted_by>
			</file>
			<file>
				<id>139574</id>
				<name>test.pdf</name>
				<description>PDF</description>
				<filesize>18767</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1119569980</adddate>
				<submitted_by>1301994</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1124160531</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1124160531</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1124160531</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>139574: test.pdf</old_value>
				<date>1119569980</date>
				<by>nirupama_kumar</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>139571: test.xfdf</old_value>
				<date>1119569937</date>
				<by>nirupama_kumar</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1261555">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-08-16 19:03</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Unexpected end of ZLIB input stream</summary>
		<detail>Subject: Unexpected end of ZLIB input stream

I'm encountering errors on some PDFs when attempting 
to strip text from the documents.  The error appears to 
be one addressed by issue 835290, but the fix does not 
help with the PDFs I have.  The stack trace is listed 
below:

PDFBox version 0.7.1

java.io.EOFException: Unexpected end of ZLIB input 
stream
	at java.util.zip.InflaterInputStream.fill
(InflaterInputStream.java:216)
	at java.util.zip.InflaterInputStream.read
(InflaterInputStream.java:134)
	at org.pdfbox.filter.FlateFilter.decode
(FlateFilter.java:78)
	at org.pdfbox.cos.COSStream.doDecode
(COSStream.java:294)
	at org.pdfbox.cos.COSStream.doDecode
(COSStream.java:240)
	at 
org.pdfbox.cos.COSStream.getUnfilteredStream
(COSStream.java:173)

One workaround I found was to hack the 
InflaterInputStream to catch the ZLIB exception and just 
return.  When I did this, all the text was properly 
extracted, but this may not be a welcome change by all 
users.  Ultimately, either PDFBox is not retrieving the 
entire binary content for the ZLIB, or the content just 
wasn't closed properly by the tool that generated the 
PDf.

I've attached the PDF here.  The PDF in question 
was "chunked"/"split" from a much larger PDF by a tool 
called Wind Image.

The other interesting aspect of the document is that the 
PDF appears to be a scanned document with a text 
overlay.  Not sure if that will assist in diagnosing the 
above issue.

Are there any reasonable options for overlaying my own 
FlateFilter class over the one provided with PDFBox as 
a workaround?  I see that I can access the 
FilterManager, but the Map isn't synchronized and I'd 
have some concerns about updating it on the fly on a 
running system.
</detail>
		<follow_ups>
			<item>
				<date>1124388615</date>
				<sender>ejevans</sender>
				<text>Logged In: YES 
user_id=1330422

Got the updated file.  The fix worked great.  Once again 
thank you for the quick fix.

Ernest Evans</text>
			</item>
			<item>
				<date>1124368012</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

It appears the anon CVS servers are running slow again.  It 
was updated in last nights build please try again.  The file you 
want is the org.pdfbox.cos.COSStream

Ben Litchfield</text>
			</item>
			<item>
				<date>1124301761</date>
				<sender>ejevans</sender>
				<text>Logged In: YES 
user_id=1330422

Thanks for getting on this issue so fast.

What files were changed to correct this issue?  I downloaded 
the nightly build (PDFBox-0.7.2-dev-20050817) and ran the 
extractor against my test PDF and got the same error.  
Maybe the files didn't make it into the build.</text>
			</item>
			<item>
				<date>1124248011</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Thanks for the bug report.

This is now fixed in CVS(a couple hours until it is available in 
the anon CVS servers) and it will be available in the next 
nightly build(about 4am EST).

Ben Litchfield</text>
			</item>
			<item>
				<date>1124244744</date>
				<sender>ejevans</sender>
				<text>Logged In: YES 
user_id=1330422

Sorry, forgot to login. Submitted by ejevans</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>145909</id>
				<name>zlib_error_01.pdf</name>
				<description>File that causes error on text extraction</description>
				<filesize>43776</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1124244196</adddate>
				<submitted_by>100</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1124248011</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1124248011</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1124248011</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>145909: zlib_error_01.pdf</old_value>
				<date>1124244199</date>
				<by>nobody</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1274245">
		<submitted_by>cannonbeach</submitted_by>
		<submitted_date>2005-08-26 12:05</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Invalid</resolution>
		<summary>No output from PDFTextStripper</summary>
		<detail>I'm using ExtractText to get a look at the text in a
simple 1 page pdf document, which I've attached. I'm
not getting any text out at all. In flushText(), I put
in a println statement like this:

List textList = (List)charactersByArticle.get( i );
System.out.println("list size is " + textList.size());

textList.size() is 0, so that's why I don't get any text. 

It looks to me as if the text is in several content
streams, which are listed in "/Contents" as an array of
objects which reference all the streams on the page.
Perhaps these streams are not being read and brought in
properly. Also, there is a FlateDecode filter on most
if not all of the streams.

Thanks,

David
cannonbeach</detail>
		<follow_ups>
			<item>
				<date>1125364950</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

no longer an issue.

See
https://sourceforge.net/forum/message.php?msg_id=3316905
Ben
</text>
			</item>
			<item>
				<date>1125339440</date>
				<sender>cannonbeach</sender>
				<text>Logged In: YES 
user_id=1334063

Thanks for looking at this, Ben. I'm using the original version 
of ExtractText, so maybe my install is the problem. I'll re-
install and give it a try.

It's great to know that your version of ExtractText works fine.

~David

</text>
			</item>
			<item>
				<date>1125174247</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

when I run "java org.pdfbox.ExtractText priceList.pdf" I get a 
text file called priceList.txt which is nearly identical to the 
text extracted from Acrobot.  So this seems to work fine for 
me and I would be willing to be that it works fine in older 
versions as well.

Did you modify ExtractText?  If so please post your code.

Ben Litchfield</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>147113</id>
				<name>priceList.pdf</name>
				<description>1 page PDF with lots of text</description>
				<filesize>80741</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1125083158</adddate>
				<submitted_by>1334063</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1125364950</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1125364950</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1125364950</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>147113: priceList.pdf</old_value>
				<date>1125083161</date>
				<by>cannonbeach</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1276623">
		<submitted_by>imario</submitted_by>
		<submitted_date>2005-08-30 06:41</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>NullPointerException in PageDrawer:241 when extractin images</summary>
		<detail>please find on ftp.pdfbox.org a file called
"brother_scan_cover.pdf".

This document is scanned using a brother
printer/scanner and mailed using its direct mail
capability - so no other software is involved.

I try to extract the image in this document using:

PDDocument document = PDDocument.load("images/image.pdf");
List pages = document.getDocumentCatalog().getAllPages();
PDPage page = (PDPage) pages.get(0);
BufferedImage image = page.convertToImage();
document.close();

It fails with an NullPointerException in PageDrawer:241.

After some debugging it turns out that the data PDFBox
find is something like 5 bytes to early and thus
ImageIO cant create the JPG.

I saved the jpg-stream to an extra file and removed the
first line, then it worked (nearly) there are still 350
extra bytes at the and but my image reader is able to
drop them.

It would be nice if you could have a look at it.

Thanks!
Mario
</detail>
		<follow_ups>
			<item>
				<date>1126231524</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

The fix looks good to me, this is in CVS now.

Ben</text>
			</item>
			<item>
				<date>1125410956</date>
				<sender>imario</sender>
				<text>Logged In: YES 
user_id=497285

I found my problem and it doesnt make me happy.

After adding the following in BaseParser after line 290 it works

290: int whitespace = pdfSource.read();
291: while (whitespace == 0x20)
292: {
293:     whitespace = pdfSource.read();
294: }

the "stream" identifier is followed by some "whitespaces".
So it looks like the brother scanner isnt fully pdf
compliant here.

Any chance to get the above code (or simmilar) into the main
code anyway?</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1126231524</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1126231524</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1126231524</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1301018">
		<submitted_by>karloie</submitted_by>
		<submitted_date>2005-09-23 06:02</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>problems with generated pdf</summary>
		<detail>I have created a set of pdf with xsl:fo and want to process them with 
jpedal to extract the text, however none of the generated pdf´s can 
be read with jpedal, these are generated with AntennaHouse XSL:
FO.  
 
Example file:  
 
http://www.ibsen.net/asset/BrFU.pdf  
 
Gives this exception if i try to extract text: Other documents not 
generated by XSL:FO seems to work perfectly. 
 
java.io.IOException: expected='/' actual='1'-49 
org.pdfbox.io.PushBackInputStream@f47ae8 
at 
org.pdfbox.pdfparser.BaseParser.parseCOSName(BaseParser.java:
774) 
at 
org.pdfbox.pdfparser.BaseParser.parseCOSDictionary(BaseParser.ja
va:217) 
at 
org.pdfbox.pdfparser.PDFStreamParser.parseNextToken(PDFStream
Parser.java:167) 
at 
org.pdfbox.pdfparser.PDFStreamParser.parse(PDFStreamParser.jav
a:110) 
at org.pdfbox.cmapparser.CMapParser.parse(CMapParser.java:99) 
at org.pdfbox.pdmodel.font.PDFont.parseCmap(PDFont.java:549) 
at org.pdfbox.pdmodel.font.PDFont.encode(PDFont.java:372) 
at 
org.pdfbox.util.PDFStreamEngine.showString(PDFStreamEngine.jav
a:332) 
at org.pdfbox.util.operator.ShowText.process(ShowText.java:66) 
at 
org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngi
ne.java:494) 
at 
org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEn
gine.java:207) 
at 
org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine
.java:160) 
at 
org.pdfbox.util.PDFTextStripper.processPage(PDFTextStripper.java:
355) 
at 
org.pdfbox.util.PDFTextStripperByArea.extractRegions(PDFTextStrip
perByArea.java:127) 
at no.gan.ibsen.xml.PDFIndexer.process(PDFIndexer.java:74) 
at no.gan.ibsen.xml.PDFIndexer.main(PDFIndexer.java:36) 
 
In advance thanks!  
 
Karl Øie </detail>
		<follow_ups>
			<item>
				<date>1127684066</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

It appears that AntennaHouse is writing an invalid CMAP 
stream in the PDF document.

I have added some protection in PDFBox to allow it to parse 
invalid streams and continue.  This is in CVS, please give 
tonights nightly build a try.

Thanks,
Ben</text>
			</item>
			<item>
				<date>1127480633</date>
				<sender>karloie</sender>
				<text>Logged In: YES 
user_id=1350506

The generated PDF file is to large to attach here, this is the url: http://
www.ibsen.net/asset/BrFU.pdf </text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1127684066</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1127684066</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1127684066</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1324846">
		<submitted_by>loppermann</submitted_by>
		<submitted_date>2005-10-12 05:54</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>appending text to PDPageContentStream messes up fonts</summary>
		<detail>When I use PDPageContentStream to append some message
to a page that uses an embedded font, the font seems to
be replaced by the font I used for the message. Since
the embedded font used a custom encoding, the page
becomes unreadable.

Test code attached. I will attach input and output PDFs
from the test.</detail>
		<follow_ups>
			<item>
				<date>1133319026</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed the setFont to generate a unique key when adding to 
the map.  Give the nightly build a try.

Ben</text>
			</item>
			<item>
				<date>1129190402</date>
				<sender>loppermann</sender>
				<text>Logged In: YES 
user_id=1359988

is that the intended behaviour?</text>
			</item>
			<item>
				<date>1129139539</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

This is because fonts and images referenced within content
streams have entries in the resources dictionaries. When
appending content the editor might reuse a font (or image)
entry by mistake so the original font gets replaced by the
one you are now using.</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>152215</id>
				<name>Main.java</name>
				<description>test case source</description>
				<filesize>1766</filesize>
				<filetype>application/octet-stream</filetype>
				<adddate>1129121697</adddate>
				<submitted_by>1359988</submitted_by>
			</file>
			<file>
				<id>152216</id>
				<name>texttest.pdf</name>
				<description>input for testcase (with embedded recoded font)</description>
				<filesize>21359</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1129121751</adddate>
				<submitted_by>1359988</submitted_by>
			</file>
			<file>
				<id>152217</id>
				<name>textresult.pdf</name>
				<description>test result with unreadable text</description>
				<filesize>3883</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1129121816</adddate>
				<submitted_by>1359988</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1133319027</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1133319026</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1133319024</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Deleted</field>
				<old_value>152235: </old_value>
				<date>1129190402</date>
				<by>loppermann</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>152235: textresult.pdf</old_value>
				<date>1129129273</date>
				<by>loppermann</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>152217: textresult.pdf</old_value>
				<date>1129121822</date>
				<by>loppermann</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>152216: texttest.pdf</old_value>
				<date>1129121752</date>
				<by>loppermann</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>152215: Main.java</old_value>
				<date>1129121699</date>
				<by>loppermann</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1391952">
		<submitted_by>hener</submitted_by>
		<submitted_date>2005-12-28 05:08</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Problem extracting embedded attachments</summary>
		<detail>I cannot extract (read back) embedded attachments in 
PDF files created with PDFBox.

The problem seems to be an issue in the method 
PDEmbeddedFilesNameTreeNode.convertCOSToPD(). By 
inspecting the code, I suspect that there is 
something wrong with the precondition of the if-
statement in this method (the dereferencing is too 
agressive). Just commenting out this if-statement 
takes care of my problem and makes it possible to 
extract the embedded files created with PDFBox.

Unfortunately, I do not know enough PDF to be sure of 
what go in the precondition of the if-statement. It 
should probably check the existense of several 
alternative dictionary entries.
</detail>
		<follow_ups>
			<item>
				<date>1139779859</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Alright, got it this time.  Looks like it might have been a 
copy/paste error from the Destination named tree, which 
does use the D entry.

This is in CVS now, give the nightly build a try.

Ben</text>
			</item>
			<item>
				<date>1139178839</date>
				<sender>hener</sender>
				<text>Logged In: YES 
user_id=159923

This works for me too. The problem is when you start doing 
something with the PDComplexFileSpecification instances. 
For example, if you continue with:

Collection file_specs = files.values();
  for (Iterator i = file_specs.iterator(); i.hasNext(); ) {
    PDComplexFileSpecification fs = 
(PDComplexFileSpecification) i.next();
    System.out.println("Found file = " + fs.getFile());
  }
}
</text>
			</item>
			<item>
				<date>1139088200</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I ran the EmbeddedFiles example that comes with PDFBox and 
then ran the below code on the resulting file and it worked 
for me.  Can you attach/upload the PDF that has this 
problem.

ftp.pdfbox.org

Ben


doc = PDDocument.load( "embedded.pdf" );
PDDocumentCatalog cat = doc.getDocumentCatalog();
PDDocumentNameDictionary names = cat.getNames();
PDEmbeddedFilesNameTreeNode filesNode = 
names.getEmbeddedFiles();
Map files = filesNode.getNames();
System.out.println( "files=" + files );</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1139779859</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1139779859</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1139779859</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1385506">
		<submitted_by>papparuti</submitted_by>
		<submitted_date>2005-12-19 13:04</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Unknown xobject type</summary>
		<detail>When I try to print a PDF using org.pdfbox.PrintPDF I
get the following error:

Unknown xobject type:
org.pdfbox.pdmodel.graphics.xobject.PDXObjectForm@cb6009
Unknown xobject type:
org.pdfbox.pdmodel.graphics.xobject.PDXObjectForm@fb56b1

The PDF file is a 1-page document, generated by iText.
This is a prototype of my usual PDF files.

I get the same error both with PDFBOX 0.7.2 and 0.7.3
20051218

I tried also with other PDF files: in some cases a part
of the document is printed, in other cases I get an
empty sheet.

OS: XP SP2
JRE: 1.5.0_03

Thanks
Paolo</detail>
		<follow_ups>
			<item>
				<date>1139794490</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Paolo,

The "Unknown xobject type" error is fixed.  Some of the 
lines do not appear.  PDF display is still a work in 
progress right now.

Ben</text>
			</item>
			<item>
				<date>1135109732</date>
				<sender>papparuti</sender>
				<text>Logged In: YES 
user_id=199877

Sorry for the delay, here is a test PDF that reproduces the
error.</text>
			</item>
			<item>
				<date>1135028075</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Please upload/attach an example PDF if possible.

ftp.pdfbox.org

Thanks,
Ben</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>160594</id>
				<name>test.pdf</name>
				<description></description>
				<filesize>9513</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1135109732</adddate>
				<submitted_by>199877</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1139794491</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1139794490</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1139794490</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>160594: test.pdf</old_value>
				<date>1135109733</date>
				<by>papparuti</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1388050">
		<submitted_by>bhatia_jp</submitted_by>
		<submitted_date>2005-12-22 06:24</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Duplicate</resolution>
		<summary>PdfToImage donot work in .NET</summary>
		<detail>Hello,

When I use pdfToImage in .net if get type not 
implemented yet error

Please Help</detail>
		<follow_ups>
			<item>
				<date>1137101776</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Closed, dup of 1388047 </text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1137101776</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1137101776</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1137101776</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1124745">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-02-17 06:27</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>null pointer for japanese text</summary>
		<detail>The ExtractText throws NullPointerException for most of
the japanese files that I have tried to extract. 

java.lang.NullPointerException
	at
org.pdfbox.util.PDFStreamEngine.showString(PDFStreamEngine.java:305)
	at
org.pdfbox.util.operator.ShowText.process(ShowText.java:63)
	at
org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:409)
	at
org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:389)
	at
org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:169)
	at
org.pdfbox.util.PDFTextStripper.processPage(PDFTextStripper.java:305)
	at
org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:238)
	at
org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:212)
	at org.pdfbox.ExtractText.main(ExtractText.java:235)
Exception in thread "main" 

this is thrown because characters cannot be decoded.</detail>
		<follow_ups>
			<item>
				<date>1137899006</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

fixed in CVS, please give the nightly build a try.

Ben</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>120416</id>
				<name>03.pdf</name>
				<description>bug japanese text extraction</description>
				<filesize>16022</filesize>
				<filetype></filetype>
				<adddate>1108650461</adddate>
				<submitted_by>100</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1137899006</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1137899006</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1137899006</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>120416: 03.pdf</old_value>
				<date>1108650461</date>
				<by>nobody</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1181433">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-04-12 05:15</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Chinese Encoding problem</summary>
		<detail>When I try to parse a pdf file (pdfbox-0.7.1,
jre-1.4.2_08,xp-sp2) with chinese strings I get the
following stack trace:

Caused by: java.io.IOException: Unknown encoding for
'ETenms-B5-H'
	at
org.pdfbox.encoding.EncodingManager.getEncoding(EncodingManager.java:83)
	at
org.pdfbox.pdmodel.font.PDFont.getEncoding(PDFont.java:614)
	at org.pdfbox.pdmodel.font.PDFont.encode(PDFont.java:463)
	at
org.pdfbox.util.PDFStreamEngine.showString(PDFStreamEngine.java:327)
	at
org.pdfbox.util.operator.ShowText.process(ShowText.java:63)
	at
org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:487)
	at
org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:467)
	at
org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:202)
	at
org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:156)
	at
org.pdfbox.util.PDFTextStripper.processPage(PDFTextStripper.java:351)
	at
org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:267)
	at
org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:219)
	at
org.pdfbox.util.PDFTextStripper.getText(PDFTextStripper.java:139)
	at
cv.search.handler.types.pdf.PDFBoxPDFHandler.processDocument(PDFBoxPDFHandler.java:108)
	... 9 more</detail>
		<follow_ups>
			<item>
				<date>1137899053</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed in CVS, please give the nightly build a try.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1137899053</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1137899053</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1137899053</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1126838079</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>summary</field>
				<old_value>Encoding problem</old_value>
				<date>1114356632</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1058653">
		<submitted_by>jinfeng_wang</submitted_by>
		<submitted_date>2004-11-02 00:18</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Errors in extract the PDF containing Chinese word.</summary>
		<detail>hi, ben,my friend, i have tried to extract the PDF with 
the pefbox0.6.7 , but there is something  error happens.  
the chinese word can not be extract out correctly. i 
have tried to trace into the source code, and found that 
maybe something wrong in the 
PDFStreamEngine.processOperator().

In the branch of  "operation.equals( "Tj" )", i added the 
following code :
   String str = new String(string.getBytes());           
   System.out.println("str="+str);

the str can be print out correctly. 

i know that it is not correct if the current argument -
"Character code" is just a index to the embedded Fonts 
in the PDF file. is there any API for the Font to know 
whether it is  "embedded"  or not? if can , then i can 
finish the work right now, :-)

i tried to trace into the "showString( string.getBytes
() )", but failed in the last. the return retral of 
the "graphicsState.getTextState().getFont().encode( 
string, i, codeLength )" can not get the correct Chinese 
Character at all.  

I do not know how to fix the problem by myself, would 
you please to help me? I have attached my test PDF file, 
thanks. 

ben, thanks for your work. :-)
</detail>
		<follow_ups>
			<item>
				<date>1137899148</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed in CVS, please give the nightly build a try.

Ben</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>107322</id>
				<name>cn.pdf</name>
				<description>The Chinese PDF File.</description>
				<filesize>13306</filesize>
				<filetype></filetype>
				<adddate>1099383499</adddate>
				<submitted_by>1145721</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1137899148</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1137899148</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1137899148</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>100</old_value>
				<date>1101197728</date>
				<by>jinfeng_wang</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>107322: cn.pdf</old_value>
				<date>1099383499</date>
				<by>jinfeng_wang</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1249607">
		<submitted_by>drzoltan</submitted_by>
		<submitted_date>2005-08-01 07:44</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="520300">parsing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>java.io.IOException: Error: Expected an integer type, actual</summary>
		<detail>There is a bug in your BaseParser.pdf. For some
mystical reasons, PDF writer are allowed to write an
illimited number of "endobj" and the end of an object.

I joined to the bug report a very simple PDF that
contain this particularity.</detail>
		<follow_ups>
			<item>
				<date>1123007171</date>
				<sender>drzoltan</sender>
				<text>Logged In: YES 
user_id=176019

I attached a diff file of the source files modification I
made in order to load my PDF file. Basically I added a class
name org.pdfbox/pdfparser/EndOfObjectException and modified
org.pdfbox.pdfparser.PDFParser</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>144012</id>
				<name>test_file.2.pdf</name>
				<description></description>
				<filesize>18689</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1122907471</adddate>
				<submitted_by>176019</submitted_by>
			</file>
			<file>
				<id>144171</id>
				<name>endobj.diff</name>
				<description>This patch fix the bug on version 0.7.1</description>
				<filesize>17634</filesize>
				<filetype>application/octet-stream</filetype>
				<adddate>1123007171</adddate>
				<submitted_by>176019</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1139091050</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1139091050</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1139091050</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>144171: endobj.diff</old_value>
				<date>1123007171</date>
				<by>drzoltan</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>144012: test_file.2.pdf</old_value>
				<date>1122907471</date>
				<by>drzoltan</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1117546">
		<submitted_by>benlitchfield</submitted_by>
		<submitted_date>2005-02-06 14:40</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Encryption munges with field</summary>
		<detail>When I create the form in Acrobat, then encrypt it with 
the Encrypt utility, then re-open it in acrobat, the 
submit URL becomes unreadable. and after.
I encrypted with the following options:
-canModify false -O password 

See orth_before_encryption.pdf
      orth_after_encryption.pdf

Ben</detail>
		<follow_ups>
			<item>
				<date>1139091485</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Problem with encryption that is now fixed.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1139091485</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1139091485</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1139091485</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1334308">
		<submitted_by>azebchuk</submitted_by>
		<submitted_date>2005-10-21 09:09</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Duplicate</resolution>
		<summary>NPE with some documents:  PDPageNode.java:194</summary>
		<detail>When trying to parse some documents, I'm getting the following 
exception:

java.lang.NullPointerException
	at org.pdfbox.pdmodel.PDPageNode.getAllKids
(PDPageNode.java:194)
	at org.pdfbox.pdmodel.PDPageNode.getAllKids
(PDPageNode.java:182)
	at org.pdfbox.pdmodel.PDDocumentCatalog.getAllPages
(PDDocumentCatalog.java:162)
	at org.pdfbox.util.PDFTextStripper.writeText
(PDFTextStripper.java:220)
	at 
org.pdfbox.searchengine.lucene.LucenePDFDocument.addContent
(LucenePDFDocument.java:278)
	at 
org.pdfbox.searchengine.lucene.LucenePDFDocument.getDocume
nt(LucenePDFDocument.java:148)



On further investigation, it looks like if I I do the following, where 
is the InputStream, It will print out "null".

PDFParser parser = new PDFParser(is);
parser.parse();
COSDocument cosDoc = parser.getDocument();
PDFTextStripper stripper = new PDFTextStripper();
pdDoc = new PDDocument(cosDoc);
System.out.println(pdDoc.getDocumentCatalog().getPages
().getDictionary());</detail>
		<follow_ups>
			<item>
				<date>1139088311</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I believe this is actually a dup of 974661, which is now 
fixed.  Please give the nightly build a try.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1139088311</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1139088311</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1139088311</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1427595">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2006-02-08 06:54</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Works For Me</resolution>
		<summary>StackTrace reading a PDF created by Hylafax</summary>
		<detail>java.lang.NullPointerException
at
org.pdfbox.util.operator.pagedrawer.Invoke.process(Invoke.java:84)
at
org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:494)
at
org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:207)
at
org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:160)
at
org.pdfbox.pdfviewer.PageDrawer.drawPage(PageDrawer.java:97)

When using pdfbox 0.7.2
On both Linux and Windows

see example attached</detail>
		<follow_ups>
			<item>
				<date>1139793819</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

The below command works for me using the nightly build.

java org.pdfbox.PDFReader fax000000004.pdf

Ben</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>166659</id>
				<name>fax000000004.pdf</name>
				<description>Example for causing NullPointerException</description>
				<filesize>11545</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1139410458</adddate>
				<submitted_by>100</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1139793819</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1139793819</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1139793819</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>166659: fax000000004.pdf</old_value>
				<date>1139410459</date>
				<by>nobody</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1434868">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2006-02-19 15:00</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>PDFTextStripper does not envoke writeCharacters in flushText</summary>
		<detail>
PDFTextStripper does not invoke writeCharacters protected method, but 
calls output.write( characterValue ) instead.  This results in the 
PDFText2HTML class method never have its 'writeCharacters' method 
invoked.  

&gt;, &lt;, &amp;, ;, " Characters should be converted to &amp;gt;, &amp;lt;, &amp;amp;, etc but 
never are.

This is a simple fix, just replace line 587 with:

  writeCharacters( characterValue );

Thanks - nice project.

pds@drizzle.com</detail>
		<follow_ups>
			<item>
				<date>1142138683</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

fixed in CVS.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1142138683</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1142138683</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1142138683</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1154583">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2005-03-01 13:32</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="556660">writing</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Out of Date</resolution>
		<summary>null pointer when merging pdf</summary>
		<detail>I am getting null pointer exception when merge more 
than 50 pdf files. 
This is what I do: I connect to database to get BLOBS 
which contain pdf files and merge those datastreams 
and write final file using COSWriter class. 
This is the code where problem comes in
while (objectsToWrite.size() &gt; 0)
{
COSBase nextObject = (COSBase) 
objectsToWrite.remove(0);
doWriteObject(nextObject);
}
</detail>
		<follow_ups>
			<item>
				<date>1142138816</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Unable to reproduce without an example.

Ben</text>
			</item>
			<item>
				<date>1110854426</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Do you have a test case that you can send me for this 
scenario.  Please upload here or to ftp site ftp.pdfbox.org

Thanks,
Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1142138816</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1142138816</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1142138816</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1434325">
		<submitted_by>sf1263</submitted_by>
		<submitted_date>2006-02-18 14:05</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>VB.NET PDDocument showing no pages loaded.</summary>
		<detail>I'm trying to do a pretty straightforward operation.  
I am creating a PDDocument and attempting to load a 
PDF file located in the same directory as the ASP.NET 
page I am writing.  I receive no error messages, but 
the resulting output file is empty.

I used the getNumberOfPages method to see if the 
document was loading.  I get a value of 0 for the 
integer variable I assigned the return value to.

I'm using the dll's that came with the 0.7.2 build.

I can select the text in the test pdf I am trying to 
load.  I can also convert the PDF to text using Adobe 
Reader.  

From other messages included throughout PDFBox.org, I 
think I have attempted to load the PDF into the 
PDDocument object correctly.

Why am I returning 0 pages. More importantly, why 
won't the text extract to my output file?

Any feedback would be appreciated.</detail>
		<existingfiles>
			<file>
				<id>167950</id>
				<name>cbPDFPages.aspx.vb</name>
				<description>Code Behind Page for My test extraction.</description>
				<filesize>1498</filesize>
				<filetype>text/plain</filetype>
				<adddate>1140300345</adddate>
				<submitted_by>1455687</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1140365999</date>
				<by>sf1263</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1140365999</date>
				<by>sf1263</by>
			</item>
			<item>
				<field>assigned_to</field>
				<old_value>601708</old_value>
				<date>1140365999</date>
				<by>sf1263</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1140365999</date>
				<by>sf1263</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>167950: cbPDFPages.aspx.vb</old_value>
				<date>1140300345</date>
				<by>sf1263</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1434473">
		<submitted_by>sf1263</submitted_by>
		<submitted_date>2006-02-18 20:57</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>VB.NET PDDocument showing no pages loaded.</summary>
		<detail>I'm trying to do a pretty straightforward operation.  
I am creating a PDDocument and attempting to load a 
PDF file located in the same directory as the ASP.NET 
page I am writing.  I receive no error messages, but 
the resulting output file is empty.

I used the getNumberOfPages method to see if the 
document was loading.  I get a value of 0 for the 
integer variable I assigned the return value to.

I'm using the dll's that came with the 0.7.2 build.

I can select the text in the test pdf I am trying to 
load.  I can also convert the PDF to text using Adobe 
Reader.  

From other messages included throughout PDFBox.org, I 
think I have attempted to load the PDF into the 
PDDocument object correctly.

Why am I returning 0 pages. More importantly, why 
won't the text extract to my output file?

Any feedback would be appreciated.</detail>
		<existingfiles>
			<file>
				<id>167959</id>
				<name>cbPDFPages.aspx.vb</name>
				<description>Code Behind Page for My test extraction.</description>
				<filesize>1621</filesize>
				<filetype>text/plain</filetype>
				<adddate>1140325074</adddate>
				<submitted_by>1455687</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1140366063</date>
				<by>sf1263</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1140366063</date>
				<by>sf1263</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1140366037</date>
				<by>sf1263</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>167959: cbPDFPages.aspx.vb</old_value>
				<date>1140325074</date>
				<by>sf1263</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1442626">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2006-03-03 10:10</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>org/pdfbox/pdmodel/font/PDSimpleFont compiling errors</summary>
		<detail>org/pdfbox/pdmodel/font/PDSimpleFont.java [104:1] 
cannot resolve symbol
symbol  : method getCharacterHeight (java.lang.String)
location: class org.fontbox.afm.FontMetric
            retval = metric.getCharacterHeight( 
characterName.getName() );
    
(no getCharacterHeight() method in the FontBox-0.1.0-
dev.jar library) 
                      
ovivela_ro@freenet.de</detail>
		<follow_ups>
			<item>
				<date>1141678493</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Updated FontBox jar file.</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1141678493</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1141678493</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1141678493</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1451164">
		<submitted_by>thaberkern</submitted_by>
		<submitted_date>2006-03-16 02:49</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="775780">PDModel.AcroForm</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Problems filling combo and radio form fields</summary>
		<detail>Hello all, 
 
i'm having problems filling the fields of a pdf form.
I'm, using PDFBox 0.7.2 to do so and using code i
extracted from the sample codes. 
 
PDDocumentCatalog docCatalog =
pdfDocument.getDocumentCatalog(); 
PDAcroForm acroForm = docCatalog.getAcroForm(); 
 
try 
{ 
PDField field = acroForm.getField( name ); 
if( field != null ) 
{ 
field.setValue(value); 
} 
else 
{ 
System.err.println( "No field found with name:" + name ); 
} 
} 
catch (Exception a) 
{ 
System.out.println(a.getMessage()); 
} 
 
That works for text fields and some radio buttons. But
most of the radio buttons arn't filled at all and for
Comboboxes i'm running in problems every time. The
field.setValue(value) command never comes back. Its
running and running. 
 
</detail>
		<follow_ups>
			<item>
				<date>1143765762</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Fixed in CVS.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1143765762</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1143765762</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1143765762</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1445691">
		<submitted_by>mariano_co</submitted_by>
		<submitted_date>2006-03-08 06:44</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>Error when I load a PDF document</summary>
		<detail>The follow code:
document = PDDocument.load( pdfFile ); 

give me the error output:

Exception in thread "main" java.io.IOException: 
Error: Expected an integer type, actual='/A' 
at org.pdfbox.pdfparser.BaseParser.readInt
(BaseParser.java:1335) 
at org.pdfbox.pdfparser.PDFParser.parseObject
(PDFParser.java:415) 
at org.pdfbox.pdfparser.PDFParser.parse
(PDFParser.java:176) 
at org.pdfbox.pdmodel.PDDocument.load
(PDDocument.java:578) 
at org.pdfbox.pdmodel.PDDocument.load
(PDDocument.java:549) 

The file's size is 446K and I don't succeed to attach 
it.</detail>
		<follow_ups>
			<item>
				<date>1152552824</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Test as http</text>
			</item>
			<item>
				<date>1150824826</date>
				<sender>nobody</sender>
				<text>Logged In: NO 

Test.</text>
			</item>
			<item>
				<date>1142563436</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

fixed in CVS.

Ben</text>
			</item>
			<item>
				<date>1142330650</date>
				<sender>mariano_co</sender>
				<text>Logged In: YES 
user_id=1465610

I upload the example. Its name is example.pdf

Thank you</text>
			</item>
			<item>
				<date>1142272264</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

This is a test message.</text>
			</item>
			<item>
				<date>1142138054</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

please upload the example to ftp.pdfbox.org</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1142563438</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1142563436</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1142563436</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1522007">
		<submitted_by>davidin</submitted_by>
		<submitted_date>2006-07-13 12:13</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>Error converting date!! Important</summary>
		<detail>PDFBox give error converting date like  
 
d/mm/aaaa instead of dd/mm/aaaa. 
 
So if itsn't specified 05/12/2005 but the date is  
5/12/2005 It gives error!! 
 
Anyone knows this error? I use the version PDFBox 0.7.3
Dev 20060629. 
 
 
--------------------------------------------------------------

java.io.IOException: Error converting date:5/12/2005
15:57:16 
at
org.pdfbox.util.DateConverter.toCalendar(DateConverter.java:245)

at
org.pdfbox.util.DateConverter.toCalendar(DateConverter.java:134)
</detail>
		<follow_ups>
			<item>
				<date>1154392784</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

fixed in CVS.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1154392784</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1154392784</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1499521">
		<submitted_by>cworley420</submitted_by>
		<submitted_date>2006-06-02 06:18</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>NPE convertToMultiLine</summary>
		<detail>
The following exception occurs if you set the value of
the field to some multiline text that contains and
empty line.  For example   "Hello\n\nWorld!"



Caused by: java.lang.NullPointerException
	at
org.pdfbox.pdmodel.interactive.form.PDAppearance.convertToMultiLine(PDAppearance.java:460)
	at
org.pdfbox.pdmodel.interactive.form.PDAppearance.setAppearanceValue(PDAppearance.java:228)
	at
org.pdfbox.pdmodel.interactive.form.PDVariableText.setValue(PDVariableText.java:145)
	at
com.remitdata.ondemand.form.FormPopulator.populateFields(FormPopulator.java:189)
	at
com.remitdata.ondemand.form.FormPopulator.run(FormPopulator.java:235)</detail>
		<follow_ups>
			<item>
				<date>1154392942</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

now fixed in CVS.

Ben</text>
			</item>
			<item>
				<date>1152243914</date>
				<sender>victor73</sender>
				<text>Logged In: YES 
user_id=1422395

dhirenjoshi,

The fix is already noted from 2006-06-05 if you read further
down.

</text>
			</item>
			<item>
				<date>1152219218</date>
				<sender>dhirenjoshi</sender>
				<text>Logged In: YES 
user_id=1551154

I was able to fix this Bug.
I dont really know how to send the update to you Folks who 
own the code.
I had the source code and I started debugging what the 
error was.
It seems to be a very minor issue and I fixed it in the 
code.
In convertToMultiLine line 460 , change value to line and 
it will work else I can check in the fix for you only I 
dont know how to do it .
Thanks
Dhiren
</text>
			</item>
			<item>
				<date>1152216738</date>
				<sender>dhirenjoshi</sender>
				<text>Logged In: YES 
user_id=1551154

I get this exception . 
field 5 COSString{} 
java.lang.NullPointerException 
at 
org.pdfbox.pdmodel.interactive.form.PDAppearance.convertToMu
ltiLine(PDAppearance.java:460) 
at 
org.pdfbox.pdmodel.interactive.form.PDAppearance.setAppearan
ceValue(PDAppearance.java:228) 
at 
org.pdfbox.pdmodel.interactive.form.PDVariableText.setValue
(PDVariableText.java:145) 
at PdfTest.openDocument(PdfTest.java:50) 
at PdfTest.main(PdfTest.java:84) 
 
When i try to run this piece of code.  
 
&lt;&lt; 
StringBuffer value= new StringBuffer("10/10/2006 30455 some 
service decription $200"); 
value.append("\n"); 
value.append("10/10/2006 30455 some service decription 
$200"); 
field = (PDTextbox)form.getField( "5" ); 
field.setMultiline(true); 
System.out.println("field 5 "+field); 
field.setValue(value.toString()); 
 
&gt;&gt; 
 
 
If I comment out the part value.append("\n"); 
It works fine.  
</text>
			</item>
			<item>
				<date>1149546220</date>
				<sender>victor73</sender>
				<text>Logged In: YES 
user_id=1422395

I was getting this exception as well but was able to fix it
by slightly altering line 460 of PDAppearance.java from:

result.append(value.substring(lastIdx,currIdx));

to

result.append(line.substring(lastIdx,currIdx));
</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1154392942</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1154392942</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1492555">
		<submitted_by>savic071</submitted_by>
		<submitted_date>2006-05-21 10:16</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="775780">PDModel.AcroForm</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>PDChoiceField dead loop</summary>
		<detail>I think there is a bug in PDChoiceField.java

---------
...
 else
 {
 for( int i=0; i&lt;options.size() &amp;&amp; indexSelected == -1;
     
      i++ )
 {
    COSString value = (COSString)options.get( i );
   if( optionValue.equals( value.getString() ) )
   {
     setValue( optionValue ); //this is a dead loop
     indexSelected = i;
   }
 }
}
...
----------
Right line should be:
 super.setValue(optionValue);

Using PDFBox 0.7.2
</detail>
		<follow_ups>
			<item>
				<date>1154392998</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

now fixed in CVS.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1154392998</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1154392998</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1529710">
		<submitted_by>ojaquemet</submitted_by>
		<submitted_date>2006-07-27 07:01</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>"Unknown encoding for '90ms-RKSJ-h'" during text extraction</summary>
		<detail>We encounter the following error with a PDF file :

java.io.IOException: Unknown encoding for '90msp-RKSJ-H'
	at
org.pdfbox.encoding.EncodingManager.getEncoding(EncodingManager.java:83)
	at
org.pdfbox.pdmodel.font.PDFont.getEncoding(PDFont.java:627)
	at org.pdfbox.pdmodel.font.PDFont.encode(PDFont.java:476)
	at
org.pdfbox.util.PDFStreamEngine.showString(PDFStreamEngine.java:332)
	at
org.pdfbox.util.operator.ShowText.process(ShowText.java:66)
	at
org.pdfbox.util.PDFStreamEngine.processOperator(PDFStreamEngine.java:494)
	at
org.pdfbox.util.PDFStreamEngine.processSubStream(PDFStreamEngine.java:207)
	at
org.pdfbox.util.PDFStreamEngine.processStream(PDFStreamEngine.java:160)
	at
org.pdfbox.util.PDFTextStripper.processPage(PDFTextStripper.java:355)
	at
org.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:268)
	at
org.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:220)
	at .....

When opening the PDF in acrobat, I was requested to
install a japanese font update. Though I could not see
any special characters appart from french/english.
I cannot attach the PDF file as I do not have the
authorization from our client YET.

I saw similar bugs, "Unknown encoding for 'GBK-EUC-H'",
but they were all closed...</detail>
		<follow_ups>
			<item>
				<date>1154418595</date>
				<sender>ojaquemet</sender>
				<text>Logged In: YES 
user_id=1294973

Though it required the new FontBox library, it did fix the
problem.
Thanks</text>
			</item>
			<item>
				<date>1154393630</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

I believe this has been fixed in CVS but not yet released.  
Please give the nightly build a try and let me know if it 
is still an issue.

http://www.pdfbox.org/dist

Ben</text>
			</item>
			<item>
				<date>1154015742</date>
				<sender>ojaquemet</sender>
				<text>Logged In: YES 
user_id=1294973

I've just had the authorization to upload the PDF, here it is.

Oh and by the way, I completely forgot to specify which
version I was using, it's the latest version,
PDFBox-0.7.2-log4j.jar.</text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>186473</id>
				<name>PDF-unknown-encoding.pdf</name>
				<description>PDF triggering an "Unknown encoding for '90ms-RKSJ-h'" </description>
				<filesize>88530</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1154015742</adddate>
				<submitted_by>1294973</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1154393630</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1154393630</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>186473: PDF-unknown-encoding.pdf</old_value>
				<date>1154015742</date>
				<by>ojaquemet</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1533832">
		<submitted_by>nobody</submitted_by>
		<submitted_date>2006-08-03 05:49</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="519373">text extraction</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>None</resolution>
		<summary>PDFTextStripper bug</summary>
		<detail>PDFTextStripper didn't work with the newest PDFBox
(PDFBox-0.7.3-dev-20060802):

Exception in thread "main" 
java.lang.NoClassDefFoundError: 
org/fontbox/cmap/CMapParser
        at org.pdfbox.pdmodel.font.PDFont.parseCmap
(PDFont.java:531)
        at org.pdfbox.pdmodel.font.PDFont.encode
(PDFont.java:384)
        at org.pdfbox.util.PDFStreamEngine.showString
(PDFStreamEngine.java:314)
        at 
org.pdfbox.util.operator.ShowTextGlyph.process
(ShowTextGlyph.java:80)
        at 
org.pdfbox.util.PDFStreamEngine.processOperator
(PDFStreamEngine.java:441)
        at 
org.pdfbox.util.PDFStreamEngine.processSubStream
(PDFStreamEngine.java:204)
        at 
org.pdfbox.util.PDFStreamEngine.processStream
(PDFStreamEngine.java:163)
        at org.pdfbox.util.PDFTextStripper.processPage
(PDFTextStripper.java:336)
        at org.pdfbox.util.PDFTextStripper.processPages
(PDFTextStripper.java:259)
        at org.pdfbox.util.PDFTextStripper.writeText
(PDFTextStripper.java:216)
        at PdfReader.main(PdfReader.java:27)</detail>
		<follow_ups>
			<item>
				<date>1154609988</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

you need to add the fontbox jar to your classpath!

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1154609988</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1154609988</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1544118">
		<submitted_by>pinxue</submitted_by>
		<submitted_date>2006-08-21 11:19</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="566875">PDModel</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Ben Litchfield</assigned_to>
		<priority id="5">5</priority>
		<status>Closed</status>
		<resolution>Fixed</resolution>
		<summary>PDFont.getCodeFromArray</summary>
		<detail>PDFont.getCodeFromArray
    protected int getCodeFromArray( byte[] data, int
offset, int length )
    {
        int code = 0;
        for( int i=0; i&lt;length; i++ )
        {
            code &lt;&lt;= 8;
            code = (data[offset+i]+256)%256; // should
be |=
        }
        return code;
    }
</detail>
		<follow_ups>
			<item>
				<date>1156209822</date>
				<sender>benlitchfield</sender>
				<text>Logged In: YES 
user_id=601708

Sometimes I wonder how a bug like that can exist for so 
long, anyway it is updated in CVS.

Ben</text>
			</item>
		</follow_ups>
		<change_log>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1156209822</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1156209822</date>
				<by>benlitchfield</by>
			</item>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1156209822</date>
				<by>benlitchfield</by>
			</item>
		</change_log>
	</artifact>
	<artifact id="1843649">
		<submitted_by>jalanthomas</submitted_by>
		<submitted_date>2007-12-03 13:20</submitted_date>
		<artifact_type id="552832">552832</artifact_type>
		<category id="100">None</category>
		<artifact_group id="100"></artifact_group>
		<assigned_to>Nobody/Anonymous</assigned_to>
		<priority id="5">5</priority>
		<status>Deleted</status>
		<resolution>Invalid</resolution>
		<summary>NoClassDefFoundError Exception</summary>
		<detail>When I run the example PrintDocumentMetaData code that comes with PDFBox 0.7.3 on the attached
file, I get the exception below.  Acrobat opened it just fine, with no reported errors.

 Sounds like PDFBox thinks the file is encrypted, but it does not appear to be.  

             Thanks, Alan

 ----jGRASP exec: java org.pdfbox.examples.pdmodel.PrintDocumentMetaData
file.pdf

Exception in thread "main" java.lang.NoClassDefFoundError:
org/bouncycastle/jce/provider/BouncyCastleProvider
 at org.pdfbox.pdmodel.PDDocument.openProtection(PDDocument.java:905)
 at org.pdfbox.pdmodel.PDDocument.decrypt(PDDocument.java:489)
 at
org.pdfbox.examples.pdmodel.PrintDocumentMetaData.main(PrintDocumentMetaData
.java:86)

 ----jGRASP wedge2: exit code for process is 1.
 ----jGRASP: operation complete.
</detail>
		<follow_ups>
			<item>
				<date>1196734497</date>
				<sender>jalanthomas</sender>
				<text>Logged In: YES 
user_id=1806325
Originator: YES

  I did not have bcmail-*.jar and bcprov-*.jar in the classpath.  It works.  </text>
			</item>
			<item>
				<date>1196731039</date>
				<sender>jalanthomas</sender>
				<text>Logged In: YES 
user_id=1806325
Originator: YES

  It turns out that some aspects of this document, including access to content, are password protected.  However, opening for reading is not.  </text>
			</item>
			<item>
				<date>1196730991</date>
				<sender>jalanthomas</sender>
				<text>Logged In: YES 
user_id=1806325
Originator: YES

  It turns out that some aspects of this document, including access to content, are password protected.  However, opening for reading is not.  </text>
			</item>
		</follow_ups>
		<existingfiles>
			<file>
				<id>257105</id>
				<name>file.pdf</name>
				<description></description>
				<filesize>228535</filesize>
				<filetype>application/pdf</filetype>
				<adddate>1196716816</adddate>
				<submitted_by>1806325</submitted_by>
			</file>
		</existingfiles>
		<change_log>
			<item>
				<field>close_date</field>
				<old_value>0</old_value>
				<date>1196734497</date>
				<by>jalanthomas</by>
			</item>
			<item>
				<field>priority</field>
				<old_value>9</old_value>
				<date>1196734497</date>
				<by>jalanthomas</by>
			</item>
			<item>
				<field>resolution_id</field>
				<old_value>100</old_value>
				<date>1196734497</date>
				<by>jalanthomas</by>
			</item>
			<item>
				<field>status_id</field>
				<old_value>1</old_value>
				<date>1196734497</date>
				<by>jalanthomas</by>
			</item>
			<item>
				<field>priority</field>
				<old_value>5</old_value>
				<date>1196716875</date>
				<by>jalanthomas</by>
			</item>
			<item>
				<field>File Added</field>
				<old_value>257105: file.pdf</old_value>
				<date>1196716818</date>
				<by>jalanthomas</by>
			</item>
		</change_log>
	</artifact>
</tracker>

 	  	 
